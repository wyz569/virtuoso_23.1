
<html><head><title>CurvyCore Building Blocks</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sumehta" />
<meta name="CreateDate" content="2023-08-04" />
<meta name="CreateTime" content="1691179144" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso Photonics Solution." />
<meta name="DocTitle" content="Virtuoso Photonics Solution Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="CurvyCore Building Blocks" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="phouser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-08-04" />
<meta name="ModifiedTime" content="1691179144" />
<meta name="NextFile" content="appA.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="epda.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Photonics Solution Guide -- CurvyCore Building Blocks" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="phouserIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="phouserTOC.html">Contents</a></li><li><a class="prev" href="epda.html" title="Using EPDA in the Virtuoso Environment">Using EPDA in the Virtuoso Env ...</a></li><li style="float: right;"><a class="viewPrint" href="phouser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="appA.html" title="Photonics Environment Variables">Photonics Environment Variable ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Photonics Solution Guide<br />Product Version IC23.1, August 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>3
<a id="pgfId-1088630"></a></h1>
<h1>
<a id="pgfId-1088632"></a><hr />
CurvyCore Building Blocks<hr />
</h1>

<p>
<a id="pgfId-1241714"></a>The CurvyCore data model is made up of three layers, the base layer, which has a mathematical core, the layer-purpose pair (LPP) aware layer, and the physical layer.</p>

<p>
<a id="pgfId-1225448"></a></p>
<div class="webflare-div-image">
<img width="672" height="472" src="images/curvycore-2.gif" /></div>

<p>
<a id="pgfId-1215271"></a>The base layer comprises three mathematical objects, <code>ccCurve</code>, <code>ccFacet</code>, and <code>ccPolyCurve</code>.</p>
<p>
<a id="pgfId-1232836"></a>Objects in LPP layer are aware of the relevant grid, but are not limited in the number of vertexes. As a set of objects, they are ccFigs. When a ccFig is discretized (or when geometry for ccFig is generated), facets are subjected to a special treatment to reflect the fact that they represent interface vertexes between elements. Origin of each facet is automatically snapped to the closest point on the grid while angle of the facet is kept unchanged.</p>
<p>
<a id="pgfId-1237971"></a>The physical layer or the OpenAccess level represents the manufactured polygons. These physical shapes have limitations in the number of vertexes. When a physical representation is generated for a ccFig, the algorithm takes into account the vertex number limitation and slices the figures appropriately, resulting in one (ccFig) to many (oaFigs) relationship.&#160;&#160;&#160;&#160;</p>
<p>
<a id="pgfId-1215399"></a>There is a collection of <code>pho</code> and <code>cc</code> SKILL functions, above the base <code>cc</code> SKILL functions that provide higher-level functionality, such as a full-feature straight generator, including the interface for tapering, controlling modal property computation.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1233388"></a>As a PDK developer, you can either your elements build from the ground-up, getting full control and full visibility or quickly putting together a PDK using predefined elements. You can also use or refer the available generic photonics PDK <code>gopdk</code>. </div>
<p>
<a id="pgfId-1215409"></a>Photonics also has <code>db</code>-level SKILL functions that can be used to deal with the signal type for optical connection and the optical port definition.For more information regarding the <code>db</code>, <code>cc</code> and <code>pho</code> SKILL functions related to Photonics, see <h-hot><a actuate="user" class="URL" href="../skdfref/photonic.html" show="replace" xml:link="simple">Photonics Functions</a></h-hot> in <em>Virtuoso Design Environment SKILL Reference.</em></p>
<p>
<a id="pgfId-1225211"></a>This chapter discusses the following:</p>
<ul><li>
<a id="pgfId-1241679"></a><a href="curvycore.html#74383">CurvyCore Mathematical Objects</a><ul><li>
<a id="pgfId-1225283"></a><a href="curvycore.html#73417">Curves</a></li><li>
<a id="pgfId-1225350"></a><a href="curvycore.html#72022">Paths and Facets</a></li><li>
<a id="pgfId-1225357"></a><a href="curvycore.html#14152">Surfaces and Facets</a></li></ul></li><li>
<a id="pgfId-1225267"></a><a href="curvycore.html#39304">CurvyCore Pcells</a></li><li>
<a id="pgfId-1225277"></a><a href="curvycore.html#68249">Waveguide Connectors</a><ul><li>
<a id="pgfId-1225289"></a><a href="curvycore.html#12134">Straight Connectors</a></li><li>
<a id="pgfId-1225299"></a><a href="curvycore.html#61918">Bend Connectors</a></li><li>
<a id="pgfId-1225306"></a><a href="curvycore.html#47454">Curve Connectors</a></li><li>
<a id="pgfId-1225313"></a><a href="curvycore.html#59571">Waypoint Connectors</a></li></ul></li></ul>










<h2>
<a id="pgfId-1215326"></a><a id="74383"></a>CurvyCore Mathematical Objects </h2>

<p>
<a id="pgfId-1215550"></a>This section discusses the mathematical base layer of the CurvyCore engine. The curvilinear shapes are represented in the curvilinear mathematical domain as parameterized curves. In mathematics, these curves are described by their Cartesian equation as:</p>

<a id="pgfId-1215824"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
f(x,y) = c</pre>

<p>
<a id="pgfId-1215840"></a>Here <code>x</code> and <code>y</code> are Cartesian coordinates and <code>c</code> is a constant. </p>
<p>
<a id="pgfId-1215922"></a>A parameterized representation of a curve is the representation used in the mathematical domain of the CurvyCore engine. This means that the first step to create a curvy shape is to find its parametric representation.</p>
<p>
<a id="pgfId-1216394"></a>According to implicit function theorem, if:</p>

<p>
<a id="pgfId-1234229"></a></p>
<div class="webflare-div-image">
<img width="668" height="55" src="images/curvycore-3.gif" /></div>

<p>
<a id="pgfId-1216476"></a>Then, a curve can be described around that point as <code>y=f(x)</code>.</p>
<p>
<a id="pgfId-1217140"></a>For example, if:</p>

<p>
<a id="pgfId-1234251"></a></p>
<div class="webflare-div-image">
<img width="668" height="90" src="images/curvycore-4.gif" /></div>

<p>
<a id="pgfId-1216664"></a>A curve can also be represented as a path traced by a point. This means that if <code>x</code> and <code>y</code> are Cartesian coordinates describing the position of a point of a curve, the curve is represented as:</p>

<p>
<a id="pgfId-1234268"></a></p>
<div class="webflare-div-image">
<img width="668" height="28" src="images/curvycore-5.gif" /></div>

<p>
<a id="pgfId-1216908"></a>where, <img width="13" height="38" src="images/curvycore-6.gif" />
 specifies the location of the point at time <span class="webflare-courier-new" style="white-space:pre"><em>t</em></span>. The parameterized curve is described as:</p>

<p>
<a id="pgfId-1241301"></a> </p>
<div class="webflare-div-image">
<img width="668" height="107" src="images/curvycore-7.gif" /></div>
<h4><em>
<a id="pgfId-1242013"></a>Related Information</em></h4>

<p>
<a id="pgfId-1242031"></a><a href="../skdfref/photonic_re_ccCreateCurve.html">ccCreateCurve</a></p>
<p>
<a id="pgfId-1242147"></a><code>ccCreatePath</code><a id="../skdfref/photonic.html#ccCreatePath"></a></p>
<p>
<a id="pgfId-1242152"></a><a href="../skdfref/photonic_re_ccCreatePolyCurve.html">ccCreatePolyCurve</a></p>
<p>
<a id="pgfId-1242157"></a><a href="../skdfref/photonic_re_ccCreateSurface.html">ccCreateSurface</a></p>
<p>
<a id="pgfId-1242162"></a><code>ccGenFigs</code><a id="../skdfref/photonic.html#ccGenFigs"></a></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1242206"></a><a href="../skdfref/photonic_re_ccLayerOr.html">ccLayerOr</a></pre>

<p>
<a id="pgfId-1242201"></a><a href="../skdfref/photonic_re_ccLayerAnd.html">ccLayerAnd</a></p>
<p>
<a id="pgfId-1242223"></a><a href="../skdfref/photonic_re_ccSmoothenFig.html">ccSmoothenFig</a></p>

<h3>
<a id="pgfId-1217010"></a><a id="73417"></a>Curves</h3>

<p>
<a id="pgfId-1217227"></a>Curves are one of the primary data structures of a CurvyCore engine. Two main types of curves are ccCurve and ccPolyCurve.</p>

<h4>
<a id="pgfId-1217383"></a><strong>ccCurve</strong></h4>

<p>
<a id="pgfId-1215953"></a>ccCurve is one of the primary data structure of a CurvyCore engine. A ccCurve is a parametrized representation of a curve in a given interval. The following parametric equation is an example of the parametric equation that can be used to create a ccCurve representing a straight segment.</p>

<p>
<a id="pgfId-1234081"></a></p>
<div class="webflare-div-image">
<img width="668" height="154" src="images/curvycore-8.gif" /></div>

<p>
<a id="pgfId-1216054"></a>You can use the <a href="../skdfref/photonic_re_ccCreateCurve.html">ccCreateCurve</a> SKILL function to create a ccCurve object using its parametric representation. It retrieves the string representation of the Cartesian coordinates of the parameterized curve and the begin and end values of the parameter and returns a ccCurve object.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239488"></a>;ccCreateCurve(t_x t_y list(n_begin n_end))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239489"></a>;The following code creates a line segment between (0,0) and (2,4) and then</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239490"></a>;displays the created ccCurve&#39;s attributes</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239491"></a>LineSeg = ccCreateCurve(&quot;2*t&quot; &quot;4*t&quot; 0:1)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239492"></a>cc00xb25fc433</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239493"></a>LineSeg~&gt;??</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239494"></a>(cc00xb25fc433 objType &quot;ccCurve&quot; xExpr &quot;(2*t)&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239495"></a>    yExpr &quot;(4*t)&quot; range</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239496"></a>    (0.0 1.0)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1234787"></a>)</pre>

<p>
<a id="pgfId-1217567"></a>The only parameter that can be used in the parametric representation of a curve is <span class="webflare-courier-new" style="white-space:pre"><em>t</em></span>, other parameters are numerical constants. This means that if you want to create a line segment whose endpoints need to be passed as a parameter, first you need to create the string representation using the numerical parameters and then create the ccCurve object.</p>

<h4>
<a id="pgfId-1217399"></a><strong>ccPolyCurve</strong></h4>

<p>
<a id="pgfId-1217775"></a>ccPolyCurve is a data structure that is used to stitch a sequence of ccCurves to create a more complicated curve. You can create a ccPolyCurve object using the <a href="../skdfref/photonic_re_ccCreatePolyCurve.html">ccCreatePolyCurve</a> SKILL function. </p>
<p>
<a id="pgfId-1218092"></a>To create a ccPolyCurve object from a rectangle shape, you need to consider that a rectangle is represented by line segments connecting its vertexes.</p>

<p>
<a id="pgfId-1234121"></a></p>
<div class="webflare-div-image">
<img width="668" height="222" src="images/curvycore-9.gif" /></div>

<p>
<a id="pgfId-1218047"></a>Here the bounding box of a rectangle, <code>list(a:b c:d)</code>, generates ccCurve objects <code>CC1</code>, <code>CC2</code>, <code>CC3</code>, and <code>CC4</code> representing the edges of the rectangle. You can use the <code>ccCreatePolyCurve</code> SKILL function to join these edges.</p>
<p>
<a id="pgfId-1218136"></a>The <code>ccCreatePolyCurve</code> SKILL function checks if the polyCurve object is a simple closed polyCurve and what is the level of smoothness between the segments while the polyCurve object is being created. For example, when a rectangle is generated from line segments, you might want to check whether it is continuous. <code>G0</code> enforces the continuity check and generates an error if the polyCurve object is not continuous.</p>
<p>
<a id="pgfId-1235287"></a>In the following example, first the <code>CCSCreateLineSegment</code> function is defined to create and return a ccCurve object representing a line segment between two points. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1234939"></a>procedure(CCSCreateLineSegment(point1 point2)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1234841"></a>let((ParameterizedLine XcoordPoint1 YcoordPoint1 XcoordPoint2 YcoordPoint2)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1234842"></a>XcoordPoint1 = xCoord(point1)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1234843"></a>XcoordPoint1 = yCoord(point1)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1234844"></a>XcoordPoint2 = xCoord(point2)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1234845"></a>XcoordPoint2 = yCoord(point2)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1234846"></a>ParameterizedLine.ParamX = lsprintf(&quot;%n + (%n-%n)*t&quot;, XcoordPoint1, XcoordPoint2,XcoordPoint1);X(t)=XcoordPoint1 + (XcoordPoint2-XcoordPoint1)*t</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1234847"></a>ParameterizedLine.ParamY = lsprintf(&quot;%n + (%n-%n)*t&quot;, YcoordPoint1, YcoordPoint2,YcoordPoint1);X(t)=YcoordPoint1 + (YcoordPoint2-YcoordPoint1)*t</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1234848"></a>ccCreateCurve(ParameterizedLine.ParamX ParameterizedLine.ParamY 0:1.)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1234849"></a>);let</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1234850"></a>);procedure </pre>

<p>
<a id="pgfId-1235463"></a>Next, the <code>CCSCreateRectangle</code> function is defined to use <code>CCSCreateLineSegment</code> to create and return a polyCurve object representing a rectangle with positive area as shown below. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239518"></a>procedure(CCSCreateRectangle(bBox)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239519"></a>let((llx lly urx ury CC1 CC2 CC3 CC4)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239520"></a>ury = yCoord(upperRight(bBox))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239521"></a>urx = xCoord(upperRight(bBox))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239522"></a>lly = yCoord(lowerLeft(bBox))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239523"></a>llx = xCoord(lowerLeft(bBox))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239524"></a>CC1 = CCSCreateLineSegment(llx:lly urx:lly)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239525"></a>CC2 = CCSCreateLineSegment(urx:lly urx:ury)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239526"></a>CC3 = CCSCreateLineSegment(urx:ury llx:ury)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239527"></a>CC4 = CCSCreateLineSegment(llx:ury llx:lly)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239528"></a>ccCreatePolyCurve(list(CC1 CC2 CC3 CC4)</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239529"></a>                      ?close t</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239530"></a>                      ?smoothness &#39;G0)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239531"></a>  );let</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1227336"></a>);procedure</pre>

<p>
<a id="pgfId-1220382"></a>The following example shows how to check the <code>ccPolyCurve</code> attributes associated with the created rectangle.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1220386"></a>Rectangle = CCSCreateRectangle(list(0:0 10:10))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1220387"></a>Rectangle~&gt;??</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1220535"></a>;The segment property returns ccCurve segements of the rectangle</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1218216"></a>Rectangle~&gt;segments</pre>

<p>
<a id="pgfId-1220548"></a>When a polyCurve object is created using segmented curves, it is possible to apply a transformation to them. You can use this technique to create rhombus shapes by applying a transformation to a line segment. Rhombus curve segments can be created by generating a masterLine curve and then applying a proper transformation to create <code>CC1</code>, <code>CC2</code>, <code>CC3</code>, and <code>CC4</code> as shown below.</p>

<p>
<a id="pgfId-1234162"></a></p>
<div class="webflare-div-image">
<img width="668" height="403" src="images/curvycore-10.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1218221"></a>Counterclockwise rotation is described by positive sign and clockwise rotation is described by a negative sign.</div>
<p>
<a id="pgfId-1218422"></a>To create pie polyCurve shapes, you first need to create a ccCurve object representing a circular arc. A pie polyCurve is composed of two circular arcs and two line-segments connecting these circular arcs.</p>

<p>
<a id="pgfId-1234177"></a></p>
<div class="webflare-div-image">
<img width="668" height="348" src="images/curvycore-11.gif" /></div>

<p>
<a id="pgfId-998398"></a>It is simpler to represent the above arcs in cylindrical coordinates.</p>

<p>
<a id="pgfId-1234404"></a></p>
<div class="webflare-div-image">
<img width="668" height="77" src="images/curvycore-12.gif" /></div>

<p>
<a id="pgfId-998402"></a>Considering that the parameterized curve should have Cartesian coordinates, you can define a utility function that converts the parametric form from cylindrical to Cartesian. The following function gets a parametric polar coordinates of a curve and returns its Cartesian coordinates.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1239584"></a>procedure(CCSPolartoCartesian(ParameterizedPolar)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239585"></a>let((Radius Theta ParamX ParamY)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239586"></a>Radius = car(ParameterizedPolar)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239587"></a>Theta = cadr(ParameterizedPolar)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239588"></a>ParamX = lsprintf(&quot;%s*cos(%s)&quot; Radius Theta)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239589"></a>ParamY = lsprintf(&quot;%s*cos(%s)&quot; Radius Theta)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239590"></a>list(ParamX ParamY)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239591"></a>);let</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1228551"></a>);procedure</pre>

<p>
<a id="pgfId-1220676"></a>The following example defines the <code>CCSCreateArcSegment</code> function to create an arc. The function uses <code>CCSPolartoCartesian</code> described above to convert polar coordinates to Cartesian coordinates. The example defines two functions <code>CCSCreateArcSegment</code> and <code>CCSCreatePie</code>.</p>
<p>
<a id="pgfId-1220850"></a><code>CCSCreateArcSegment</code> creates a ccCurve object representing an arc. The operands are radius of the circle where <code>ArcLength</code> is <code>0</code>. If the symmetric parameter is not <code>t</code>, the function will create an <code>ArcSegment</code> starting from <code>0</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1228634"></a>procedure(CCSCreate<a id="CCSCreateArcSegment"></a>ArcSegment(Radius ArcLength @key(Symmetric t))</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228635"></a>let((ParameterizedArc ParameterizedPolar)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228636"></a>ParameterizedPolar = list(lsprint(&quot;%n&quot; Radius) lsprintf(&quot;%s&quot; t))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239724"></a>; (R(t) Theta(t)) = (Radius t)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228637"></a>ParameterizedArc.ParamX = car(CCSPolartoCartesian(ParameterizedPolar))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1239739"></a>;(Radius t) --&gt; (X(t), Y(t))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228638"></a>ParameterizedArc.ParamY = cadr(CCSPolartoCartesian(ParameterizedPolar))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228639"></a>  if(Symmetric</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1228640"></a>then</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1228641"></a>ccCreateCurve(ParameterizedArc.ParamX ParameterizedArc.ParamY -ArcLength/2:ArcLength/2)e</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1228642"></a>else</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1228643"></a>ccCreateCurve(ParameterizedArc.ParamX ParameterizedArc.ParamY 0:ArcLength)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228644"></a>  );if</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228645"></a>);let</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1228646"></a>);procedure</pre>

<p>
<a id="pgfId-1220901"></a><code>CCSCreatePie</code> creates a polyCurve object representing a pie shape with positive area.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1228649"></a>procedure(CCSCreatePie(Radius1 ArcLength1 Radius2 ArcLength2)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228650"></a>let((ParameterizedPie ParameterizedArc1 LineSeg1 ParameterizedArc2 LineSeg2)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228651"></a>ParameterizedArc1 = CCSCreateArcSegment(Radius1 -ArcLength1)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228652"></a>ParameterizedArc2 = CCSCreateArcSegment(Radius2 ArcLength2)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228653"></a>LineSeg1 = CCSCreateLineSegment(</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1235819"></a>  Radius1*cos(-ArcLength1/2):Radius1*sin(-ArcLength1/2)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1228654"></a>  Radius2*cos(-ArcLength2/2):Radius2*sin(-ArcLength2/2))</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228655"></a>LineSeg2 = CCSCreateLineSegment(</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1235825"></a>  Radius2*cos(ArcLength1/2):Radius2*sin(ArcLength1/2)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1228656"></a>  Radius1*cos(ArcLength2/2):Radius1*sin(ArcLength2/2))</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228657"></a>ccCreatePolyCurve(</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1239801"></a>list(ParameterizedArc1 LineSeg1 ParameterizedArc2 LineSeg2)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1239674"></a>?close t ?smoothness &#39;G0)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1228658"></a>)let;</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1228659"></a>);procedure</pre>
<h4><em>
<a id="pgfId-1241250"></a>Related Information</em></h4>

<p>
<a id="pgfId-1241212"></a><a href="../skdfref/photonic_re_ccCreateCurve.html">ccCreateCurve</a></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1241353"></a><a href="../skdfref/photonic_re_ccCreatePolyCurve.html">ccCreatePolyCurve</a></pre>
<h3>
<a id="pgfId-1218153"></a><a id="72022"></a>Paths and Facets</h3>

<p>
<a id="pgfId-1216255"></a>A path is a center curve that has parallel inner and outer curves. The center curve is defined as a ccCurve object. You can create a ccPath object using the <code>ccCreatePath</code><a id="../skdfref/photonic.html#ccCreatePath"></a> SKILL function. One of the uses of a ccPath object is to represent a photonics waveguide.</p>
<p>
<a id="pgfId-1221133"></a>Consider that you want to create a <code>90°</code> bend waveguide path with <code>0.5µm</code> width and <code>15µm</code> radius on a layer-purpose pair. The first step is to create the center ccCurve object of the path, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221220"></a><code>BendCenterCurve = CCSCreateArcSegment(15 asin(1))</code></pre>

<p>
<a id="pgfId-1229187"></a>The path needs to be associated with a layer in a technology file, therefore, you need to create a layout cell where the path can be created. </p>
<p>
<a id="pgfId-1233700"></a>To generate a path object in the currently opened Layout Editor window, you can run the following command. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1229208"></a>BendPath = ccCreatePath(geGetEditCellView() list(&quot;waveguide&quot; &quot;drawing&quot;)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1229188"></a>list(list(BendCenterCurve list(0:0 45) 0.5)))</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1235947"></a>;Generate the physical shape of BendPath</pre>

<p>
<a id="pgfId-1221221"></a>ccGenFigs(BendPath)<code></code></p>
<p>
<a id="pgfId-1238499"></a>You should be able to see your <code>90°</code> waveguide bend as shown below. </p>

<p>
<a id="pgfId-1233738"></a></p>
<div class="webflare-div-image">
<img width="668" height="304" src="images/curvycore-13.gif" /></div>

<p>
<a id="pgfId-1235894"></a>To generate physical shapes associated with a CurvyCore mathematical objects such as paths and surfaces, you need to use the <code>ccGenFigs</code><a id="../skdfref/photonic.html#ccGenFigs"></a> SKILL function.</p>
<p>
<a id="pgfId-1238531"></a>Lets now create another ccPath object representing a straight waveguide with width <code>0.5µm</code>. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221421"></a>StraightCenterCurve = CCSCreateLineSegment(0:0 10:0)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221422"></a>StraightPath = ccCreatePath(geGetEditCellView() list(&quot;waveguide&quot; &quot;drawing&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221423"></a>list(list(StraightCenterCurve list(0:0 0) 0.5)))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221424"></a>;Generate the physical shape of the path</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221313"></a>ccGenFigs(StraightPath)<code></code></pre>

<p>
<a id="pgfId-1238568"></a>This example generates a straight path representing a straight photonic waveguide.</p>

<p>
<a id="pgfId-1233758"></a></p>
<div class="webflare-div-image">
<img width="668" height="121" src="images/curvycore-14.gif" /></div>
<h3>
<a id="pgfId-1229397"></a>Attributes of ccPath Objects</h3>

<p>
<a id="pgfId-1229740"></a>A ccPath object consists of segments that are the center ccCurve objects with their associated inner and outer parallel curves. They also consists of two facets, <code>beginFacet</code> and <code>endFacet</code>. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1229873"></a>StraightPath~&gt;??</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221470"></a>(cc:0x33874050 objType &quot;ccPath&quot; cellView db:0x20c7d39a</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1221471"></a>lpp</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1221472"></a>(&quot;waveguide&quot; &quot;drawing&quot;) figs</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1221473"></a>(db:0x20c78a9a) beginPt</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1221474"></a>(0.0 0.0) endPt</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1221475"></a>(10.0 0.0) beginFacet cc@0x68c1d0a6</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1221476"></a>endFacet cc@0x47be58d4 segments</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1221477"></a>((cc@0xb16d5f44</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1221478"></a>   ((0.0 0.0) 0.0) &quot;0.5&quot;</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1221479"></a>)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1221480"></a>) smoothness</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1221481"></a>G1</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221458"></a>)</pre>

<p>
<a id="pgfId-1229740"></a>Facets are essential when ccPath objects need to be joined together at different levels of the hierarchy.</p>
<p>
<a id="pgfId-1218692"></a>A facet is a mathematical object in the CurvyCore engine with following attributes:</p>
<ul><li>
<a id="pgfId-1229823"></a>During physical shape generation, the center-point of a facet is always snapped to the manufacturing grid. This means that if a facet is rotated and the center point is not on the grid then the whole facet will be parallelly shifted to the nearest grid point.</li><li>
<a id="pgfId-1218696"></a> After the facet is shifted, the end points of the facet are shifted to the nearest points on the manufacturing grid. If there is an ambiguity to which point it should be shifted to (that is, if there are two or more nearest points on the manufacturing grid), then the end point is shifted to the farthest point from the origin of the facet (among those nearest points on the manufacturing grid).</li><li>
<a id="pgfId-1243075"></a>To avoid discontinuity, segments of boundary of the path or surface adjacent to the facet also need to be adjusted. Straight segments remain straight and are slightly transformed to connect to the new end point of the facet. Non-straight segments are adjusted by adding a nearly-zero fifth-degree polynomials to its <code>x</code> and <code>y</code> equations in such a way that a new segment is connected to the new end point of the facet, and the tangents and curvatures of the segment remain unchanged at the end points.</li></ul>



<h3>
<a id="pgfId-1215169"></a><a id="14152"></a>Surfaces and Facets </h3>

<p>
<a id="pgfId-1218749"></a>Mathematically, any simple-closed curve or polyCurve can be used to represent a surface. </p>
<p>
<a id="pgfId-1230061"></a>When you go counter-clockwise on a closed surface, the enclosed area on the left-side of the boundary represents the surface having a positive surface area associated with that boundary. If you go clockwise, the associated surface is the same but the associated area is negative. A negative surface represents a hole that can be subtracted from another surface.</p>
<p>
<a id="pgfId-1218969"></a>You can create CurvyCore surfaces using the <a href="../skdfref/photonic_re_ccCreateSurface.html">ccCreateSurface</a> SKILL function.</p>
<p>
<a id="pgfId-1219084"></a>The following example creates a rectangular surface:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219151"></a>Rectangle = CCSCreateRectangle(list(0:0 10:10))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219152"></a>RectangleSurface = ccCreateSurface(</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1240166"></a>geGetEditCellView() </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1240169"></a>list(&quot;waveguide&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1219153"></a>&quot;drawing&quot;) </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1240172"></a>Rectangle)</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219154"></a>ccGenFigs(RectangleSurface)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219155"></a>RectangleSurface~&gt;??</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219156"></a>(cc:0x2a0d3bf0 objType &quot;ccSurface&quot; cellView db:0x20c3d91a</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1219157"></a>lpp</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1219158"></a>(&quot;waveguide&quot; &quot;drawing&quot;) figs</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1219159"></a>(db:0x20c3c99a) area</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1235994"></a>100.0 boundary cc@0x4e636b3f holes nil</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1236022"></a>)</pre>

<p>
<a id="pgfId-1236040"></a>This following figures shows the rectangular surface created using the above example. </p>

<p>
<a id="pgfId-1233778"></a></p>
<div class="webflare-div-image">
<img width="668" height="262" src="images/curvycore-15.gif" /></div>

<p>
<a id="pgfId-1219145"></a>The following example shows how to create a polygon with <code>N</code> number of sides or an <em>N-gon closed polyCurve</em> that can be used to create a hexagon surface.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1230336"></a>procedure(CCSCCreateNgon(Radius NumberofSides)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230337"></a>let((Vertices(pi2*asin(1)))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230338"></a>Vertices = tconc(nil Radius:0)</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230339"></a>for(i 1 NumberofSides-1</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230340"></a> tconc(</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240180"></a> Vertices </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240183"></a> Radius*cos(2*pi*i/NumberofSides):Radius*sin(2*pi*i/NumberofSides)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240186"></a> );tonc</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230341"></a>);for</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230342"></a>Vertices = car(Vertices)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230343"></a>CCSCreatePolygon(Vertices)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230344"></a>);let</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1230345"></a>);procedure</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1230332"></a> </pre>

<p>
<a id="pgfId-1219441"></a>Next, you can use the N-gon polyCurve to create a hexagon surface as shown below. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219427"></a>Hexagon = CCSCreateNgon(15 6)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219428"></a>HexagonSurface = ccCreateSurface(geGetEditCellView() list(&quot;waveguide&quot; &quot;drawing&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219429"></a>Hexagon)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219418"></a>ccGenFigs(HexagonSurface)</pre>

<p>
<a id="pgfId-1236132"></a>The figure shows the hexagon created using the above example. </p>

<p>
<a id="pgfId-1219525"></a></p>
<div class="webflare-div-image">
<img width="668" height="364" src="images/curvycore-16.gif" /></div>

<p>
<a id="pgfId-1219420"></a>The following procedure uses a closed pie polyCurve to create a pie surface. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1236308"></a>PiePolyCurve = CCSCreatePie(10 asin(1)*3/4 12 asin(1)*3/4)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1236309"></a>PieSurface = ccCreateSurface(geGetEditCellView() list(&quot;waveguide&quot; &quot;drawing&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1236310"></a>PiePolyCurve)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1236301"></a>ccGenFigs(PieSurface)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1236332"></a>This figure shows pie surface created using a closed pie polyCurve. </pre>
<p>
<a id="pgfId-1233822"></a></p>
<div class="webflare-div-image">
<img width="668" height="296" src="images/curvycore-17.gif" /></div>

<p>
<a id="pgfId-1219634"></a>Lets now see how to create a grating coupler shape as an array of grating pie shapes.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1230783"></a>procedure(GratingCoupler(cv @key(designIntentLayer &quot;waveguide&quot;)
&#160;&#160;&#160;&#160;       (GratingNum 10)<br />        (GratingSpace 3.0)<br />        (GratingArcLength 2.0)<br />        (Gratingwidth 1.0)<br />        (GratingStartRadius 5.0)<br />        (roatation 0.0)<br />        (boundingBox t)<br />      )</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230792"></a>let((ccPolyCurves ccSurfaces BoundingBox BoundingBoxSurface</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1240298"></a>  urx ury llx lly(pi asin(1)))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1240305"></a></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230794"></a>GratingArcLength = pi/GratingArcLength</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230795"></a>declare(ccPolyCurves[GratingNum])</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230796"></a>declare(ccSurfaces[GratingNum])&#160;&#160;&#160;&#160; </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1240302"></a></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230797"></a>for(i 0 GratingNum-1</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230798"></a> ccPolyCurves[i] = CCSCreatePie(</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240308"></a>     &#160;&#160;GratingStartRadius+GratingSpace*i </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240311"></a>     &#160;&#160;GratingArcLength </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240314"></a>    &#160;&#160;    GratingStartRadius+GratingSpace*i+Gratingwidth </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240317"></a>     &#160;&#160;GratingArcLength)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230799"></a> ccPolyCurves[i] = ccTransformPolyCurve(ccPolyCurves[i] </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240430"></a>     &#160;&#160;list(0:0 rotation))</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240483"></a></pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230800"></a> ccSurfaces[i] = ccCreateSurface(cv </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240453"></a>     list(designIntentLayer &quot;drawing&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240468"></a>     ccPolyCurves[i})</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230801"></a>);for</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230802"></a>when(boundingBox</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230803"></a>  urx = GratingStartRadius+GratingSpace*(GratingNum-1) + Gratingwidth</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230804"></a>  ury = (GratingStartRadius+GratingSpace*(GratingNum-1)) +             Gratingwidth*sin(GratingArcLength/2)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230805"></a>  lly = -ury</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230806"></a>  llx = GratingStartRadius*cos(GratingArcLength/2)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230807"></a>  BoundingBox = CSCCreateRectangle(list(llx:lly urx:ury))</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230808"></a>  BoundingBoxSurface = ccCreateSurface(cv 
&#160;&#160;&#160;&#160;             &#160;&#160;&#160;&#160;       &#160;&#160; list(&quot;SiEtch0&quot; &quot;drawing&quot;) &#160;&#160;&#160;&#160;             &#160;&#160;&#160;&#160;       &#160;&#160; &#160;&#160;&#160;&#160; &#160;&#160; BoundingBox)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230809"></a>  ccMoveFig(BoundingBoxSurface ?transform list(0:0 rotation))</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230810"></a>);when</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240648"></a></pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230811"></a>list(ccSurfaces BoundingBoxSurface)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1230812"></a> );let</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1230448"></a>);procedure</pre>

<p>
<a id="pgfId-1219828"></a>After the GratingCoupler function is loaded, you can check the creation of a grating coupler. </p>

<a id="pgfId-1219850"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
ccGrating = GratingCoupler(geGetEditCellView())</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219804"></a>Gratings = car(ccGrating)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219805"></a>BoundingBox = cadr(ccGrating)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219806"></a>ccGenFigs(BoundingBox)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219807"></a>ccGenFigs(Gratings[1])</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219808"></a>ccGenFigs(Gratings[4])</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1219799"></a>ccGenFigs(Gratings[9])</pre>

<p>
<a id="pgfId-1230549"></a>The following figures show the grating coupler shape with grating number <code>1</code>, <code>4</code>, <code>9</code>, and the complete grating coupler.</p>

<p>
<a id="pgfId-1233842"></a></p>
<div class="webflare-div-image">
<img width="668" height="268" src="images/curvycore-18.gif" /></div>

<p>
<a id="pgfId-1219945"></a>A surface with a negative area represents a hole. This means that it is possible to subtract some holes from a surface when using <a href="../skdfref/photonic_re_ccCreateSurface.html">ccCreateSurface</a> SKILL function. </p>
<p>
<a id="pgfId-1236685"></a>The holes that are going to be subtracted from the original surface are passed as a list parameter to the <code>ccCreateSurface</code> function as shown below. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1230729"></a>procedure(GratingCouplerInverted(cv @key(designIntentLayer &quot;waveguide&quot;)
&#160;&#160;&#160;&#160;       (GratingNum 10)<br />        (GratingSpace 3.0)<br />        (GratingArcLength 2.0)<br />        (Gratingwidth 1.0)<br />        (GratingStartRadius 5.0)<br />        (roatation 0.0)<br />       &#160;&#160;  )</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230737"></a>let(<br />(ccPolyCurves ccSurfaces BoundingBox BoundingBoxSurface <br /> urx ury llx lly(pi asin(1)))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1236742"></a></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230739"></a>GratingArcLength = pi/GratingArcLength</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1236734"></a></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230740"></a>;Create bounding box rectangle</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230741"></a>urx = GratingStartRadius+GratingSpace*(GratingNum-1)+Gratingwidth+1</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230742"></a>ury = (GratingStartRadius+GratingSpace*(GratingNum-1)+Gratingwidth)*sin(GratingArcLength/2)+1</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230743"></a>lly= -ury</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230744"></a>llx = GratingStartRadius*cos(GratingArcLength/2)-1</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1230745"></a>BoundingBox = CCSCreateRectangle(list(llx:lly urx:ury))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1236731"></a></pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230746"></a>for(i0 GratingNum-1</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240665"></a>;ccPolyCurves are simple closed curves with negative area that rerpesent&#160;&#160;            ;the holes in the bounding box rectangle</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230748"></a>ccPolyCurves=tconc(</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240697"></a> ccPolyCurves</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230749"></a> ccReverseCurve</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240746"></a>  (CCSCreatePie(</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240751"></a> &#160;&#160; GratingStartRadius+GratingSpace*i </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240758"></a> &#160;&#160; GratingArcLength </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240761"></a> &#160;&#160; GratingStartRadius+GratingSpace*i+Gratingwidth </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240764"></a>    GratingArcLength)<br /> )</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240805"></a>  );tconc</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230750"></a>);for</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1236728"></a></pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230751"></a>ccPolyCurves = car(ccPolyCurves)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230752"></a>ccSurfaces = ccCreateSurface(cv </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240820"></a> &#160;&#160; &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160; list(&quot;SiEtch0&quot; &quot;drawing&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1240931"></a> &#160;&#160; &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160; BoundingBox </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1241049"></a> &#160;&#160; &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;   &#160;&#160;&#160;&#160;     ccPolyCurves)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1230753"></a>ccMoveFig(ccSurfaces ?transform list(0:0 rotation))</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1236752"></a></pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1236712"></a>);let</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1236717"></a>);procedure</pre>

<p>
<a id="pgfId-1219991"></a>After defining and loading the <code>GratingCouplerInverted</code> function, you can create an instance where the gratings are subtracted from the bounding box.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1220001"></a><code>ccGratingInverted = GratingCouplerInverted(geGetEditCellView())</code></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1236656"></a><code>ccGenFigs(ccGratingInverted)</code></pre>
<p>
<a id="pgfId-1241494"></a></p>
<div class="webflare-div-image">
<img width="668" height="265" src="images/curvycore-19.gif" /></div>
<h4><em>
<a id="pgfId-1241901"></a>Related Information</em></h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1241418"></a><code>ccCreatePath</code><a id="../skdfref/photonic.html#ccCreatePath"></a></pre>

<p>
<a id="pgfId-1241455"></a><code>ccGenFigs</code><a id="../skdfref/photonic.html#ccGenFigs"></a> </p>
<p>
<a id="pgfId-1233862"></a><a href="../skdfref/photonic_re_ccCreateSurface.html">ccCreateSurface</a></p>

<h4>
<a id="pgfId-1221816"></a>Boolean Operations of Surfaces</h4>

<p>
<a id="pgfId-1221864"></a>Boolean operator <code>or</code> can be applied using the <a href="../skdfref/photonic_re_ccLayerOr.html">ccLayerOr</a> SKILL function to create two circular surfaces and combine them to create a larger surface. The surfaces that this function acts on can be on different layers and the generated surface can also be in a different layer.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221869"></a>Circle = ccCreateCurve(&quot;10*cos(t)&quot; &quot;10*sin(t)&quot; 0:4*asin(1))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221870"></a>Surf1 = ccCreateSurface(geGetEditCellView() list(&quot;waveguide&quot; &quot;drawing&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221871"></a>CirclePoly)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221872"></a>Surf2 = ccCreateSurface(geGetEditCellView() list(&quot;SiEtch0&quot; &quot;drawing&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221873"></a>ccTransformPolyCurve(CirclePoly list(18:0 0)))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1221874"></a>SurfOr = ccLayerOr(Surf1 Surf2)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1233918"></a>ccGenFigs(car(SurfOr))</pre>

<p>
<a id="pgfId-1236985"></a>The following figure shows how two circular surfaces are combined to create a larger surface using the <code>ccLayerOr</code> function.</p>

<p>
<a id="pgfId-1233896"></a></p>
<div class="webflare-div-image">
<img width="668" height="308" src="images/curvycore-20.gif" /></div>

<p>
<a id="pgfId-1221947"></a>Boolean operator <code>and</code> can be an be applied using the <a href="../skdfref/photonic_re_ccLayerAnd.html">ccLayerAnd</a> SKILL function to extract the overlap area of the above shape with a transformed circle surface. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222090"></a>Surf3 = ccCreateSurface(geGetEditCellView() list(&quot;waveguide&quot; &quot;drawing&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222091"></a>ccTransformPolyCurve(CirclePoly list(10:0 0)))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222092"></a>SurfAnd = ccLayerAnd(SurfOr Surf3 ?lpp list(&quot;wavgeuide&quot; &quot;drawing&quot;))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222086"></a>ccGenFigs(car(SurfAnd)) <code></code></pre>

<p>
<a id="pgfId-1237153"></a>In this figure, you can see that the overlap area of the shape has been extracted from the shape.</p>

<p>
<a id="pgfId-1241600"></a></p>
<div class="webflare-div-image">
<img width="668" height="312" src="images/curvycore-21.gif" /></div>
<h4><em>
<a id="pgfId-1241914"></a>Related Information</em></h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1241561"></a><a href="../skdfref/photonic_re_ccLayerOr.html">ccLayerOr</a></pre>

<p>
<a id="pgfId-1233939"></a><a href="../skdfref/photonic_re_ccLayerAnd.html">ccLayerAnd</a></p>

<h4>
<a id="pgfId-1222186"></a>Smoothening of Surfaces</h4>

<p>
<a id="pgfId-1231188"></a>You can use the <a href="../skdfref/photonic_re_ccSmoothenFig.html">ccSmoothenFig</a> SKILL function to smoothen a surface. Assume that you have a hexagonal surface, and that at the sharp corners of the hexagon, the bend radius is zero. Now assume that you want to smoothen the shape and specify the minimum radius of curvature for the shape to be <code>4</code>. </p>
<p>
<a id="pgfId-1222191"></a>In the example below you get similar results.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222195"></a>Hex = CCSCreateNgon(10 6)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222228"></a>HexSurf = ccCreateSurface(geGetEditCellView() list(&quot;waveguide&quot; &quot;drawing&quot;) Hex)<br />Hex2Surf = ccCreateSurface(geGetEditCellView() list(&quot;waveguide&quot; &quot;drawing&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222229"></a>ccTransformPolyCurve(Hex list(20:0 0)))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222230"></a>Hex3 = ccCreateSurface(geGetEditCellView() list(&quot;SiNWaveguide&quot; &quot;drawing&quot;) Hex)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222231"></a>HexSmooth = ccSmoothenFig(Hex3 -4)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222232"></a>ccGenFigs(HexSurf)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222233"></a>ccGenFigs(Hex2Surf)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1237269"></a>ccGenFigs(HexSmooth)</pre>

<p>
<a id="pgfId-1237235"></a>In this figure, there are three hexagonal surfaces, the red surface on the right is the original hexagonal surface and the two overlapped surfaces are the same original hexagonal surface and its smoothened version.</p>

<p>
<a id="pgfId-1241660"></a></p>
<div class="webflare-div-image">
<img width="668" height="311" src="images/curvycore-22.gif" /></div>
<h4><em>
<a id="pgfId-1241643"></a>Related Information</em></h4>

<p>
<a id="pgfId-1233961"></a><a href="../skdfref/photonic_re_ccSmoothenFig.html">ccSmoothenFig</a></p>

<h3>
<a id="pgfId-1219189"></a><a id="39304"></a>CurvyCore Pcells</h3>

<p>
<a id="pgfId-1224378"></a>There is no significant difference between a typical Pcell and a CurvyCore Pcell other than the fact that in a CurvyCore Pcell, you can use the CurvyCore and photonic functions to generate and manipulate your shapes. This means that all the concepts and best practices of creating a Pcell also work in this situation. </p>
<p>
<a id="pgfId-1224417"></a>To understand how to work with CurvyCore Pcells, lets consider an S-bend connector Pcell. The parameterized equation and the shape of this connector is shown below. </p>

<div class="webflare-div-image">
<img width="668" height="284" src="images/curvycore-23.gif" /></div>

<p>
<a id="pgfId-1224417"></a>Lets see how to create a generator for the S-bend shape and then use that inside the Pcell code to create the ccPath object.</p>
<p>
<a id="pgfId-1224588"></a>The following procedure creates a generator for cosine S-bend curve:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1231744"></a>procedure(CCSCreateSBend(height length)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231745"></a>let((parameterizedArc)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231746"></a>  parameterizedArc.ParamX = &quot;t&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231747"></a>  parameterizedArc.ParamY = lsprint(&quot;%n/2*cos(t*pi/%n)&quot; height length)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231748"></a>  ccCreateCurve(parameterizedArc.ParamX parameterizedArc.ParamY 0:length)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231749"></a>);let</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1231729"></a>);procedure</pre>

<p>
<a id="pgfId-1224748"></a>In the following Pcell code, width parameter specifies the width of the waveguide path and rotation parameter specifies the rotation applied to the final waveguide path. Next, S-bend generator is used to create the S-bend curve and build the waveguide path.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1231771"></a>pcDefinePCell(</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1231772"></a>list(ddGetObj(&quot;gopdk&quot;) &quot;CustomSBend&quot; &quot;layout&quot;)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231773"></a>;Pcell parameters</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231774"></a>(</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1231775"></a>(designIntentLayer &quot;string&quot; &quot;waveguide&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1231776"></a>(rotation &quot;string&quot; &quot;0.0&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1231777"></a>(height &quot;string&quot; &quot;10.0u&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1231778"></a>(length &quot;string&quot; &quot;40.0u&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1231779"></a>(width &quot;string&quot; &quot;0.5u&quot;)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231780"></a>);end of parameters</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231781"></a>;Pcell body code</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231782"></a>let((ccCurve ccPath ccWaveguide)</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1231783"></a>height = readstring(pcCellView~&gt;parameters~&gt;height)*1e6;</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1231784"></a>length = readstring(pcCellView~&gt;parameters~&gt;length)*1e6;</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1231785"></a>width = readstring(pcCellView~&gt;parameters~&gt;width)*1e6;</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1231786"></a>rotation = readstring(pcCellView~&gt;parameters~&gt;rotation);</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1231787"></a>);let</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1224927"></a>);pcDefinePCell</pre>

<p>
<a id="pgfId-1224932"></a>The following code adds three CDF parameters and sets how interpreted labels should be evaluated. Populate the CDF data after loading the file. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1232119"></a>Pcell parameter names and their associated CDF property names should be the same.</div>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232495"></a>let((cellId cdfId)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232496"></a>cellId = ddGetObj(&quot;gopdk&quot; &quot;CustomSBend&quot;)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232497"></a>when(cdfId = cdfGetBaseCellCDF(cellId)</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232498"></a>cdfDeleteCDF(cdfId)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232499"></a>);when</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1237441"></a></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232500"></a>cdfId = cdfCreateBaseCellCDF(cellId)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232501"></a>cdfCreateParam(cdfId
&#160;&#160;&#160;&#160;      ?name   &quot;width&quot;<br />       ?prompt   &quot;Waveguide Width(M)&quot;<br />       ?defValue  &quot;0.5u&quot;<br />       ?type   &quot;string&quot;<br />       ?storeDefault &quot;t&quot;) <br /></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1237444"></a>cdfCreateParam(cdfId
&#160;&#160;&#160;&#160;      ?name   &quot;length&quot;<br />       ?prompt   &quot;Bend Length(M)&quot;<br />       ?defValue  &quot;40.0u&quot;<br />       ?type   &quot;string&quot;<br />    &#160;&#160; ?storeDefault&#160;&#160;&#160;&#160;&quot;t&quot;)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1237459"></a></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1237456"></a>cdfCreateParam(cdfId
&#160;&#160;&#160;&#160;      ?name   &quot;height&quot;<br />       ?prompt   &quot;Bend Height(M)&quot;<br />       ?defValue  &quot;10.0u&quot;<br />       ?type   &quot;string&quot;<br />    &#160;&#160; ?storeDefault&#160;&#160;&#160;&#160;&quot;t&quot;)&#160;&#160;&#160;&#160;   </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1237462"></a></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232519"></a>;These are related to Cell/Instance Name(cdsName)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232520"></a>cdfId-&gt;instDisplayMOde = &quot;instName&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232521"></a>cdfId-&gt;instNameType = &quot;schematic&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232522"></a>;These are related to terminals(cdsTerm)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232523"></a>cdfId-&gt;termDisplayMode=&quot;natName&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232524"></a>cdfId-&gt;netNameType=&quot;schamatic&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232525"></a>;These are related to Parameters(cdsParam)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232526"></a>cdfId-&gt;paramDisplayMode=&quot;parameter&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232527"></a>cdfId-&gt;paramLabelSet=&quot;width length height&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232529"></a>cdfSaveCDF(cdfId)</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232159"></a>);let</pre>

<p>
<a id="pgfId-1232216"></a>When waveguideTemplates are defined in the technology database, it is possible to use them to generate a waveguide from a ccPath object. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232437"></a>(&quot;Deep SOI Waveguide&quot; (&quot;waveguide&quot; &quot;drawing&quot;)
&#160;&#160;&#160;&#160;   &#39;minWidth       0.5<br />    &#39;minBendRadius 10.0<br />    &#39;modeProperties(</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232441"></a>    &#39;function &quot;gopdkModePropWG</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232442"></a>    &#39;namespace((&quot;TE 0)(&quot;TM&quot; 1))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232443"></a>)</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232444"></a>    &#39;derivedShapeSpecs(</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232445"></a>    ( &quot;SiEtch0&quot; &#39;type &quot;enclosure&quot; &#39;enclosure 0.05)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232446"></a>    ( &quot;SiEtch2&quot; &#39;type &quot;enclosure&quot; &#39;enclosure 2.0)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232447"></a>)</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232433"></a>)</pre>

<p>
<a id="pgfId-1225055"></a>Next, call phoGenWaveguide to generate the required derived shapes.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232551"></a>cdfCreateParam(cdfId
&#160;&#160;&#160;&#160;     ?name        &quot;generateWaveguide&quot;<br />      ?prompt        &quot;Generate Waveguide Derived Shapes&quot;<br />      ?defValue        &quot;t&quot;<br />      ?parseAsCel   &quot;no&quot;<br />      ?type        &quot;boolean&quot;<br />      ?storeDefault  &quot;t&quot;<br />      :storeDefault  &quot;yes&quot;<br />   &#160;&#160; ?display&#160;&#160;&#160;&#160; &#160;&#160;    &#160;&#160;&#160;&#160;&quot;t&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232559"></a>pcDefinePCell(</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232560"></a>list(ddGetObj(&quot;gopdk&quot;)&quot;CustomSBend&quot;&quot;layout&quot;)</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232561"></a>;Pcell parameters</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232562"></a>(</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232563"></a>(designIntentLayer &quot;string&quot; &quot;waveguide&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232564"></a>(rotation &quot;string&quot; &quot;0.0&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232565"></a>(height &quot;string&quot; &quot;10.0u&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232566"></a>(length &quot;string&quot; &quot;40.0u&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232567"></a>(width &quot;string&quot; &quot;0.5u&quot;)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232568"></a>(generateWaveguide &quot;boolean&quot; t)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232569"></a>);end of parameters</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232570"></a>;Pcell body code</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232571"></a>let((ccCurve ccPath ccWaveguide)</pre>

<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232572"></a>height = readstring(pcCellView~&gt;parameters~&gt;height)*1e6;</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232573"></a>length = readstring(pcCellView~&gt;parameters~&gt;length)*1e6;</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232574"></a>width = readstring(pcCellView~&gt;parameters~&gt;width)*1e6;</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232575"></a>rotation = readstring(pcCellView~&gt;parameters~&gt;rotation);</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1237738"></a></pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232577"></a>ccCurve = CCSCreateSBend(height length)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232578"></a>ccpath = ccCreatePath(</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1241134"></a>   pcCellView </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1241140"></a>   list(designIntentLayer &quot;drawing&quot;) </pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1237750"></a>   list(list(ccCurve list(0:0 rotation)width)))</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232579"></a>ccGenFigs(ccpath)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232580"></a></pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232581"></a>when(generateWaveguide</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232582"></a> ccWaveguide=phoGenWaveguide(ccPath)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232583"></a> foreach(CCObj ccWaveguide</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232584"></a>  ccGenFigs(CCObj)</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232585"></a> );foreach</pre>
<pre class="webflare-courier-new webflare-indent2 codeContent">
<a id="pgfId-1232586"></a>);when </pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1232587"></a>);let</pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232547"></a>);pcDefinePCell</pre>

<p>
<a id="pgfId-1225157"></a>The following figure shows the S-bend generated on the design intent layer (top shape) and the same S-bend when its associated derived waveguide layers are generated (bottom shape).</p>

<p>
<a id="pgfId-1242306"></a></p>
<div class="webflare-div-image">
<img width="668" height="269" src="images/curvycore-24.gif" /></div>
<h4><em>
<a id="pgfId-1242310"></a>Related Information</em></h4>

<p>
<a id="pgfId-1225182"></a><h-hot><a actuate="user" class="URL" href="../skdfref/photonic.html" show="replace" xml:link="simple">Photonics Functions</a></h-hot></p>
<p>
<a id="pgfId-1242486"></a><a href="curvycore.html#68249">Waveguide Connectors</a></p>
<p>
<a id="pgfId-1242461"></a><h-hot><a actuate="user" class="URL" href="../pcellref/pcellrefTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Parameterized Cell Reference</a></h-hot></p>

<h2>
<a id="pgfId-1215175"></a><a id="68249"></a>Waveguide Connectors </h2>

<p>
<a id="pgfId-1222725"></a>CurvyCore building blocks include a set of waveguide connectors such as straight, bend, curve, sine, and waypoint connectors. These connectors are two-port optical waveguides that are used as connector between other optical devices. </p>
<p>
<a id="pgfId-1222746"></a>CurvyCore building blocks have a set of common features and parameters. Two of these parameters are offset and rotation. </p>

<h3>
<a id="pgfId-1222319"></a><a id="12134"></a>Straight Connectors</h3>

<p>
<a id="pgfId-1222725"></a>The general shape of a straight waveguide connector is shown in the following figure. </p>

<p>
<a id="pgfId-1233994"></a></p>
<div class="webflare-div-image">
<img width="668" height="325" src="images/curvycore-25.gif" /></div>

<p>
<a id="pgfId-1231468"></a>A straight waveguide connector supports two type of straight connections, with tapering and without tapering. It further supports four types of tapering, linear, exponential, logarithmic, and parabolic. If tapering is enabled, you need to set the start and end width and also type of taper when you call the generator, otherwise, width specifies the default width of the straight waveguide. It also supports parameters such as start port and end port names. </p>

<h4><em>
<a id="pgfId-1242756"></a>Related Information</em></h4>

<p>
<a id="pgfId-1242736"></a><h-hot><a actuate="user" class="URL" href="../skdfref/photonic.html" show="replace" xml:link="simple">Photonics Functions</a></h-hot> </p>

<h3>
<a id="pgfId-1215183"></a><a id="61918"></a>Bend C<a id="bendConnector"></a>onnectors </h3>

<p>
<a id="pgfId-1222860"></a>A bend connector connects two points on the same circle with angles equal to the angles of the tangents to that circle. The bend connector is described by the bend radius <span class="webflare-courier-new" style="white-space:pre"><em>R</em></span> of the circle and the bend angle of the arc of that circle. In its simplest form, a bend connector consists of a single circular arc segment. If the bend connector connects two straight waveguide segments with zero curvature <code>k = 0</code>, the curvature at the ports changes discontinuously, causing additional connection loss. This curvature discontinuity can be avoided if additional curve segments are inserted between the straight line segments and the circular arc segments so that the curvature becomes a continuous function<em> </em><span class="webflare-courier-new" style="white-space:pre"><em>k(s)</em></span> of the arc length as shown in the following figure.</p>

<p>
<a id="pgfId-1242635"></a></p>
<div class="webflare-div-image">
<img width="668" height="384" src="images/curvycore-26.gif" /></div>
<h4><em>
<a id="pgfId-1242639"></a>Related Information</em></h4>

<p>
<a id="pgfId-1242641"></a><h-hot><a actuate="user" class="URL" href="../skdfref/photonic_re_ccBendConnector.html" show="replace" xml:link="simple">ccBendConnector</a></h-hot></p>

<h3>
<a id="pgfId-1166606"></a><a id="47454"></a>Curve Connectors </h3>

<p>
<a id="pgfId-1223075"></a>A curve connector connects one port with the following specifications:</p>
<ul><li>
<a id="pgfId-1223094"></a>coordinates: <span class="webflare-courier-new" style="white-space:pre"><em>x1, y1</em></span></li><li>
<a id="pgfId-1223098"></a>facet angle: φ1</li><li>
<a id="pgfId-1223113"></a>curvature radius: <span class="webflare-courier-new" style="white-space:pre"><em>R1</em></span></li></ul>


<p>
<a id="pgfId-1223091"></a>To another port with the following specifications: </p>
<ul><li>
<a id="pgfId-1223243"></a>coordinates: <span class="webflare-courier-new" style="white-space:pre"><em>x2, y2</em></span></li><li>
<a id="pgfId-1223244"></a>facet angle: φ2</li><li>
<a id="pgfId-1223260"></a>curvature radius: <span class="webflare-courier-new" style="white-space:pre"><em>R2</em></span></li></ul>


<p>
<a id="pgfId-1236830"></a>Curve connectors connect two points with a set of constraints on the facet angles and curvature radius as shown in the following figure:</p>

<p>
<a id="pgfId-1234030"></a></p>
<div class="webflare-div-image">
<img width="668" height="326" src="images/curvycore-27.gif" /></div>

<p>
<a id="pgfId-1223762"></a>If the coordinate system is rotated and translated such that one port is at the origin and another port is on the <em>x</em>-axis, the curve connector is described in terms of the distance between the ports, the two facet angles with respect to the <em>x</em>-axis, and the two curvature radii. These five boundary conditions together with the minimum curvature radius <span class="webflare-courier-new" style="white-space:pre"><em>Rmin</em></span> represent six constraints for the calculation of the curve connector. With only six constraints, the calculation of curve connectors is an under-constrained issue. One additional constraint can be imposed by requiring that:</p>

<p>
<a id="pgfId-1234424"></a></p>
<div class="webflare-div-image">
<img width="668" height="35" src="images/curvycore-28.gif" /></div>

<p>
<a id="pgfId-1223888"></a>This limits the solution space to only three classes of curves, namely straight lines, circular arcs and clothoids. Curve connectors are thus a special case of clothoid splines.</p>

<h4><em>
<a id="pgfId-1242683"></a>Related Information</em></h4>

<p>
<a id="pgfId-1242687"></a><h-hot><a actuate="user" class="URL" href="../skdfref/photonic_re_ccCurveConnector.html" show="replace" xml:link="simple">ccCurveConnector</a></h-hot></p>

<h3>
<a id="pgfId-1215185"></a><a id="59571"></a>Waypoint Connectors </h3>

<p>
<a id="pgfId-1223429"></a>Waypoint connector connects the begin port with coordinates <code>(</code><span class="webflare-courier-new" style="white-space:pre"><em>xb<code>, </code><span class="webflare-courier-new" style="white-space:pre"><em>y</em></span>b</em></span><code>)</code> to the end port with coordinates <code>(</code><span class="webflare-courier-new" style="white-space:pre"><em>x</em></span>E<code>, </code><span class="webflare-courier-new" style="white-space:pre"><em>yE<code>)</code></em></span> by a sequence of straight line segments and bend connectors. The straight line segments are defined by a polygonal line through the series of waypoints with coordinates <code>(</code><span class="webflare-courier-new" style="white-space:pre"><em>xi</em></span><code>, </code><span class="webflare-courier-new" style="white-space:pre"><em>yi</em></span><code>)</code> as shown in the following figure:</p>

<p>
<a id="pgfId-1234054"></a></p>
<div class="webflare-div-image">
<img width="668" height="357" src="images/curvycore-29.gif" /></div>

<p>
<a id="pgfId-1224052"></a>The facet angles at the ports are determined by the angles ϕb and ϕE of the lines connecting the begin point with the first waypoint and the end point with the last waypoint, respectively.</p>
<p>
<a id="pgfId-1224053"></a>Similarly to a single bend connector, each bend connector in a waypoint connector can also consist of a circular arc connected to the straight lines at its ends by a pair of apex clothoids. This is also shown in the above figure, with the straight line segments, the circular arc segments, and the clothoid segments displayed in different colors. The waypoint connector can be calculated using the <a href="../skdfref/photonic_re_ccWaypointConnector.html">ccWaypointConnector</a> SKILL function.</p>

<h4><em>
<a id="pgfId-1242556"></a>Related Information</em></h4>

<p>
<a id="pgfId-1242537"></a><h-hot><a actuate="user" class="URL" href="../skdfref/photonic_re_ccWaypointConnector.html" show="replace" xml:link="simple">ccWaypointConnector</a></h-hot></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="epda.html" id="prev" title="Using EPDA in the Virtuoso Environment">Using EPDA in the Virtuoso Env ...</a></em></b><b><em><a href="appA.html" id="nex" title="Photonics Environment Variables">Photonics Environment Variable ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>