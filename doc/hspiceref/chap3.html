
<html><head><title>HSPICE Circuit Simulation Interface</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="TopicTags" content="TRUE" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="shubh" />
<meta name="CreateDate" content="2023-06-14" />
<meta name="CreateTime" content="1686751861" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the HSPICE and SPICE Interface which lets you run an HSPICE and SPICE simulation in the Cadence environment." />
<meta name="DocTitle" content="HSPICE/SPICE Interface Reference" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="HSPICE Circuit Simulation Interface" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="hspiceref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-06-14" />
<meta name="ModifiedTime" content="1686751861" />
<meta name="NextFile" content="chap4.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design,Custom IC Design" />
<meta name="PrevFile" content="chap2.html" />
<meta name="c_product" content="Virtuoso Analog Design Environment,Virtuoso Schematic Editor" />
<meta name="Product" content="Virtuoso Analog Design Environment,Virtuoso Schematic Editor" />
<meta name="ProductFamily" content="Virtuoso Analog Design Environment,Virtuoso Schematic Editor" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="HSPICE/SPICE Interface Reference -- HSPICE Circuit Simulation Interface" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="hspicerefIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="hspicerefTOC.html">Contents</a></li><li><a class="prev" href="chap2.html" title="SPICE Circuit Simulation Interface">SPICE Circuit Simulation Inter ...</a></li><li style="float: right;"><a class="viewPrint" href="hspiceref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap4.html" title="HSPICE/SPICE Elements">HSPICE/SPICE Elements</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>HSPICE/SPICE Interface Reference<br />Product Version IC23.1, June 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>3
<a name="pgfId-1032577"></a></h1>
<h1>
<a name="pgfId-1032578"></a><hr />
HSPICE Circuit Simulation Interface<hr />
</h1>

<p>
<a name="pgfId-1032579"></a>This chapter contains the following topics:</p>
<ul><li>
<a name="pgfId-1032583"></a><a href="chap3.html#37872">Overview</a></li><li>
<a name="pgfId-1032587"></a><a href="chap3.html#42497">Running HSPICE</a></li><li>
<a name="pgfId-1032591"></a><a href="chap3.html#39415">Hierarchical Netlisting</a></li></ul>



  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Overview

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-1032593"></a><a name="37872"></a>Overview  </h2>

<p>
<a name="pgfId-1032594"></a>Using the HSPICE interface is similar to using the SPICE interface. Before reading this chapter, which contains information specific to running an HSPICE simulation, read the chapter on the SPICE interface.</p>
<ul><li>
<a name="pgfId-1032595"></a> With the HSPICE interface you can<ul><li>
<a name="pgfId-1032596"></a>Generate flat or hierarchical netlists</li><li>
<a name="pgfId-1032597"></a>Run local and remote simulations</li><li>
<a name="pgfId-1032598"></a>Use element and model parameters supported by HSPICE</li></ul></li><li>
<a name="pgfId-1032599"></a>HSPICE differs from SPICE in its handling of waveform output from multiple analysis simulation runs. <br />
<a name="pgfId-1032600"></a>The waveforms are written in the Parameter Storage Format (PSF) format if the <em>psf=1</em> option is set in your <em>control</em> file. The waveforms are stored in the <em>psf </em>directory in the simulation run directory and can be viewed using the Waveform Display program.</li></ul>






<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Running HSPICE

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-1032610"></a><a name="42497"></a>Running HSPICE</h2>

<p>
<a name="pgfId-1032611"></a>This section describes the following:</p>
<ul><li>
<a name="pgfId-1032612"></a>Creating the schematic</li><li>
<a name="pgfId-1032613"></a>Generating the run directory</li><li>
<a name="pgfId-1032614"></a>Editing the control file</li><li>
<a name="pgfId-1032615"></a>Starting the analysis run</li><li>
<a name="pgfId-1032616"></a>Generating the netlist </li><li>
<a name="pgfId-1032617"></a>Creating the input file </li><li>
<a name="pgfId-1032618"></a>Running the simulation </li><li>
<a name="pgfId-1032619"></a>Translating the output </li><li>
<a name="pgfId-1032620"></a>Viewing the results </li></ul>








<p>
<a name="pgfId-1032621"></a>Most of this information is covered in greater detail in the <h-hot><a actuate="user" class="URL" href="../comphelp/comphelpTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Schematic Editor L</a></h-hot> and <h-hot><a actuate="user" class="URL" href="../se/seTOC.html#firstpage" show="replace" xml:link="simple">Simulation Environment Help</a></h-hot>. Here you will find only what is specific to HSPICE.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Creating the Schematic

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1032622"></a>Creating the Schematic</h3>

<p>
<a name="pgfId-1032751"></a>Create schematics for HSPICE simulation in the same way as any other schematic in the Virtuoso Studio Design Environment. The main difference is that each cell in the schematic (for example, transistors, resistors, capacitors) must have a <em>symbol</em> and an <em>hspice</em> view to be recognized by the HSPICE interface. For a list of the netlisting properties required for the <em>hspice</em> view, see <h-hot><a href="chap3.html#Primitive">&#8220;Primitive Cell Requirements&#8221;</a></h-hot>.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Generating the Run Directory

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1032752"></a>Generating the Run Directory</h3>

<p>
<a name="pgfId-1032794"></a>The first time you run a simulation, select the <em>Initialize</em> command from the Simulation menu to generate a run directory. This run directory is where the <em>control, netlist</em>, and simulation input and output files are kept for the simulation being run. When you want to keep an older simulation instead of overwriting it, you can generate and use multiple simulation run directories. Refer to <em><a actuate="user" class="URL" href="../se/seTOC.html#firstpage" show="replace" xml:link="simple">Simulation Environment Help</a></em>.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Editing the Control File

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1032626"></a>Editing the Control File</h3>

<p>
<a name="pgfId-1032628"></a>When the system initially creates the run directory, it also creates a dummy<a name="marker-1032627"></a> <em>control</em> file. </p>
<p>
<a name="pgfId-1033727"></a>Edit this file to include any information that is not in the schematic. Add the psf option on the .<em>options</em> line in the <em>control</em> file. Set <em>psf=1</em> or <em>psf=2</em>, which tells HSPICE to generate a waveform file in the binary or ASCII PSF format respectively, as required by the simulation environment. You can also specify just the .<code>option</code> keyword in the control file. To disable the PSF and other options in an hspiceD netlist specify just the .<code>option</code> keyword in the control file.</p>
<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-1034428"></a>From the IC 6.1.2 release, Cadence does not support the WSF waveform format. Because of this, do not add the <em>sda=2</em> option in the control file to enable HSPICE to create waveforms in the WSF format. </div>
<p>
<a name="pgfId-1033700"></a>Edit the<a name="marker-1033698"></a> <em>hspice.inp</em> file to add stimulus data and edit the <em>hspice.sim</em><a name="marker-1033699"></a> file to add simulator commands. </p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Starting the Analysis Run

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1032633"></a>Starting the Analysis Run</h3>

<p>
<a name="pgfId-1032634"></a>With the schematic entered and the <em>control</em> file generated, you are ready to start the simulation. Select the <em>Netlist/Simulat</em>e command from the Simulation menu. This command netlists the schematic and starts the simulation; simulation can be run in the background or foreground. Each step in the analysis process is described below.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Generating the Netlist

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1032635"></a>Generating the Netlist</h3>

<p>
<a name="pgfId-1032636"></a>The simulation environment creates an HSPICE netlist for the desired schematic. This netlist contains the connectivity description in the proper format for HSPICE. See &#8220;Formatting Functions&#8221; for information about formats. You can generate a flat or a hierarchical netlist. Both have the same information, but their formats are different. You control the type of netlist generated by setting the <em>simNetlistHier</em><a name="marker-1032637"></a> simulation environment variable. If this variable is set to <em>t</em>, a hierarchical netlist is created; otherwise, a flat netlist is created by default. Typically, you set this variable in your .<em>simrc</em> file.</p>
<p>
<a name="pgfId-1035379"></a>Note the following:</p>
<ul><li>
<a name="pgfId-1035519"></a>By default, parameter values are converted to engineering notation in HSPICE netlist. For example, the parameter <code>w=100u</code> is written as <code>W=100e-6</code> in the netlist. Set the <code>setEngNotation</code> environment variable to in your <code>.cdsenv</code> file to print the parameter values as is (without conversion to engineering notation) in the netlist. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1035493">
<a name="pgfId-1035493"></a><code>hspiceD.envOpts setEngNotation boolean nil</code></pre>
<a name="pgfId-1035456"></a>To revert to the default behavior, set the variable to <code>t</code>. For example:<pre class="webflare-pre-block webflare-courier-new" id="#id1035462">
<a name="pgfId-1035462"></a><code>hspiceD.envOpts setEngNotation boolean t</code></pre></li><li>
<a name="pgfId-1035575"></a>For devices other than diodes and MOS transistors, the netlister netlists only a predefined list of parameters. If you add user defined parameters in the CDF Simulation Information (<code>simInfo</code>) of devices other than diodes and MOS transistors, those parameters will not be netlisted. For such devices, you can write a custom netlist procedure to netlist user defined parameters.</li></ul>









<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Creating the Input File

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1035457"></a>Creating the Input File</h3>

<p>
<a name="pgfId-1032639"></a>Once the netlist is generated, the HSPICE interface automatically translates the instance and net names in the <em>control</em>, <em>hspice</em><a name="marker-1032640"></a>.<em>inp</em>, <em>hspice</em>.<em>sim</em>, and <em>netlist</em> files to legal names for HSPICE. When the translation completes, these files are assembled to create the HSPICE <em>si.inp</em> input file.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Running the Simulation

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1032641"></a>Running the Simulation</h3>

<p>
<a name="pgfId-1032643"></a>When the simulator input file (<em>si.inp</em>) is created, simulation starts. If the <em>simHost</em><a name="marker-1032642"></a> variable is set to a different machine, the simulation runs remotely.</p>
<p>
<a name="pgfId-1032644"></a>For more information about remote simulation, refer to <em><a actuate="user" class="URL" href="../se/seTOC.html#firstpage" show="replace" xml:link="simple">Simulation Environment Help</a></em>.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Translating the Output

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1034200"></a>Translating the Output</h3>

<p>
<a name="pgfId-1034201"></a>When the simulation is finished, the simulation interface translates net and instance names that were previously translated back to the original user-assigned names. The resulting translated text output is stored in the<a name="marker-1034174"></a> s<em>i.out</em> file.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Viewing the Results

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1032652"></a>Viewing the Results</h3>

<p>
<a name="pgfId-1032653"></a>The simulation environment notifies you when analysis is complete so you can view the outputs. Information about the simulation run is recorded in the<a name="marker-1032654"></a> <em>si.log</em> file when a background simulation is run.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Hierarchical Netlisting

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-1032657"></a><a name="39415"></a>Hierarchical Netlisting </h2>

<p>
<a name="pgfId-1032819"></a>The <a name="marker-1032818"></a>hierarchical netlister produces a netlist that is easier to read and understand than one that has been flattened. For more information about flat netlisting, refer to <em><a actuate="user" class="URL" href="../se/seTOC.html#firstpage" show="replace" xml:link="simple">Simulation Environment Help</a></em>. The following are primary features of a hierarchical netlist: </p>
<ul><li>
<a name="pgfId-1032660"></a>The hierarchy of the netlist duplicates the hierarchy of your design. The netlister creates a separate subcircuit for each cell in your schematic. This can dramatically reduce the number of lines in the netlist, since the subcircuit definition is printed only once and all instances of the cell are netlisted as calls to the subcircuit. </li><li>
<a name="pgfId-1032661"></a>Unlike the flat netlister, which translates every instance and net name to a unique name, the hierarchical netlister translates only names that are illegal to HSPICE. To avoid naming conflicts, the hierarchical netlister makes every effort to keep the original user-assigned names in the netlist. When necessary, names are mapped, but the<a name="marker-1032662"></a> mapping is minimal. Characters that are illegal in HSPICE names are <br />
<a name="pgfId-1032663"></a> . , ( ) [ ] $ &#8217; &lt; &gt; <br />
<a name="pgfId-1032664"></a>When any of these characters is found in a name, the character is automatically deleted. In some cases, the name is completely remapped. Usually this occurs when you have specified a name that is too long. HSPICE names are limited to eight characters. If a name is longer than eight characters, it is mapped by the interface. <br />
<a name="pgfId-1032665"></a>When HSPICE maps the entire name, it assigns a unique number preceded by an <em>n</em> for net names, an i for instance names, and an m for macro and model names. <br />
<a name="pgfId-1032666"></a>The first character of an element name in the netlist indicates the element type. The netlister automatically adds a prefix to all instance names. For example, MOSFET instance names are prefixed with <em>m</em>, and resistor names with <em>r</em>.</li></ul>






<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Primitive Cell Requirements

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1032667"></a><a name="Primitive"></a>Primitive Cell Requirements</h3>

<p>
<a name="pgfId-1032669"></a>A cell must<a name="marker-1032668"></a> have both a <em>symbol</em> and an <em>hspice</em> view to be recognized by the HSPICE interface. The <em>hspice</em> view for a cell must contain the same pins that exist in the <em>symbol</em> view for the cell. For netlisting, define the following properties in the <em>hspice</em><a name="marker-1032670"></a><a name="marker-1032671"></a> view: </p>
<ul><li>
<a name="pgfId-1032672"></a><strong>NLPElementPostamble</strong><br />
<a name="pgfId-1032673"></a>Indicates to the flat netlister how to format the element cards for an instance of the cell. </li><li>
<a name="pgfId-1032674"></a><strong>NLPModelPreamble</strong><br />
<a name="pgfId-1032675"></a>Indicates to the flat netlister how to format the model card for an instance of the cell. </li><li>
<a name="pgfId-1032676"></a><strong>hnlHspiceFormatInst</strong><br />
<a name="pgfId-1032677"></a>Indicates to the hierarchical netlister what procedure to call to format and print the element cards for an instance of the cell. </li><li>
<a name="pgfId-1032678"></a><strong>hnlHspiceParamList</strong><br />
<a name="pgfId-1032679"></a>Indicates to the hierarchical netlister what parameters can be inherited. The value of this parameter must be the name of a Cadence SKILL™ language variable, whose value is the list of parameters that can be inherited. Any parameter that does not appear on this list cannot inherit its value and must be assigned fixed values.</li><li>
<a name="pgfId-1032680"></a><strong>hnlHspiceFormatModel</strong><br />
<a name="pgfId-1032681"></a>Indicates to the hierarchical netlister what procedure to call to format and print the model card for an instance of the cell. </li></ul>










<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Example

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-1032682"></a>Example</h3>

<p>
<a name="pgfId-1032683"></a>The following are the property values for the above netlisting properties in the <em>hspice</em> view of the <em>nmos</em> cell in the <em>sample</em> library: </p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1032684"></a>NLPElementPostamble = nlpExpr(&quot;[@NLPElementComment:%\n]<br />    [@NLPnmosElementCard]&quot;)<br />NLPModelPreamble = nlpExpr(&quot;[@NLPmosfetModelCard]&quot;)<br />hnlHspiceFormatInst = &quot;hnlHspicePrintNMOSfetElement()&quot;<br />hnlHspiceParamList = &quot;hnlHspiceMOSfetParamList&quot;<br />hnlHspiceFormatModel = &quot;hnlHspicePrintMOSfetModel()&quot; </pre>

<p>
<a name="pgfId-1032685"></a>The flat netlister uses expressions defined in the <em>nlpglobals</em> cell to format elements and models. The first two properties, therefore, tell the netlister to format the element and model cards with the N<em>LPnmosElementCard</em> and <em>NLPmosfetModelCard</em> expressions, defined in the <em>hspice</em> view of the <em>nlpglobals</em> cell.</p>
<p>
<a name="pgfId-1032686"></a>For hierarchical netlisting, the element and model cards are formatted using the procedures defined in the <em>hspice</em> formater. For the <em>nmos</em> transistor, these procedures are called <em>hnlHspicePrintNMOSfetElement</em> and <em>hnlHspicePrintMOSfetModel</em>. </p>
<p>
<a name="pgfId-1031936"></a></p>
<p>
<a name="pgfId-1033839"></a></p>

<!-- [TOPIC_END] -->

<p>
<a name="pgfId-1035710"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap2.html" id="prev" title="SPICE Circuit Simulation Interface">SPICE Circuit Simulation Inter ...</a></em></b><b><em><a href="chap4.html" id="nex" title="HSPICE/SPICE Elements">HSPICE/SPICE Elements</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>