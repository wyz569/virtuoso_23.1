
<html><head><title>Code Examples</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sumehta" />
<meta name="CreateDate" content="2023-08-04" />
<meta name="CreateTime" content="1691179180" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes a set of high-level functions for defining simple to complex layout objects and their relationships to each other, without the need to use low-level SKILL language functions." />
<meta name="DocTitle" content="Virtuoso Relative Object Design User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Code Examples" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="roduser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-08-04" />
<meta name="ModifiedTime" content="1691179180" />
<meta name="NextFile" content="appH.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="appF.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Relative Object Design User Guide -- Code Examples" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="roduserIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="roduserTOC.html">Contents</a></li><li><a class="prev" href="appF.html" title="Displaying Pin Names in a Layout Window">Displaying Pin Names in a Layo ...</a></li><li style="float: right;"><a class="viewPrint" href="roduser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="appH.html" title="Troubleshooting">Troubleshooting</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Relative Object Design User Guide<br />Product Version IC23.1, August 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>G
<a id="pgfId-1008781"></a></h1>
<h1>
<a id="pgfId-1034125"></a><hr />
<a id="27167"></a>Code Examples<hr />
</h1>

<p>
<a id="pgfId-1034126"></a>The examples in this appendix show how you might use Virtuoso<sup>&#174;</sup> relative object design (ROD) functions to create some commonly used devices.</p>

<h3>
<a id="pgfId-1025215"></a>Using ROD to Create Multipart Paths</h3>

<p class="webflare-indent1">
<a id="pgfId-1014557"></a><a href="appG.html#17628">Creating a Bus</a></p>
<p class="webflare-indent1">
<a id="pgfId-1014562"></a><a href="appG.html#27917">Creating a Contact Array</a></p>
<p class="webflare-indent1">
<a id="pgfId-1015990"></a><a href="appG.html#42388">Creating a Guard Ring</a></p>
<p class="webflare-indent1">
<a id="pgfId-1015797"></a><a href="appG.html#26222">Creating a Shielded Path</a></p>
<p class="webflare-indent1">
<a id="pgfId-1016469"></a><a href="appG.html#40058">Creating a Transistor</a></p>

<h3>
<a id="pgfId-1025224"></a>Using Stretchable Pcells</h3>

<p class="webflare-indent1">
<a id="pgfId-1025229"></a><a href="appG.html#22356">Stretchable MOS Transistor</a></p>

<h2>
<a id="pgfId-1016475"></a><a id="17628"></a>Creating a Bus</h2>
<p>
<a id="pgfId-1027718"></a></p>
<div class="webflare-div-image">
<img width="668" height="327" src="images/appG-2.gif" /></div>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033284"></a>;; Create a <a id="marker-1033283"></a>b<code>us with 7 offset subpaths<br /></code>procedure( bus(cv layer)<br />    (let (tfId layerWidth layerSpace)<br />        tfId = techGetTechFile(cv)<br />        layerWidth = techGetSpacingRule(tfId &quot;minWidth&quot; layer)<br />        layerSpace = techGetSpacingRule(tfId &quot;minSpacing&quot; layer)<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033850"></a>        rodCreatePath(<br />            ?name            &quot;bus&quot;<br />            ?layer           layer<br />            ?pts             list(20:-20 40:-20 40:-30 80:-30)<br />            ?width           layerWidth<br />            ?justification   &quot;center&quot;<br />            ?cvId            cv<br />            ?offsetSubPath<br />            list(<br />                list(<br />                    ?layer           layer<br />                    ?justification   &quot;left&quot;<br />                    ?sep             layerSpace<br />                ) ;end subpath1<br />                list(<br />                    ?layer           layer<br />                    ?justification   &quot;left&quot;<br />                    ?sep             (layerSpace * 2) + layerWidth<br />                ) ;end subpath2<br />                list(<br />                    ?layer           layer<br />                    ?justification   &quot;left&quot;<br />                    ?sep         (layerSpace * 3) + (layerWidth * 2)<br />                ) ;end subpath3<br />                list(<br />                ?layer           layer<br />                ?justification   &quot;left&quot;<br />                ?sep         (layerSpace * 4) + (layerWidth * 3)<br />                ) ;end subpath4<br />                list(<br />                    ?layer           layer<br />                    ?justification   &quot;left&quot;<br />                    ?sep         (layerSpace * 5) + (layerWidth * 4)<br />                ) ;end subpath5<br />                list(<br />                    ?layer           layer<br />                    ?justification   &quot;left&quot;<br />                    ?sep         (layerSpace * 6) + (layerWidth * 5)<br />                ) ;end subpath6<br />                list(<br />                    ?layer           layer<br />                    ?justification   &quot;left&quot;<br />                    ?sep         (layerSpace * 7) + (layerWidth * 6)<br />                ) ;end subpath7<br />            ) ;end list of lists<br />        ) ;end rodCreatePath<br />    ) ; end of let<br />) ; end of procedure</pre>
<h2>
<a id="pgfId-1015651"></a><a id="27917"></a>Creating a Contact Array</h2>
<p>
<a id="pgfId-1027723"></a></p>
<div class="webflare-div-image">
<img width="668" height="201" src="images/appG-3.gif" /></div>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033398"></a>;; Create a contact array<a id="marker-1033397"></a>procedure(buildCnts(cv layer1 layer2 layer3 width1 width3 length3<br />        pathpnts terminal pinlabel enc offset chop)<br />    ; pinlabel is a boolean that determines whether a label will be<br />    ; created<br />    let( ( fig )<br />    fig = rodCreatePath(<br />        ?cvId cv<br />        ?layer layer1<br />        ?width width1<br />        ?pts pathpnts<br />        ?encSubPath <br />        list( <br />            list(<br />                ?layer           layer2<br />                ?enclosure       enc<br />                ?choppable       chop<br />                ?pin             t<br />                ?termName        terminal<br />                ?pinLabel        pinlabel<br />                ?pinLabelHeight  length3<br />                ?pinLabelLayer   &quot;text&quot;<br />             ) ;end enc sublist1<br />        ); end enc list<br />        ?subRect <br />        list( <br />            list(<br />                ?layer           layer3<br />                ?width           width3<br />                ?length          length3<br />                ?endOffset       offset<br />            ) ;end rect sublist1<br />        ) ;end subRect list<br />    ) ;end rodCreatePath<br />    ) ;end of let<br />) ;end of procedure</pre>
<h2>
<a id="pgfId-1023340"></a><a id="42388"></a>Creating a Guard Ring</h2>
<p>
<a id="pgfId-1027764"></a></p>
<div class="webflare-div-image">
<img width="668" height="320" src="images/appG-4.gif" /></div>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023386"></a>;; Create guard ring<br />;;<br />;; This procedure is an example of how to create a guard ring<br />;; interactively with the layout editor. The sample code assumes that certain<br />;; design rules are already defined in your technology file. This code builds <br />;; three types of guard rings: ndiff, pdiff, and poly.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1024893"></a>;; The arguments for this procedure are all optional.<br />;; If you specify no arguments, the guard ring defaults to ndiff.<br />;; The system prompts you for coordinates and you draw the guard ring <br />;; in the current open window.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023670"></a>;; Optionally, you can also specify the type of material and<br />;; cellview ID, and you can pass in a pointlist.</pre>
<pr-prog id="#id1023407">
<a id="pgfId-1023407"></a></pr-prog>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1024246"></a>procedure(<br />    buildGuardRing(<br />                        @optional (type &quot;ndiff&quot;)<br />                        (winId hiGetCurrentWindow()) <br />                        (pointList nil)<br />                ) ;end buildGuardRing</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1024247"></a>    prog(<br />        ( <br />            cvId tfId botLayNumber topLayNumber viaLayNumber <br />            viaWidth     botOLvia topOLvia botWidth <br />            prompt1 prompt2 buildCnts_info <br />        )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023800"></a>;; Check the cellView. Get the techfile ID.<br />        if(<br />            (cvId = geGetEditCellView(winId)) &amp;&amp; <br />                    cvId-&gt;objType == &quot;cellView&quot; <br />        then<br />            tfId = techGetTechFile(cvId)<br />        else<br />            printf(&quot;Invalid cellView %L\n&quot; cvId)<br />            return()<br />        ) ;end if</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023421"></a>;; Find out what layers to use based on the type of guard ring.<br />        botLayNumber = <br />            case(type<br />                (&quot;ndiff&quot; techGetParam(tfId &quot;ndiff&quot;))<br />                (&quot;pdiff&quot; techGetParam(tfId &quot;pdiff&quot;))<br />                (&quot;poly&quot; techGetParam(tfId &quot;poly&quot;))<br />            ) ;end case<br />        topLayNumber = techGetParam(tfId &quot;metal1&quot;)<br />        viaLayNumber = techGetParam(tfId &quot;cont&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1024934"></a>;; Find the design rules.<br />        viaWidth = techGetSpacingRule(tfId &quot;minWidth&quot; viaLayNumber)<br />        botOLvia = techGetOrderedSpacingRule(<br />                    tfId &quot;minEnclosure&quot; botLayNumber viaLayNumber)<br />        topOLvia = techGetOrderedSpacingRule(<br />                    tfId &quot;minEnclosure&quot; topLayNumber viaLayNumber)<br />        botWidth = (2 * botOLvia) + viaWidth</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023444"></a>;; Build a global variable list for the enter function to use.<br />    buildCnts_info = ncons(nil)<br />        buildCnts_info-&gt;cv =         cvId<br />        buildCnts_info-&gt;layer1 =     botLayNumber<br />        buildCnts_info-&gt;layer2 =     topLayNumber<br />        buildCnts_info-&gt;layer3 =     viaLayNumber<br />        buildCnts_info-&gt;width1 =     botWidth<br />        buildCnts_info-&gt;width3 =     viaWidth<br />        buildCnts_info-&gt;length3 =    viaWidth<br />        buildCnts_info-&gt;pathpnts =   pointList<br />        buildCnts_info-&gt;terminal =   nil<br />        buildCnts_info-&gt;pinlabel =   nil<br />        buildCnts_info-&gt;enc =        (botOLvia - topOLvia)<br />        buildCnts_info-&gt;offset =     -botOLvia<br />        buildCnts_info-&gt;chop =       t</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1024080"></a>;; Prompts for points if points where not passed in.<br />        prompt1 = &quot;Enter the first point in the coordinate list:&quot;<br />        prompt2 = &quot;Enter the next point in the coordinate list:&quot;<br />        enterPath(<br />                    ?prompts list(prompt1 prompt2)<br />                    ?doneProc &quot;guardRingDoneCB&quot;<br />                    ?pathWidth botWidth<br />                    ?points pointList<br />                    ?pathStyle &quot;flush&quot;<br />                ) ;end enterPath</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1024223"></a>        return(t)<br />    ) ;end prog<br />) ;end procedure</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023474"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1026413"></a>;; The following procedure uses a callback from the enterFunction.<br />;; car(args)   = winId          ( Current window )<br />;; cadr(args)  = exitStatus     ( t if applied, nil if canceled )<br />;; caddr(args) = pointList      ( points entered by user )<br />;;<br />;; Use the variable buildCnts_info (define within the buildGuardRing<br />;; procedure above) to contain the layer and design rule information.<br />;;<br />procedure(<br />    guardRingDoneCB(@rest args)<br />    let((pointList)<br />        when(cadr(args) &amp;&amp; (pointList = caddr(args)) &amp;&amp;<br />                                length(pointList) &gt; 1<br />            when(boundp(&#8216;buildCnts_info) &amp;&amp; listp(buildCnts_info)<br />                    length(buildCnts_info) == 14<br />                buildCnts_info-&gt;pathpnts = pointList</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023490"></a>                rodCreatePath(<br />                    ?cvId       buildCnts_info-&gt;cv<br />                    ?layer      buildCnts_info-&gt;layer1<br />                    ?width      buildCnts_info-&gt;width1<br />                    ?pts        buildCnts_info-&gt;pathpnts<br />                    ?choppable  nil<br />                    ?encSubPath list( list(<br />                        ?layer           buildCnts_info-&gt;layer2<br />                        ?enclosure       buildCnts_info-&gt;enc<br />                        ?choppable       buildCnts_info-&gt;chop<br />                        ?pinLabel        buildCnts_info-&gt;pinlabel<br />                        ?pinLabelHeight  buildCnts_info-&gt;length3<br />                        ?pinLabelLayer   buildCnts_info-&gt;pinlabel<br />                                    ) ) ;end encSubpath lists<br />                    ?subRect list( list(<br />                        ?layer           buildCnts_info-&gt;layer3<br />                        ?width           buildCnts_info-&gt;width3<br />                        ?length          buildCnts_info-&gt;length3<br />                        ?endOffset       buildCnts_info-&gt;offset<br />                                    ) ) ;end of subRect lists<br />                ) ;end of rodCreatePath</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023511"></a>            ) ;end of 1st when<br />        ) ;end of 2nd when<br />    ) ;end of let<br />) ;end of procedure</pre>
<h2>
<a id="pgfId-1015910"></a><a id="26222"></a>Creating a Shielded Path</h2>
<p>
<a id="pgfId-1027781"></a></p>
<div class="webflare-div-image">
<img width="668" height="322" src="images/appG-5.gif" /></div>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1018585"></a>;; Create a shielded path<a id="marker-1019988"></a>procedure( shieldedPath(cv)
&#160;&#160;&#160;&#160;errset(
&#160;&#160;&#160;&#160;(let (tfId)<br />        rodCreatePath(<br />            ?name           &quot;shieldedPath&quot;<br />            ?layer          &quot;metal1&quot;<br />            ?pts            list(2:-15 2:-5 15:-5 15:-15)<br />            ?width          .8<br />            ?justification  &quot;center&quot;<br />            ?cvId cv<br />            ?offsetSubPath<br />            list(<br />                list(<br />                    ?layer          &quot;vapox&quot;<br />                    ?justification   &quot;left&quot;                    <br />                    ?sep             1<br />                    ?width           .4<br />                ) ;end of offset sublist1<br />                list(<br />                    ?layer           &quot;vapox&quot;<br />                    ?justification   &quot;right&quot;                    <br />                    ?sep             1<br />                    ?width           .4<br />                ) ;end of offset sublist2<br />            ) ;end of offset list of lists<br />        ) ;end of rodCreatePath<br />    ) ; end of let<br />    t<br />    ) ; end of errset<br />) ; end of procedure</pre>
<h2>
<a id="pgfId-1018604"></a><a id="40058"></a>Creating a Transistor</h2>
<p>
<a id="pgfId-1027782"></a></p>
<div class="webflare-div-image">
<img width="668" height="313" src="images/appG-6.gif" /></div>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025037"></a>;; Create a gate<a id="marker-1025036"></a>procedure( tran(cv w l name)<br />    let((tfId pext pcs pds cw cs m1oc doc grid ptslist tran)<br />        tfId = techGetTechFile(cv)<br />        pext = techGetSpacingRule(tfId &quot;minExtension&quot; &quot;poly&quot;)<br />        pcs = techGetSpacingRule(tfId &quot;minSpacing&quot; &quot;poly&quot; &quot;cont&quot;)<br />        pds = techGetSpacingRule(tfId &quot;minSpacing&quot; &quot;poly&quot; &quot;ndiff&quot;)<br />        cw = techGetSpacingRule(tfId &quot;minWidth&quot; &quot;cont&quot;)<br />        cs = techGetSpacingRule(tfId &quot;minSpacing&quot; &quot;cont&quot;)<br />        m1oc = techGetOrderedSpacingRule(tfId &quot;minEnclosure&quot;<br />                &quot;metal1&quot; &quot;cont&quot;)<br />        doc = techGetOrderedSpacingRule(tfId &quot;minEnclosure&quot; <br />                &quot;ndiff&quot; &quot;cont&quot;)<br />        grid = techGetMfgGridResolution(tfId)<br />        ptslist = list(0:0 0:(w + 2 * pext))<br />        tran = rodCreatePath(<br />                    ?name            name<br />                    ?layer           &quot;poly&quot;<br />                    ?pts             ptslist<br />                    ?width           l    <br />                    ?termName        &quot;G&quot;<br />                    ?justification   &quot;center&quot;<br />                    ?cvId            cv<br />                    ?offsetSubPath<br />                    list(<br />                        list(<br />                            ?layer           &quot;poly&quot;<br />                            ?beginOffset     0.0<br />                            ?endOffset       -(pext + w + pds)<br />                            ?width           l<br />                            ?pin             t<br />                            ?termName        &quot;G&quot;<br />                        ) ;end of offset sublist1<br />                        list(<br />                            ?layer           &quot;poly&quot;<br />                            ?beginOffset     -(pext + w + pds)<br />                            ?endOffset       0.0<br />                            ?width           l<br />                            ?pin             t<br />                            ?termName        &quot;G&quot;<br />                        ) ;end of offset sublist2<br />                        list(<br />                            ?layer           &quot;metal1&quot;<br />                            ?justification   &quot;left&quot;<br />                            ?sep             pcs - m1oc<br />                            ?beginOffset     m1oc - pext - doc <br />                            ?endOffset       m1oc - pext - doc<br />                            ?width           cw + 2 * m1oc<br />                            ?pin             t<br />                            ?termName        &quot;S&quot;<br />                        ) ;end of offset sublist3<br />                        list(<br />                            ?layer           &quot;metal1&quot;<br />                            ?justification   &quot;right&quot;<br />                            ?sep             pcs - m1oc<br />                            ?beginOffset     m1oc - pext - doc<br />                            ?endOffset       m1oc - pext - doc<br />                            ?width           cw + 2 * m1oc<br />                            ?pin             t<br />                            ?termName        &quot;D&quot;<br />                        ) ;end of offset sublist4<br />                        list(<br />                            ?layer           &quot;ndiff&quot;<br />                            ?justification   &quot;left&quot;<br />                            ?sep             0.0<br />                            ?beginOffset     -pext<br />                            ?endOffset       -pext<br />                            ?width           doc + cw + pcs<br />                            ?termName        &quot;S&quot;<br />                        ) ;end of offset sublist5<br />                        list(<br />                            ?layer           &quot;ndiff&quot;<br />                            ?justification   &quot;left&quot;<br />                            ?sep             0.0<br />                            ?beginOffset     -pext<br />                            ?endOffset       -pext<br />                            ?width           2 * grid<br />                            ?pin             t<br />                            ?termName        &quot;S&quot;<br />                        ) ;end of offset sublist6<br />                        list(<br />                            ?layer           &quot;ndiff&quot;<br />                            ?justification   &quot;right&quot;<br />                            ?sep             0.0<br />                            ?beginOffset     -pext<br />                            ?endOffset       -pext<br />                            ?width           doc + cw + pcs<br />                            ?termName        &quot;D&quot;<br />                        ) ;end of offset sublist7<br />                        list(<br />                            ?layer           &quot;ndiff&quot;<br />                            ?justification   &quot;right&quot;<br />                            ?sep             0.0<br />                            ?beginOffset     -pext<br />                            ?endOffset       -pext<br />                            ?width           2 * grid<br />                            ?pin             t<br />                            ?termName        &quot;D&quot;<br />                        ) ;end of offset sublist8<br />                    )<br />                    ?subRect<br />                        list(<br />                            list(<br />                                ?layer &quot;cont&quot;<br />                                ?length cw<br />                                ?width cw<br />                                ?space cs<br />                                ?justification &quot;left&quot;<br />                                ?sep pcs <br />                                ?beginOffset -(pext + doc)<br />                                ?endOffset -(pext + doc)<br />                            ) ;end of subRect sublist1<br />                            list(<br />                                ?layer &quot;cont&quot;<br />                                ?length cw<br />                                ?width cw<br />                                ?space cs<br />                                ?justification &quot;right&quot;<br />                                ?sep pcs<br />                                ?beginOffset -(pext + doc)<br />                                ?endOffset -(pext + doc)<br />                            ) ;end of subRect sublist2<br />                        ) ;end of subRect list of lists<br />                ) ;end of rodCreatePath<br />    ) ;end of let<br />) ;end of procedure</pre>
<h2>
<a id="pgfId-1020439"></a><a id="29934"></a>Getting the Resistance for a ROD Path<a id="marker-1021395"></a></h2>

<p>
<a id="pgfId-1020455"></a>The following procedures create and update a user-defined handle for the <a id="marker-1021484"></a>resistance of a ROD <a id="marker-1021401"></a>path. All three procedures require the ROD object ID (<code>rodId</code>) as input.</p>
<table class="webflareTable" id="#id1035627">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1035629"></a><code>getRodPathLength</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1035631"></a>Goes through the list of points in a ROD path and adds up the <a id="marker-1035640"></a>lengths of the segments.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1035633"></a><code>getRodPathRes</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1035635"></a>Gets the length and sheet <a id="marker-1035641"></a>resistance values for a ROD path and calculates the resistance.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1035637"></a><code>createResHandle</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1035639"></a>Creates or recalculates a user-defined handle for the resistance (<code>res</code>) of a ROD path.</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-1020956"></a>When you calculate the resistance of a ROD path from within a Pcell, you only need to execute the <code>createResHandle</code> procedure once inside the Pcell because the geometries in a Pcell are recreated every time the Pcell is evaluated. </p>
<p>
<a id="pgfId-1023219"></a>When you calculate the resistance of a ROD path from outside a Pcell, such as in an open cellview window, you must update the resistance handle (<code>res</code>) by executing the <code>createResHandle</code> procedure in the Command Interpreter Window whenever you make a change to the ROD path, such as stretching or chopping it.</p>

<h3>
<a id="pgfId-1023223"></a><a id="getRodPathLength"></a>getRodPathLength <a id="marker-1023221"></a>Procedure<a id="marker-1023222"></a></h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023235"></a>;; This procedure goes through the list of points in a ROD path <br />;; and adds the lengths of the segments. Returns the total length.<br />;;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023236"></a>procedure(getRodPathLength(rodId)
    let(
            (
                (total_length 0)
            ) ;end variables for let
            for(i 0 (rodId~&gt;numSegments - 1)
                total_length = total_length +
                    rodGetHandle(rodId
&#160;&#160;&#160;&#160;    symbolToString(concat(&quot;length&quot; i)))<br />            ) ;end of for<br />            total_length<br />    ) ;end of let<br />) ;end of procedure</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1023238"></a><a id="getRodPathRes"></a>getRodPathRes Procedure</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020701"></a>;; This procedure gets the length and sheet resolution values for<br />;; a ROD path, then calculates and returns the resistance.<br />;; Remember to load the procedure getRodPathLength</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021215"></a>procedure(getRodPathRes(rodId)<br />    let(( corner_value sheet_res path_width num_segs num_corners<br />      total_length num_squares )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021216"></a>      ;; Percentage of a square. Usually, values from 0.5 to 0.65 <br />      ;; are used for corner resistance. The rodPcells sample library<br />      ;; uses .559 for corner resistance, so that value is used here.<br />      ;; Adjust the value of corner_value to suit your needs.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021188"></a>    corner_value = .559</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020714"></a>      ;; Get the sheet resistance for the current layer.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021205"></a>    sheet_res = techGetElectricalRule(techGetTechFile(rodId~&gt;cvId)<br />      &quot;sheetRes&quot; rodId~&gt;dbId~&gt;layer)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020718"></a>      ;; Get path width, number of segments, number of corners,<br />      ;; and total path length.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020719"></a>    path_width = rodId~&gt;dbId~&gt;width<br />    num_segs = rodId~&gt;numSegments<br />    num_corners = num_segs - 1<br />    total_length = getRodPathLength(rodId)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020724"></a>      ;; Now compute the number of squares of resistance material<br />      ;; and calculate the total resistance value.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021234"></a>    num_squares = (total_length / path_width) -<br />                     (num_corners * corner_value)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020729"></a>      ;; Return the resistance value.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020730"></a>      num_squares * sheet_res</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021273"></a>  ) ;end of let<br />) ;end of procedure<br /></pre>
<h3>
<a id="pgfId-1021252"></a><a id="createResHandle"></a>createResHandle Procedure</h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020734"></a>;; This procedure creates or updates the value of a user-defined <br />;; resistance handle (&quot;res&quot;) for a ROD path, and returns the <br />;; resistance value.<br />;;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1020737"></a>procedure(createResHandle(rodId)<br />   let((res)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021301"></a>     when(rodId~&gt;dbId~&gt;objType == &quot;path&quot; &amp;&amp; <br />                                 (res = getRodPathRes(rodId))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021298"></a>        when((rodHandle = rodGetHandle(rodId &quot;res&quot;))<br />                          rodDeleteHandle(rodId &quot;res&quot;)<br />        ) ;end of 2nd when</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021290"></a>        rodCreateHandle(<br />             ?rodObj         rodId<br />             ?name           &quot;res&quot;<br />             ?type           &quot;float&quot;<br />             ?value          res<br />         ) ;end of rodCreateHandle</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021299"></a>       ) ;end of 1st when</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1021300"></a>  ) ;end of let<br />) ;end of procedure</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1027184"></a></pre>
<h2>
<a id="pgfId-1025104"></a><a id="22356"></a>Stretchable MOS<a id="mosTransistorPcell"></a> Transistor</h2>
<p>
<a id="pgfId-1027783"></a></p>
<div class="webflare-div-image">
<img width="668" height="274" src="images/appG-7.gif" /></div>

<p>
<a id="pgfId-1025258"></a>This is an example of a simple MOS transistor with stretchable contact arrays and user-defined functions.This code might not work with your technology file, but you can modify the code as desired. For more complex MOS code examples, see the<h-hot /><em><a actuate="user" class="URL" href="../pclib/pclibTOC.html#firstpage" show="replace" xml:link="simple">Sample Parameterized Cells Installation and Reference</a></em>. </p>
<p>
<a id="pgfId-1027649"></a>The parameters for the sample mos transistor Pcell are specified as follows:</p>

<p>
<a id="pgfId-1034041"></a></p>
<table class="webflareTable" id="#id1027606">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1027608">
<a id="pgfId-1027608"></a>Parameter Name</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1027610">
<a id="pgfId-1027610"></a>Default Value</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1027612">
<a id="pgfId-1027612"></a>Parameter Description</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027614"></a><code>w</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027616"></a>1.3</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027618"></a>Width of gate</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027620"></a><code>l</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027622"></a>0.25</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027624"></a>Length of gate</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027626"></a><code>leftcov</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027628"></a>1.0</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027630"></a>Left contact coverage</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027632"></a><code>rightcov</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027634"></a>1.0</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027636"></a>Right contact coverage</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027638"></a><code>leftPos</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027640"></a>&quot;top&quot;</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027642"></a>Position of left contacts</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027644"></a><code>rightPos</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027646"></a>&quot;top&quot;</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1027648"></a>Position of right contacts</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1027655"></a>Stretch handles are assigned to the transistor Pcell as follows:</p>
<ul><li>
<a id="pgfId-1027656"></a>To make the source contacts stretchable, the <code>upperCenter</code> and <code>lowerCenter</code> point handles on the source contact array are assigned to the Pcell parameter <code>leftcov</code> with the stretch type <code>relative</code> and the stretch direction <code>Y</code>. </li><li>
<a id="pgfId-1027657"></a>To make the drain contacts stretchable, the <code>upperCenter</code> and <code>lowerCenter</code> point handles on the drain contact array are assigned to the Pcell parameter <code>rightcov</code> with the stretch type <code>relative</code> and the stretch direction <code>Y</code>.<br />
<a id="pgfId-1027702"></a><div class="webflare-div-image">
<img width="668" height="254" src="images/appG-8.gif" /></div></li></ul>




<h3>
<a id="pgfId-1027483"></a>Code for simplemos Transistor</h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025929"></a>devices(<br />tcCreateDeviceClass(&quot;layout&quot; &quot;simplemos&quot; <br />    ; class parameter name value pairs<br />      ( ( xtrType &quot;ndiff&quot; ) )<br />    ; formal parameters (name-value pairs)<br />    (<br />        (w           1.3)<br />        (l           0.25)<br />        (leftcov     1.0)<br />        (rightcov    1.0)<br />        (leftPos     &quot;top&quot;)<br />        (rightPos    &quot;top&quot;)<br />    ) ; end formal parameters<br />        </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025285"></a>    ; access controls techfile class for layout design rules <br />    ; and layer info<br />    tfId = techParam(&quot;tfId&quot;)<br />    poly = techParam(&quot;poly&quot;)         ; poly layer number<br />    diff = techParam(xtrType)        ; xtrType diff layer number<br />    contact = techParam(&quot;cont&quot;)      ; cont layer number<br />    metal1 = techParam( &quot;metal1&quot;)    ; metal1 layer number<br />    pext = techGetSpacingRule(tfId &quot;minExtension&quot; poly)<br />    pcs = techGetSpacingRule(tfId &quot;minSpacing&quot; poly contact)<br />    cw = techGetSpacingRule(tfId &quot;minWidth&quot; contact)<br />    cs = techGetSpacingRule(tfId &quot;minSpacing&quot; contact)<br />    m1oc = techGetOrderedSpacingRule(tfId &quot;minEnclosure&quot; metal1 <br />            contact)<br />    doc = techGetOrderedSpacingRule(tfId &quot;minEnclosure&quot; diff <br />            contact)<br />    dop = techGetOrderedSpacingRule(tfId &quot;minEnclosure&quot; diff poly)<br />    pps = techGetSpacingRule(tfId &quot;minSpacing&quot; poly )<br />    grid = techGetMfgGridResolution(tfId)<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033829"></a>    ;************* draw gate with connectivity *************</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1027489"></a>    gate = rodCreateRect(<br />                ?layer           poly<br />                ?length          w + (2 * pext)<br />                ?width           l<br />    ) ; end gate rodCreateRect<br />    topPin = rodCreateRect(<br />                ?layer           poly<br />                ?length          pext<br />                ?width           l<br />                ?termName        &quot;G&quot;<br />                ?pin             t<br />    ) ; end topPin rodCreateRect<br />    botPin = rodCreateRect(<br />                ?layer           poly<br />                ?length          pext<br />                ?width           l<br />                ?termName        &quot;G&quot;<br />                ?pin             t<br />    ); end botrodCreateRectPin <br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033830"></a>    dbReplaceProp(gate~&gt;dbId &quot;lxBlockOverlapCheck&quot; &quot;boolean&quot; t)<br />    rodAlign(<br />                ?refObj          gate<br />                ?refHandle       &quot;lowerLeft&quot;<br />                ?alignObj        botPin<br />                ?alignHandle     &quot;lowerLeft&quot;<br />    ) ; end rodAlign<br />    rodAlign(<br />                ?refObj          gate<br />                ?refHandle       &quot;upperLeft&quot;<br />                ?alignObj        topPin<br />                ?alignHandle     &quot;upperLeft&quot;<br />    ) end rodAlign<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033832"></a>    ; ******** draw source contacts and source diffusion*************</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025336"></a>    metOvDiff = doc - m1oc<br />    metOvPoly = pcs - m1oc<br />    cntsw = w - (2*doc)<br />    length = ((cntsw + (2*m1oc)) * leftcov/grid)*grid<br />    minLength = cw + (2 * m1oc)<br />    when(length &lt; minLength<br />        length = minLength<br />    ) ; end when<br />    leftCnts = rodCreatePath(<br />                ?layer           metal1<br />                ?width           (2*m1oc)+cw<br />                ?pts         list(0:0 0:length)<br />                ?justification &quot;center&quot;<br />                ?subRect list( list(<br />                            ?layer      contact<br />                            ?length     cw<br />                            ?width      cw<br />                            ?space      cs<br />                            ?endOffset  -m1oc<br />                        )) ; end subrect list<br />                    ?termName            &quot;S&quot;<br />                    ?pin                 t<br />                ) ; end leftCnts rodCreatePath<br />    leftDiff = rodCreateRect(<br />                     ?layer      diff<br />                     ?width      cw + doc + pcs + l/2<br />                     ?length      w<br />                ) ; end leftDiff rodCreatePath<br />    rodAlign(<br />                ?refObj          gate<br />                ?refHandle       &quot;cC&quot;<br />                ?alignObj        leftDiff<br />                ?alignHandle     &quot;cR&quot;<br />    ) ; end rodAlign<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033836"></a>    ; ******** make source contacts stretchable *********    </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025372"></a>    ; The user-defined function &quot;contcov&quot; sets a range for the<br />    ; contacts from a 100% coverage to minimum contact width<br />    rodAssignHandleToParameter(<br />                ?parameter       &quot;leftcov&quot;<br />                ?rodObj          leftCnts<br />                ?handleName      list(&quot;upperCenter&quot; &quot;lowerCenter&quot;)<br />                ?displayName     &quot;leftcov&quot;<br />                ?stretchDir      &quot;y&quot;<br />                ?stretchType     &quot;relative&quot;<br />                ?userFunction    &quot;contcov&quot;<br />    ) ; end rodAssignHandleToParameter<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033837"></a>    ; ******** set source contact alignment *********</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025385"></a>    ; This is an example where rodAssignHandleToParameter is<br />    ; being used to set a parameter value and where no display <br />    ; is required.<br />    ; The userfunction &quot;mystretch&quot; checks which handle is<br />    ; currently being stretched and then returns the location<br />    ; where the contacts should be aligned, either to the top <br />    ; or bottom.<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033838"></a>    rodAssignHandleToParameter(<br />                ?parameter       &quot;leftPos&quot;<br />                ?rodObj          leftCnts<br />                ?handleName      list(&quot;upperCenter&quot; &quot;lowerCenter&quot;)<br />                ?stretchType     &quot;relative&quot;<br />                ?userFunction    &quot;mystretch&quot;<br />    ) ; end rodAssignHandleToParameter<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033839"></a>    case( leftPos<br />            (&quot;top&quot;<br />                rodAlign(<br />                        ?refObj          gate<br />                        ?refHandle       &quot;uL&quot;<br />                        ?alignObj        leftCnts<br />                        ?alignHandle     &quot;uR&quot;<br />                        ?xSep            -metOvPoly<br />                        ?ySep            -(pext + metOvDiff)<br />                ) ; end rodAlign<br />            ) ; end top<br />            (&quot;bottom&quot;<br />                rodAlign(<br />                        ?refObj          gate<br />                        ?refHandle       &quot;lowerLeft&quot;<br />                        ?alignObj        leftCnts<br />                        ?alignHandle     &quot;lowerRight&quot;<br />                        ?xSep            -metOvPoly<br />                        ?ySep            pext + metOvDiff<br />                ); end rodAlign<br />            ) ; end bottom<br />        ); end case<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033827"></a>    ; ******** draw drain contacts and drain diffusion*************</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1026198"></a>    length = ((cntsw + (2*m1oc)) * rightcov/grid)*grid<br />    when(length &lt; minLength<br />        length = minLength<br />    ) ; end when<br />    rightCnts = rodCreatePath(<br />                    ?layer           metal1<br />                    ?width          (2*m1oc)+cw<br />                    ?pts            list(0:0 0:length)<br />                    ?justification  &quot;center&quot;<br />                    ?subRect        list( list(<br />                                    ?layer         contact<br />                                    ?length        cw<br />                                    ?width         cw<br />                                    ?space         cs<br />                                    ?endOffset     -m1oc<br />                                    )) ; end subrect lists<br />                    ?termName        &quot;D&quot;<br />                    ?pin             t<br />                ) ; end rightCnts rodCreatePath<br />    rightDiff = rodCreateRect(<br />                    ?layer           diff<br />                    ?width           pcs + cw + doc + l/2<br />                    ?length          w<br />                ) ; end rightDiff rodCreatePath<br />    rodAlign(<br />                ?refObj          gate<br />                ?refHandle       &quot;cC&quot;<br />                ?alignObj        rightDiff<br />                ?alignHandle     &quot;cL&quot;<br />    ) ; end rodAlign<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033843"></a>    ; ******** make drain contacts stretchable *********</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025454"></a>    rodAssignHandleToParameter(<br />                ?parameter       &quot;rightcov&quot;<br />                ?rodObj          rightCnts<br />                ?handleName      list(&quot;upperCenter&quot; &quot;lowerCenter&quot;)<br />                ?displayName     &quot;rightcov&quot;<br />                ?stretchDir      &quot;y&quot;<br />                ?stretchType     &quot;relative&quot;<br />                ?userFunction    &quot;contcov&quot;<br />    ) ; end rodAssignHandleToParameter<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033844"></a>    ; ******** set drain contact alignment *********</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025877"></a>    rodAssignHandleToParameter(<br />                ?parameter       &quot;rightPos&quot;<br />                ?rodObj          rightCnts<br />                ?handleName      list(&quot;upperCenter&quot; &quot;lowerCenter&quot;)<br />                ?stretchType     &quot;relative&quot;<br />                ?userFunction    &quot;mystretch&quot;<br />    ) ; end rodAssignHandleToParameter<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033845"></a>    case( rightPos<br />        (&quot;top&quot;<br />            rodAlign(<br />                     ?refObj         gate<br />                     ?refHandle      &quot;uR&quot;<br />                     ?alignObj       rightCnts<br />                     ?alignHandle     &quot;uL&quot;<br />                     ?xSep           metOvPoly<br />                     ?ySep -(pext + metOvDiff)<br />            ) ; end rodAlign<br />        ) ; end top<br />        (&quot;bottom&quot;<br />            rodAlign(<br />                     ?refObj          gate<br />                     ?refHandle       &quot;lowerRight&quot;<br />                     ?alignObj        rightCnts<br />                     ?alignHandle     &quot;lowerLeft&quot;<br />                     ?xSep            metOvPoly<br />                     ?ySep            pext + metOvDiff<br />            ) ; end rodAlign<br />        ); end bottom<br />    ); end case<br />) ; end tcCreateDeviceClass<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033851"></a>; Declare a cvs of device class simplemos called simplepmos <br />; and simplenmos<br />tcDeclareDevice( <br />                &quot;layout&quot; <br />                &quot;simplemos&quot; <br />                &quot;simplepmos&quot; <br />                ( ( xtrType &quot;pdiff&quot; ) ) <br />) ; end tcDeclareDevice<br />tcDeclareDevice( <br />                &quot;layout&quot; <br />                &quot;simplemos&quot; <br />                &quot;simplenmos&quot; <br />                ( ( xtrType &quot;ndiff&quot; ) ) <br />) ; end tcDeclareDevice<br />) ; end devices</pre>
<h3>
<a id="pgfId-1025501"></a>Code for contcov User-Defined Function<a id="contcov"></a></h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1025933"></a>;; contcov is a user-defined function specified for the pcell created <br />;; by simplemos.il.<br />; The user-defined function &quot;contcov&quot; sets a range for the contacts <br />; from 100% coverage to minimum contact width for the layer from the <br />; technology file.<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033852"></a>procedure( contcov(myDefstruct)<br />    let(((returnVal myDefstruct-&gt;paramVal + myDefstruct-&gt;increment)<br />     tfId metal1 contact m1oc cw length minLength) <br />     tfId = techGetTechFile((myDefstruct-&gt;rodObj)~&gt;cvId)<br />     metal1 = techGetParam(tfId &quot;metal1&quot;)<br />     contact = techGetParam(tfId &quot;cont&quot;)<br />     m1oc = techGetOrderedSpacingRule(tfId &quot;minEnclosure&quot; <br />                metal1 contact)<br />     cw = techGetSpacingRule(tfId &quot;minWidth&quot; contact)<br />     length = (myDefstruct-&gt;rodObj)~&gt;length * returnVal   <br />    minLength = cw + 2*m1oc<br />    when(returnVal &gt; 1.0 || length &lt; minLength <br />         progn(warn(&quot;returnVal for parameter %s must be &lt; 1<br />                or &gt; %f\n&quot; myDefstruct-&gt;parameter cw)<br />            if(returnVal &gt; 1.0 then<br />                 returnVal = 1.0<br />            else<br />                 returnVal = cw<br />             ) ; endif<br />        ) ; end progn<br />    ) ; end when<br />    returnVal<br />  ) ; end of let<br />) ; end of procedure</pre>
<h3>
<a id="pgfId-1026529"></a>Code for myStretch User-Defined Function<a id="myStretch"></a></h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1026501"></a>;; myStretch.il is a user-defined function specified for the pcell <br />;; created by simplenmos.il.<br />; The user-defined function &quot;mystretch&quot; checks which handle is<br />; currently being stretched and then returns the location where<br />; the contacts should be aligned, either to the top or bottom.<br /></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033853"></a>procedure( mystretch(myDefstruct)<br />    let( (leftPos)<br />              if(myDefstruct-&gt;handleName == &quot;upperCenter&quot;  <br />            then<br />                 leftPos = &quot;bottom&quot;<br />            else<br />                 leftPos = &quot;top&quot;<br />            ) ; endif<br />    myDefstruct-&gt;paramValue = leftPos<br />    ) ;end let <br />) ; end procedure</pre>
<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="appF.html" id="prev" title="Displaying Pin Names in a Layout Window">Displaying Pin Names in a Layo ...</a></em></b><b><em><a href="appH.html" id="nex" title="Troubleshooting">Troubleshooting</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160; </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>