
<html><head><title>Learning More about the Cosimulation Interface</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="shubh" />
<meta name="CreateDate" content="2023-06-13" />
<meta name="CreateTime" content="1686640362" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to cosimulate a system containing analog and mixed-signal subsystems using the Virtuoso AMS Designer simulator and MathWorks MATLAB/Simulink" />
<meta name="DocTitle" content="Spectre AMS Designer Cosimulation with MathWorks MATLAB/Simulink" />
<meta name="DocType" content="Getting Started" />
<meta name="FileTitle" content="Learning More about the Cosimulation Interface" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="amsdMatSim" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-06-13" />
<meta name="ModifiedTime" content="1686640362" />
<meta name="NextFile" content="troubleshooting.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design,Custom IC Design" />
<meta name="PrevFile" content="tutorial4.html" />
<meta name="c_product" content="AMS Designer,Virtuoso Analog Design Environment" />
<meta name="Product" content="AMS Designer,Virtuoso Analog Design Environment" />
<meta name="ProductFamily" content="AMS Designer,Virtuoso Analog Design Environment" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer Cosimulation with MathWorks MATLAB/Simulink -- Learning More about the Cosimulation Interface" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="amsdMatSimIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="amsdMatSimTOC.html">Contents</a></li><li><a class="prev" href="tutorial4.html" title="Running Cosimulation from the Spectre AMS Designer Environment">Running Cosimulation from the  ...</a></li><li style="float: right;"><a class="viewPrint" href="amsdMatSim.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="troubleshooting.html" title="Troubleshooting">Troubleshooting</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre AMS Designer Cosimulation with MathWorks MATLAB/Simulink<br />Product Version IC23.1, June 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>A
<a id="pgfId-1032955"></a></h1>
<h1>
<a id="pgfId-1035250"></a><hr />
<a id="45825"></a>Learning More about the Cosimulation Interface<hr />
</h1>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1037049"></a><em>AMS-MATLAB/Simulink cosimulation</em> stands for cosimulation using the Spectre AMS Designer simulator and The MathWorks MATLAB<sup>&#174;</sup>/Simulink<sup>&#174;</sup>. <em>ADE</em> stands for the Virtuoso Analog Design Environment. </div>
<p>
<a id="pgfId-1040332"></a>The following topics provide additional information about the AMS-MATLAB/Simulink cosimulation interface: </p>
<ul><li>
<a id="pgfId-1041055"></a><a href="learningMore.html#28294">Using Framed and Unframed Signals</a> </li><li>
<a id="pgfId-1041288"></a><a href="learningMore.html#88339">Running Event-Based and Fixed-Rate Simulation</a> </li><li>
<a id="pgfId-1042477"></a><a href="learningMore.html#55006">Using the Coupler Module in Feedback Loops</a> </li><li>
<a id="pgfId-1042629"></a><a href="learningMore.html#37174">Running AMS-MATLAB/Simulink Cosimulation on Other Platforms</a> </li></ul>




<h2>
<a id="pgfId-1042480"></a><a id="28294"></a>Using Framed and Unframed Signals</h2>

<p>
<a id="pgfId-1042481"></a>Simulink provides different testbenches for framed and unframed data. </p>
<p>
<a id="pgfId-1041079"></a>To open the <code>tb_sine</code> configuration, do the following in the CIW: </p>
<ol><li>
<a id="pgfId-1041080"></a>Choose <em>File &#8211; Open</em>. <br />
<a id="pgfId-1041095"></a>The File Open form appears. </li><li>
<a id="pgfId-1041096"></a>In the <em>File</em> group box, select the following: <br />
<a id="pgfId-1041114"></a><table class="webflareTable" id="#id1041097">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1041099">
<a id="pgfId-1041099"></a>Field</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1041101">
<a id="pgfId-1041101"></a>Selection</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041103"></a><em>Library</em> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041105"></a><em> AMSDcouple</em> </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041107"></a><em>Cell</em> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041109"></a><em> tb_sine</em> </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041111"></a><em>View</em> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041113"></a><em> config</em> </p>
</td>
</tr>
</tbody></table></li><li>
<a id="pgfId-1041126"></a>Click <em>OK</em>. <br />
<a id="pgfId-1041127"></a>The Open Configuration form appears. </li><li>
<a id="pgfId-1041132"></a>In the <em>Open for editing</em> group box, selet <em>yes</em> for both <em>Configuration</em> and <em>Top Cell View</em>. <br />
<a id="pgfId-1042491"></a><div class="webflare-div-image">
<img src="images/DoOpenConfig.gif" /></div></li><li>
<a id="pgfId-1041153"></a>Click <em>OK</em>. <br />
<a id="pgfId-1041090"></a>The configuration appears in the Viruoso<sup>&#174;</sup> Hierarchy Editor. The schematic appears in the schematic editor. </li></ol>





















<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1045047"></a>To run the AMSD MATLAB cosimulation, ensure that the config view for AMS simulation is saved and its hierarchy is updated.</div>
<p>
<a id="pgfId-1045590"></a>Ensure the following:</p>
<ul><li>
<a id="pgfId-1045668"></a>The model files, if required, are set correctly.</li><li>
<a id="pgfId-1045633"></a>Connect Modules/Rules are available with their definitions.</li><li>
<a id="pgfId-1045740"></a>MATLAB/Simulink startup settings are defined correctly.</li></ul>





<p>
<a id="pgfId-1041067"></a>To start the AMS Designer simulation, do the following in the Hierarchy Editor: </p>
<ol><li>
<a id="pgfId-1041171"></a>Choose <em>Plugins &#8211; AMS</em>. <br />
<a id="pgfId-1041071"></a><em>AMS</em> appears on the menu banner. You must initialize a run directory before you can access any of the <em>AMS</em> menu selections. </li><li>
<a id="pgfId-1042516"></a>Choose <em>AMS &#8211; Initialize</em>. </li><li>
<a id="pgfId-1042525"></a>Fill out the form and click <em>OK</em>. </li><li>
<a id="pgfId-1042529"></a>Choose <em>AMS &#8211; Netlist and Run Options</em>. </li><li>
<a id="pgfId-1042542"></a>(Optional) On the Netlist and Run Options form, click <em>Save/Plot</em> to select signals to plot.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1045434"></a>Ensure that <em>AMS Unified Netlister with xrun (recommended)</em> is selected on this form.</div></li><li>
<a id="pgfId-1042530"></a>Click <em>Run</em>. </li></ol>










<h3>
<a id="pgfId-1040957"></a><a id="88302"></a>Using the Sine Testbench with Unframed Coupling</h3>

<p>
<a id="pgfId-1040958"></a>To open the <em>Sine Testbench</em> (<em>unframed signals</em>) from the Simulink library, do the following: </p>
<ol><li>
<a id="pgfId-1041300"></a>In the MATLAB Command Window, type the following command to open the library: <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1041301">
<a id="pgfId-1041301"></a>open SimCouplerLib.mdl </pre><br />
<a id="pgfId-1041308"></a><div class="webflare-div-image">
<img width="635" height="450" src="images/learningMore-3.gif" /></div></li><li>
<a id="pgfId-1041309"></a>Double-click <em>Sine Testbench (unframed signals)</em>. </li><li>
<a id="pgfId-1041354"></a>In the testbench schematic window, double-click the <em>SimulinkCoupler</em> to view its parameters. <br />
<a id="pgfId-1041382"></a><div class="webflare-div-image">
<img src="images/sine_tb_params.gif" /></div>
<a id="pgfId-1041410"></a>This <em>SimulinkCoupler</em> supports event-driven simulation and fixed-rate synchronization. </li></ol>












<p>
<a id="pgfId-1041453"></a>For event-based simulation: </p>
<ul><li>
<a id="pgfId-1041372"></a>The <em>Frame mode</em> is <em>unframed</em> and the <em>Frame size</em> field is inactive. </li><li>
<a id="pgfId-1041437"></a>The coupler module sends data to AMS Designer after each change of its input signal. </li><li>
<a id="pgfId-1041438"></a>In SimVision, you would see the sine wave as the sources generate it. </li><li>
<a id="pgfId-1041443"></a>The sampling time of all sine sources in Simulink is 1e-6, by default. You can change the sampling time on the Function Block Parameters form (by typing a value in the <em>Sample time</em> field) and view the changes in synchronization. </li></ul>



<p>
<a id="pgfId-1040967"></a>For fixed-rate synchronization: </p>
<ol><li>
<a id="pgfId-1041466"></a>Specify a <em>Sample time</em> of <code>10e-6</code> to sample the signal at 100 kHz. <br />
<a id="pgfId-1040968"></a>This value satisfies the sampling theorem since the highest sine frequency is 20 kHz. </li><li>
<a id="pgfId-1040969"></a>Choose <em>Simulation &#8211; Start</em> to start the Simulink simulation. </li><li>
<a id="pgfId-1040970"></a>Start the AMS Designer/<code>xmsim</code> simulation (click <em>Run</em> on the Netlist and Run form). <br />
<a id="pgfId-1041515"></a>You do not need to make any changes on the AMS Designer side. <br />
<a id="pgfId-1040971"></a>You will notice that this simulation runs faster. </li><li>
<a id="pgfId-1041534"></a>You can view the sampled signals in SimVision and Simulink. </li><li>
<a id="pgfId-1041542"></a>You can run this simulation using reduced values for <em>Sample time</em> (down to 1e-6) for more accurate sampling. </li></ol>












<h3>
<a id="pgfId-1040975"></a><a id="65140"></a>Using the Sine Testbench with Framed Coupling</h3>

<p>
<a id="pgfId-1040976"></a>Some telecommunication simulations work with a data-stream-driven simulation. Some DSP algorithms process a data frame instead of single samples. Simulink provides framed signals for this purpose. To increase the simulation performance, cosimulation also supports framed signals. To investigate framed signals, do the following: </p>
<ol><li>
<a id="pgfId-1041557"></a>In the Library: SimCouplerLib window, double-click <em>Sine Testbench (framed signals)</em>. <br />
<a id="pgfId-1041566"></a><div class="webflare-div-image">
<img width="635" height="451" src="images/learningMore-5.gif" /></div></li><li>
<a id="pgfId-1041596"></a>In the testbench schematic window, double-click the <em>SimulinkCoupler</em> to view its parameters. <br />
<a id="pgfId-1041600"></a><div class="webflare-div-image">
<img src="images/input3output2.gif" /></div><ol><li>
<a id="pgfId-1040979"></a>You can specify the number of input and output ports. </li><li>
<a id="pgfId-1042588"></a>If you turn on <em>Show advanced options</em>, you can also specify the socket port. </li><li>
<a id="pgfId-1041630"></a>Notice that the <em>Frame mode</em> is <em>framed</em>. </li><li>
<a id="pgfId-1041639"></a>Simulink determines the frame length from the connected input signals. </li></ol></li><li>
<a id="pgfId-1040982"></a>If you simulated the unframed example before, rerun the simulator and view the signals in Simulink. </li><li>
<a id="pgfId-1041658"></a>In the <em>Frame size</em> field, type <code>10</code>. </li><li>
<a id="pgfId-1041670"></a>Rerun the AMS Designer simulator. <br />
<a id="pgfId-1041671"></a>The result is the same. The simulation takes a bit more time. <br />
<a id="pgfId-1041677"></a>You can explore several different frame sizes. The maximum valid frame length is 10000. </li></ol>



















<h2>
<a id="pgfId-1040989"></a><a id="88339"></a>Running Event-Based and Fixed-Rate Simulation</h2>

<p>
<a id="pgfId-1040990"></a>Fixed-rate synchronization can be useful if the model contains signals with different sampling rates (high and low) and the interface connects only to a low sampling rate block. If the signals exchanged between AMS Designer and Simulink are at the lower rates, fixed-rate synchronization with a dedicated sample time can improve the simulation performance significantly. Here is an example: </p>
<ol><li>
<a id="pgfId-1041706"></a>In the Library: SimCouplerLib window, double-click <em>Testbench for event as compared to fixed rate synchronization</em>. <br />
<a id="pgfId-1041715"></a><div class="webflare-div-image">
<img width="670" height="450" src="images/learningMore-7.gif" /></div>
<a id="pgfId-1041716"></a><div class="webflare-div-image">
<img src="images/event_fixed_tb.gif" /></div><ul><li>
<a id="pgfId-1041762"></a>The sine wave generator (<em>Sine Wave</em>) produces a 2 KHz sine wave sampled at 10 us. Simulink transmits the sine wave signal to the AMS Designer simulator. </li><li>
<a id="pgfId-1041763"></a>The pulse generator (<em>Pulse Generator</em>) produces a high-frequency pulse with a period of 100 ns (which is 100 times faster than the sampling rate of the sine wave).</li></ul></li><li>
<a id="pgfId-1041816"></a>In the Virtuoso<sup>&#174;</sup> command interpreter window (CIW), choose <em>File &#8211; Open</em>. <br />
<a id="pgfId-1041817"></a>The File Open form appears. </li><li>
<a id="pgfId-1041818"></a>In the <em>File</em> group box, select the following: <br />
<a id="pgfId-1041836"></a><table class="webflareTable" id="#id1041819">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1041821">
<a id="pgfId-1041821"></a>Field</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1041823">
<a id="pgfId-1041823"></a>Selection</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041825"></a><em>Library</em> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041827"></a><em> AMSDcouple</em> </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041829"></a><em>Cell</em> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041831"></a><em> tb_event_fixed</em> </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041833"></a><em>View</em> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1041835"></a><em> config</em> </p>
</td>
</tr>
</tbody></table></li><li>
<a id="pgfId-1042072"></a>On the Open Configuration form, select <em>yes</em> for <em>Top Cell View</em> to open the schematic. </li><li>
<a id="pgfId-1042082"></a>Click <em>OK</em>. <br />
<a id="pgfId-1040994"></a><div class="webflare-div-image">
<img width="635" height="485" src="images/learningMore-9.gif" /></div>
<a id="pgfId-1040995"></a>The <em>Adder</em> component adds the two signals from Simulink. </li><li>
<a id="pgfId-1040996"></a>To start the simulation in event-based mode, do the following: <ol><li>
<a id="pgfId-1041892"></a>Double-click the coupler module on the Simulink schematic. </li><li>
<a id="pgfId-1041901"></a>Verify that the <em>Sample time</em> is <code>-1</code> to turn on the event-based mode. </li><li>
<a id="pgfId-1041922"></a>Click <em>OK</em> to close the form. </li><li>
<a id="pgfId-1041916"></a>Choose <em>Simulation &#8211; Start</em>. </li></ol></li><li>
<a id="pgfId-1040997"></a>In SimVision, display <em>Signal_1</em>, <em>Signal_2</em>, and <em>Sum</em>. </li><li>
<a id="pgfId-1040998"></a>Start the AMS Designer simulation. <br />
<a id="pgfId-1040999"></a>The simulation takes about 30 seconds. The sine waves appear in Simulink and in SimVision. You can mark the computed data points. </li><li>
<a id="pgfId-1041000"></a>After finishing the run, go back to Simulink and change the sync mode in the coupler module to fixed rate with a sample time of 0.00001 (equal to the sampling rate of the sine source). </li><li>
<a id="pgfId-1041001"></a>Run the Simulink simulation again. </li><li>
<a id="pgfId-1041002"></a>Go back to SimVision and restart the simulator. </li><li>
<a id="pgfId-1041003"></a>Start the AMS Designer simulation. <br />
<a id="pgfId-1041969"></a>The simulation finishes after about 5 seconds. The high-frequency pulse no longer influences data exchange between the simulators. </li></ol>









































<p>
<a id="pgfId-1041004"></a>You can resimulate this example using different sample times. </p>
<p>
<a id="pgfId-1041005"></a>In other examples where the sampling rate changes over time, the event-based synchronization might be the better choice. Decide carefully what synchronization scheme fits best with your design. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1041007"></a>If you look at the computed signal points in the SimVision waveform plot, you will see that the values are not necessarily updated at equidistant points even if you choose fixed-rate in the Simulink coupler. AMS Designer&#39;s analog solver controls the timing of these data points and can introduce more simulation points if necessary between two synchronization points.</div>

<h2>
<a id="pgfId-1041008"></a><a id="55006"></a>Using the Coupler Module in Feedback Loops</h2>

<p>
<a id="pgfId-1041009"></a>You can use coupling in feedback loops. In this example testbench (<code>tb_sine_loop</code>), Simulink generates two sine waves and transmits them to AMS Designer and AMS Designer feeds one of the signals back to Simulink. The second signal is unused. </p>

<p>
<a id="pgfId-1042001"></a></p>
<div class="webflare-div-image">
<img width="668" height="549" src="images/learningMore-10.gif" /></div>

<p>
<a id="pgfId-1041010"></a>Simulink compares the feed-through sine wave with the original signal. The coupler has additional input and output pins and there is another feedback loop inside AMS Designer. Simulink adds a constant of 0.1 to the coupler output and the signal connects to the third coupler input. After each cycle, Simulink increases the signal by 0.1. You can observe this behavior in the Simulink or in the AMS Designer window. At the beginning of simulation, the program initializes the signal to zero. </p>
<p>
<a id="pgfId-1042053"></a>To open the Virtuoso<sup>&#174;</sup> schematic, do the following: </p>
<ol><li>
<a id="pgfId-1042026"></a>In the command interpreter window (CIW), choose <em>File &#8211; Open</em>. <br />
<a id="pgfId-1042027"></a>The File Open form appears. </li><li>
<a id="pgfId-1042028"></a>In the <em>File</em> group box, select the following: <br />
<a id="pgfId-1042046"></a><table class="webflareTable" id="#id1042029">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1042031">
<a id="pgfId-1042031"></a>Field</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1042033">
<a id="pgfId-1042033"></a>Selection</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1042035"></a><em>Library</em> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1042037"></a><em> AMSDcouple</em> </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1042039"></a><em>Cell</em> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1042041"></a><em> tb_sine_loop</em> </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1042043"></a><em>View</em> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1042045"></a><em> config</em> </p>
</td>
</tr>
</tbody></table></li><li>
<a id="pgfId-1042089"></a>On the Open Configuration form, select <em>yes</em> for <em>Configuration</em> and for <em>Top Cell View</em>. </li><li>
<a id="pgfId-1042090"></a>Click <em>OK</em>. </li><li>
<a id="pgfId-1041012"></a>In the Virtuoso<sup>&#174;</sup> Hierarchy Editor, choose <em>Plugins &#8211; AMS</em>. </li><li>
<a id="pgfId-1042068"></a>Once you have initialized the run directory for AMS, choose <em>AMS &#8211; Netlist and Run</em> and click <em>Run</em>. </li><li>
<a id="pgfId-1042568"></a>In SimVision, display the <em>Loop</em> signal. </li></ol>













<p>
<a id="pgfId-1042144"></a>You can decide whether to use the <em>Loop Testbench</em> with unframed or framed signals in Simulink: </p>
<ul><li>
<a id="pgfId-1042180"></a><a href="learningMore.html#88302">Using the Sine Testbench with Unframed Coupling</a></li><li>
<a id="pgfId-1042188"></a><a href="learningMore.html#65140">Using the Sine Testbench with Framed Coupling</a></li></ul>


<h3>
<a id="pgfId-1041015"></a>Using the Loop Testbench with Unframed Coupling</h3>

<p>
<a id="pgfId-1041016"></a>To use the loop testbench with unframed coupling, do the following: </p>
<ol><li>
<a id="pgfId-1042197"></a>In the Library: SimCouplerLib window, double-click <em>Loop Testbench (unframed signals)</em>. <br />
<a id="pgfId-1042206"></a><div class="webflare-div-image">
<img width="668" height="449" src="images/learningMore-11.gif" /></div></li><li>
<a id="pgfId-1041017"></a>On the testbench schematic, double-click <em>SimulinkCoupler</em> to review its parameters.</li><li>
<a id="pgfId-1042273"></a>Choose <em>Simulation &#8211; Start</em>. </li><li>
<a id="pgfId-1042277"></a>Start the AMS Designer simulation. </li><li>
<a id="pgfId-1041019"></a>After each cycle, increase the signal by 0.1. <br />
<a id="pgfId-1041020"></a>A ramp appears in the plot windows. The two sine waves match. </li><li>
<a id="pgfId-1041022"></a>Switch the coupling block to fixed port rate and view the changes on the ramp and the two sine waves. </li></ol>













<h3>
<a id="pgfId-1041023"></a>Using the Loop Testbench with Framed Coupling</h3>

<p>
<a id="pgfId-1041024"></a>To use the loop testbench with framed coupling, do the following: </p>
<ol><li>
<a id="pgfId-1042223"></a>In the Library: SimCouplerLib window, double-click <em>Loop Testbench (framed signals)</em>. <br />
<a id="pgfId-1042232"></a><div class="webflare-div-image">
<img width="668" height="425" src="images/learningMore-12.gif" /></div></li><li>
<a id="pgfId-1042306"></a>On the testbench schematic, double-click <em>SimulinkCoupler</em> to review its parameters.</li><li>
<a id="pgfId-1042307"></a>Choose <em>Simulation &#8211; Start</em>. </li><li>
<a id="pgfId-1042308"></a>Start the AMS Designer simulation. <br />
<a id="pgfId-1041028"></a>The signal increases once for each frame. <br />
<a id="pgfId-1041029"></a>The signal values are equal within each frame. <br />
<a id="pgfId-1042328"></a>The signal has steps, depending on the frame size.<br />
<a id="pgfId-1041030"></a>The frame size in the feedback loop path equals the frame size of the sine waves (defined in the buffer blocks). </li><li>
<a id="pgfId-1041031"></a>Change the frame size and view the changes in the results. </li></ol>














<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1041033"></a>You must handle feedback loops in cosimulation carefully. In this example, you can see that the behavior of feedback signals can vary depending on different simulation settings. Review your design carefully around possible loops and decide how to integrate the loops in the cosimulation. With the default settings, Simulink displays a warning: </div>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1042343"></a>Warning: Block diagram &#39;loop_tb&#39; contains 1 algebraic loop(s). </pre>

<p>
<a id="pgfId-1042347"></a>For more information about loops, use type the following command in the MATLAB Command Window: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1042385"></a>sldebug loop_tb </pre>

<p>
<a id="pgfId-1042386"></a>The Simulink debugger command-line prompt appears: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1042392"></a>(sldebug @0): &gt;&gt; </pre>

<p>
<a id="pgfId-1042387"></a>To eliminate the warning message, do the following: </p>
<ol><li>
<a id="pgfId-1042403"></a>In the Simulink testbench window, choose <em>Simulation &#8211; Configuration Parameters</em>.<br />
<a id="pgfId-1042466"></a>The Configuration Parameters form appears. </li><li>
<a id="pgfId-1042412"></a>In the <em>Select</em> tree, select <em>Diagnostics</em>. </li><li>
<a id="pgfId-1042430"></a>In the <em>Algebraic loop</em> field, select <em>none</em>. <br />
<a id="pgfId-1042440"></a><div class="webflare-div-image">
<img src="images/Diagnostics.gif" /></div></li><li>
<a id="pgfId-1042454"></a>Click <em>OK</em>. </li></ol>











<h2>
<a id="pgfId-1040927"></a><a id="37174"></a>Running AMS-MATLAB/Simulink Cosimulation on Other <a id="addpath"></a>Platforms</h2>

<p>
<a id="pgfId-1042601"></a>You can run AMS-MATLAB/Simulink cosimulation on Linux, Solaris, HP, IBM, and Windows platforms. If you are running cosimulation from MATLAB under Windows, you must add the path to the coupler in the Cadence<sup>&#174;</sup> IUS installation hierarchy in MATLAB using the <code>addpath</code> command. For example: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1042613"></a>addpath(&#39;/grid/cadence/install/ius57/lnx86/tools/affirma_ams/etc/matlab&#39;); <br />addpath(&#39;/home/cadence/tutorial/AMS-MATLAB/matlab&#39;); <br />addpath(&#39;/home/cadence/tutorial/AMS-MATLAB/matlab/tutorial&#39;); </pre>

<p>
<a id="pgfId-1042598"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="tutorial4.html" id="prev" title="Running Cosimulation from the Spectre AMS Designer Environment">Running Cosimulation from the  ...</a></em></b><b><em><a href="troubleshooting.html" id="nex" title="Troubleshooting">Troubleshooting</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>