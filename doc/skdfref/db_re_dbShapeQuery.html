
<html><head><title>dbShapeQuery</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sumehta" />
<meta name="CreateDate" content="2023-10-25" />
<meta name="CreateTime" content="1698259421" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes SKILL functions that interface with Virtuoso Studio design environment applications" />
<meta name="DocTitle" content="Virtuoso Studio Design Environment SKILL Reference" />
<meta name="DocType" content="SKILL Reference" />
<meta name="FileTitle" content="dbShapeQuery" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="skdfref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-10-25" />
<meta name="ModifiedTime" content="1698259421" />
<meta name="NextFile" content="db_re_dbSteinerQuery.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Cadence Shared Tools" />
<meta name="PrevFile" content="db_re_dbRowQuery.html" />
<meta name="c_product" content="Virtuoso Layout Suite,Virtuoso Schematic Editor,Virtuoso Analog Design Environment" />
<meta name="Product" content="Virtuoso Shared Tools" />
<meta name="ProductFamily" content="Virtuoso Shared Tools" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Studio Design Environment SKILL Reference -- dbShapeQuery" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="reference" />
<meta name="reference_type" content="api reference" />
<meta name="prod_feature" content="Design Environment Infrastructure" />
<meta name="prod_subfeature" content="SKILL API" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="skdfrefIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="skdfrefTOC.html">Contents</a></li><li><a class="prev" href="db_re_dbRowQuery.html" title="dbRowQuery">dbRowQuery</a></li><li style="float: right;"><a class="viewPrint" href="skdfref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="db_re_dbSteinerQuery.html" title="dbSteinerQuery">dbSteinerQuery</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Studio Design Environment SKILL Reference<br />Product Version IC23.1, November 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a id="Filename:re_dbShapeQuery" title="dbShapeQuery"></a><h3>
<a id="pgfId-6508609"></a><a id="dbShapeQuery"></a><a id="32916"></a>dbShapeQuery</h3>
<a id="pgfId-6508610"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
dbShapeQuery(
<code><em>d_cellviewId
l_layerPurposePair
l_bBox
</em></code>[ <code><em>x_startLevel </em></code>]<code><em> 
</em></code>[ <code><em>x_stopLevel </em></code>]
[ <code><em>n_filterSize </em></code>]<code><em> 
</em></code>[ <code><em>l_transform </em></code>]<code><em> 
</em></code>)
=&gt; <code><em>l_occShapes </em></code>/<code> </code>nil</pre>

<h4>
<a id="pgfId-6508612"></a>Description</h4>

<p>
<a id="pgfId-6508613"></a>Returns a list of all the shapes in a cellview whose bounding boxes overlap the region specified by <code>l_bBox</code>.</p>



<h4>
<a id="pgfId-6508645"></a>Arguments</h4>
<table class="webflareTable" id="#id6508615">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508617"></a><span class="webflare-courier-new" style="white-space:pre"><em>d_cellviewId </em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508619"></a>The database ID of the cellview in which the design hierarchy will be traversed by the region query.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508621"></a><span class="webflare-courier-new" style="white-space:pre"><em>l_layerPurposePair</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508623"></a>Layer purpose pair. All shapes on this layer purpose pair will be queried and returned. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508625"></a><span class="webflare-courier-new" style="white-space:pre"><em>l_bBox</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508627"></a>The bounding box that specifies the region in context of the top cellview to be used as the basis of the query.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508629"></a><span class="webflare-courier-new" style="white-space:pre"><em>x_startLevel</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508631"></a>Optional argument. The level of the design hierarchy in which to start the querying process. If the startLevel argument is not specified, the start level defaults to 0.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508633"></a><span class="webflare-courier-new" style="white-space:pre"><em>x_stopLevel</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508635"></a>Optional argument. The level of the design hierarchy in which to stop the querying process. If the stopLevel argument is not specified, the stop level defaults to maximum hierarchy depth.</p>
<p>
<a id="pgfId-6508636"></a>The query will stop prior to x_stopLevel if it encounters a cellview which is not currently loaded.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508638"></a><span class="webflare-courier-new" style="white-space:pre"><em>n_filterSize</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508640"></a>Optional argument. Specifies the shapes filter size. The query produces only shapes with a size larger than the filterSize. If no filterSize argument is specified, the blockage filter size defaults to 0.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508642"></a><span class="webflare-courier-new" style="white-space:pre"><em>l_transform</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508644"></a>Optional argument which describes the initial transformation to be used during the region querying process, such as offset, rotation, and/or magnification. If no transform argument is specified, the initial formation defaults to offset (0,0),and orientation R0.</p>
</td>
</tr>
</tbody></table>


<h4>
<a id="pgfId-6508665"></a>Value Returned</h4>
<table class="webflareTable" id="#id6508646">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508648"></a><span class="webflare-courier-new" style="white-space:pre"><em>l_occShapes</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">

<p>
<a id="pgfId-6508650"></a><code>list((</code><span class="webflare-courier-new" style="white-space:pre"><em>d_shapeId</em></span> | <span class="webflare-courier-new" style="white-space:pre"><em>l_occShape</em></span>)&#8230;)</p>

<p>
<a id="pgfId-6508651"></a>where, </p>

<ul><li>
<a id="pgfId-6508652"></a><span class="webflare-courier-new" style="white-space:pre"><em>d_shapeId</em></span> is the database ID of a shape.</li><li>
<a id="pgfId-6508653"></a><span class="webflare-courier-new" style="white-space:pre"><em>l_occShape
</em></span>is
<code>list((</code><span class="webflare-courier-new" style="white-space:pre"><em>d_refId </em></span><code>| </code><span class="webflare-courier-new" style="white-space:pre"><em>l_mosaicElem</em></span><code>)&#8230; </code><span class="webflare-courier-new" style="white-space:pre"><em>d_shapeId</em></span><code>)</code><br />
<a id="pgfId-6508654"></a>where,<ul><li>
<a id="pgfId-6508655"></a><span class="webflare-courier-new" style="white-space:pre"><em>d_refId
</em></span>The database ID of the non-mosaic instance or via.</li><li>
<a id="pgfId-6508656"></a><span class="webflare-courier-new" style="white-space:pre"><em>l_mosaicElem
</em></span>is
<code>list(</code><span class="webflare-courier-new" style="white-space:pre"><em>d_mosaicId x_row x_col</em></span><code>)
</code>Represents a mosaic element in the hierarchy path. 
where,<ul><li>
<a id="pgfId-6508657"></a><span class="webflare-courier-new" style="white-space:pre"><em>d_mosaicId
</em></span>The database ID of the mosaic instance.</li><li>
<a id="pgfId-6508658"></a><span class="webflare-courier-new" style="white-space:pre"><em>x_row
</em></span>Row in which <span class="webflare-courier-new" style="white-space:pre"><em>d_shapeId</em></span> occurs inside this mosaic instance.</li><li>
<a id="pgfId-6508659"></a><span class="webflare-courier-new" style="white-space:pre"><em>x_col
</em></span>Column in which <span class="webflare-courier-new" style="white-space:pre"><em>d_shapeId</em></span> occurs inside this mosaic instance.</li></ul></li><li>
<a id="pgfId-6508660"></a><span class="webflare-courier-new" style="white-space:pre"><em>d_shapeId
</em></span>The database ID of the shape.</li></ul></li></ul>











</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508662"></a><code>nil</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-6508664"></a><code>nil</code> is returned if the cellview ID is invalid. </p>
</td>
</tr>
</tbody></table>


<h4>
<a id="pgfId-6508666"></a>Examples</h4>

<p>
<a id="pgfId-6508667"></a>Returns a list containing shapes or lists representing occurrence shapes that are on <code>M1</code> <code>drawing</code>, overlapping the <code>(0:0 0:0)</code> point.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-6508668"></a>shapes = dbShapeQuery( deGetCellView() list(&quot;M1&quot; &quot;drawing&quot;) list(0:0 0:0) )</pre>


<h4>
<a id="pgfId-6559399"></a>Additional Information</h4>

<p>
<a id="pgfId-6559400"></a>The SKILL functions <code>dbOpenHier</code>, <code>dbShapeQuery</code>, and <code>dbGetOverlaps</code> perform different functions and have different implementations that may traverse the hierarchy in different ways. Although it is possible to use combinations of these and other functions to get similar results, code that is sensitive to the order of traversal may produce different results. For example, code that is traversing the hierarchy through <code>dbOpenHier</code> and <code>dbShapeQuery</code>, which needs to expand through Pcells, may produce a result that is different from <code>dbGetOverlaps</code>.</p>
<p>
<a id="pgfId-6559401"></a>if there is a Pcell evaluation failure at some point of the traversal because these functions cannot guarantee order and it cannot be predicted whether or when a Pcell will fail to evaluate, some data that is produced by one set of SKILL functions may not be produced by a different set of SKILL functions. </p>



<h4><em>
<a id="pgfId-6508669"></a>Related Topics</em></h4>

<p>
<a id="pgfId-6508673"></a><a href="db_Query_Functions.html#23656">Query Functions</a></p>
<p>
<a id="pgfId-6559467"></a><a href="cvio_re_dbOpenHier.html#90895">dbOpenHier</a></p>
<p>
<a id="pgfId-6559425"></a><a href="figure_re_dbGetOverlaps.html#14050">dbGetOverlaps</a></p>




<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="db_re_dbRowQuery.html" id="prev" title="dbRowQuery">dbRowQuery</a></em></b><b><em><a href="db_re_dbSteinerQuery.html" id="nex" title="dbSteinerQuery">dbSteinerQuery</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>