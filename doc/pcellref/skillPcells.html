
<html><head><title>Creating SKILL Parameterized Cells</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sumehta" />
<meta name="CreateDate" content="2023-09-14" />
<meta name="CreateTime" content="1694697810" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to create parameterized cells using SKILL or the Virtuoso parameterized cell software." />
<meta name="DocTitle" content="Virtuoso Parameterized Cell Reference" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Creating SKILL Parameterized Cells" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="pcellref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-09-14" />
<meta name="ModifiedTime" content="1694697810" />
<meta name="NextFile" content="skillPlusPcells.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="howtopackage.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Parameterized Cell Reference -- Creating SKILL Parameterized Cells" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="pcellrefIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="pcellrefTOC.html">Contents</a></li><li><a class="prev" href="howtopackage.html" title="How to Package a Pcell">How to Package a Pcell</a></li><li style="float: right;"><a class="viewPrint" href="pcellref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="skillPlusPcells.html" title="Creating SKILL++ Parameterized Cells">Creating SKILL++ Parameterized ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Parameterized Cell Reference<br />Product Version IC23.1, September 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>4
<a id="pgfId-937817"></a></h1>
<h1>
<a id="pgfId-937819"></a><hr />
<a id="90981"></a>Creating SKILL Parameterized Cells<hr />
</h1>

<p>
<a id="pgfId-206445"></a>You can create Pcells in an ASCII file using <a id="marker-920911"></a>SKILL instead of by using the graphical user interface. Complex Pcells are easier to create and maintain with SKILL than with the graphical interface.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-934071"></a>Cadence recommends that you consider using Virtuoso Relative Object Design (ROD) functions in your Pcell code. ROD functions help you in defining layout connectivity, geometries, and the relationships between them. You can make a Pcell stretchable using ROD. For information about ROD, see <em><a actuate="user" class="URL" href="../roduser/roduserTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Relative Object Design User Guide</a></em>.</div>
<p>
<a id="pgfId-954406"></a>This chapter contains the following information:</p>
<ul><li>
<a id="pgfId-954414"></a><a href="skillPcells.html#29318">The pcDefinePCell Function</a></li><li>
<a id="pgfId-954642"></a><a href="skillPcells.html#60328">Using the pcCellView Variable</a></li><li>
<a id="pgfId-954653"></a><a href="skillPcells.html#53856">Using the SKILL Operator ~&gt; with Pcells</a></li><li>
<a id="pgfId-954664"></a><a href="skillPcells.html#41598">Defining Parameter Values</a></li><li>
<a id="pgfId-954674"></a><a href="skillPcells.html#63208">Building Geometries</a></li><li>
<a id="pgfId-954621"></a><a href="skillPcells.html#20618">Creating Instances within Pcells</a></li><li>
<a id="pgfId-368740"></a><a href="skillPcells.html#44978">Building Nets, Terminals, and Pins</a></li><li>
<a id="pgfId-368806"></a><a href="skillPcells.html#26071">Accessing Technology File Data</a></li><li>
<a id="pgfId-925052"></a><a href="skillPcells.html#12617">Variable Scoping</a></li><li>
<a id="pgfId-925057"></a><a href="skillPcells.html#23837">Schematic Symbol Pcells</a></li><li>
<a id="pgfId-957098"></a><a href="skillPcells.html#93810">Advantages of ROD Functions in Pcell</a></li></ul>











<h2>
<a id="pgfId-942055"></a><a id="29318"></a>The <a id="marker-942053"></a>pcDefinePCell Function<a id="pcDefinePCell"></a></h2>

<p>
<a id="pgfId-204087"></a>The <code>pcDefinePCell</code> function lets you pass a SKILL definition for a Pcell to the Pcell compiler. This gives you another way to create Pcells. <code>pcDefinePCell</code> creates a Pcell master. This is the same result you get when you compile a graphical Pcell using <em>Pcell &#8211; Compile &#8211; To Pcell</em> in a layout window. </p>
<p>
<a id="pgfId-928828"></a>Each call to <code>pcDefinePCell</code> creates one Pcell master cellview. You can create one source code file for each Pcell or define several Pcells in one file. Either way, use the <code>load(</code><span class="webflare-courier-new" style="white-space:pre"><em>filename</em></span><code>)</code> command to load and run <code>pcDefinePCell</code><em>. </em><code></code><a id="marker-931907"></a><a id="marker-931908"></a></p>
<p>
<a id="pgfId-929964"></a>When you compile Pcell SKILL code, the compiler attaches the compiled code to the master cell. You do not need the source file containing the <code>pcDefinePCell</code> calls to be able to use your Pcell. But save the source file so you can revise it later.</p>
<p>
<a id="pgfId-931947"></a>The <code>pcDefinePCell</code> function passes three arguments to the Pcell compiler. Each argument is a list. For complete syntax and examples, see <h-hot><a actuate="user" class="URL" href="../skpcellref/graphicalFunctions_re_pcDefinePCell.html" show="replace" xml:link="simple">pcDefinePCell</a></h-hot> in the <em>Virtuoso Parameterized Cell SKILL Reference</em>.</p>

<h2>
<a id="pgfId-936789"></a><a id="60328"></a>Using the pcCellView Variable</h2>

<p>
<a id="pgfId-931674"></a><code>pcCellView</code> is an internal variable automatically created by <code>pcDefinePCell</code>.<em> </em><code>pcCellView</code> contains the dbID (database identification) of the cell you are creating. Within the body of your Pcell code, use the <code>pcCellView</code><a id="marker-929011"></a> variable as the cellview identifier for which you create objects. For convenience, you might assign <code>pcCellView</code> to a variable with a shorter name; for example, <code>cv=</code>pcCellView.</p>

<h2>
<a id="pgfId-954289"></a><a id="53856"></a>Using the SKILL Operator ~&gt;<a id="pCellSkillOp"></a> with Pcells</h2>

<p>
<a id="pgfId-954290"></a>When you use the SKILL operator ~&gt; to access information about the master cell of a Pcell instance, you must look two levels above the instance. If you look at only one level above, you access information about the Pcell submaster.</p>
<p>
<a id="pgfId-954291"></a>For example, for the instance <code>I1</code> of the Pcell master <code>mux2</code>, you retrieve the database identity (<code>dbID</code>) of the <code>mux2</code> Pcell master with the following statement:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-954292"></a>I1~&gt;master~&gt;superMaster</pre>

<p>
<a id="pgfId-954293"></a>However, if you use the following statement:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-954294"></a>I1~&gt;master</pre>

<p>
<a id="pgfId-954277"></a>then, you can retrieve the <code>dbID</code> for the Pcell submaster.</p>

<h2>
<a id="pgfId-204108"></a><a id="41598"></a>Defining <a id="marker-223688"></a>Parameter Values</h2>

<p>
<a id="pgfId-932886"></a>You must specify all <a id="marker-932885"></a>parameters that affect the Pcell in the <code>pcDefinePCell</code> statement. You must also assign a default value for every parameter. </p>
<p>
<a id="pgfId-932753"></a>The values of parameters on a Pcell instance can be assigned in any of the following ways:</p>
<ul><li>
<a id="pgfId-931175"></a>On the instance itself<br />
<a id="pgfId-933276"></a>You can assign values to parameters when you place an instance. These values override any default values that might be defined. If you assign a value when you place an instance, the value is stored as a property on the instance and does not apply to other instances.</li><li>
<a id="pgfId-932907"></a>Using CDF<br />
<a id="pgfId-933277"></a>You can create a Component Description Format (CDF) description to specify the value for a Pcell parameter. You can create CDFs for a cell or for a whole library. CDFs defined for a cell apply to all cellviews of that cell; for example, parameters shared by schematic and layout cellviews. CDFs defined for a library apply to all cells in the library.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-956342"></a>You must set the <code>?storeDefault</code> argument of the <code>cdfCreateParam</code> function to <code>yes</code> to store the default value of a user CDF parameter as a parameter attribute on the Pcell.</div>
<a id="pgfId-956343"></a>For example,<pre class="webflare-pre-block webflare-courier-new" id="#id956344">
<a id="pgfId-956344"></a>cdf = cdfCreateUserCellCDF( ddGetObj( samplelib pmos5v_mac ) )</pre><pre class="webflare-pre-block webflare-courier-new" id="#id956345">
<a id="pgfId-956345"></a>cdfCreateParam(cdf
 ?name lpp
 ?defValue wire drawing
 ?type string
 ?display t
 ?prompt lpp
 ?storeDefault yes)</pre>
<a id="pgfId-956346"></a>Here, the Pcell stores the default value of the CDF parameter <code>lpp</code>, that is, <code>wire drawing</code>.</li><li>
<a id="pgfId-220671"></a>In the <code>pcDefinePCell</code> code<br />
<a id="pgfId-933278"></a>You must assign default values for parameters in the parameter declaration section of your <code>pcDefinePCell</code> statement. Values defined in the <code>pcDefinePCell</code> statement are stored with the Pcell master cellview.<br />
<a id="pgfId-932506"></a>In the following example, the parameters <code>width</code>, <code>length</code>, and <code>numGates</code> are defined and assigned defaults:<pre class="webflare-pre-block webflare-courier-new" id="#id931198">
<a id="pgfId-931198"></a>pcDefinePCell(
    list( ddGetObj( &quot;pcellLib&quot;) &quot;muxPcell&quot; &quot;layout&quot;)
    ; parameters and their optional default values:
    list( 
        ( width      &#8220;float&#8221;    1.0)
        ( length     &#8220;float&#8221;    0.75)
        ( numGates   &#8220;int&#8221;      1)
    ) ;end of parameter list</pre></li></ul>












<p>
<a id="pgfId-929389"></a>The system looks for the values of parameters in a specific <a id="marker-929388"></a>order. When the system finds a value, it stops looking, so where you define or assign values determine which value has highest priority.</p>
<p>
<a id="pgfId-929391"></a>The system looks for the value of parameters in the following <a id="marker-931539"></a>order:</p>

<p>
<a id="pgfId-935847"></a></p>
<div class="webflare-div-image">
<img width="670" height="305" src="images/skillPcells-2.gif" /></div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-957414"></a>
Be careful when you choose where you set the default values. When the system finds a value for a parameter, it stops looking. Therefore, if you are setting a parameter value for a Pcell in the <code>pcDefinePCell</code> code (number 4 in the image) and also in the CDF of the Pcell (number 2 in the image), ensure that the settings match. Otherwise, the Create Instance and Edit Instance forms will not work properly. In such cases, you can use the <em>Debug CDF</em> tool to identify and fix the issue.</div>

<p>
<a id="pgfId-204111"></a>If you prefer to get <a id="marker-957450"></a><a id="marker-957451"></a>parameter default values from a <a id="marker-957452"></a>library or technology file, you can access properties within the parameter declaration section of the <code>pcDefinePCell</code> statement as shown in the following example.</p>

<h4>
<a id="pgfId-932683"></a>Example of Setting Parameter Values</h4>

<p>
<a id="pgfId-932684"></a>In this example, the first line accesses a library and the second line accesses a <a id="marker-920944"></a><a id="marker-922610"></a>technology file.</p>

<p>
<a id="pgfId-935884"></a></p>
<div class="webflare-div-image">
<img width="668" height="89" src="images/skillPcells-4.gif" /></div>
<h2>
<a id="pgfId-204136"></a><a id="63208"></a>Building <a id="marker-223725"></a>Geometries</h2>

<p>
<a id="pgfId-204137"></a>You can use the following <a id="marker-921985"></a>procedures to build shapes in a Pcell. Refer to <em><a actuate="user" class="URL" href="../skdfref/chap2.html#firstpage" show="replace" xml:link="simple">Virtuoso Design Environment SKILL Reference</a></em> for details about these procedures.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-955904"></a>dbCreateLine( <code><em>d_cellView</em></code> (<code><em>tx_layer</em></code> [<code><em>t_purpose</em></code>]) <code><em>l_points</em></code>)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-366893"></a><a id="marker-921976"></a><a id="marker-922570"></a>dbCreatePath( <code><em>d_cellView</em></code> (<code><em>tx_layer</em></code> [<code><em>t_purpose</em></code>]) <code><em>l_points</em></code> <code><em>x_widths</em></code> [<code><em>t_pathStyle</em></code>])</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-930376"></a><a id="marker-921977"></a><a id="marker-922572"></a>dbCreatePolygon( <code><em>d_cellView</em></code> (<code><em>tx_layer</em></code> [<code><em>t_purpose</em></code>]) <code><em>l_points</em></code>)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-930377"></a><a id="marker-921978"></a><a id="marker-922574"></a>dbCreateRect( <code><em>d_cellView</em></code> (<code><em>tx_layer</em></code> [<code><em>t_purpose</em></code>]) <code><em>l_bBox</em></code>)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-930378"></a><a id="marker-921979"></a><a id="marker-922566"></a>dbCreateEllipse( <code><em>d_cellView</em></code> (<code><em>tx_layer</em></code> [<code><em>t_purpose</em></code>]) <code><em>l_bBox</em></code>)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-930379"></a><a id="marker-921980"></a><a id="marker-922564"></a>dbCreateDonut( <code><em>d_cellView</em></code> (<code><em>tx_layer</em></code> [<code><em>t_purpose</em></code>]) <code><em>l_point</em></code> <code><em>x_outR</em></code> <code><em>x_holeR</em></code>)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-930380"></a><a id="marker-921981"></a><a id="marker-922568"></a>dbCreateLabel( <code><em>d_cellView</em></code> (<code><em>tx_layer</em></code> [<code><em>t_purpose</em></code>]) <code><em>l_point</em></code> <code><em>t_label</em></code> <code><em>t_just</em></code> <code><em>t_orient</em></code> <code><em>t_font</em></code> <code><em>x_height</em></code>)</pre>

<p>
<a id="pgfId-366894"></a>Follow the guidelines below when using <code>dbCreate</code><a id="marker-930386"></a><a id="marker-930387"></a> functions to build objects:</p>
<ul><li>
<a id="pgfId-933297"></a><span class="webflare-courier-new" style="white-space:pre"><em>tx_layer</em></span> must specify either the mask layer number or a layer name. For example, to build a rectangle on the layer metal1, you might specify<br /><pre class="webflare-pre-block webflare-courier-new" id="#id932371">
<a id="pgfId-932371"></a>dbCreateRect( pcCellView &quot;metal1&quot; list( x1:y1 x2:y2))</pre></li><li>
<a id="pgfId-933298"></a>The points list for paths and polygons must be a list of coordinate pairs, where each pair is a list containing two elements. The notation<em> </em><code>x:y</code> is equivalent to <code>list(x y)</code>.</li><li>
<a id="pgfId-933299"></a>Rectangles and ellipses are defined with bounding boxes. A bounding box is specified as a list of coordinate pairs, where the first pair refers to the lower left corner and the second pair refers to the upper right corner.</li><li>
<a id="pgfId-940482"></a>You can use analog design-style labels, such as <code>cdsName()</code>, <code>cdsParam(1)</code>, <code>cdsParam(2)</code> to display information about the instance. Labels are controlled by the CDF label set attributes. Refer to <em><a actuate="user" class="URL" href="../cdfuser/cdfuserTOC.html#firstpage" show="replace" xml:link="simple">Component Description Format User Guide</a></em><a id="marker-940483"></a> for more information. <br />
<a id="pgfId-930419"></a>For the labels to be evaluated correctly, you must set <code>labelType</code><a id="marker-921986"></a> to <code>&quot;ILLabel&quot;</code> as shown in the following example:<pre class="webflare-pre-block webflare-courier-new" id="#id930422">
<a id="pgfId-930422"></a>label =  dbCreateLabel( 
             pcCellView 
             &#8217;(&quot;text&quot; &quot;drawing&quot;) 
             x:y 
             &quot;cdsName()&quot; 
             &quot;lowerLeft&quot; &quot;R0&quot; &quot;stick&quot; 5.0
        )
label~&gt;labelType = &quot;ILLabel&quot;</pre></li><li>
<a id="pgfId-937437"></a>The <code>pcFix</code> function lets you correct machine-dependent round-off error. If the argument of <code>pcFix</code> is no more than <code>0.001</code> away from an integer value, <code>pcFix</code> returns the integer value. Here are some examples:<br />
<a id="pgfId-937441"></a><table class="webflareTable" id="#id937442">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-937456"></a><code>pcFix(1.999999)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-937446"></a>returns <code>2.0</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-937484"></a><code>pcFix(2.000001)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-937450"></a>returns <code>2.0</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-937496"></a><code>pcFix(2.1)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-937502"></a>returns <code>2.1</code></p>
</td>
</tr>
</tbody></table></li></ul>










<h2>
<a id="pgfId-937363"></a><a id="20618"></a>Creating <a id="marker-937362"></a>Instances within Pcells</h2>

<p>
<a id="pgfId-204155"></a>It is often useful to create <a id="marker-921991"></a>instances of other cells within a Pcell. You can also create Pcell instances within a Pcell. For example, inside your Pcell code, you can create the following:</p>

<ol><li>
<a id="pgfId-204156"></a>Get the cellview ID of the cell to add as an instance:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id204157">
<a id="pgfId-204157"></a>cellId = dbOpenCellViewByType( <code><em>gt_lib</em></code> <code><em>t_cellName</em></code> <code><em>lt_viewName</em></code>)</pre></li><li>
<a id="pgfId-209246"></a>Create an instance of this cell:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id929378">
<a id="pgfId-929378"></a>inst = dbCreateInst( <code><em>d_cellView</em></code> <code><em>d_master</em></code> nil <code><em>l_point</em></code> <code><em>t_orient</em></code> 1)</pre></li><li>
<a id="pgfId-929379"></a>If the instance is a Pcell, use<br /><pre class="webflare-pre-block webflare-courier-new" id="#id929382">
<a id="pgfId-929382"></a>inst = dbCreateParamInst( 
            <code><em>d_cellView</em></code> <code><em>d_master</em></code> nil <code><em>l_point</em></code> <code><em>t_orient</em></code> 1
                 list( 
                     list( <code><em>param1Name</em></code> &quot;float&quot; 10.) 
                     list( <code><em>param2Name</em></code> &quot;string&quot; &quot;some string&quot; )</pre><pre class="webflare-pre-block webflare-courier-new" id="#id932373">
<a id="pgfId-932373"></a>                 ) ; close list</pre><pre class="webflare-pre-block webflare-courier-new" id="#id932353">
<a id="pgfId-932353"></a>) ; close dbCreateParamInst</pre></li></ol>













<h2>
<a id="pgfId-204166"></a><a id="marker-223755"></a><a id="44978"></a>Building <a id="marker-231206"></a>Nets, <a id="marker-231212"></a>Terminals<a id="marker-223773"></a>, and <a id="marker-231219"></a>Pins<a id="marker-223792"></a></h2>

<p>
<a id="pgfId-204167"></a>If you plan to use another tool that deals with layout connectivity, such as a router, device level editor, microwave extractor, or online extractor, you need to define the pins on your component layout cellviews. The pins in the layout cellview must match the pins in the schematic symbol cellview. The following steps show how to define pins in a layout Pcell.</p>

<ol><li>
<a id="pgfId-204168"></a>Create the shape that will serve as the pin. <br />
<a id="pgfId-210774"></a>The shape is usually a rectangle. <br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-924026"></a>The shape cannot be a polygon.</div><pre class="webflare-pre-block webflare-courier-new" id="#id204169">
<a id="pgfId-204169"></a>fig = dbCreateRect( <code><em>d_cellView</em></code> <code><em>tx_layer</em></code> list( <code><em>x1</em></code>:<code><em>y1</em></code> <code><em>x2</em></code>:<code><em>y2</em></code>))</pre></li><li>
<a id="pgfId-204170"></a>Create the net to which the pin attaches. <br />
<a id="pgfId-210885"></a>In this example, the pin name <code>n1</code> matches the name of the corresponding pin in the schematic symbol for this cell:<pre class="webflare-pre-block webflare-courier-new" id="#id204171">
<a id="pgfId-204171"></a>net = dbCreateNet( <code><em>d_cellView</em></code> &quot;n1&quot;)</pre></li><li>
<a id="pgfId-204172"></a>Create a terminal on the same net. <br />
<a id="pgfId-210913"></a>The terminal must have the same name as the net and match the terminal type. In this example, the terminal type is <code>inputOutput</code>, the same terminal type as the corresponding pin in the schematic symbol:<pre class="webflare-pre-block webflare-courier-new" id="#id204173">
<a id="pgfId-204173"></a>trm = dbCreateTerm( <code><em>d_net</em></code> &quot;n1&quot; &quot;inputOutput&quot;)</pre></li><li>
<a id="pgfId-204174"></a>Create a pin:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id930538">
<a id="pgfId-930538"></a>pin = dbCreatePin( <code><em>d_net</em></code> <code><em>d_fig</em></code> &quot;n1&quot;)</pre>
<a id="pgfId-210955"></a>The pin database object connects the pin figure with the net. The pin name can match the terminal name but does not have to. In the example, the pin name <code>n1</code> matches the terminal name.<br />
<a id="pgfId-204176"></a>Within the Pcell, you can have multiple shapes that all belong to the same electrical terminal. Each shape would have a pin to associate it to the same net. In such cases, each pin is created on the same net and must have a unique pin name.</li><li>
<a id="pgfId-204177"></a>If your tool requires pins to have an access direction, define the access direction:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id930560">
<a id="pgfId-930560"></a>pin~&gt;accessDir = &#8217;( &quot;top&quot; &quot;left&quot;)</pre>
<a id="pgfId-211144"></a>The access direction is a list identifying the correct sides of the pin shape for connection.</li></ol>


























<h2>
<a id="pgfId-204179"></a><a id="26071"></a>Accessing<a id="marker-922009"></a> <a id="marker-922015"></a><a id="marker-922612"></a>Technology File Data</h2>

<p>
<a id="pgfId-204180"></a>You can access nominal and minimum dimensions and other technology file information from within a Pcell, using <code>tech</code> procedures. Use <code>tech</code> procedures to keep process-specific information, such as layer-to-layer spacings, localized to the technology file. Make sure rules you want to read from the technology file are defined there before you load your Pcell code; otherwise, the Pcell compilation fails. </p>
<p>
<a id="pgfId-930598"></a>The following three examples show how to get data from the technology file.</p>

<h3>
<a id="pgfId-204181"></a>Example 1</h3>

<p>
<a id="pgfId-930599"></a>Access a single-layer spacing rule, such as the minimum width:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-209843"></a>tf = techGetTechFile(<code><em>d_cellView</em></code>)<br />d = techGetSpacingRule(tf &quot;minWidth&quot; &quot;layerName&quot;)</pre>
<h3>
<a id="pgfId-930615"></a>Example 2</h3>

<p>
<a id="pgfId-930603"></a>Access a two-layer property, such as the minimum spacing between two layers:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-204185"></a>d = techGetSpacingRule(tf &quot;minSpacing&quot; &quot;layer1&quot; &quot;layer2&quot;)</pre>
<h3>
<a id="pgfId-930617"></a>Example 3</h3>

<p>
<a id="pgfId-204187"></a>Access your own user-created property, such as the layer name for shapes:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-204188"></a>techGetLayerProp(tf &quot;layerName&quot; &quot;propName&quot;)</pre>
<h2>
<a id="pgfId-204203"></a><a id="12617"></a><a id="41978"></a>Variable <a id="marker-231233"></a>Scoping</h2>

<p>
<a id="pgfId-924086"></a>The code you <a id="marker-924084"></a>include within the <code>pcDefinePCell</code><a id="marker-924085"></a> function can access only local variables and the input parameters to the Pcell. Procedures called from Pcells, however, can access global variables. To prevent unintended access of global variables, use a <code>let</code><a id="marker-924087"></a><a id="marker-924088"></a> or <code>prog</code> construct in your procedures to define local variables. </p>
<p>
<a id="pgfId-930766"></a>In some situations, you might want to access global variables. If so, see the example about accessing global variables in <h-hot><a href="debugskillPcells.html#90981"></a><xrefstd>Debugging SKILL Pcells<h-hot /></xrefstd></h-hot>.</p>
<p>
<a id="pgfId-924096"></a>There is an example illustrating how to include <h-hot><a href="graphicalPcells.html#usrDefined">user-defined procedures in a Pcell</a></h-hot> in <h-hot><a href="graphicalPcells.html#64029"></a><xrefstd>Example 3: Calling User-Defined Procedures<h-hot /></xrefstd></h-hot>.</p>

<h2>
<a id="pgfId-204205"></a><a id="marker-231237"></a><a id="marker-922494"></a><a id="marker-922492"></a><a id="23837"></a>Schematic <a id="marker-223850"></a>Symbol Pcells</h2>

<p>
<a id="pgfId-943617"></a>The Virtuoso Schematic Editor design entry tool is built using the same graphic editor environment as the other Virtuoso tools. You can build schematic symbols as Pcells using SKILL. This makes it possible to have schematic symbols that change shape, depending on the parameters of the specific symbol instance.</p>
<p>
<a id="pgfId-955040"></a>The following example shows how to create a schematic symbol Pcell with the two parameters, <code>inputLeads</code> and <code>outputLeads</code>. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-955189"></a>pcDefinePCell(<br />    list( ddGetObj( &quot;pcellLib&quot;) &quot;MyPcell&quot; &quot;symbol&quot; &quot;schematicSymbol&quot;)<br />    ; formal parameters</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-955289"></a>    list(</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-955196"></a>        (inputLeads     &quot;string&quot; &quot;1&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-955499"></a>        (outputLeads    &quot;string&quot; &quot;2&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-955144"></a>    ) ;end of parameter list</pre>

<p>
<a id="pgfId-955140"></a>In the above example, a schematic Pcell called <code>MyPcell</code> is created with two output leads and one input lead. You can change the size of the symbol by changing the values of the parameters.</p>
<p>
<a id="pgfId-955730"></a>For more information about debugging a schematic Pcell, refer to <em><a actuate="user" class="URL" href="../PcellQSG/PcellQSGTOC.html#firstpage" show="replace" xml:link="simple">Pcell IDE - Quick Start Guide</a></em>.</p>

<h2>
<a id="pgfId-956956"></a><a id="93810"></a>Advantages of ROD Functions in Pcell</h2>

<p>
<a id="pgfId-956958"></a>Major advantages of using ROD to create Pcells are:</p>
<ul><li>
<a id="pgfId-956961"></a>A single ROD function call can complete a task that otherwise would require several lower-level SKILL function calls. For example, creating a pin required a series of low-level SKILL function calls, but with ROD, you can use a single function to create a shape and designate it as a pin. You can also create a derived object, that is, create an object from an existing object just by specifying the size of the new object.<br />
<a id="pgfId-956962"></a>In an object created using a ROD function, multiple handles for the same point are saved in memory in comparison to a similar object created using a database function. It saves a great deal of time and effort in calculating and tracking coordinates of new objects and aligning the objects.</li><li>
<a id="pgfId-956964"></a>You can base the Pcell parameters on rules from your technology file, making the Pcells tolerant of changes to your technology.</li><li>
<a id="pgfId-957002"></a>You can assign point handles to Pcell parameters that let you update the parameters interactively by stretching the Pcell in Virtuoso Layout Editor.</li></ul>




<h3>
<a id="pgfId-954343"></a>Using a Variable Number of Terminals</h3>

<p>
<a id="pgfId-930776"></a>With Pcell symbols, it is possible to specify a variable number of terminals. <a id="marker-922120"></a>The next figure shows the instances of variable inputs for the two nand Pcells.</p>

<p>
<a id="pgfId-375385"></a></p>
<div class="webflare-div-image">
<img src="images/varname.GIF" /></div>

<p>
<a id="pgfId-954357"></a>The only limitation is that the <a id="marker-922121"></a>netlisting software you use for simulation must be able to handle a variable number of terminals on these cells. For example, the microwave environment can handle a variable number of terminals on these cells. </p>
<p>
<a id="pgfId-954424"></a>If the application you want to use can handle a variable number of terminals, you can implement digital gates using Pcells. For example, instead of creating four or more NOR gate cells, each with a different number of inputs, you could create a single NOR gate cell with a cyclic parameter field that specifies the number of inputs.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-938571"></a></pre>
<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="howtopackage.html" id="prev" title="How to Package a Pcell">How to Package a Pcell</a></em></b><b><em><a href="skillPlusPcells.html" id="nex" title="Creating SKILL++ Parameterized Cells">Creating SKILL++ Parameterized ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;â € </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>