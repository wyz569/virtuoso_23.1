
<html><head><title>Helping Simulations to Converge</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="shubh" />
<meta name="CreateDate" content="2023-10-27" />
<meta name="CreateTime" content="1698403484" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the features of Virtuoso ADE Explorer" />
<meta name="DocTitle" content="Virtuoso ADE Explorer User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Helping Simulations to Converge" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="Explorer" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-10-27" />
<meta name="ModifiedTime" content="1698403484" />
<meta name="NextFile" content="chap15.html" />
<meta name="Order" content="0" />
<meta name="Group" content="ADE Explorer" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap13.html" />
<meta name="c_product" content="Virtuoso Analog Design Environment" />
<meta name="Product" content="Virtuoso Analog Design Environment" />
<meta name="ProductFamily" content="Virtuoso Analog Design Environment" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso ADE Explorer User Guide -- Helping Simulations to Converge" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="ExplorerIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="ExplorerTOC.html">Contents</a></li><li><a class="prev" href="chap13.html" title="Performing Circuit and Device Checks">Performing Circuit and Device  ...</a></li><li style="float: right;"><a class="viewPrint" href="Explorer.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap15.html" title="Working with AMS Simulator">Working with AMS Simulator </a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso ADE Explorer User Guide<br />Product Version IC23.1, November 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>14
<a id="pgfId-1012859"></a></h1>
<h1>
<a id="pgfId-1017559"></a><hr />
Helping Simulations to Converge<hr />
</h1>

<p>
<a id="pgfId-1013294"></a>This chapter describes how you can help a troublesome simulation to converge. Select topics from the following list to view more information.</p>
<ul><li>
<a id="pgfId-1013295"></a><a href="chap14.html#14863">Commands for Forcing Convergence</a></li><li>
<a id="pgfId-1013688"></a><a href="chap14.html#31611">Selecting Nodes and Setting their Values</a></li><li>
<a id="pgfId-1013317"></a><a href="chap14.html#71480">Loading an Existing Convergence Setup</a></li><li>
<a id="pgfId-1013329"></a><a href="chap14.html#34551">Highlighting Set Nodes</a></li><li>
<a id="pgfId-1013334"></a><a href="chap14.html#32937">Storing a Solution</a></li><li>
<a id="pgfId-1013402"></a><a href="chap14.html#39805">Restoring a Solution for Spectre</a></li></ul>






<h2>
<a id="pgfId-1013409"></a>Commands for Forcing Convergence<a id="14863"></a></h2>

<p>
<a id="pgfId-1012864"></a>You <a id="marker-1014603"></a>use the commands in the <em>Simulation &#8211; Convergence Aids</em> menu to help the simulator find a solution when it fails to achieve convergence. Once you get the simulation to converge, you can save the DC and Transient solutions. When you resimulate, you can save time by restoring the saved solutions. <a id="marker-1012865"></a><a id="marker-1012866"></a></p>
<p>
<a id="pgfId-1012867"></a>There are two commands to help the simulator find a solution:</p>

<p>
<a id="pgfId-1017434"></a></p>
<div class="webflare-div-image">
<img width="155" height="78" src="images/chap14-2.gif" /></div>

<ul><li>
<a id="pgfId-1013420"></a><em>Node Set</em>, which provides an initial guess for nodes in any DC analysis or the initial condition calculation for the transient analysis</li><li>
<a id="pgfId-1017414"></a><em>Initial Condition</em>, which provides initial conditions for nodes in the transient analysis </li></ul>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1017415"></a>An additional command,<em> Force Nod</em>e, appears when HSpiceD simulator is selected. See <a href="chap14.html#49418">Force Node</a> for more information.</div>
<p>
<a id="pgfId-1017296"></a>Refer to the simulator manual for specific details about the commands that help circuits converge. Not all simulators support these three commands, and simulators implement these methods differently. </p>

<h3>
<a id="pgfId-1012872"></a>Node Set</h3>

<p>
<a id="pgfId-1012874"></a>To set an initial DC voltage on selected nodes, use the <a id="marker-1012873"></a><em>Simulation &#8211; Convergence Aids &#8211; Node Set</em> command. </p>
<p>
<a id="pgfId-1013431"></a>For Spectre, the node set is used to provide an initial guess for nodes in any DC analysis or the initial condition calculation for the transient analysis. It netlists to </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013432"></a>nodeset <code><em>node</em></code>=<code><em>value</em></code></pre>

<p>
<a id="pgfId-1013433"></a>For more information, see the <em>Node Sets (nodeset)</em> section in the <em><a actuate="user" class="URL" href="../spectreref/chap4.html#firstpage" show="replace" xml:link="simple">Other Simulation Topics</a></em> chapter of the <em>Spectre Circuit Simulator Reference</em>. </p>
<p>
<a id="pgfId-1013434"></a>For other simulators, the <em>Node Set</em> command is equivalent to </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013435"></a>.NODESET v(<code><em>node)</em></code>=<code><em>value</em></code></pre>
<h3>
<a id="pgfId-1012879"></a>Initial Conditions</h3>

<p>
<a id="pgfId-1012881"></a>To set an initial transient voltage on selected nodes,<a id="transient"></a><a id="InitialCondition"></a> use the<em> Simulation &#8211; Convergence Aids &#8211; Initial Condition</em> command. The Select Initial Condition Set form appears with the schematic design.</p>

<p>
<a id="pgfId-1017699"></a></p>
<div class="webflare-div-image">
<img src="images/InitialCondition.gif" /></div>

<p>
<a id="pgfId-1017700"></a>For Spectre, initial conditions are used to provide initial conditions for nodes in the transient analysis. Initial conditions are accepted only for inductor currents and node voltages where the nodes have a path of capacitors to ground. This is netlisted to</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013441"></a>ic <code><em>node</em></code>=<code><em>value</em></code></pre>

<p>
<a id="pgfId-1013460"></a>For more information, see the Initial Conditions (ic) section in the <em><a actuate="user" class="URL" href="../spectreref/chap4.html#firstpage" show="replace" xml:link="simple">Other Simulation Topics</a></em> chapter of the <em>Spectre Circuit Simulator Reference</em>.</p>
<p>
<a id="pgfId-1013443"></a>For other simulators, the <em>Initial Condition</em> command is equivalent to</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013444"></a>.IC <code><em>node</em></code>=<code><em>value</em></code> </pre>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1017747"></a>In case the selected object is an instance, then the mapped instance name should be followed by the terminal index number of the instance in the <em>Initial Condition</em> statement.</div>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1017735"></a><code>ic node:index_number=</code><code><em>value</em></code></pre>
<h3>
<a id="pgfId-1017325"></a>Force Node<a id="49418"></a></h3>

<p>
<a id="pgfId-1017368"></a>Force Node command sets the voltage on a node and locks it at that voltage during the entire simulation. To set a node to a specific voltage throughout the simulation, use the <em>Simulation &#8211; Convergence Aids &#8211; Force Node</em> command. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1017351"></a>This command appears only when HSpiceD simulator is selected.</div>
<p>
<a id="pgfId-1017330"></a>For details on this command, see the reference manual for the simulator that you use. <a id="locking"></a><a id="marker-1017328"></a><a id="marker-1017329"></a></p>
<p>
<a id="pgfId-1017331"></a>One way to use this feature is to store the DC solution from a simulation with <em>Force Node</em> active, remove the <em>Force Node</em> setting, restore the DC solution, and run another simulation. </p>

<h3>
<a id="pgfId-1017268"></a>HspiceD Convergence Aids </h3>
<p>
<a id="pgfId-1014650"></a>The <em>Convergence Aids</em> submenu appears and works slightly different.</p>
<p>
<a id="pgfId-1014655"></a></p>
<div class="webflare-div-image">
<img width="156" height="68" src="images/chap14-4.gif" /></div>

<ul><li>
<a id="pgfId-1014656"></a><em>Convergence Aids &#8211; Node Set (.NODESET)</em> initializes specified nodal voltages for a DC operating point analysis. The<code>.NODESET</code> statement is used to correct convergence problems in a DC analysis. Setting nodes in the circuit to values that are close to the DC operating point solution enhances the convergence of the simulation. The <em>Select Node Set</em> form works in the same way as the Spectre Direct interface. The netlist will contain the<code> .NODESET</code> statement line.</li><li>
<a id="pgfId-1014657"></a><em>Convergence Aids &#8211; Initial Condition (.IC</em>) or <em>Convergence Aids&#8211; Force (.DCVOLT)</em> sets the transient initial conditions. The initialization depends on whether the UIC parameter is included in the .TRAN analysis statement. If the UIC parameter is specified in the .TRAN statement, the HSPICE simulator does not calculate the initial DC operating point. Consequently, the transient analysis is entered directly.</li><li>
<a id="pgfId-1016825"></a><em>Select Initial Condition Set </em>and the <em>Select Force Node Set</em> work in the same way as the Spectre Direct interface. The netlist contains the<code> .IC</code> and the<code> .DCVOLT</code> statement line, whichever the case may be.</li></ul>



<h2>
<a id="pgfId-1016827"></a>Selecting Nodes and Setting their Values<a id="31611"></a></h2>

<p>
<a id="pgfId-1015981"></a>Perform the following steps <a id="selecting"></a>to select a node and set its voltage:<a id="marker-1015980"></a></p>
<ol><li>
<a id="pgfId-1015982"></a>Choose <em>Simulation &#8211; Convergence Aids </em>and a convergence command (<em>Node Set, Initial Condition, </em>or<em> Force Node</em>).<br />
<a id="pgfId-1012899"></a>The s<a id="NodeSet"></a>chematic opens in a new tab and a form appears to enter the voltage. Each command displays a different form. The <em>Select Node Set</em> form is shown below.<br />
<a id="pgfId-1014100"></a><div class="webflare-div-image">
<img width="425" height="266" src="images/chap14-5.gif" /></div></li><li>
<a id="pgfId-1015993"></a>Type the voltage.</li><li>
<a id="pgfId-1015994"></a>Click in the schematic to select the first node.<br />
<a id="pgfId-1015995"></a>The node name appears in the form. <br />
<a id="pgfId-1012909"></a>In the schematic, the node is highlighted and the voltage appears. For split nets, the system labels only the driving cell.<br />
<a id="pgfId-1014117"></a><div class="webflare-div-image">
<img width="391" height="125" src="images/chap14-6.gif" /></div></li><li>
<a id="pgfId-1012913"></a>To set other nodes to the same voltage, select them.</li><li>
<a id="pgfId-1012914"></a>To set other nodes to a different voltage, change the voltage, and select other nodes.</li><li>
<a id="pgfId-1012915"></a>Click <em>OK</em> or <em>Cancel</em> when you are finished selecting nodes.</li></ol>
















<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1016026"></a>You can also set the node voltage in the <em>Select Node Set</em> form using a VAR(&#8220;<code>myVoltage</code>&#8221;) variable expression syntax. The variable, <code>myVoltage</code>, will then appear in the <em>Design Variables</em> section in the Setup assistant of Explorer. To provide a value for the variable, right-click the variable and choose <em>Edit Variable. </em>The<em> Editing Design Variables form </em>appears. Specify the value in the <em>Value</em> column of the <em>Design Variables</em> table. If you provide an expression, the value of the expression is calculated when you create the netlist.</div>
<p>
<a id="pgfId-1012916"></a>You can select nodes at any level of the hierarchy. When you select an interface node at a lower level, the node is highlighted, but the voltage value appears only on the higher-level schematic.</p>

<h3>
<a id="pgfId-1012917"></a>Releasing Voltages</h3>

<p>
<a id="pgfId-1012919"></a><a id="removing"></a>Perform the following steps to release the node set, initial condition, or force node voltage settings:</p>
<ol><li>
<a id="pgfId-1012920"></a>Choose <em>Simulation &#8211; Convergence Aids </em>and a convergence command (<em>Node Set</em>,<em> Initial Condition</em>, or <em>Force Node</em>).<br />
<a id="pgfId-1012921"></a>The schematic opens in a new tab and a form appears listing all of the nodes that have been set. The <em>Select Node Set</em> form is shown below.<br />
<a id="pgfId-1014127"></a><div class="webflare-div-image">
<img width="420" height="263" src="images/chap14-7.gif" /></div></li><li>
<a id="pgfId-1012928"></a>Click the net in the schematic to release it, or click the net name in the form and click <em>Delete</em>.<br />
<a id="pgfId-1012929"></a>On the form, you can select several nodes to release by holding down the left mouse button and dragging through the list box.</li><li>
<a id="pgfId-1016700"></a>Click <em>OK</em> or <em>Cancel</em> when you are finished releasing nodes.</li></ol>









<h3>
<a id="pgfId-1016702"></a>Changing Voltages</h3>

<p>
<a id="pgfId-1016704"></a><a id="changing"></a>Perform the following steps to change the value of the voltage set on a node:</p>
<ol><li>
<a id="pgfId-1016115"></a>Choose <em>Simulation &#8211; Convergence Aids </em>and a convergence command (<em>Node Set</em>,<em> Initial Condition</em>, or <em>Force Node</em>).<br />
<a id="pgfId-1016116"></a>The schematic opens in a new tab and a form appears listing all of the nodes that have been set. The <em>Select Node Set </em>form is shown below.<br />
<a id="pgfId-1014140"></a><div class="webflare-div-image">
<img width="443" height="270" src="images/chap14-8.gif" /></div></li><li>
<a id="pgfId-1012942"></a>Click the node name to highlight it.</li><li>
<a id="pgfId-1012943"></a>Type the new voltage value, and click <em>Apply</em>. </li><li>
<a id="pgfId-1016729"></a>Click <em>OK</em> or <em>Cancel</em> when you are finished changing voltages.</li></ol>









<h2>
<a id="pgfId-1016731"></a>Loading an Existing Convergence Setup<a id="71480"></a></h2>

<p>
<a id="pgfId-1016733"></a><a id="artForceNodeListLoadForm"></a>Perform the following steps to load an existing convergence setup:</p>
<ol><li>
<a id="pgfId-1016285"></a>Choose <em>Session &#8211; Load ADE L State</em>.<br />
<a id="pgfId-1016252"></a>The <em>Loading State</em> form appears. The form displays the state files in the run directory identified by the <em>Cell</em> and <em>Simulator</em> fields.</li><li>
<a id="pgfId-1012957"></a>Choose a run directory with the <em>Cell</em> and <em>Simulator</em> fields.<br />
<a id="pgfId-1012958"></a>The list box shows the saved states for the cell and simulator combination.</li><li>
<a id="pgfId-1012959"></a>Click a <em>State Name</em>.</li><li>
<a id="pgfId-1012960"></a>Check that <em>Convergence Setup</em> check box is selected, and click <em>OK</em>.</li></ol>






<h2>
<a id="pgfId-1012961"></a>Highlighting Set Nodes<a id="34551"></a></h2>

<p>
<a id="pgfId-1012963"></a><a id="highlighting"></a>While the <em>Select</em> commands are active, the system highlights selected nodes and labels them with the voltages you set. After you close the form, the system removes the highlighting and the labels. </p>
<p>
<a id="pgfId-1012966"></a>Perform the following step to redisplay the highlighting and labels:<a id="marker-1012964"></a><a id="marker-1012965"></a></p>

<ul><li>
<a id="pgfId-1012967"></a>Choose <em>Simulation &#8211; Convergence Aids </em>and a convergence command (<em>Node Set</em>, <em>Initial Condition</em>, or <em>Force Node</em>).</li></ul>

<p>
<a id="pgfId-1012968"></a>Perform the following step to remove the highlighting and labels:</p>

<ul><li>
<a id="pgfId-1012969"></a>Close the active <em>Select</em> form.</li></ul>
<h2>
<a id="pgfId-1012970"></a>Storing a Solution<a id="32937"></a></h2>

<p>
<a id="pgfId-1013479"></a>To store a solution for the Spectre simulator, use the <em>write</em> and <em>writefinal</em> fields in the <em>State File Parameters</em> section of any <em>Analysis Options</em> form.</p>

<p>
<a id="pgfId-1014153"></a></p>
<div class="webflare-div-image">
<img width="451" height="137" src="images/chap14-9.gif" /></div>

<p>
<a id="pgfId-1013491"></a>This causes the Spectre simulator to write out the initial and final conditions of a transient analysis. By default, the conditions are written to the files <code>spectre.ic</code> and <code>spectre.fc</code> in the netlist directory. </p>
<p>
<a id="pgfId-1016357"></a>To store the solution of an analysis, use the <em>write</em> and <em>writefinal</em> fields of the <em>DC Options</em> form for the analysis. </p>

<p>
<a id="pgfId-1016361"></a></p>
<div class="webflare-div-image">
<img width="424" height="241" src="images/chap14-10.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1016362"></a>This does not apply to spectre. Use the analysis options instead.</div>

<h2>
<a id="pgfId-1013675"></a>Restoring a Solution for Spectre<a id="39805"></a></h2>

<p>
<a id="pgfId-1013629"></a>To restore a saved transient solution, use the <em>readns</em> field in the <em>Convergence Parameters</em> section of the <em>Transient Options</em> form. Use the name of the file that was previously used in the <em>write</em> or <em>writefinal</em> sections of the same form. </p>

<p>
<a id="pgfId-1014189"></a></p>
<div class="webflare-div-image">
<img width="441" height="117" src="images/chap14-11.gif" /></div>

<p>
<a id="pgfId-1013634"></a>To stop using the solution, clear the field. </p>
<p>
<a id="pgfId-1013635"></a>To restore a saved DC solution, use the <em>readns</em> field in the <em>State-File Parameters</em> section of the <em>DC Options</em> form. Use the name of the file that was previously used in the <em>write</em> or <em>writefinal</em> sections of the same form. </p>

<p>
<a id="pgfId-1016445"></a></p>
<div class="webflare-div-image">
<img width="415" height="261" src="images/chap14-12.gif" /></div>

<p>
<a id="pgfId-1016447"></a>To stop using the solution, clear the field. <a id="33357"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap13.html" id="prev" title="Performing Circuit and Device Checks">Performing Circuit and Device  ...</a></em></b><b><em><a href="chap15.html" id="nex" title="Working with AMS Simulator">Working with AMS Simulator </a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>