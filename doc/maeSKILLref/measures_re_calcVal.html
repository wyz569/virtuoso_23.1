
<html><head><title>calcVal</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="namratam" />
<meta name="CreateDate" content="2023-10-27" />
<meta name="CreateTime" content="1698424182" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the SKILL functions for Virtuoso ADE Suite" />
<meta name="DocTitle" content="Virtuoso ADE SKILL Reference" />
<meta name="DocType" content="SKILL Reference" />
<meta name="FileTitle" content="calcVal" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="maeSKILLref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-10-27" />
<meta name="ModifiedTime" content="1698424182" />
<meta name="NextFile" content="measures_re_measureAcross.html" />
<meta name="Order" content="1" />
<meta name="Group" content="ADE Explorer, ADE Assembler" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="measures_re_axlSetOutputUserDefinedData.html" />
<meta name="c_product" content="Virtuoso Analog Design Environment" />
<meta name="Product" content="Virtuoso Analog Design Environment" />
<meta name="ProductFamily" content="Virtuoso Analog Design Environment" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso ADE SKILL Reference -- calcVal" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="reference" />
<meta name="reference_type" content="api reference" />
<meta name="prod_feature" content="ADE Explorer/ADE Assembler" />
<meta name="prod_subfeature" content="SKILL,Output Setup" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="maeSKILLrefIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="maeSKILLrefTOC.html">Contents</a></li><li><a class="prev" href="measures_re_axlSetOutputUserDefinedData.html" title="axlSetOutputUserDefinedData">axlSetOutputUserDefinedData</a></li><li style="float: right;"><a class="viewPrint" href="maeSKILLref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="measures_re_measureAcross.html" title="measureAcross">measureAcross</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso ADE SKILL Reference<br />Product Version IC23.1, November 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a id="Filename:re_calcVal" title="calcVal"></a><h3>
<a id="pgfId-1076870"></a><a id="43019"></a>calcVal</h3>
<a id="pgfId-1076904"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
calcVal(
<code><em>t_outputName
</em></code>[ <code><em>t_testName</em></code> ]
[ <code>?cornerName</code> <code><em>t_cornerName</em></code> ]
[ <code>?historyName</code> <code><em>t_historyName</em></code> ]
[ <code>?lib</code> <code><em>t_libName</em></code> ]
[ <code>?cell</code> <code><em>t_cellName</em></code> ]
[ <code>?view</code> <code><em>t_viewName</em></code> ]
[ <code>?run</code> <code><em>t_runName</em></code> ]
[ <code>?result</code> <code><em>t_resultName</em></code> ]
[ <code>?getFirstSweepPoint</code> <code><em>t_getFirstSweepPoint</em></code> ]
[ <code>?ignoreParams</code> <code><em>g_ignoreParams</em></code> ]
[ <code>?matchParams</code> <code><em>g_matchParams</em></code> ]
[ <code>?defaultVal</code> <code><em>t_defaultVal</em></code> ]
[ ?relxName <code><em>t_relxName</em></code> ]
[ <code>?ageValue</code> <code><em>t_ageValue</em></code> ]
[ <code>?ageUnit</code> <code><em>t_ageUnit</em></code> ]
[ <code>?she</code> <code><em>g_she </em></code>]
)
=&gt; <code><em>g_output</em></code> / <code>nil</code></pre>
<h4>
<a id="pgfId-1076929"></a>Description</h4>

<p>
<a id="pgfId-1077072"></a>Returns the value of an output from the same or another test. You can use the value returned by this function in another output expression.</p>

<h4>
<a id="pgfId-1077238"></a>Arguments</h4>
<table class="webflareTable" id="#id1077102">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077104"></a><span class="webflare-courier-new" style="white-space:pre"><em>t_outputName</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077106"></a>Name of the output or expression. The output can return a scalar value or waveform. To retrieve the value of an output of type signal, the simulation waveform results must be saved.</p>
<p>
<a id="pgfId-1080660"></a><strong>Limitation:</strong></p>
<p>
<a id="pgfId-1080677"></a>calcVal supports waveform outputs in expressions, but it does not support waveforms outputs used in subexpressions.</p>
<p>
<a id="pgfId-1080679"></a>For example, the following calcVal expression returns a good result :</p>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1080697"></a>a=calcVal(&quot;b&quot; &quot;test1&quot;) <br />;&#160;&#160;     where, b=(VT(&quot;/out1&quot;) + 1) </pre>
<p>
<a id="pgfId-1080700"></a>The following calcVal expression returns an error:</p>
<p>
<a id="pgfId-1080702"></a>c=calcVal(&quot;d&quot; &quot;test1&quot;) <br />;&#160;&#160;     where, d=(e + 1) and e=VT(&quot;/out1&quot;)</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077109"></a><span class="webflare-courier-new" style="white-space:pre"><em>t_testName</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077111"></a>Name of test name to which the given output belongs. When not specified, the name of the current test is used. </p>
<p>
<a id="pgfId-1077112"></a>You do not need to provide this argument when using the <code>calcVal</code> expression for global variables.</p>
<p>
<a id="pgfId-1077113"></a>For calcVal expressions that use the result of an output from another test, it is recommended to use outputs that return scalar values for better performance.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077115"></a><code>?cornerName </code><span class="webflare-courier-new" style="white-space:pre"><em>t_cornerName</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077119"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077121"></a>Name of the corner. When specified, the value of the given output for this corner is used. Name of a <h-hot><a actuate="user" class="URL" href="../Explorer/chap6.html#cornerSet" show="replace" xml:link="simple">corner group</a></h-hot> cannot be used in this argument.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1080170"></a>Do not use a SKILL expression to specify a corner name unless you are also using the <code>?historyName</code> argument in the <code>calcVal</code> expression.</div>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077124"></a><code>?historyName</code><span class="webflare-courier-new" style="white-space:pre"><em> t_historyName</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077128"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077130"></a>Name of the history from which the results are to be retrieved. When specified, the scalar or waveform result of the output from the given history is used. Otherwise, the value of the output from the current simulation run is used.</p>
<p>
<a id="pgfId-1077131"></a>You can use the following wildcards to find a history saved for the given cellview:</p>

<ul><li>
<a id="pgfId-1077132"></a><code>&lt;highest&gt;</code>: To match a history name that has the highest numerical value amongst all histories for which the name begins with the given prefix. For example, <code>Interactive.&lt;highest&gt;</code>.</li><li>
<a id="pgfId-1077133"></a><code>&lt;lowest&gt;</code>: To match a history name that has the lowest numerical value amongst all histories for which the name begins with the given prefix. For example, <code>Interactive.&lt;lowest&gt;</code>.</li><li>
<a id="pgfId-1077134"></a><code>&lt;latest&gt;</code>: To match the history name so that it is the latest amongst all histories for which the name matches the given pattern. The <code>&lt;latest&gt;</code> wildcard matches any substring. For example, <code>Inter&lt;latest&gt;</code> or <code>&lt;latest&gt;ive.4</code>.</li><li>
<a id="pgfId-1077135"></a><code>&lt;oldest&gt;</code>: To match the history name so that it is the oldest amongst all histories for which the name matches the given pattern. The <code>&lt;oldest&gt;</code> wildcard matches any substring. For example, <code>Inter&lt;oldest&gt;</code> or <code>&lt;oldest&gt;ive.4</code>.</li><li>
<a id="pgfId-1077136"></a><code>&lt;any&gt;</code>: To match a history name that begins with the given prefix followed by any substring. For example, <code>Hist&lt;any&gt;3</code> would match a history name that begins with <code>Hist</code> and ends with <code>3</code>.</li><li>
<a id="pgfId-1077137"></a><code>&lt;ro&gt;</code>: To match a history name irrespective of the <code>.RO</code> suffix. The editable or read-only status is ignored. For example, <code>Interactive.4&lt;ro&gt;</code> would match with <code>Interactive.4</code> or <code>Interactive.4.RO</code>.</li></ul>






<p>
<a id="pgfId-1077138"></a>You can combine two or more wildcards, for example, <code>In&lt;any&gt;.&lt;highest&gt;&lt;ro&gt;</code>. Ensure that the combination does not produce conflicting results. For example, avoid using <code>&lt;oldest&gt;</code> and <code>&lt;latest&gt;</code> together.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077141"></a><code>?lib</code><a id="calcValAcrossMaestroViews"></a><span class="webflare-courier-new" style="white-space:pre"><em> t_libName</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077145"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077147"></a>The library associated with the maestro cellview from where the results are to be retrieved. </p>
<p>
<a id="pgfId-1077148"></a>This argument can be used only when the <code>?historyName</code> argument is specified along with it. This ensures <code>calcVal</code> knows which history to retrieve the results from.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077150"></a><code>?cell</code><span class="webflare-courier-new" style="white-space:pre"><em> t_cellName</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077154"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077156"></a>The cell associated with the maestro cellview from where the results are to be retrieved. </p>
<p>
<a id="pgfId-1077157"></a>This argument can be used only when the <code>?historyName</code> argument is specified along with it. This ensures that <code>calcVal</code> knows which history to retrieve the results from.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077159"></a><code>?view</code><span class="webflare-courier-new" style="white-space:pre"><em> t_viewName</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077163"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077165"></a>The view associated the maestro cellview from where the results are to be retrieved. </p>
<p>
<a id="pgfId-1077166"></a>This argument can be used only when the <code>?historyName</code> argument is specified along with it.This ensures that <code>calcVal</code> knows which history to retrieve the results from.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077168"></a><code>?run</code><span class="webflare-courier-new" style="white-space:pre"><em> t_runName</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077172"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077174"></a>Name of the run plan from which the value of the given output is to be returned. This argument is useful only when the setup has a run plan.</p>
<p>
<a id="pgfId-1077175"></a>Use this argument to get the value of an output from the results of one run (in the run plan) and use it in a variable, expression, or run condition for another run in the same run plan or history. It cannot be used to refer to the results of any other history. When both <code>?run</code> and <code>?historyName</code> are specified, <code>?historyName</code> is ignored by <code>calcVal</code>.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1077176"></a>The <code>?run</code> argument is used only for a cellview created using ADE Assembler.</div>
<p>
<a id="pgfId-1077178"></a>Also see: <h-hot><a actuate="user" class="URL" href="../assembler/asmRunPlan.html#calcValInRun" show="replace" xml:link="simple">Using Results of One Run in Another</a></h-hot></p>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077180"></a><code>?result</code><span class="webflare-courier-new" style="white-space:pre"><em> t_resultName</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077184"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077186"></a>Name of an analysis from which the <code>signal</code> type output is to be to retrieved. When specified, returns a waveform for the corresponding output of that analysis. Use this argument only for the outputs of type <code>signal</code>.</p>
<p>
<a id="pgfId-1077187"></a>The specified analysis must exist in the test along with the simulation waveform results in order for <code>calcVal</code> to return the expected result.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077189"></a><code>?getFirstSweepPoint </code><span class="webflare-courier-new" style="white-space:pre"><em>t_getFirstSweepPoint </em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077193"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077195"></a>Specifies that when sweep values are used, the result of only the first swept point is to be used for calculation. </p>
<p>
<a id="pgfId-1077196"></a>If <code>?cornerName</code> is specified with this argument, the function retrieves the output value of the first swept point for the given corner. Otherwise, calcVal retrieves the results for all the corners set up for the test.</p>
<p>
<a id="pgfId-1077197"></a>Default value: <code>nil </code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077200"></a><code>?matchParams </code><a id="matchParams"></a><span class="webflare-courier-new" style="white-space:pre"><em>t_matchParams</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077205"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079808"></a>Specifies the requirements to look for points that have matched variables and parameters in the current run and the source run. The source run can be of any other test in the current history, or the same or another test in another history specified by <code>?historyName</code>.</p>
<p>
<a id="pgfId-1079809"></a>Possible values:</p>

<ul><li>
<a id="pgfId-1079810"></a><code>&quot;none&quot;</code>: (Default value) Does not look for the matched variables and parameters. Instead, it uses the result value for the current data point if all data points in the source and target tests are same. Otherwise, <code>calcVal</code> returns <code>nil</code>. </li><li>
<a id="pgfId-1079811"></a><code>&quot;all&quot;</code>: Matches each variable or parameter value in the current test with the variables and parameters of the source test. If an identical point is found, returns the required output value for that point. If no point with the same number and values of variables and parameters is found, returns <code>nil</code>. </li><li>
<a id="pgfId-1079812"></a>A list containing a list of name-value pairs of the parameters to be matched: Compares the given variables and parameters. The list is given in the <code>list(list(&lt;param1&gt; &lt;val1&gt;) list(&lt;param2&gt; &lt;val2&gt;) ...)</code> format, where <code>&lt;valN&gt;</code> can be a constant or a value returned by a user-defined function. If the same variables and parameters are found with the given values in both source and target points, returns the value of the given output. </li></ul>



<p>
<a id="pgfId-1079813"></a><strong>Important Points to Note</strong></p>

<ul><li>
<a id="pgfId-1079814"></a>This argument considers the corners and sweep parameters in the same way.</li><li>
<a id="pgfId-1079815"></a>If the <code>?getFirstSweepPoint</code> argument is set to <code>t</code>, only the first parameter is compared.</li><li>
<a id="pgfId-1079816"></a>Avoid setting <code>?matchParams</code> as <code>&quot;none&quot;</code> when the tests contain local sweeps.</li><li>
<a id="pgfId-1079817"></a>Escape the string values. Example, <code>(list &quot;trim&quot; &quot;\&quot;b\&quot;&quot;)</code>.</li><li>
<a id="pgfId-1079818"></a>If no matching point is found, the function returns <code>nil</code>. If multiple matching points are found and each point belongs to a different corner, calcVal returns the value from the corner that has the same name as that of the current corner for which the function is being evaluated&#8211;this is called corner affinity. In all other cases, calcVal returns <code>nil</code>.</li></ul>





</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077219"></a><code>?ignoreParams</code><a id="ignoreParams"></a><span class="webflare-courier-new" style="white-space:pre"><em> g_ignoreParams</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077223"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077225"></a>Ignores the specified parameters. For example, a local parameter value that is different in the source and the target test or a parameter whose value is a <code>calcVal</code> expression. </p>
<p>
<a id="pgfId-1077226"></a>If a list of name-value pairs are specified for <code>?matchParams</code>, the given parameters must match with the given value. Values of all other parameters should match with the values of corresponding parameters in the current point. If you want to consider only <code>?matchParams</code> and ignore the rest of the variables and parameters that are not specified by <code>?matchParams</code>, set <code>?ignoreParams</code> to <code>rest</code>.</p>
<p>
<a id="pgfId-1077227"></a>If the model files in the setup of the source and target tests are different and you want to ignore those while comparing setups, add <code>modelFiles</code> to the list specified for <code>?ignoreParams</code>.</p>
<p>
<a id="pgfId-1077228"></a>If <code>?ignoreParams</code> is specifed without <code>?matchParams</code>, the tool assumes <code>?matchParams</code> to be set to <code>all</code>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1077230"></a><code>?defaultVal</code><span class="webflare-courier-new" style="white-space:pre"><em> t_defaultVal</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077234"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077236"></a>The default value to be returned if <code>calcVal</code> fails for any reason.</p>
<p>
<a id="pgfId-1077237"></a>This is helpful when <code>calcVal</code> is used in an expression for a dependent output measurement, or in the input value for a test variable.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1079531"></a><code>?relxName </code><span class="webflare-courier-new" style="white-space:pre"><em>t_relxName</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079527"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079529"></a>Name of the reliability setup to be used.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1079523"></a><code>?ageValue </code><span class="webflare-courier-new" style="white-space:pre"><em>t_ageValue</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079515"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079517"></a>Specifies one of the following values:</p>

<ul><li>
<a id="pgfId-1079518"></a><code>Fresh</code>: For the fresh stage</li><li>
<a id="pgfId-1079519"></a><code>Stress</code>: For stress stage</li><li>
<a id="pgfId-1079520"></a><span class="webflare-courier-new" style="white-space:pre"><em>age_number</em></span>: For aged stage (Aging simulation)</li></ul>



<blockquote id="#id1079521">
<a id="pgfId-1079521"></a>&quot;<span class="webflare-courier-new" style="white-space:pre"><em>age_number</em></span>&quot; specifies the age points at which the device degradation is calculated.</blockquote>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1079511"></a><code>?ageUnit </code><span class="webflare-courier-new" style="white-space:pre"><em>t_ageUnit</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079505"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079507"></a>Specifies the unit for the age points.</p>
<p>
<a id="pgfId-1079508"></a>Valid Values: <code>yr</code>, <code>year</code>, <code>years</code>, <code>d</code>, <code>day</code>, <code>days</code>, <code>h</code>, <code>hour</code>, <code>hours</code>, <code>min</code>, <code>minute</code>, <code>minutes</code>, <code>sec</code>, <code>second</code>, <code>seconds</code>.</p>
<p>
<a id="pgfId-1079509"></a>Default Value: <code>year</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079497"></a><code>?she </code><span class="webflare-courier-new" style="white-space:pre"><em>g_she</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079499"></a>Boolean value to specify whether the self-heating effect is enabled.</p>
<p>
<a id="pgfId-1079500"></a>Valid Values:</p>

<ul><li>
<a id="pgfId-1079501"></a><code>t</code>: Self-heating effect is enabled</li><li>
<a id="pgfId-1079502"></a><code>nil</code>: Self-heating effect is disabled</li></ul>


<p>
<a id="pgfId-1079503"></a>Default Value: <code>nil</code></p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-1077249"></a>Value Returned</h4>
<table class="webflareTable" id="#id1077239">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077241"></a><span class="webflare-courier-new" style="white-space:pre"><em>g_output</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077243"></a>Returns the value of the output.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077245"></a><code>nil</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077247"></a>Returns <code>nil</code> if the function fails and the default value is not specified. </p>
<p>
<a id="pgfId-1077248"></a>The function fails when the values specified for its arguments are not correct. For example, when the specified test, output expression, or corner is not found in the given history or when there is no history that matches the criteria set by the <code>?historyName</code> argument.</p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-1077296"></a>Examples</h4>

<p>
<a id="pgfId-1077298"></a>In the following example, <code>avg_vt</code> represents the expression <code>average(VT(&quot;/out&quot;))</code> and <code>myTest</code> is the test name:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1077299"></a>calcVal(&quot;avg_vt&quot; &quot;myTest&quot;)</pre>

<p>
<a id="pgfId-1077301"></a>You can compute the value of an expression with reference to another expression from a different test, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1077302"></a>calcVal(&quot;output1&quot; &quot;test1&quot;)/calcVal(&quot;output2&quot; &quot;test3&quot;)</pre>

<p>
<a id="pgfId-1077304"></a>You can also use the output value for a corner, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1077305"></a>calcVal(&quot;Gain&quot; &quot;AC&quot; ?cornerName &quot;C2&quot;)</pre>

<p>
<a id="pgfId-1077307"></a>You can also use the output value from a history that has the highest numerical value suffixed with the history name <code>Interactive</code>, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1077308"></a>calcVal(&quot;Gain&quot; &quot;AC&quot; ?historyName &quot;Interactive.&lt;highest&gt;&quot;)</pre>

<p>
<a id="pgfId-1077310"></a>You can use the waveform from the result, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1077311"></a>calcVal(&quot;/OUT&quot; &quot;AC&quot; ?result &quot;ac&quot;)<br />=&gt; srrWave:0x40421090</pre>

<p>
<a id="pgfId-1077313"></a>If you want to retrieve the value from only the first sweep point, you can use the <code>?getFirstSweepPoint</code> argument. The following example will always return the first sweep point value of <code>myCalib</code> in the test <code>calib_tb</code>. This is useful if you run a sweep on the test where the <code>calcVal</code> expression is used but the source of the value <code>myCalib</code> is not swept. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1077314"></a>calcVal(&quot;myCalib&quot; &quot;calib_tb&quot;&#160;&#160;?getFirstSweepPoint t)</pre>

<p>
<a id="pgfId-1077316"></a>You can specify a default value that can be used when the result for the specified output is not found.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1077317"></a>calcVal(&quot;Gain&quot; &quot;AC&quot; ?cornerName &quot;C2&quot; ?defaultVal &quot;1000&quot;)</pre>

<p>
<a id="pgfId-1077319"></a>The default value can also be used to show an error message when the result for the corner is not available.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1077320"></a>calcVal(&quot;Gain&quot; &quot;AC&quot; ?cornerName &quot;C2&quot; ?defaultVal &quot;ERROR: Gain for C2 is not available&quot;)</pre>

<p>
<a id="pgfId-1077322"></a>You can retrieve the results from a nominal run. The following example would give an output, which is the ratio of the measured frequency of the specified corner to the frequency in the nominal run:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1077323"></a>calcVal(&quot;Freq&quot;)/calcVal(&quot;Freq&quot; ?cornerName &quot;Nominal&quot;)<br /></pre>

<p>
<a id="pgfId-1077325"></a>This example shows how <code>?matchParams</code> works when multiple matching points are found and they belong to different corners.</p>
<p>
<a id="pgfId-1077326"></a>The setup contains two tests, AC and TRAN, with multiple points and corners. The corners setup appears as shown below. </p>

<p>
<a id="pgfId-1077330"></a></p>
<div class="webflare-div-image">
<img width="668" height="226" src="images/measures-3.gif" /></div>

<p>
<a id="pgfId-1077331"></a>The test TRAN has an output <code>GainVal</code> with the <code>calcVal</code> expression shown below. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1077332"></a>calcVal(&quot;Gain&quot; &quot;AC&quot; ?matchParams &quot;all&quot;)</pre>

<p>
<a id="pgfId-1077333"></a>The corners <code>Nominal</code> and <code>C0</code> are identical, so <code>calcVal</code> evaluation for each point finds two corners in which all variables and parameters match. However, the <code>calcVal</code> expression is successfully evaluated only for <code>Nominal</code>. </p>
<p>
<a id="pgfId-1077334"></a>For <code>C0</code>, it returns <code>eval err</code> because when <code>?matchParams</code> is used, even though <code>calcVal</code> finds the matching point in multiple corners, it can use the value from a corner that has the same name as that of the corner for which the expression is being evaluated, which is <code>C0</code> in this case. <code>C0</code> is disabled for AC, so no value is returned for <code>Gain</code>. Therefore, the output returns an error. To return a value result for <code>GainVal</code>, you must enable <code>C0</code> for AC.<br /></p>

<div class="webflare-div-image">
<img width="668" height="229" src="images/measures-4.gif" /></div>
<h4>
<a id="pgfId-1077339"></a><strong>More Examples Using ?matchParams</strong></h4>

<p>
<a id="pgfId-1077340"></a>The following examples show how you can use the <code>?matchParams</code> argument of <code>calcVal</code>. The base setup used in these examples is shown below.</p>

<p>
<a id="pgfId-1077344"></a></p>
<div class="webflare-div-image">
<img width="668" height="519" src="images/measures-5.gif" /></div>

<p>
<a id="pgfId-1077345"></a>This setup contains two tests, <code>calib_tb</code> and <code>tank_tb</code>. </p>
<p>
<a id="pgfId-1077346"></a>If not overriding, these tests use four global variables: <code>C0_cap</code>, <code>L0_ind</code>, <code>freq_target</code>, and <code>calibval</code>. <code>calibval</code> contains an expression that uses the value of the <code>myCalib</code> output defined for the test <code>calib_tb</code>.</p>

<p>
<a id="pgfId-1077350"></a></p>
<div class="webflare-div-image">
<img width="668" height="233" src="images/measures-6.gif" /></div>

<p>
<a id="pgfId-1077351"></a>The <code>VAR(&quot;calibval&quot;)</code>output of test <code>tank_tb</code> returns the value of the <code>calibval</code> global variable, which saves the result of the <code>calcVal</code> function. </p>
<p>
<a id="pgfId-1077352"></a>In the following example cases, you can observe the difference in the value of <code>VAR(&quot;calibval&quot;)</code>for different values of <code>?matachParam</code>, and varying variables and parameters:</p>

<h4><em>
<a id="pgfId-1077353"></a>Case I: ?matchParams is set to the default value (&quot;none&quot;), the number of data points in the calibrated and target tests is same, and the swept variables and corners are identical</em></h4>
<p>
<a id="pgfId-1077357"></a></p>
<div class="webflare-div-image">
<img width="668" height="464" src="images/measures-7.gif" /></div>

<p>
<a id="pgfId-1077358"></a>For each data point of tank_tb, there will be a valid value of the <code>calibval</code> global variable. Thus, <code>calcVal</code> returns a valid, non-nil value.</p>
<table class="webflareTable" id="#id1077359">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077361"></a>calib_tb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077363"></a>C0_cap=5p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077365"></a>C0_cap=5p L0_ind=11n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077367"></a>C0_cap=6p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077369"></a>C0_cap=6p L0_ind=11n</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077371"></a>myCalib</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077373"></a>198</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077375"></a>4</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077377"></a>99</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077379"></a>-85</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077381"></a>tank_tb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077383"></a>C0_cap=5p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077385"></a>C0_cap=5p L0_ind=11n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077387"></a>C0_cap=6p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077389"></a>C0_cap=6p L0_ind=11n</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077391"></a>calibval</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077393"></a>198</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077395"></a>4</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077397"></a>99</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077399"></a>-85</p>
</td>
</tr>
</tbody></table>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1077400"></a>In the case described above, the return value would be same if <code>?matchParams</code> is set to <code>&quot;all&quot;</code> because the count and values of all variables and parameters match.</div>

<h4><em>
<a id="pgfId-1077401"></a>Case II: ?matchParams is set to the default value (&quot;none&quot;), the number of data points in the calibrated and target tests is same, but the values are different</em></h4>
<p>
<a id="pgfId-1077405"></a></p>
<div class="webflare-div-image">
<img width="668" height="464" src="images/measures-8.gif" /></div>

<p>
<a id="pgfId-1077406"></a>In this example, <code>?matchParams</code> is set to <code>&quot;none&quot;</code>, but <code>calcVal</code> does not look for any matching variable because the setup contains local sweeps. As a result, for each point of tank_tb, <code>calcVal</code> returns <code>nil</code>.</p>
<table class="webflareTable" id="#id1077407">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077409"></a>calib_tb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077411"></a>C0_cap=5p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077413"></a>C0_cap=5p L0_ind=11n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077415"></a>C0_cap=6p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077417"></a>C0_cap=6p L0_ind=11n</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077419"></a>myCalib</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077421"></a>198</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077423"></a>4</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077425"></a>99</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077427"></a>-85</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077429"></a>tank_tb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077431"></a>C0_cap=5p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077433"></a>C0_cap=5p L0_ind=11n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077435"></a>C0_cap=11p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077437"></a>C0_cap=11p L0_ind=11n</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077439"></a>calibval</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077441"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077443"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077445"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077447"></a>nil</p>
</td>
</tr>
</tbody></table>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1077448"></a>
In the case shown above, <code>calcVal</code> does not return valid results. Therefore, it is recommended to use <code>?matchParams</code> set to <code>&quot;none&quot;</code> only when the tests do not have local sweeps, the count of the enabled sweep points and corners in the source and target test is same and they are identical. </div>

<p>
<a id="pgfId-1077449"></a>In case II described above, if <code>?matchParams</code> is set to <code>&quot;all&quot;</code> instead of <code>&quot;none&quot;</code>, <code>calcVal</code> looks for matching variables and parameters in other points, and the results are different, as shown below.</p>
<table class="webflareTable" id="#id1077450">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077452"></a>calib_tb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077454"></a>C0_cap=5p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077456"></a>C0_cap=5p L0_ind=11n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077458"></a>C0_cap=6p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077460"></a>C0_cap=6p L0_ind=11n</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077462"></a>myCalib</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077464"></a>198</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077466"></a>4</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077468"></a>99</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077470"></a>-85</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077472"></a>tank_tb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077474"></a>C0_cap=5p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077476"></a>C0_cap=5p L0_ind=11n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077478"></a>C0_cap=11p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077480"></a>C0_cap=11p L0_ind=11n</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077482"></a>calibval</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077484"></a>198</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077486"></a>4</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077488"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077490"></a>nil</p>
</td>
</tr>
</tbody></table>

<h4><em>
<a id="pgfId-1077491"></a>Case III: ?matchParams is set to &quot;all&quot; and the target test has more data points than the calibrated test</em></h4>
<p>
<a id="pgfId-1077495"></a></p>
<div class="webflare-div-image">
<img width="668" height="464" src="images/measures-9.gif" /></div>

<p>
<a id="pgfId-1077496"></a><code>calcVal</code> does not find matching data points for some parameters. For those points, it returns <code>nil</code>, as shown below.</p>
<table class="webflareTable" id="#id1077497">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077499"></a>calib_tb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077501"></a>C0_cap=5p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077503"></a>C0_cap=5p L0_ind=11n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077505"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077507"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077509"></a>myCalib</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077511"></a>198</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077513"></a>4</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077515"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077517"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077519"></a>tank_tb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077521"></a>C0_cap=5p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077523"></a>C0_cap=5p L0_ind=11n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077525"></a>C0_cap=6p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077527"></a>C0_cap=6p L0_ind=11n</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077529"></a>calibval</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077531"></a>198</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077533"></a>4</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077535"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077537"></a>nil</p>
</td>
</tr>
</tbody></table>

<h4><em>
<a id="pgfId-1077538"></a>Case IV: ?matchParams is set to list(list(&quot;L0_ind&quot; &quot;11n&quot;) list(&quot;C0_cap&quot; &quot;8p&quot;))</em></h4>
<p>
<a id="pgfId-1077542"></a></p>
<div class="webflare-div-image">
<img width="668" height="464" src="images/measures-10.gif" /></div>

<p>
<a id="pgfId-1077543"></a>In this case, <code>calcVal</code> looks for data points in the calibrated test that have parameters <code>L0_ind=11n</code> and <code>C0_cap=8p</code>. If found, the target test uses the value of the <code>myCalib</code> expression to get the value for <code>calibval</code> for all the points in the target test, as shown below.</p>
<table class="webflareTable" id="#id1077544">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077546"></a>calib_tb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077548"></a>C0_cap=5p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077550"></a>C0_cap=5p L0_ind=11n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077552"></a>C0_cap=8p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077554"></a>C0_cap=8p L0_ind=11n</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077556"></a>myCalib</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077558"></a>198</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077560"></a>4</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077562"></a>99</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077564"></a>-85</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077566"></a>tank_tb</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077568"></a>C0_cap=8p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077570"></a>C0_cap=8p L0_ind=11n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077572"></a>C0_cap=6p L0_ind=9n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077574"></a>C0_cap=6p L0_ind=11n</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077576"></a>calibval</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077578"></a>-85</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077580"></a>-85</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077582"></a>-85</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1077584"></a>-85</p>
</td>
</tr>
</tbody></table>

<h4><em>
<a id="pgfId-1077585"></a>Case V: ?matchParams is used with ?ignoreParams where ?matchParams is set to &quot;all&quot; and ?ignoreParams is set to list (&quot;calibVal&quot;)</em></h4>
<p>
<a id="pgfId-1077589"></a></p>
<div class="webflare-div-image">
<img width="668" height="528" src="images/measures-11.gif" /></div>

<p>
<a id="pgfId-1077590"></a>On using <code>?matchParams</code> with <code>?ignoreParams</code>, <code>calcVal</code> looks for matching data points but ignores the local sweep variable <code>calibval</code> that has different values in both the tests. The target test then uses the value of the <code>myCalib</code> expression to get the value for <code>calcVal_withIgnore</code> for all the points in the target test.</p>
<p>
<a id="pgfId-1077591"></a>However, on setting <code>?matchParams</code> to <code>&quot;all&quot;</code> without using<code> ?ignoreParams</code>, you get an evaluation error, as <code>calcVal</code> tries to match all data points and encounters <code>calibval</code> that has a different value in both the tests.</p>

<p>
<a id="pgfId-1079837"></a></p>
<div class="webflare-div-image">
<img width="668" height="519" src="images/measures-12.gif" /></div>
<h4>
<a id="pgfId-1079865"></a>Recommendations for ?output in calcVal</h4>

<p>
<a id="pgfId-1079866"></a>Consider the following recommendations while using <code>calcVal</code> expressions in outputs:</p>
<ul><li>
<a id="pgfId-1079867"></a>To optimize <code>calcVal</code> performance, it is recommended to point <code>calcVal</code> to scalar output expressions. Though <code>calcVal</code> can also be used on signals and expression resulting into waveforms, it is costly to evaluate those. <br />
<a id="pgfId-1079868"></a>For example, to get <code>ymax</code> of signal <code>\OUT</code> from <code>test1</code> in <code>test2</code>, you can use two options:<ul><li>
<a id="pgfId-1079869"></a>Use <code>calcVal</code> to get the signal <code>\OUT</code> into <code>test2</code> and then calculate <code>ymax</code> in <code>test2</code></li><li>
<a id="pgfId-1079870"></a>Calculate <code>ymax</code> of <code>\OUT</code> in <code>test1</code> itself and fetch that scalar value by <code>calcVal</code></li></ul><br />
<a id="pgfId-1079871"></a>The second option is more efficient. However, there can certainly be cases when it cannot be avoided to use <code>calcVal</code> on waveform expression and signals. </li><li>
<a id="pgfId-1079872"></a>You can use <code>calcVal</code> inside complex expressions, however, it is more efficient to use a separate output expression for each <code>calcVal</code>. This helps in debugging because you can see which part of the expression might cause an issue. <br />
<a id="pgfId-1079873"></a>For example, the expression <code>myValue = max(calcVal(&#8230;) calcVal(&#8230;))</code>, can be represented as shown below.<pre class="webflare-pre-block webflare-courier-new" id="#id1079874">
<a id="pgfId-1079874"></a>value1 = calcVal(&#8230;)
value2=calcVal(&#8230;)
myValue=max(value1 value2)</pre></li></ul>








<h4>
<a id="pgfId-1077596"></a>Recommendations for Using ?matchParams in calcVal</h4>

<p>
<a id="pgfId-1077597"></a>Depending on the variable and corner settings in the target and source (calibrated) test, you can specify an appropriate value for the <code>?matchParams</code> argument of <code>calcVal</code> to obtain correct results. You may find the following recommendations useful:</p>
<ul><li>
<a id="pgfId-1077598"></a>Use the default value, <code>&quot;none&quot;</code>, when the following conditions are met:<ul><li>
<a id="pgfId-1077599"></a>The source and target tests do not use local sweep variables</li><li>
<a id="pgfId-1077600"></a>The count of sweep values of variables and corners in the source and target tests is same</li><li>
<a id="pgfId-1077601"></a>The values of all enabled corners and swept variables are identical</li></ul><br />
<a id="pgfId-1077602"></a>In this case, <code>calcVal</code> considers only the count, and setup of variables and corners. It does not look for matching parameters. </li><li>
<a id="pgfId-1077603"></a>Set <code>?matchParams</code> to <code>&quot;all&quot; </code>when the tests have local sweeps or corners with varying values. In this case, <code>calcVal</code> finds points with matching sweeps and corners in the current or given history or run of the source test. </li><li>
<a id="pgfId-1077604"></a>Set <code>?matchParams</code> to <code>&lt;a-list-of-specific-design-points&gt;</code> or a user-defined function that returns a list containing name-value pairs of variables when the tests have local sweeps or corners with varying values, and you want <code>calcVal</code> to explicitly look for the given matching design points in the source and target tests. See the example in case IV above. You can also use the <code>?ignoreParams</code> argument in addition to the <code>?matchParams</code> argument to ignore specific parameters in case you have local parameters with varying values or a parameter that has a <code>calcVal</code> expression as a a value.</li><li>
<a id="pgfId-1077605"></a>To use the results of a non-identical corner from the source test, use the default value of <code>?matchParams</code> and specify the corner name of the source test by using the <code>?cornerName</code> argument.</li><li>
<a id="pgfId-1077606"></a>To use the results from another history or run by using the <code>?history</code> or <code>?run</code> arguments of <code>calcVal</code>, ensure that the design points are identical. These arguments can be used with any value of <code>?matchParams</code>.</li><li>
<a id="pgfId-1077607"></a>Do not specify <code>?matchParams</code> when <code>?getFirstSweepPoint</code> is set to <code>t</code>, which indicates that the result of the first sweep point in the source test is to be used for all design points in the target test. <code>?getFirstSweepPoint</code> works with the default value of <code>?matchParams</code> and ignores any other value set for it.</li></ul>










<h3>
<a id="pgfId-1077711"></a>Troubleshooting<a id="troubleshootingCalcVal"></a> calcVal</h3>

<p>
<a id="pgfId-1077712"></a>Before running a simulation, ADE Explorer or ADE Assembler check the <code>calcVal</code> expressions in outputs or variables for any syntax issues and report errors that you can fix before running the simulation. If you proceed without fixing the syntax issues or if the values assigned to the arguments during runtime are invalid, the expressions return <code>eval err</code>. You can set the <code>debug</code><a id="message URL ../assembler/appEnvVars.html#debug"></a> environment variable to specify the level of details to be reported in the log file to help you resolve issues.</p>
<p>
<a id="pgfId-1077714"></a>The examples cases described in this section show how you can resolve issues for <code>calcVal</code> expressions.</p>

<h4>
<a id="pgfId-1077716"></a>Case<a id="case1"></a> 1: calcVal with Local Sweeps</h4>

<p>
<a id="pgfId-1077717"></a>With local sweep values, the <em>Results</em> tab displays independent sweep points for each test. In such cases, on using <code>calcVal</code> with just the arguments <span class="webflare-courier-new" style="white-space:pre"><em>t_outputName</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>t_testName</em></span>, the function returns an evaluation error or <code>nil</code>. This is because when <code>calcVal</code> tries to fetch the target value from the specified test, it looks for the same sweep point as that of the test where the function is specified.</p>
<p>
<a id="pgfId-1077718"></a>For example, let us consider the following setup.</p>

<p>
<a id="pgfId-1077722"></a></p>
<div class="webflare-div-image">
<img width="668" height="409" src="images/measures-13.gif" /></div>

<p>
<a id="pgfId-1077723"></a>Here, on using the function <code>calcVal(&quot;UGF&quot;</code> <code>&quot;AC&quot;)</code>for the second sweep point of the test <code>TRAN</code>, <code>calcVal</code> will try to find the value of <code>UGF</code> from the second sweep point for the test <code>AC</code>, which does not exist. This will result in an evaluation error. </p>
<p>
<a id="pgfId-1077724"></a>You can fix this by using additional arguments like <code>?getFirstSweepPoint</code>, <code>?matchParams</code>, and <code>?ignoreParam</code>.</p>
<p>
<a id="pgfId-1077725"></a>To avoid such errors, you can also use the <em>calcVal</em> <em>lint</em> <em>check</em> button in the in the <em>Run</em> <em>Preview</em> tab to run pre-simulation checks on <code>calcVal</code> expressions. You can then view the resulting output messages in the CIW. </p>

<h4>
<a id="pgfId-1077727"></a>Case<a id="case2"></a> 2: Using ?matchParams with multiple matching points in the target test</h4>

<p>
<a id="pgfId-1077728"></a>On using the arguments <code>?ignoreParams</code> and <code>?matchParams</code>, <code>calcVal</code> looks for matching points in the target test. But on encountering multiple matching points, it would not know which value to pick and will return <code>nil</code>.</p>
<p>
<a id="pgfId-1077729"></a>For example, on setting <code>?matchParams</code> and <code>?ignoreParams</code> to<code> list(list(&quot;a&quot; 1)</code> <code>list(&quot;b&quot; 3))</code> and <code>list(&quot;c&quot;))</code> respectively, with a local sweep <code>c=5</code> <code>6</code> <code>7</code> in the target test, <code>calcVal</code> would find three matching values and would not know which one to use.</p>

<h4>
<a id="pgfId-1077731"></a>Case 3:<a id="case3"></a> Syntax errors</h4>

<p>
<a id="pgfId-1077732"></a>The most common issues with <code>calcVal</code> expressions are syntax errors, such as missing double quotation marks or a missing parenthesis. </p>
<p>
<a id="pgfId-1077733"></a>When the calcVal expressions have syntax errors, the tool displays warning messages. It is recommended to fix the reported warnings before continuing with simulation. However, if you still continue, the incorrect expressions either result in a <code>nil</code> value in the netlist or an evaluation error in the results of output expressions.</p>
<p>
<a id="pgfId-1077734"></a>To avoid such errors, you can use the <em>calcVal</em> <em>lint</em> <em>check</em> button in the <em>Run</em> <em>Preview</em> tab to run pre-simulation checks on <code>calcVal</code> expressions. You can then view the resulting output messages in the CIW.</p>

<h4>
<a id="pgfId-1077736"></a>Case <a id="case4"></a>4: Using the argument ?getFirstSweepPoint</h4>

<p>
<a id="pgfId-1077737"></a>In general, the <code>?getFirstSweepPoint </code>argument is useful to tell <code>calcVal</code> to fetch the value from the first sweep point only, especially while working with local sweeps. But in specific cases, you might get an evaluation error.</p>
<p>
<a id="pgfId-1077738"></a>In case, you have a local sweep in the target test and you run only one point in the source test, <code>calcVal</code> would not know which value to pick even though there is just one point.</p>
<p>
<a id="pgfId-1077739"></a>To avoid such issues, you can specify the option <code>?getFirstSweepPoint</code> <code>t</code> in the expression to tell <code>calcVal</code> to fetch the value from the first sweep point, irrespective of the number of sweeps in the source test.</p>

<h4>
<a id="pgfId-1077741"></a>Case 5: calcVal<a id="case5"></a> accuracy</h4>

<p>
<a id="pgfId-1077742"></a>The <code>calcVal</code> return value is a copy of the target value this function is pointing to, but a comparison with the original value shows some extremely small differences.</p>
<p>
<a id="pgfId-1077743"></a><code>calcVal</code> needs to do some processing of the values and expressions. Usually, a 64-bit double floating point value can be precisely processed upto fifteen digits. Differences in the thirteen, fourteen, and, fifteen digits range indicate a difference in the numerical noise level. The simulator can accurately process values in the range of five to six digits. Therefore, comparing values from the numerical noise level should be avoided. Comparison should always be done with a certain range to avoid any false alarm.</p>

<h4>
<a id="pgfId-1077745"></a>Cas<a id="case6"></a>e 6: The usage of ?matchParams and ?ignoreParams</h4>

<p>
<a id="pgfId-1077746"></a>The <code>?matchParams</code> and <code>?ignoreParams</code> arguments let you specify which value to fetch in case of local sweeps. But in some cases, problems may arise.</p>
<p>
<a id="pgfId-1077747"></a>For example, consider two tests, <code>test1</code> and <code>test2</code> containing local sweep points <code>vdd=1</code> <code>2</code> <code>3</code> <code>4</code> and <code>vdd=2</code> <code>4</code> respectively. Here, if a <code>calcVal</code> expression in the second point of <code>test2</code>, <code>vdd=4</code> tries to get a value from test1, it would not know which point of <code>test1</code> to fetch the value from.</p>
<p>
<a id="pgfId-1077748"></a>In such scenarios, using <code>?matchParams</code> <code>&quot;all&quot;</code> would solve the issue because <code>calcVal</code> will then look at all the points in the <code>test1</code> to find a point with <code>vdd=4</code> and will get the value from point four of <code>test1</code>.</p>
<p>
<a id="pgfId-1077749"></a>But if you sweep <code>vdd=2</code> <code>4</code> in <code>test1</code> and <code>vdd=1</code> <code>2</code> <code>3</code> <code>4</code> in <code>test2</code>, the above argument would not solve the problem since <code>calcVal</code> will try to match all values and will not find a match for <code>vdd=1</code> and <code>vdd=3</code>. In this case, you can specify which value to match by using the argument <code>?matchParams list(list(&quot;vdd&quot;</code> <code>4))</code></p>
<p>
<a id="pgfId-1077750"></a>Let us add another variable <code>rload</code> to this setup with <code>rload=2</code> for <code>test1</code> and <code>rload=3</code> for <code>test2</code>. Now considering the local sweep point <code>vdd=1</code> <code>2</code> <code>3</code> <code>4</code>, the above mentioned solution will not work since all the variables need to match and the value for <code>rload</code> is different for both the tests. In this case, you can use any of the following arguments as a solution.</p>
<ul><li>
<a id="pgfId-1077751"></a><code>?matchParams</code> <code>list(list(&quot;vdd&quot;</code> <code>4)</code> <code>list(&quot;rload&quot;</code> <code>2))</code></li><li>
<a id="pgfId-1077752"></a><code>?matchParams</code> <code>list(list(&quot;vdd&quot;</code> <code>4))</code> <code>?ignoreParams</code> <code>list(&quot;rload&quot;)</code></li></ul>


<h4>
<a id="pgfId-1077754"></a>Cas<a id="case7"></a>e 7: Circular dependencies </h4>

<p>
<a id="pgfId-1077755"></a>An error message is displayed in case you have a circular dependency in <code>calcVal</code> expressions.</p>
<p>
<a id="pgfId-1077756"></a>For example, consider a circular dependency between the <code>calcVal</code> expressions in four tests, <code>test1</code>, <code>test2</code>, <code>test3</code>, and <code>test4</code>. The <code>calcVal</code> expression in <code>test2</code> is dependent on <code>test1</code>. Accordingly, <code>test3</code> is dependent on <code>test2</code> and <code>test3</code> on <code>test4</code>. If <code>test1</code> has an additional dependency on <code>test4</code>, the setup contains a circular dependency. This would mean that <code>test1</code> is dependent on <code>test2</code>, <code>test3</code>, <code>test4</code> and finally on itself. This indicates that there is an issue with your setup and the dependency loop needs to be broken at one point.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1077757"></a>In case of a longer loop, the error message does not provide complete information. In the above situation, <code>calcVal</code> might report only the dependency between <code>test2</code> and <code>test3</code>. However, it could be that the wrong dependency is actually between <code>test3</code> and <code>test1</code>.</div>
<p>
<a id="pgfId-1076945"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="measures_re_axlSetOutputUserDefinedData.html" id="prev" title="axlSetOutputUserDefinedData">axlSetOutputUserDefinedData</a></em></b><b><em><a href="measures_re_measureAcross.html" id="nex" title="measureAcross">measureAcross</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>