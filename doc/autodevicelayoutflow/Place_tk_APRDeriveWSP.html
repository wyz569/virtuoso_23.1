
<html><head><title>Deriving Row Regions and Grids in the Automated Device Placement and Routing Flow</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="spriya" />
<meta name="CreateDate" content="2023-10-26" />
<meta name="CreateTime" content="1698319568" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the features and functionality of the Virtuoso Automated Device Placement and Routing solution" />
<meta name="DocTitle" content="Virtuoso Automated Device Placement and Routing Flow Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Deriving Row Regions and Grids in the Automated Device Placement and Routing Flow" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="autodevicelayoutflow" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-10-26" />
<meta name="ModifiedTime" content="1698319568" />
<meta name="NextFile" content="Routing.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="Place_tk_APRLayoutMigrate.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Automated Device Placement and Routing Flow Guide -- Deriving Row Regions and Grids in the Automated Device Placement and Routing Flow" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="task" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Automatic Device Placement and Routing" />
<meta name="prod_subfeature" content="Width Spacing Patterns" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="autodevicelayoutflowIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="autodevicelayoutflowTOC.html">Contents</a></li><li><a class="prev" href="Place_tk_APRLayoutMigrate.html" title="Setting Options for Custom Layout Design Migration">Setting Options for Custom Lay ...</a></li><li style="float: right;"><a class="viewPrint" href="autodevicelayoutflow.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Routing.html" title="Device Placement Using the Auto P ...">Device Placement Using the Aut ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Automated Device Placement and Routing Flow Guide<br />Product Version IC23.1, November 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a id="Filename:tk_APRDeriveWSP" title="Deriving Row Regions and Grids in the Automated Device Placement and Routing Flow"></a><h2>
<a id="pgfId-1091216"></a><a id="97141"></a><a id="74071"></a><a id="77734"></a>Deriving Ro<a id="deriveWSPs"></a>w Regions and Grids in the Automated Device Placement and Routing Flow</h2>

<p>
<a id="pgfId-1103754"></a>Generating row regions and grids is an optional task, but is highly recommended to obtain better results in the automated device placement and routing flow. During placement, devices are snapped to their nearest row regions or grids. In the absence of row regions and grids, coarse placement is done, where approximate placement locations are determined based on the design constraints and congestion.</p>
<p>
<a id="pgfId-1134495"></a>At advanced nodes, grids&#8212;including fins, WSPs, poly snap patterns, and rows&#8212;are important for the optimal placement and routing of custom and analog layouts. Row regions or diffusion grids are used to facilitate device placement and derive WSP information, which used for device routing and snapping.</p>
<p>
<a id="pgfId-1091219"></a>The automated device placement and routing flow lets you derive poly and diffusion grids or row regions automatically based on the device footprint, layers, and DRCs, with minimal user input. Row regions are created in the layout based on the row templates.</p>
<p>
<a id="pgfId-1103783"></a>Before generating rows and grids, ensure that your design has a uniform gate length to ensure a uniform poly pitch for device snapping.</p>
<p>
<a id="pgfId-1091220"></a>To derive grids and row regions:</p>
<ol><li>
<a id="pgfId-1091221"></a>Open the <em>Setup</em> tab of the Auto P&amp;R assistant.<br />
<a id="pgfId-1134025"></a><div class="webflare-div-image">
<img src="images/GenerateWSPsAndRows_New.gif" /></div></li><li>
<a id="pgfId-1133109"></a>Click the button beside <em>Specify Pin Positions &amp; Attributes</em> to open the <em>Pin Planner</em> tab of the Pin Placement form.<br />
<a id="pgfId-1133238"></a>Use the options on this form to set pin constraints and plan the placement of pins in the design. </li><li>
<a id="pgfId-1133844"></a>Complete the required pin settings and close the Pin Placement form.</li><li>
<a id="pgfId-1139837"></a>Select a mode to specify the placement region. The <em>Create Diffusion Grid</em> option is available only if the <a href="Envars_re_enablePlaceWithWsp.html#65217">enablePlaceWithWsp</a> environment variable to <code>t</code>. <br />
<a id="pgfId-1140022"></a>For more information, see <a href="Routing_tk_diffusionGrid.html#11895">Placing Multi-Height Devices Using Automatic Device Placer</a>.</li><li>
<a id="pgfId-1099652"></a>Select <em>Create Row Region</em> to specify whether rows are to be created in the row region. </li><li>
<a id="pgfId-1133988"></a>Select one of the following options:<ul><li>
<a id="pgfId-1133989"></a><em>Auto Compute Row Height</em> to automatically calculate the row height</li><li>
<a id="pgfId-1134010"></a><em>Specify Row Height</em> to input the row height</li><li>
<a id="pgfId-1134015"></a><em>Use Row Template</em> to import row templates</li></ul></li><li>
<a id="pgfId-1127742"></a>If <em>Auto Compute Row Height </em>is selected, select <em>Use Passive Component Heights </em>to consider passive components for row height calculations. </li><li>
<a id="pgfId-1127839"></a>If <em>Use Row Template </em>is selected:<ol><li>
<a id="pgfId-1127891"></a>Click <em>Browse</em> to display the Select Row Template form.<br /><ffi2-fig-frame-in-2 id="#id1100052">
<a id="pgfId-1100052"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img src="images/SelectRowTemplate.gif" /></div></li><li>
<a id="pgfId-1100006"></a>Select the required <em>Library</em>, <em>Cell</em>, and <em>View</em>. All templates stored in the selected cellview are listed in the <em>Select Row Template</em> box.</li><li>
<a id="pgfId-1100142"></a>Select the required row template.</li><li>
<a id="pgfId-1100300"></a>Check the row template properties in the <em>Details</em> panel to ensure that they meet your requirements. </li><li>
<a id="pgfId-1100437"></a>Click <em>OK</em>.</li></ol><br />
<a id="pgfId-1104160"></a>The name of the selected row template is displayed in the <em>Use row template </em>field.</li><li>
<a id="pgfId-1108382"></a>Select <em>Define PN Pattern</em> to control the distribution of P and N devices in rows. </li><li>
<a id="pgfId-1108383"></a>Either type the required PN pattern or select a PN pattern from the drop-down list. <br />
<a id="pgfId-1123463"></a>In the following example, the <code>PNNP</code> pattern is selected. Multiple row attributes with their component types set are created.<br />
<a id="pgfId-1117499"></a><div class="webflare-div-image">
<img width="635" height="363" src="images/Place-52.gif" /></div></li><li>
<a id="pgfId-1108386"></a>Select <em>Generate Flipped Rows</em> to allow generation of flipped rows, as shown in the above example.<br />
<a id="pgfId-1127296"></a>Select an orientation with which the first (bottom-most) row must start: <em>Start with R0</em> or <em>Start with MX</em>.</li><li>
<a id="pgfId-1108388"></a>Select <em>Create Poly Grid (WSP)</em> to create poly layer patterns as WSPs. If the devices have different poly pitches, multiple poly patterns are created.</li><li>
<a id="pgfId-1127456"></a>Select <em>Specify Grid Offset</em> to specify an offset for the poly grid.<br />
<a id="pgfId-1127545"></a>Specify an offset value in the adjoining text box.</li><li>
<a id="pgfId-1113925"></a>Select <em>Include Passive Components </em>to recognize the poly layer patterns of passive devices while generating WSPs.</li><li>
<a id="pgfId-1108378"></a>Click <em>Apply</em> to create a row template, a row region, rows, and poly patterns, as specified. The P/N pattern selection controls how rows are created. <br />
<a id="pgfId-1104869"></a>WSP grids are generated in the layout canvas as per your specifications.<br />
<a id="pgfId-1089301"></a>The Track Pattern assistant lists all the auto-created WSPs and rows with the APR- prefix to differentiate them from existing WSPs.<br />
<a id="pgfId-1089617"></a><div class="webflare-div-image">
<img src="images/TrackPatternAssistant.gif" /></div></li></ol>














































<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1091333"></a>Existing WSPs that have no change in their specifications are not regenerated. The last set of auto-generated WSPs are made active.</div>

<h4><em>
<a id="pgfId-1110917"></a>Related Topics</em></h4>

<p>
<a id="pgfId-1110933"></a><a href="Forms_re_APRFormDesc.html#13453">Auto P&amp;R Assistant User Interface for Device-Level Placement</a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="Place_tk_APRLayoutMigrate.html" id="prev" title="Setting Options for Custom Layout Design Migration">Setting Options for Custom Lay ...</a></em></b><b><em><a href="Routing.html" id="nex" title="Device Placement Using the Auto P ...">Device Placement Using the Aut ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>