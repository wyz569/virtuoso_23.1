
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="GENERATOR" content="Quadralay WebWorks Publisher AutoMap 6.0.7">
<meta name="TEMPLATEBASE" content="CadencePubs_HelpTopics">
<meta name="LASTUPDATED" content="Wed Jul 17 14:09:14 2013">

<script TYPE="text/javascript" LANGUAGE="JavaScript" >
  <!--
  // Dummy script statement to get rid of Netscape timing errors which may
  // print garbage JavaScript code at the top in Unix 4.x Netscape browser.
  // -->
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Browser.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Cookies.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Search.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript">
  <!--
  function window_resized(){
    window.location.reload();
  }
  window.onresize=window_resized;
                                                                                                                                                                
  /*
  * Initializes before submitting query
  */
  function initOnSubmit() {
    storeStateAndQuery();
  }
                                                                                                                                                                
  setCookie("DocumentTitle", "Common Power Format Language Reference");
  setCookie("Chapter", "N/A");
  setCookie("Keyword", "search");
  setCookie("Version", "Product Version 2.2");

  // -->
  </script>


<title>Common Power Format Language Reference -- 6. Precedence and Semantics of the Rules</title>
<META NAME="Approver" CONTENT="Technical Publications">
<META NAME="Author" CONTENT="Technical Publications">
<META NAME="CreateDate" CONTENT="2013-07-17">
<META NAME="CreateTime" CONTENT="1374095377">
<META NAME="DataType" CONTENT="Manuals">
<META NAME="Description" CONTENT="Describes CPF">
<META NAME="DocTitle" CONTENT="Common Power Format Language Reference">
<META NAME="DocType" CONTENT="Manual">
<META NAME="FileTitle" CONTENT="6. Precedence and Semantics of the Rules">
<META NAME="FileType" CONTENT="Chapter">
<META NAME="Keyword" CONTENT="cpf_ref">
<META NAME="Language" CONTENT="English">
<META NAME="ModifiedDate" CONTENT="2013-07-17">
<META NAME="ModifiedTime" CONTENT="1374095377">
<META NAME="NextFile" CONTENT="structure.html">
<META NAME="PageCount" CONTENT="24">
<META NAME="Platform" CONTENT="ALL">
<META NAME="PrevFile" CONTENT="hier_flow.html">
<META NAME="Product" CONTENT="Languages">
<META NAME="ProductFamily" CONTENT="Cadence Shared Tools">
<META NAME="ProductVersion" CONTENT="2.0">
<META NAME="RightsManagement" CONTENT="Copyright 2006 Cadence Design Systems Inc.">
<META NAME="Title" CONTENT="Common Power Format Language Reference -- 6. Precedence and Semantics of the Rules">
<META NAME="TopicTags" CONTENT="FALSE">
<META NAME="Version" CONTENT="2.0">
</head>

<body bgcolor="#ffffff">
<a name="firstpage"></a>
<a name="pagetop"></a>

<p>
<!-- Begin Buttons -->

<form name="advancedform" action="/vtopic.isapi" method="GET" onSubmit="initOnSubmit()">
<input type=hidden name="action" value="FilterSearch">
<input type=hidden name="Filter" value="altsearchfilter.hts">
<input type=hidden name="resulttemplate" value="altsearchresults.hts">
<input type=hidden name="resultcount" value="10">
<input type=hidden name="resultmaxdocs" value="-1">
<input type=hidden name="queryhidden" value="null">
<input type=hidden name="queryitemselected" value="no">

<table border="0" cellpadding="0" cellspacing="0" width="650">
<tr>
  <td height="36" width="650" colspan="10"><img src="../support/header_doc.gif" WIDTH="650" HEIGHT="36"></td>
</tr>
<tr>
  <td height="20" width="59"><a href="javascript:openLibrary()"><img src="../support/nav2_library.gif" border="0" alt="View Library" height="20" width="59"></a></td>
  <td height="20" width="73"><a href="cpf_refTOC.html"><img src="../support/nav2_toc.gif" border="0" alt="View Table Of Contents" height="20" width="73"></a></td>
  <td height="20" width="46"><a href="cpf_refIX.html"><img src="../support/nav2_index.gif" border="0" alt="View Index for This Manual" height="20" width="46"></a></td>
  <td height="20" width="83"><a href="hier_flow.html"><img src="../support/nav2_previous.gif" border="0" alt="View Previous Chapter in Book" height="20" width="83"></a></td>
  <td height="20" width="59"><a href="structure.html"><img src="../support/nav2_next.gif" border="0" alt="View Next Chapter in Book" height="20" width="59"></a></td>
  <td height="20" width="114"><a href="cpf_ref.pdf"><img src="../support/nav2_print.gif" border="0" alt="Open PDF to print book" height="20" width="114"></a></td>
  <td height="20" width="61"><img src="../support/nav2_black.gif" height="20" width="61"></td>
  <td height="20" width="76"><a href="/feedback.htm"><img src="../support/nav2_feedback.gif" border="0" alt="Email Comments" height="20" width="76"></a></td>
  <td height="20" width="43"><a href="../cdsuser/help.html"><img src="../support/nav2_help.gif" border="0" alt="Help Using Documentation" height="20" width="43"></a></td>
  <td height="20" width="37"><a href="/exitsearch.htm"><img src="../support/nav2_exit.gif" border="0" alt="Shut Down Cadence Documentation Server" height="20" width="37"></a></td>
</tr>
 <tr>
    <td colspan="10">
      <script type="text/javascript">
      <!--// We wrap all this inside javascript because we only want to display  -->
      <!--// the search bar if the http server is running. If it is not running  -->
      <!--// the search bar should not be visible to the user                    -->
      <!-- BEGIN SEARCH BAR -->
      var isloaded = isLoaded();
      var enteredquery = getCookie("enteredquery");
      if(enteredquery) {
        enteredquery = enteredquery.replace(/</g,"&lt ");
        enteredquery = enteredquery.replace(/>/g,"&gt ");
      } else {
         enteredquery = "";
      }
                                                                                                                                                                
      <!-- Only display search bar if server is running -->
      if(isloaded) {
                                                                                                                                                                
        display_search_bar(enteredquery);
                                                                                                                                                                
      }
      <!-- END SEARCH BAR -->
      </script>
    </td>
  </tr>
</table>
</form>

<!-- End Buttons -->
<p>
<p>
<hr>
<p>
<h3><center>Common Power Format Language Reference&#0044; Version 2.0</center></h3><br>
<p>


<blockquote>

  
<div align="right">
<h1 align="left">
  <a name="1032955"> </a>6</h1>
</div>

<hr>
<h1>
  <a name="1035250"> </a>Precedence and Semantics of the Rules</h1>





<ul>
  <a name="1038330"></a><li><p><a href="rules.html#1036979">Different Categories of Rules</a></p>

  <a name="1036624"></a><li><p><a href="rules.html#1038337">Rules in Presence of Existing Power Logic</a></p>

  <a name="1039987"></a><li><p><a href="rules.html#1039935">Precedence of Rules in the Flat Flow</a></p>

  <a name="1039991"></a><li><p><a href="rules.html#1052252">Precedence of Rules in the Hierarchical Flow</a></p>

  <a name="1038458"></a><li><p><a href="rules.html#1039105">Rules Semantics</a></p>
<ul>
  <a name="1039297"> </a><li><p><a href="rules.html#1047178">Level Shifter Rules</a>
</p>

  <a name="1038463"> </a><li><p><a href="rules.html#1039173">Isolation Rules</a>
</p>

  <a name="1040876"> </a><li><p><a href="rules.html#1043473">Multiple Level Shifter and Isolation Rules</a>
</p>

  <a name="1038468"> </a><li><p><a href="rules.html#1040843">State Retention Rules</a>
</p>
</ul></ul>
<br><br><br>
<h2>
  <a name="1036979"> </a>Different Categories of Rules</h2>


<p>
  <a name="1039562"> </a>The CPF language uses the concept of <em>rules</em> to describe the low power intent of the design-- that is, describe the type of low power logic that needs to be added to the design. The CPF language supports the following types of rules:</p>

<ul>
  <a name="1039563"></a><li><p>Level shifter rules</p>

  <a name="1039564"></a><li><p>Isolation rules</p>

  <a name="1039565"></a><li><p>State retention rules</p>

  <a name="1039566"></a><li><p>Power switch rules</p>
</ul>
<p>
  <a name="1037905"> </a>A CPF rule can be associated with a design object either explicitly or implicitly. There are two categories of CPF rules.</p>

<ul>
  <a name="1037017"></a><li><p><strong>Specific</strong> rules <em>explicitly</em> specify the targeted design objects. For example,</p>
<ul>
  <a name="1037475"> </a><li><p>Isolation or level shifter rules specify the targeted design objects with the <code>-pins</code> 
option or <code>-exclude</code> option, or both options.
</p>

  <a name="1037478"> </a><li><p>State retention rules specify the targeted design objects with the <code>-instances</code> 
option or <code>-exclude</code> option, or both options.
</p>
</ul><dl>
<p>
<strong>Note:&nbsp;</strong>
<a name="1050152"> </a>Wildcards are considered to specify the targeted design objects explicitly (by expanding the string to a list).
</p>

</dl>
  <a name="1037026"></a><li><p><strong>Generic</strong> rules do not explicitly specify the targeted design objects, but the targeted design objects can be <em>derived</em> from some option specified with the rule. For example,</p>
<ul>
  <a name="1037943"> </a><li><p>Isolation or level shifter rules specified with <code>-from</code> or <code>-to</code> options target domain 
crossings driven by logic in the domains specified with the <code>-from</code> option or driving 
logic in the power domains specified with the <code>-to</code> option.
</p>

  <a name="1052205"> </a><li><p>State retention rules specified with the <code>-domain</code> option target all registers or 
sequential instances in the specified power domain.
</p>
</ul></ul>
  <a name="1052206"> </a><table border="0"><tr><td valign="top"><img src="../support/tip.gif"></td><td>For isolation and level shifter rules, the targeted design objects refer to hierarchical pins or domain crossings. For state retention rules, the targeted design objects refer to registers or sequential instances.</td></table>


<p>
<strong>Note:&nbsp;</strong>
<a name="1052211"> </a>A domain crossing is a connection between one driver and one load in two different power domains.
</p>

<p>
<strong>Note:&nbsp;</strong>
<a name="1043368"> </a>A power switch rule is always associated with a current design. Therefore each power switch rule can be considered a specific rule.
</p>

<br><br><br>
<h2>
  <a name="1038337"> </a>Rules in Presence of Existing Power Logic </h2>


<p>
  <a name="1038343"> </a>A CPF file is normally written for an RTL description to specify the low power intent. (CPF rules specify where the user wants to <em>add</em> power logic in the design.)</p>


<p>
  <a name="1038398"> </a>This CPF may be used as a golden specification at a lower abstract level for verification or implementation. However, the HDL description may already contain some low power logic independent of what is specified in the CPF file. A netlist can contain low power logic that is either</p>

<ul>
  <a name="1041663"></a><li><p>independent of what is specified in the CPF file</p>

  <a name="1041668"></a><li><p>generated based on what is specified in the CPF file</p>
</ul>
<p>
  <a name="1038436"> </a>If the design objects targeted by a CPF rule already have some low power logic, the logic in the HDL description takes precedence and the CPF rule is ignored. In other words, the CPF rules specified with the <code>create_xx_rule</code> commands will not be used to generate new low power logic in the design if the targeted design objects already have the required low power logic associated with them. Tools that check for the consistency between CPF and the netlist should report when the existing logic does not match the requirements from the CPF file.</p>


<br><br>
<h3>
  <a name="1038400"> </a>Identifying Existing Power Logic</h3>


<p>
  <a name="1038407"> </a>The CPF language also provides support to <em>identify existing</em> power logic in the HDL description or in the given netlist. </p>


<p>
  <a name="1040006"> </a>It is possible to</p>

<ul>
  <a name="1038408"></a><li><p>Identify instances that are instantiations of library cells defined by CPF <code>define_xxx_cell</code> commands.</p>

  <a name="1038409"></a><li><p>Identify non-dedicated or generic isolation logic specified in the <code>identify_power_logic</code> command.</p>
</ul>
  <a name="1045871"> </a><table border="0"><tr><td valign="top"><img src="../support/important.gif"></td><td>Even if you instantiated the isolation logic in the RTL description, you must still define the isolation rules to describe your intention for the isolation logic if you want to use the CPF-based flow.</td></table>


<br><br><br>
<h2>
  <a name="1039935"> </a>Precedence of Rules in the Flat Flow</h2>


<p>
  <a name="1042835"> </a>If several rules of the same type apply to the same design objects (see <a href="rules.html#1036979">Different Categories of Rules</a>, for more information on the design objects), the following order of precedence applies (arranged from highest to lowest priority):</p>

<ol type="1">
  <li value="1"><p><a name="1041691"> </a>Specific rules specified with the <code>-force</code> option</p>
  <li value="2"><p><a name="1052151"> </a>Specific rules specified with both the<code> -from</code> and <code>-to</code> options</p>
  <li value="3"><p><a name="1052152"> </a>Specific rules specified with only <code>-from</code> or <code>-to</code> option</p>
  <li value="4"><p><a name="1052216"> </a>Generic rules specified with both the<code> -from</code> and <code>-to</code> options</p>
  <li value="5"><p><a name="1052217"> </a>Generic rules specified with only <code>-from</code> or <code>-to</code> option</p>
</ol>

<p>
  <a name="1052218"> </a>If multiple CPF rules with the same priority are applied to the same design objects</p>

   <ul><ul>
  <a name="1045281"> </a><li><p>It is an error if all rules are specified with -force.
</p>

  <a name="1052172"> </a><li><p>Otherwise, the last rule takes precedence. In this case, the tools will issue a warning 
message.
</p>
</ul>   </ul>
<p>
<strong>Note:&nbsp;</strong>
<a name="1041701"> </a>It is possible that the rule with the highest priority cannot be implemented. (For example, the required cell is not available.) In this case, the tools will give a warning message. 
</p>

<p>
<strong>Note:&nbsp;</strong>
<a name="1052194"> </a>For isolation rules and level shifter rules, the <code>-location</code> option does not influence the precedence.
</p>

<p>
  <a name="1052249"> </a>The precedence rules apply independently for each value for the <code>-isolation_target </code>option.</p>


<br><br><br>
<h2>
  <a name="1052252"> </a>Precedence of Rules in the <a name="Hierarchical Flow"></a>Hierarchical Flow</h2>


<p>
  <a name="1052253"> </a>In the hierarchical flow, you can have a CPF file for a module at the upper level of the hierarchy and a CPF file for a module at a lower level in the hierarchy. In the following, the upper-level module is referred to as the top-level design and the lower-level hierarchy is referred to as the block-level design. </p>


<p>
  <a name="1039947"> </a>The following policies are followed by all tools when a block-level CPF is integrated into the top-level CPF using the <code>set_instance</code> command: </p>

<ol type="1">
  <li value="1"><p><a name="1040014"> </a>Block-level rules always overwrite the top-level rules if both rules apply to the same objects at the block-level after domain mapping.</p>
  <li value="2"><p><a name="1039948"> </a>Top-level rules are only applied to block-level objects if the block-level objects have no rule specified and the block is not a macro model. </p>
<dl>
<p>
  <a name="1040039"> </a>In this case, the tools should issue a warning to inform users that top-level CPF rules are applied to the block.</p>

</dl>  <li value="3"><p><a name="1048621"> </a>Block-level state retention, isolation, and level shifter rules do not apply to objects outside the scope of the block. Block-level rules are promoted to the top level, but they only apply to objects in the block.</p>
</ol>

<p>
<strong>Note:&nbsp;</strong>
<a name="1050167"> </a>For more information on how multiple rules on the same signal or net are handled, refer to <a href="rules.html#1043473">Multiple Level Shifter and Isolation Rules</a>.
</p>

<br><br><br>
<h2>
  <a name="1039105"> </a>Rules Semantics</h2>

<ul>
  <a name="1039385"></a><li><p><a href="rules.html#1047178">Level Shifter Rules</a></p>

  <a name="1039390"></a><li><p><a href="rules.html#1039173">Isolation Rules</a></p>

  <a name="1045298"></a><li><p><a href="rules.html#1043473">Multiple Level Shifter and Isolation Rules</a></p>

  <a name="1047174"></a><li><p><a href="rules.html#1040843">State Retention Rules</a></p>
</ul>
<p>
<strong>Note:&nbsp;</strong>
<a name="1047176"> </a><em>In this context, </em><strong><em>net</em></strong><em> refers to </em><em><a href="concepts.html#1040240">logical net segment</a></em><i>.</i>
</p>

<br><br>
<h3>
  <a name="1047178"> </a>Level Shifter Rules</h3>


<p>
  <a name="1039121"> </a>A level shifter rule specifies one or more domain crossings which require level-shifter logic. Level-shifter logic can be required because the leaf drivers and leaf loads of the net have different supply voltages, or because it is part of the design intent. </p>


<p>
<strong>Note:&nbsp;</strong>
<a name="1047224"> </a>An exception can be made for some special pins for which a user-specified input voltage tolerance is defined (see <code>define_power_switch_cell</code> and <code>set_input_voltage_tolerance</code> commands). 
</p>

<p>
  <a name="1048475"> </a>The targeted nets are selected by the options <code>-from</code>, <code>-to</code>, and <code>-pins</code> of the <a href="reference.html#1041299">create_level_shifter_rule</a> command.</p>


<p>
  <a name="1050900"> </a>This section contains the following topics:</p>

<ul>
  <a name="1050879"></a><li><p><a href="rules.html#1048477">Interpretation of Different Options</a></p>

  <a name="1050884"></a><li><p><a href="rules.html#1040129">How to Handle Rule for Nets Connected to Bidirectional Pins</a></p>

  <a name="1050885"></a><li><p><a href="rules.html#1039129">When Can Implementation Tools Ignore A Level Shifter Rule</a></p>

  <a name="1050887"></a><li><p><a href="rules.html#1050211">Level Shifter Insertion</a></p>
</ul>


<h4>
  <a name="1048477"> </a>Interpretation of Different Options</h4>

<ul>
  <a name="1048478"></a><li><p><code>-force</code> specifies to apply the rule to the specified pin without any of the filtering based on driver and load analysis.</p>
<dl>
<p>
<strong>Note:&nbsp;</strong>
<a name="1052302"> </a>The <code>-force</code> option must be specified with the <code>-pins</code> option. The <code>-from</code> or <code>-to</code> option will be ignored if they are combined with the <code>-force</code> option.
</p>

</dl>
  <a name="1052289"></a><li><p><code>-from</code> specifies to apply the rule to those nets driven by logic in the specified <em>from</em> domains and are driving logic in other power domains.</p>

  <a name="1045478"></a><li><p><code>-to </code>specifies to apply the rule to those nets that only drive logic in the specified <em>to</em> domains and that are driven by logic from another power domain. </p>
</ul>
<p>
  <a name="1041731"> </a>If multiple options are specified (excluding the <code>-force</code> option), the requirements specified with all options must be met.</p>

<ul>
  <a name="1052295"></a><li><p>If you combine <code>-to</code> and <code>-from</code> options, the rule should apply to those nets that only drive logic in the specified <em>to</em> domains and that are driven by logic in the specified <em>from</em> domains.</p>

  <a name="1045519"></a><li><p>If you combine <code>-from</code> and <code>-pins</code> options, the rule should apply to those nets that drive or connect to the specified pins, and also meet the requirements of the <code>-from</code> option.</p>

  <a name="1045521"></a><li><p>If you combine <code>-to</code> and <code>-pins</code> options, the rule should apply to those nets that are driven by or connected to the specified pins, and also meet the requirements of the <code>-to </code>option.</p>

  <a name="1045523"></a><li><p>If you combine <code>-from</code>, <code>-to</code> and <code>-pins</code> options, the rule should apply to those nets that</p>
<ul>
  <a name="1045524"> </a><li><p>Are driven by or connected to the specified pins
</p>

  <a name="1045525"> </a><li><p>Only drive logic in the specified <em>to</em> domains
</p>

  <a name="1043383"> </a><li><p>Are driven by logic in the specified <em>from</em> domains
</p>
</ul></ul>


<h4>
  <a name="1040129"> </a>How to Handle Rule for Nets Connected to Bidirectional Pins</h4>


<p>
  <a name="1040130"> </a>A bidirectional pin must be treated as both an input pin and an output pin of the associated instance. The semantics of level shifter rules on nets connected to such special pins will then be handled just like other regular cases. </p>


<p>
  <a name="1040131"> </a>However, to avoid that the user makes mistakes due to the ambiguity of pin or port direction in the functional model, static verification tools (for example those checking the quality of a CPF specification) should issue an <em>error</em> if a bidirectional pin is referenced in both <code>-from</code> <em>and</em> <code>-to </code>options</p>


<p>
  <a name="1040139"> </a>Furthermore, the tool will issue a <em>warning</em> if bidirectional pins/ports are referenced in a level shifter rule to make the designer aware that the bidirectional ports may be from a blackbox and their direction will be resolved (and changed) after loading the correct module or cell definition.</p>




<h4>
  <a name="1039129"> </a>When Can Implementation Tools Ignore A Level Shifter Rule </h4>


<p>
  <a name="1039345"> </a>Unless the <code>create_level_shifter_rule</code> command was specified with the <code>-force</code> option, level shifter rules can be ignored in the following cases:</p>

<ul>
  <a name="1039131"></a><li><p>The rule is specified for a floating net.</p>

  <a name="1039132"></a><li><p>The rule is specified for an undriven net.</p>

  <a name="1039134"></a><li><p>The specified net has its leaf level driver and loads belong to the same power domain.</p>

  <a name="1048574"></a><li><p>The rule is specified for a net connecting a top-level port and a pad-pin of a pad instance.</p>
</ul>


<h4>
  <a name="1050211"> </a>Level Shifter Insertion</h4>


<p>
  <a name="1050215"> </a>You can specify the location for the level shifters in the <a href="reference.html#1329679">update_level_shifter_rules</a> command using the <code>-location</code> and the <code>-within_hierarchy</code> options. </p>


<p>
  <a name="1050216"> </a>The <code>-location</code> option specifies the power domain where to insert the level shifters.</p>

<ul>
  <a name="1050217"></a><li><p><code>from</code> inserts the level shifters in a hierarchy belonging to the originating power domain. Unless further constrained, the location will be the outermost logic hierarchy of the originating power domain.</p>

  <a name="1050218"></a><li><p><code>to</code> inserts the level shifters inside a hierarchy belonging to the destination power domain. Unless further constrained, the location will be the outermost logic hierarchy of the destination power domain.</p>

  <a name="1050219"></a><li><p><code>parent</code> inserts the level shifters in the logic hierarchy as follows:</p>
<ul>
  <a name="1051880"> </a><li><p>If the rule is specified without the <code>-to</code> option, choose the parent hierarchy of the 
outermost logic hierarchy of the originating power domain.
</p>

  <a name="1051881"> </a><li><p>If the rule is specified with the <code>-to</code> option, choose the parent hierarchy of the 
outermost logic hierarchy of the destination power domain
</p>
</ul><dl>
<p>
<strong>Note:&nbsp;</strong>
<a name="1052229"> </a>This is the only value allowed if the original rule was specified with the <code>-force</code> option.
</p>

</dl></ul><ul>
  <a name="1051885"> </a><li><p><code>any</code> (can only be used with the <code>-within_hierarchy</code> option) indicates that the level shifter can be inserted in any power domain to which the specified logic hierarchy belongs. </p></p>

</ul>
<p>
  <a name="1050230"> </a>The location for the inserted level shifters can be further refined using the<code> -within_hierarchy</code> option. Unless otherwise specified, the logic hierarchy determined by <code>-location parent</code> or the logic hierarchy specified in <code>-within_hierarchy</code> must be voltage compatible with either the originating power domain or the destination power domain. Two domains are considered as voltage compatible if the two domains have the same nominal conditions or the same voltages in all modes.</p>


<p>
  <a name="1051911"> </a>Only level shifter cells with a <code>-valid_location </code>specification that is compatible with the insertion location can be used. If <code>-valid_location</code> is</p>

<ul>
  <a name="1051914"></a><li><p><code>from</code>--the power domain of the insertion hierarchy must be voltage compatible with the originating power domain </p>

  <a name="1051919"></a><li><p><code>to</code>--the power domain of the insertion hierarchy must be voltage compatible with the destination power domain </p>

  <a name="1051920"></a><li><p><code>either</code>--the power domain of the insertion hierarchy must be voltage compatible with either the originating or the destination power domain </p>

  <a name="1051921"></a><li><p><code>any</code>--the power domain of the insertion hierarchy may belong to any power domain. This is the special case where the logic hierarchy specified through <code>-location parent</code> or <code>-within_hierarchy</code> does not have to be voltage compatible with either the originating power domain or the destination power domain.</p>
</ul>
<p>
  <a name="1050233"> </a>If the <code>update_level_shifter_rules</code> command is specified with the <code>-cells</code> option, the verification tools will check that the specified cells are available in the library sets associated with the domain of the specified instance.</p>


<br><br>
<h3>
  <a name="1039173"> </a>Isolation Rules</h3>


<p>
  <a name="1039188"> </a>An isolation rule specifies one or more domain crossing which require isolation logic. Isolation logic is required when the leaf drivers and leaf loads of a net are in power domains that are not on and off at the same time, or because it is part of the design intent.</p>


<p>
  <a name="1039405"> </a>The targeted nets are selected by the options <code>-from</code>, <code>-to</code>, and <code>-pins</code> of the <a href="reference.html#1119449">create_isolation_rule</a> command.</p>


<p>
  <a name="1051076"> </a>This section covers the following topics:</p>

<ul>
  <a name="1050264"></a><li><p><a href="rules.html#1039189">Interpretation of Different Options</a></p>

  <a name="1052082"></a><li><p><a href="rules.html#1040158">How to Handle Rule for Nets Connected to Bidirectional Pins</a></p>

  <a name="1050272"></a><li><p><a href="rules.html#1039255">How to Handle Isolation Rules Created Without Isolation Condition</a></p>

  <a name="1050280"></a><li><p><a href="rules.html#1050804">How to Handle Isolation Rules Created With Clamp Value for Isolation Output</a></p>

  <a name="1052101"></a><li><p><a href="rules.html#1041809">When Can Implementation Tools Ignore An Isolation Rule</a></p>

  <a name="1050868"></a><li><p><a href="rules.html#1052111">Isolation insertion</a></p>

  <a name="1050874"></a><li><p><a href="rules.html#1039281">Example</a></p>
</ul>


<h4>
  <a name="1039189"> </a>Interpretation of Different Options</h4>

<ul>
  <a name="1052316"></a><li><p><code>-force</code> specifies to apply the rule to the specified pin without any of the filtering based on driver and load analysis.</p>
<dl>
<p>
<strong>Note:&nbsp;</strong>
<a name="1052348"> </a>The <code>-force</code> option must be specified with the <code>-pins</code> option. The <code>-from</code> or <code>-to</code> option will be ignored if they are combined with the <code>-force</code> option.
</p>

</dl>
  <a name="1045679"></a><li><p><code>-from</code> specifies to apply the rule to those nets driven by logic in the specified <em>from</em> domains and are driving logic in other power domains.</p>

  <a name="1045680"></a><li><p><code>-to</code> specifies to apply the rule to those nets that only drive logic in the specified <em>to</em> domains and that are driven by logic from another power domain. </p>
</ul>
<p>
  <a name="1052352"> </a>If multiple options are specified (excluding the <code>-force</code> option), the requirements specified with all options must be met.</p>

<ul>
  <a name="1045682"></a><li><p>If you combine <code>-to</code> and <code>-from</code> options, the rule should apply to those nets that only drive logic in the specified <em>to</em> domains and that are driven by logic in the specified <em>from</em> domains.</p>

  <a name="1045683"></a><li><p>If you combine <code>-from</code> and <code>-pins</code> options, the rule should apply to those nets that drive or connect to the specified pins, and also meet the requirements of the <code>-from</code> option.</p>

  <a name="1045684"></a><li><p>If you combine <code>-to</code> and <code>-pins</code> options, the rule should apply to those nets that are driven by or connected to the specified pins, and also meet the requirements of the <code>-to </code>option.</p>

  <a name="1045685"></a><li><p>If you combine <code>-from</code>, <code>-to</code> and <code>-pins</code> options, the rule should apply to those nets that</p>
<ul>
  <a name="1045686"> </a><li><p>Are driven by or connected to the specified pins
</p>

  <a name="1045687"> </a><li><p>Only drive logic in the specified <em>to</em> domains
</p>

  <a name="1045688"> </a><li><p>Are driven by logic in the specified <em>from</em> domains
</p>
</ul></ul>


<h4>
  <a name="1040158"> </a>How to Handle Rule for Nets Connected to Bidirectional Pins</h4>


<p>
  <a name="1040159"> </a>A bidirectional pin must be treated as both an input pin and an output pin of the associated instance. The semantics of isolation rules on nets connected to such special pins will then be handled just like other regular cases. </p>


<p>
  <a name="1041793"> </a>However, to avoid that the user makes mistakes due to the ambiguity of pin or port direction in the functional model, static verification tools (for example those checking the quality of a CPF specification) should issue an <em>error</em> if a bidirectional pin is referenced in both <code>-from</code> <em>and</em> <code>-to</code> options.</p>


<p>
  <a name="1041796"> </a>Furthermore, the tool will issue a <em>warning</em> if bidirectional pins/ports are referenced in an isolation rule to make the designer aware that the bidirectional ports may be from a blackbox and their direction will be resolved (and changed) after loading the correct module or cell definition.</p>




<h4>
  <a name="1039255"> </a>How to Handle Isolation Rules Created Without Isolation Condition </h4>


<p>
  <a name="1045988"> </a>IP blocks can have special requirements for input ports. For example, when the signals driving these input ports are switched off, the signals must be held at specific values. For these signals, no isolation condition can be specified because the IP developer has no knowledge of how the IP will be used. </p>


<p>
  <a name="1045990"> </a>For such cases, there is a need to create isolation rules without enable conditions (neither <code>-isolation_condition</code> nor <code>-no_condition</code> option specified). Such isolation rules are called incomplete isolation rules. </p>


<p>
  <a name="1041864"> </a>On the other hand, a default isolation condition can be specified for a switchable power domain:</p>


<pre><a name="1041869"></a><nobr>create_power_domain [-default_isolation_condition <code><em>expression</code></em>]</nobr></pre>

<p>
<strong>Note:&nbsp;</strong>
<a name="1041872"> </a>An error will be given if a <code>-default_isolation_condition</code> option is specified for an unswitched domain--a domain created without <code>-shutoff_condition</code> or <code>-external_controlled_shutoff</code> option. 
</p>

<p>
  <a name="1041904"> </a>In case of an incomplete isolation rule the following restrictions apply:</p>

<ul>
  <a name="1043771"></a><li><p>The target location for the isolation cell must be the from domain if the IP block is a macro cell.</p>

  <a name="1043776"></a><li><p>The rule can only be specified for the net that connects to an input port of a module or a macro cell.</p>
</ul>
<p>
  <a name="1043770"> </a>To complete an incomplete isolation rule, tools need to check if the power domain containing the leaf level driver of the net selected by the rule has a default isolation condition. If a default isolation condition is defined, this condition can be used by the incomplete isolation rule to make the rule complete. If no default isolation condition was defined for the driving power domain, the incomplete isolation rule is treated as a design constraint. </p>




<h4>
  <a name="1050804"> </a>How to Handle Isolation Rules Created With Clamp Value for Isolation Output</h4>


<p>
  <a name="1050805"> </a>During RTL simulation, special consideration is required for isolation rule specified with <code>clamp_high</code> or <code>clamp_low</code></p>

<ol type="1">
  <li value="1"><p><a name="1050806"> </a>The net must be considered corrupted if the signal value is <code>1</code> (<code>0</code>), and the isolation output is set to <code>clamp_low</code> (<code>clamp_high</code>) when the isolation enable becomes active during power down sequence and before the driving domain is shut off.</p>
  <li value="2"><p><a name="1050807"> </a>The clamp value will appear on the net when the driven domain is switched off.</p>
  <li value="3"><p><a name="1050808"> </a>The net must be considered corrupted if the signal value is1(0), and the isolation output is set to <code>clamp_low</code> (<code>clamp_high</code>) during power up sequence between the time when the power of the driving domain is restored and the time the isolation enable becomes inactive.</p>
</ol>

<p>
  <a name="1050809"> </a>When inserting the isolation logic, the implementation tool must</p>

<ol type="1">
  <li value="1"><p><a name="1050810"> </a>Simply connect the output pin of the cell to the selected net without breaking the net into two net segments (unlike with regular isolation cells with both data input and output pins).</p>
  <li value="2"><p><a name="1050811"> </a>Consider only clamp type isolation cells when the <code>-cells</code> option is specified</p>
</ol>



<h4>
  <a name="1041809"> </a>When Can Implementation Tools Ignore An Isolation Rule</h4>


<p>
  <a name="1040388"> </a>Unless the <code>create_isolation_rule</code> command was specified with the <code>-force</code> option, isolation rules can be ignored in the following cases:</p>

<ul>
  <a name="1040389"></a><li><p>Isolation logic exists on the selected net and all the following conditions are met:</p>
<ul>
  <a name="1040390"> </a><li><p>The isolation cell has the same cell type as requested by the rule
</p>

  <a name="1040391"> </a><li><p>The isolation enable of the cell matches the isolation condition of the rule
</p>
</ul>
  <a name="1040392"></a><li><p>The rule is specified for a floating net.</p>

  <a name="1040397"></a><li><p>The rule is specified for an undriven net. </p>

  <a name="1040403"></a><li><p>The specified net has its leaf level driver and loads in the same power domain.</p>

  <a name="1051953"></a><li><p>The isolation condition is specified with virtual ports at the block level but the virtual ports do not have any port mapping at the top level.</p>

  <a name="1051954"></a><li><p>The rule is specified for a net connecting a top-level port and a pad-pin of a pad instance.</p>
<dl>
<p>
  <a name="1051959"> </a>If a rule is specified for a net connecting a top-level port and a pad-pin of a pad instance, the rule should not be implemented, regardless of the <code>-force</code> option.</p>

</dl></ul>
<p>
<strong>Note:&nbsp;</strong>
<a name="1051956"> </a>If the isolation rule (<code>create_isolation_rule</code>) is specified with the <code>-no_condition</code> option and the rule (<code>update_isolation_rules</code>) is specified with the <code>-cells</code> option and none of the specified cells are specified with the <code>-no_enable</code> option, the implementation tools should issue an error and not insert any isolation logic.
</p>

<p>
<strong>Note:&nbsp;</strong>
<a name="1046023"> </a>If the isolation rule is specified with an isolation condition and the rule (<code>update_isolation_rules</code>) is specified with the <code>-cells</code> option and none of the specified cells are specified with the <code>-enable</code> option, the implementation tools should issue an error and not insert any isolation logic.
</p>



<h4>
  <a name="1052111"> </a>Isolation insertion</h4>


<p>
  <a name="1052115"> </a>You can specify the location for the isolation logic in the <a href="reference.html#1486586">update_isolation_rules</a>command using the <code>-location</code> and the <code>-within_hierarchy</code> options. </p>


<p>
  <a name="1050831"> </a>The <code>-location</code> option specifies the power domain where to insert the isolation logic.</p>

<ul>
  <a name="1051965"></a><li><p><code>from</code> inserts the isolation logic in a hierarchy belonging to the originating power domain. Unless further constrained, the location will be the outermost logic hierarchy of the originating power domain.</p>

  <a name="1051966"></a><li><p><code>to</code> inserts the isolation logic inside a hierarchy belonging to the destination power domain. Unless further constrained, the location will be the outermost logic hierarchy of the destination power domain.</p>

  <a name="1051967"></a><li><p><code>parent</code> inserts the isolation logic in the logic hierarchy as follows:</p>
<ul>
  <a name="1051968"> </a><li><p>If the rule is specified without the <code>-to</code> option, choose the parent hierarchy of the 
outermost logic hierarchy of the originating power domain.
</p>

  <a name="1051969"> </a><li><p>If the rule is specified with the <code>-to</code> option, choose the parent hierarchy of the 
outermost logic hierarchy of the destination power domain
</p>
</ul><dl>
<p>
<strong>Note:&nbsp;</strong>
<a name="1052236"> </a>This is the only value allowed if the original rule was specified with the <code>-force</code> option.
</p>

</dl></ul><ul>
  <a name="1051970"> </a><li><p><code>any</code> (can only be used with the <code>-within_hierarchy</code> option) indicates that the isolation logic can be inserted in any power domain to which the specified logic hierarchy belongs. </p></p>

</ul>
<p>
  <a name="1052008"> </a>The location for the inserted isolation logic can be further refined using the<code> -within_hierarchy</code> option. Only isolation cells compatible with the insertion location may be used. Compatibility is determined by the <code>-valid_location</code> option of the <code><a href="../cpf_ref/lib_reference.html#define_isolation_cell">define_isolation_cell</a></code> command. If <code>-valid_location</code> is</p>

<ul>
  <a name="1051992"></a><li><p><code>from</code>--this type of cell may only be used for <code>off</code> to <code>on</code> isolation. Since these cells rely on their primary power and ground pins for their normal function, they must be inserted into a power domain that is <code>on</code> whenever the source domain is <code>on</code>. </p>

  <a name="1051993"></a><li><p><code>to</code>--this type of cell is used for <code>off</code> to <code>on</code> isolation and relies on its primary power and ground pins for its normal and isolation functions. Therefore, the domain of the insertion hierarchy must be <code>on</code> when the destination domain is <code>on</code>. </p>

  <a name="1051994"></a><li><p><code>on</code>--this type of cell uses its primary power and ground pins for both the normal and isolation functions. For an </p>
<ul>
  <a name="1052046"> </a><li><p><code>on</code> to <code>off</code> isolation, the domain of the insertion hierarchy must be <code>on</code> when the 
originating domain is <code>on</code>.
</p>

  <a name="1052047"> </a><li><p><code>off</code> to <code>on</code> isolation, the domain of the insertion hierarchy must be <code>on</code> whenever the 
destination domain is <code>on</code>.
</p>
</ul>
  <a name="1051995"></a><li><p><code>any</code>--these cells do not rely on their primary power or ground pins for their normal and isolation functions. Thus, there is no restriction on the power domain of the specified hierarchy.</p>
</ul>
<p>
  <a name="1052056"> </a>The other two values of <code>-valid_location</code>, <code>to</code> and <code>off</code>, are not commonly used and will be deprecated in a future release. All isolation cells can be described with the above three different valid locations.</p>


<p>
  <a name="1052061"> </a>if the <code>update_isolation_rules</code> command is specified with the <code>-cells</code> option, the verification tools will check that the specified cells are available in the library sets associated with the domain of the specified instance.</p>




<h4>
  <a name="1039281"> </a>Example</h4>


<p>
  <a name="1040185"> </a>The following example illustrates the effect of the specified options on the selection of the nets. In the design in Figure <a href="rules.html#1040190">6-1</a>, instances <code>I1</code> and <code>I2</code> belongs to power domain <code>PDA,</code> and instance <code>I3 </code>belongs to power domain <code>PDB</code>.</p>


  <a name="1040190"> </a><h4>
Figure 6-1   Effect of the Specified Options on the Nets Selected</h4>


<p>
  <a name="1042035"> </a><img src="images/rulesx1.png" border="0">
</p>


<p>
  <a name="1042024"> </a>The following table shows how the nets are selected based on the specified options:</p>


<p>
  <a name="1040213"> </a><p>
<table valign="top" border="0" bordercolorlight="#FFFFFF" bordercolordark="#000000"
       cellpadding="5" cellspacing="0">
<div align="left"></div>
  <tr bgcolor="#CCCCCC"><div align="center">
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p><strong><a name="1040198"> </a>Rules</strong></p></div></font></th>
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p><strong><a name="1040200"> </a>Net Segments Selected</strong></p></div></font></th>
  </div></tr>
  <tr>
    <td valign="top">
<pre><a name="1040202"></a><nobr>create_isolation_rule -name iso1 -from PDA</nobr></pre>
</td>
    <td valign="top"><p>
<a name="1040204"> </a>BF, CG</p>
</td>
  </tr>
  <tr>
    <td valign="top">
<pre><a name="1040206"></a><nobr>create_isolation_rule -name iso2 -to PDB</nobr></pre>
</td>
    <td valign="top"><p>
<a name="1040208"> </a>BF, CG</p>
</td>
  </tr>
  <tr>
    <td valign="top">
<pre><a name="1040210"></a><nobr>create_isolation_rule -name iso3 -from PDA \<br>-to PDB -pins B</nobr></pre>
</td>
    <td valign="top"><p>
<a name="1040212"> </a>BF</p>
</td>
  </tr>
</table>
<br>


</p>

</p>


<p>
  <a name="1040183"> </a>The isolation rules can be ignored in the following cases:</p>

<ul>
  <a name="1040453"></a><li><p>Rule <code>iso1</code> can be ignored for the net connected to pin I in Figure <a href="rules.html#1040190">6-1</a> because it is a floating net.</p>

  <a name="1040448"></a><li><p>Rule <code>iso2</code> can be ignored for the net connected to pin <code>H</code> in Figure <a href="rules.html#1040190">6-1</a> because it is driven by a tie-low signal.</p>

  <a name="1043471"></a><li><p>Net segments <code>AD</code> and <code>BE</code> in Figure <a href="rules.html#1040190">6-1</a> should not be considered for any rule because the leaf-level driver and loads are in the same power domain.</p>
</ul>
<br><br>
<h3>
  <a name="1043473"> </a>Multiple Level Shifter and Isolation Rules</h3>

<ul>
  <a name="1041306"></a><li><p><a href="rules.html#1040329">How Do Multiple Rules Apply to a Physical Net</a></p>

  <a name="1041310"></a><li><p><a href="rules.html#1040699">How Do Rules Apply to Nets with Multiple Fanouts</a></p>
</ul>


<h4>
  <a name="1040329"> </a>How <a name="multi_rules_phys_net"></a>Do Multiple Rules Apply to a Physical Net</h4>


<p>
  <a name="1039306"> </a>Multiple rules can be specified for a physical net. </p>


<p>
  <a name="1042120"> </a>In this case, the following policy should be used.</p>


<table border="0" cellpadding="0">
<tr>
<td valign="top"><img src=../chars/arrwrite.gif>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a name="1042121"> </a>	 The implementation tools should trace back from the net connected to the leaf level load pin to the net connected to the leaf level driver pin until it finds a net with a rule applied to it. That rule will be used.</td>
</table>

     <dl><dl>
<p>
<strong>Note:&nbsp;</strong>
<a name="1039308"> </a>The verification tools should issue a warning if multiple rules are specified for the <a href="concepts.html#1040240">logical net segments</a><a href="concepts.html#1040226"> of a </a>physical net.
</p>


<p>
<strong>Note:&nbsp;</strong>
<a name="1043705"> </a>If multiple isolation rules are specified for the logical net segments of a physical net and all rules use the same value for the <code>-isolation_target</code> option, then all isolation enable signals must be identical or must have been declared as equivalent control pins using the <a href="reference.html#1342696">set_equivalent_control_pins</a> command. Otherwise the verification tools should issue an error.
</p>

</dl>     </dl>
<p>
  <a name="1044432"> </a>If a physical net has a valid level-shifter rule and a valid isolation rule, and the expected location of the cell for both rules is the same, the implementation tool will first try to find a matching cell (that can be used as both isolation cell and level shifter) to implement both rules. If no such cell can be found, the tool will need to implement the level shifter logic and isolation logic separately according to the rules.</p>


<h4>  <a name="1039485"> </a><i>Examples of Multiple Rules on a Physical Net</i>
</h4>


<p>
  <a name="1039518"> </a>In the design in <a href="rules.html#1039488">Figure 6-2</a>, instances <code>I1</code>, <code>I2</code>, <code>I3</code> belong to power domains <code>PD1</code>, <code>PD2</code>, <code>PD3,</code> respectively. The design has a physical net whose leaf driver (driving instance) is part of power domain <code>PD1</code> while the leaf load (driven instance) is part of power domain <code>PD3</code>. The logical net segment in <code>PD2</code> is a wire feedthrough. </p>


  <a name="1039488"> </a><h4>
Figure 6-2   Multiple Rules on a Physical Net</h4>


<p>
  <a name="1039312"> </a><img src="images/rulesx2.png" border="0">
</p>


  <a name="1039314"> </a><h4>
Example 6-1   </h4>


<p>
  <a name="1039480"> </a>Assume the following level shifter rules from the top-level design: </p>


<pre><a name="1039315"></a><nobr>create_level_shifter_rule -name lsPD1 -from PD1 </nobr></pre>

<pre><a name="1039482"></a><nobr>create_level_shifter_rule -name lsPD2 -pins I2/C* -from PD1</nobr></pre>

<pre><a name="1039484"></a><nobr>create_level_shifter_rule  -name lsPD3 -to PD3</nobr></pre>

<p>
  <a name="1039316"> </a>In this case, rule <code>lsPD1</code> applies to the net connected to pin <code>I1/A</code>. Rule <code>lsPD2</code> applies to the net connected to pin <code>I2/C1</code>. Rule <code>lsPD3</code> applies to the net connected to pin <code>I3/I4/I6/E</code>. </p>


<p>
  <a name="1039857"> </a>All these pins are on the same physical net between pinsI1/A and I3/I4/I6/E. Because pin E is the leaf load pin of the physical net and the logical net connected to this pin has rule <code>lsPD3</code>, this rule will be used for level shifter insertion on this physical net and all other rules will be ignored for this physical net. See <a href="rules.html#1040329">How Do Multiple Rules Apply to a Physical Net</a>.</p>


  <a name="1039317"> </a><h4>
Example 6-2   </h4>


<p>
  <a name="1042167"> </a>Assume the following level shifter rules from the top-level design: </p>


<pre><a name="1042142"></a><nobr>create_level_shifter_rule  -name lsPD1  -from PD1  -to PD3</nobr></pre>

<pre><a name="1042161"></a><nobr>create_level_shifter_rule  -name lsPD3 -to PD3</nobr></pre>

<p>
  <a name="1042143"> </a>In this case, both rule <code>lsPD1</code> and rule <code>lsPD3 </code>apply to the net connected to pin <code>I3/I4/I6/E.</code>However, rule <code>lsPD1</code> has a higher priority because it has both the <code>-from</code> and <code>-to</code> options, while rule <code>lsPD3</code> only has the <code>-to</code> option. Therefore, rule <code>lsPD1</code> takes precedence. For more information, see <a href="rules.html#1036979">Different Categories of Rules</a>.</p>


  <a name="1039321"> </a><h4>
Example 6-3   </h4>


<p>
  <a name="1042204"> </a>Assume the following CPF commands from the top-level design: </p>


<pre><a name="1042214"></a><nobr>create_power_domain -name PD1 -default_isolation_condition iso </nobr></pre>

<pre><a name="1039327"></a><nobr>create_isolation_rule -name isoPD1 -to PD4 -isolation_condition iso1 \<br>&nbsp;&nbsp;-isolation_output low </nobr></pre>

<pre><a name="1042228"></a><nobr>set_instance I3 -domain_mapping { {PD3 PD4} }<br>set_design mod3<br>...<br>create_isolation_rule -name isoPD3 -isolation_output high  -to PD3 </nobr></pre>

<pre><a name="1042231"></a><nobr>end_design</nobr></pre>

<p>
  <a name="1042262"> </a>Block-level isolation rule <code>isoPD3</code> applies to <code>I4/I6/E</code> and is incomplete. According to <a href="rules.html#1039255">How to Handle Isolation Rules Created Without Isolation Condition</a> the tool will use the default isolation condition specified for the power domain of the leaf driver of <code>I3/I4/I6/E</code>. In this case, the leaf level driver is an instance in domain <code>PD1</code> which has a default isolation condition <code>iso</code>. In addition, rule <code>isoPD3</code> takes precedence over rule <code>isoPD1</code> based on the policy in <a href="rules.html#1052252"><code>Precedence of Rules in the Hierarchical Flow</code></a><code>.</code></p>




<h4>
  <a name="1040699"> </a>How Do Rules Apply to Nets with Multiple Fanouts </h4>


<p>
  <a name="1040722"> </a>Special handling is required for level shifter and isolation cell insertion when the nets have multiple leaf-level loads and different rules apply for the nets connected to the loads.</p>


<p>
  <a name="1040888"> </a>The design in Figure <a href="rules.html#1048630">6-3</a> has three power domains. The default domain <code>PD1</code> operates at 0.8v. Power domains <code>PD2</code> and <code>PD3</code> operate at 1.0 and 1.1 volt, respectively. </p>


  <a name="1048630"> </a><h4>
Figure 6-3   Nets with Fanouts in Different Power Domains</h4>


<p>
  <a name="1048675"> </a><img src="images/rulesx3.png" border="0">
</p>


<p>
  <a name="1048676"> </a>The net connected to pin A fans out to different power domains that each operate at a different supply voltage. If a level shifter rule is applied to the net connected to pin <code>A</code> and the level shifter cell location is in the from domain (see Example <a href="rules.html#1048684">6-3</a>), you need a different level shifter for each load and therefore pin A has to be cloned (see <a href="rules.html#1041291">Figure 6-4</a>)</p>


  <a name="1048684"> </a><h4>
Example 6-4   </h4>


<p>
  <a name="1048685"> </a>Assume the following CPF commands from the top-level design: </p>


<pre><a name="1048686"></a><nobr>create_power_domain -name PD0</nobr></pre>

<pre><a name="1048687"></a><nobr>create_power_domain -name PD1 --instances I3</nobr></pre>

<pre><a name="1048688"></a><nobr>create_power_domain -name PD2 -instances I2</nobr></pre>

<pre><a name="1048689"></a><nobr>create_power_domain -name PD3 -instances I1</nobr></pre>

<pre><a name="1048690"></a><nobr>create_level_shifter_rule -name lvl1 -from PD1 </nobr></pre>

<pre><a name="1048691"></a><nobr>update_level_shifter_rule -names lvl1 -location from </nobr></pre>

<p>
  <a name="1040736"> </a>To ensure that the verification tools can correctly verify the netlist with the cloned pins against the original HDL and the golden CPF, the implementation tools need to follow these rules:</p>

<ol type="1">
  <li value="1"><p><a name="1040921"> </a>Keep the original port with its original name.</p>
  <li value="2"><p><a name="1040741"> </a>Clone the ports.</p>
<dl>
<p>
  <a name="1041305"> </a>Use the following format for the names of the cloned ports:</p>

</dl><dl>
<pre><a name="1040966"></a><nobr><code><em>originalPortName_</code></em><code>CPF_DUP</code><code><em>_index</code></em></nobr></pre>
</dl><dl>
<p>
  <a name="1040748"> </a>The index is an integer that starts at 0 and that is incremented as needed.</p>

</dl>  <li value="3"><p><a name="1040776"> </a>Apply the original isolation or level shifter rule to all cloned ports.</p>
<dl>
<p>
  <a name="1040777"> </a>Follow the precedence rules in <a href="rules.html#1039935">Precedence of Rules in the Flat Flow</a>, <a href="rules.html#1052252">Precedence of Rules in the Hierarchical Flow</a>, and <a href="rules.html#1040329">How Do Multiple Rules Apply to a Physical Net</a> to resolve any conflicts of rules specified on the physical nets connected to the original port and the cloned ports.</p>

</dl></ol>

  <a name="1041291"> </a><h4>
Figure 6-4   Cloned Ports for Nets with Fanouts in Different Power Domains</h4>


<p>
  <a name="1041295"> </a><img src="images/rulesx4.png" border="0">
</p>


<br><br>
<h3>
  <a name="1040843"> </a>State Retention Rules</h3>


<p>
  <a name="1040844"> </a>A state retention rule specifies one or more registers (at RTL) or instances in a switchable power domain that need to be mapped to state retention cells. </p>


<p>
  <a name="1048508"> </a>The targeted registers or instances are selected by the <code>-domain</code> and <code>-instances</code> option of the <a href="reference.html#1041541">create_state_retention_rule</a> command.</p>




<h4>
  <a name="1040845"> </a>Interpretation of Different Options</h4>

<ul>
  <a name="1040846"></a><li><p><code>-domain</code> specifies to apply the rule to all registers or non-state-retention sequential instances in this domain.<code> </code></p>

  <a name="1045839"></a><li><p><code>-instances</code> specifies a list of registers or instances</p>
<dl>
<p>
  <a name="1045843"> </a>See the description for the <code>-instances</code> option of the <a href="reference.html#1041541">create_state_retention_rule</a> command.</p>

</dl></ul>
<p>
<strong>Note:&nbsp;</strong>
<a name="1045844"> </a>The user needs to be aware that a state retention rule created with only the <code>-domain</code> option might result in unexpected behaviors during implementation. For example, new sequential instances (such as latches or flops) can be added during DFT synthesis. When the rule is applied to a synthesized netlist, the tools will replace such special sequential instances with retention cells. To avoid this from happening, designers should create a state retention rule with either the <code>-instances</code> or the <code>-exclude</code> option.
</p>



<h4>
  <a name="1045847"> </a>How to Model Different Types of State Retention Control</h4>


<p>
<strong>Note:&nbsp;</strong>
<a name="1046142"> </a>In what follows, power refers to the primary power domain of the state retention logic. The secondary power domain of the state retention logic must be on for the save and restore operation to work properly. When the secondary power domain is off, the state value of the corresponding logic will be corrupted.
</p>

<p>
  <a name="1045850"> </a>To model retention logic with only one retention control, you can use only the <code>-save_edge</code> and<code>-restore_edge</code> options.</p>

<ul>
  <a name="1045851"></a><li><p>If you specify <code>-save_edge</code>, the register saves the current value when the expression changes to <code>true</code> and the power is on. The register restores the saved value when the power is turned on. </p>

  <a name="1045852"></a><li><p>If you specify <code>-restore_edge</code>, the register saves the current value when the expression changes from <code>true</code> to <code>false</code> and the power is on. The register restores the saved value when the expression changes from <code>false</code> to <code>true</code> and power is on. </p>

  <a name="1045977"></a><li><p>If you specify both options, the register saves the current value when the save expression changes from <code>false</code> to <code>true</code> and the power is on. The register restores the saved value when the restore expression changes from <code>false</code> to <code>true</code> and the power is on.</p>
</ul>
<p>
  <a name="1045854"> </a>To model a retention logic with both save and restore control, specify both the <code>-save_level</code> and <code>-restore_level</code> options. The register saves the current value when the save expression is <code>true</code> and the power is on. The register restores the saved value when the restore expression is <code>true</code> and the power is on.</p>




<h4>
  <a name="1042559"> </a>How to Handle State Retention Rules Created Without Any Control Condition</h4>


<p>
  <a name="1041474"> </a>A state retention rule can be specified without any restore or save conditions. In this case, the rule is incomplete.</p>


<p>
  <a name="1043495"> </a>To complete an incomplete state retention rule, the tools need to check if the power domain to which the rule applies has a default save or restore condition. </p>

<ul>
  <a name="1048510"></a><li><p>If a default save or restore condition is defined, this condition can be used by the incomplete state retention rule to make the rule complete. </p>

  <a name="1048511"></a><li><p>If no default save or restore condition was defined for the power domain, the incomplete state retention rule remains incomplete and will be ignored by the implementation tools. </p>
</ul>


<h4>
  <a name="1046289"> </a>Handling <a name="Master-Slave"></a>Master-Slave Type Retention Cells </h4>


<p>
  <a name="1046290"> </a>A master-slave type state retention cell does not have a save or restore control pin. It has a secondary power or ground pin to provide continuous power supply to the slave latch. The clock signal acts as the retention control signal. As a result, users should use the clock signal for the registers as the restore edge and save edge. </p>


<p>
  <a name="1046291"> </a>If the clock signal is used as the restore or save signal for a flop, then the synthesis tool will synthesize it using a master-slave type retention cell. For library definition, the clock pin needs to be declared as the only save and restore signal and has to be an always-on pin.</p>


<p>
<strong>Note:&nbsp;</strong>
<a name="1046292"> </a>This type of cell has some challenges for implementation. For example, in retention mode, the clock needs to be at a specific value to keep the data in the slave latch. All logic on the clock tree must be always-on.
</p>



<h4>
  <a name="1041455"> </a>When Can Implementation Tools Ignore A State Retention Rule</h4>


<p>
  <a name="1041456"> </a>State retention rules can be ignored in the following cases:</p>

<ul>
  <a name="1041457"></a><li><p>The rule is incomplete</p>

  <a name="1052320"></a><li><p>The rule is specified for an unswitched domain or sequential elements in an unswitched domain. </p>
<ul>
  <a name="1052326"> </a><li><p>If the <code>-required</code> option is specified, the retention logic cannot be optimized.
</p>

  <a name="1052327"> </a><li><p>Implementation tools will typically not optimize the retention logic due to hierarchical 
flow considerations.
</p>
</ul>
  <a name="1052332"></a><li><p>There are no matching sequential elements in the domain.</p>

  <a name="1041459"></a><li><p>The specified instance is already an instantiation of a state retention cell.</p>
</ul>
<p>
<strong>Note:&nbsp;</strong>
<a name="1042486"> </a>It is an error, if the virtual port used to specify a block-level retention control condition is not mapped to a top-level driver.
</p>

<p>
  <a name="1043669"> </a></p>


  

</blockquote>

<br>
<a href="#pagetop">Return to top of page</a>
<hr>
<p>
<!-- Begin Buttons -->
<table border="0" cellpadding="0" cellspacing="0" width="650">
<tr>
  <td height="20" width="59"><a href="javascript:openLibrary()"><img src="../support/nav2_library.gif" border="0" alt="View Library" height="20" width="59"></a></td>
  <td height="20" width="73"><a href="cpf_refTOC.html"><img src="../support/nav2_toc.gif" border="0" alt="View Table Of Contents" height="20" width="73"></a></td>
  <td height="20" width="46"><a href="cpf_refIX.html"><img src="../support/nav2_index.gif" border="0" alt="View Index for This Manual" height="20" width="46"></a></td>
  <td height="20" width="83"><a href="hier_flow.html"><img src="../support/nav2_previous.gif" border="0" alt="View Previous Chapter in Book" height="20" width="83"></a></td>
  <td height="20" width="59"><a href="structure.html"><img src="../support/nav2_next.gif" border="0" alt="View Next Chapter in Book" height="20" width="59"></a></td>
  <td height="20" width="114"><a href="cpf_ref.pdf"><img src="../support/nav2_print.gif" border="0" alt="Open PDF to print book" height="20" width="114"></a></td>
  <td height="20" width="61"><a href="/search.htm"><img src="../support/nav2_search.gif" border="0"  alt="Search Cadence Library" height="20" width="61"></a></td>
  <td height="20" width="76"><a href="/feedback.htm"><img src="../support/nav2_feedback.gif" border="0" alt="Email Comments" height="20" width="76"></a></td>
  <td height="20" width="43"><a href="../cdsuser/help.html"><img src="../support/nav2_help.gif" border="0" alt="Help Using Documentation" height="20" width="43"></a></td>
  <td height="20" width="37"><a href="/exitsearch.htm"><img src="../support/nav2_exit.gif" border="0" alt="Shut Down Cadence Documentation Server" height="20" width="37"></a></td>
</tr>
</table>
<!-- End Buttons -->
<p>
<p>


<!-- NOTES; -->

<!-- /address -->
<p>
<br>
<font size="-1">
For support, see <a href=http://www.cadence.com/support>http://www.cadence.com/support</a>
or try Cadence's <a href=http://sourcelink.cadence.com target=_blank>SourceLink</a> service.
<br><br>
<i>Copyright &#169; 2013, <a href=http://www.cadence.com>Cadence Design Systems, Inc.</a></i> 
<br>
All rights reserved.
<br>
<a href="titlecopy.html">Legal notices and trademark attributions</a>
<br>
<!-- This file was created with Quadralay WebWorks Publisher AutoMap 6.0.7 -->
<!-- -->
<!-- Last updated: Wed Jul 17 14:09:14 2013 -->
</font>
</body>
</html>


