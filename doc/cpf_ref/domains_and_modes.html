
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="GENERATOR" content="Quadralay WebWorks Publisher AutoMap 6.0.7">
<meta name="TEMPLATEBASE" content="CadencePubs_HelpTopics">
<meta name="LASTUPDATED" content="Wed Jul 17 14:09:07 2013">

<script TYPE="text/javascript" LANGUAGE="JavaScript" >
  <!--
  // Dummy script statement to get rid of Netscape timing errors which may
  // print garbage JavaScript code at the top in Unix 4.x Netscape browser.
  // -->
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Browser.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Cookies.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Search.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript">
  <!--
  function window_resized(){
    window.location.reload();
  }
  window.onresize=window_resized;
                                                                                                                                                                
  /*
  * Initializes before submitting query
  */
  function initOnSubmit() {
    storeStateAndQuery();
  }
                                                                                                                                                                
  setCookie("DocumentTitle", "Common Power Format Language Reference");
  setCookie("Chapter", "N/A");
  setCookie("Keyword", "search");
  setCookie("Version", "Product Version 2.2");

  // -->
  </script>


<title>Common Power Format Language Reference -- 4. Power Domains and Modes</title>
<META NAME="Approver" CONTENT="Technical Publications">
<META NAME="Author" CONTENT="Technical Publications">
<META NAME="CreateDate" CONTENT="2013-07-17">
<META NAME="CreateTime" CONTENT="1374095377">
<META NAME="DataType" CONTENT="Manuals">
<META NAME="Description" CONTENT="Describes CPF">
<META NAME="DocTitle" CONTENT="Common Power Format Language Reference">
<META NAME="DocType" CONTENT="Manual">
<META NAME="FileTitle" CONTENT="4. Power Domains and Modes">
<META NAME="FileType" CONTENT="Chapter">
<META NAME="Keyword" CONTENT="cpf_ref">
<META NAME="Language" CONTENT="English">
<META NAME="ModifiedDate" CONTENT="2013-07-17">
<META NAME="ModifiedTime" CONTENT="1374095377">
<META NAME="NextFile" CONTENT="hier_flow.html">
<META NAME="PageCount" CONTENT="18">
<META NAME="Platform" CONTENT="ALL">
<META NAME="PrevFile" CONTENT="format.html">
<META NAME="Product" CONTENT="Languages">
<META NAME="ProductFamily" CONTENT="Cadence Shared Tools">
<META NAME="ProductVersion" CONTENT="2.0">
<META NAME="RightsManagement" CONTENT="Copyright 2006 Cadence Design Systems Inc.">
<META NAME="Title" CONTENT="Common Power Format Language Reference -- 4. Power Domains and Modes">
<META NAME="TopicTags" CONTENT="FALSE">
<META NAME="Version" CONTENT="2.0">
</head>

<body bgcolor="#ffffff">
<a name="firstpage"></a>
<a name="pagetop"></a>

<p>
<!-- Begin Buttons -->

<form name="advancedform" action="/vtopic.isapi" method="GET" onSubmit="initOnSubmit()">
<input type=hidden name="action" value="FilterSearch">
<input type=hidden name="Filter" value="altsearchfilter.hts">
<input type=hidden name="resulttemplate" value="altsearchresults.hts">
<input type=hidden name="resultcount" value="10">
<input type=hidden name="resultmaxdocs" value="-1">
<input type=hidden name="queryhidden" value="null">
<input type=hidden name="queryitemselected" value="no">

<table border="0" cellpadding="0" cellspacing="0" width="650">
<tr>
  <td height="36" width="650" colspan="10"><img src="../support/header_doc.gif" WIDTH="650" HEIGHT="36"></td>
</tr>
<tr>
  <td height="20" width="59"><a href="javascript:openLibrary()"><img src="../support/nav2_library.gif" border="0" alt="View Library" height="20" width="59"></a></td>
  <td height="20" width="73"><a href="cpf_refTOC.html"><img src="../support/nav2_toc.gif" border="0" alt="View Table Of Contents" height="20" width="73"></a></td>
  <td height="20" width="46"><a href="cpf_refIX.html"><img src="../support/nav2_index.gif" border="0" alt="View Index for This Manual" height="20" width="46"></a></td>
  <td height="20" width="83"><a href="format.html"><img src="../support/nav2_previous.gif" border="0" alt="View Previous Chapter in Book" height="20" width="83"></a></td>
  <td height="20" width="59"><a href="hier_flow.html"><img src="../support/nav2_next.gif" border="0" alt="View Next Chapter in Book" height="20" width="59"></a></td>
  <td height="20" width="114"><a href="cpf_ref.pdf"><img src="../support/nav2_print.gif" border="0" alt="Open PDF to print book" height="20" width="114"></a></td>
  <td height="20" width="61"><img src="../support/nav2_black.gif" height="20" width="61"></td>
  <td height="20" width="76"><a href="/feedback.htm"><img src="../support/nav2_feedback.gif" border="0" alt="Email Comments" height="20" width="76"></a></td>
  <td height="20" width="43"><a href="../cdsuser/help.html"><img src="../support/nav2_help.gif" border="0" alt="Help Using Documentation" height="20" width="43"></a></td>
  <td height="20" width="37"><a href="/exitsearch.htm"><img src="../support/nav2_exit.gif" border="0" alt="Shut Down Cadence Documentation Server" height="20" width="37"></a></td>
</tr>
 <tr>
    <td colspan="10">
      <script type="text/javascript">
      <!--// We wrap all this inside javascript because we only want to display  -->
      <!--// the search bar if the http server is running. If it is not running  -->
      <!--// the search bar should not be visible to the user                    -->
      <!-- BEGIN SEARCH BAR -->
      var isloaded = isLoaded();
      var enteredquery = getCookie("enteredquery");
      if(enteredquery) {
        enteredquery = enteredquery.replace(/</g,"&lt ");
        enteredquery = enteredquery.replace(/>/g,"&gt ");
      } else {
         enteredquery = "";
      }
                                                                                                                                                                
      <!-- Only display search bar if server is running -->
      if(isloaded) {
                                                                                                                                                                
        display_search_bar(enteredquery);
                                                                                                                                                                
      }
      <!-- END SEARCH BAR -->
      </script>
    </td>
  </tr>
</table>
</form>

<!-- End Buttons -->
<p>
<p>
<hr>
<p>
<h3><center>Common Power Format Language Reference&#0044; Version 2.0</center></h3><br>
<p>


<blockquote>

  
<div align="right">
<h1 align="left">
  <a name="1032955"> </a>4</h1>
</div>

<hr>
<h1>
  <a name="1035250"> </a>Power Domains and Modes</h1>





<ul>
  <a name="1036857"></a><li><p><a href="domains_and_modes.html#1036695">Power Domains</a></p>
<ul>
  <a name="1040426"> </a><li><p><a href="domains_and_modes.html#1040425">Power Domain Categories</a>
</p>

  <a name="1049603"> </a><li><p><a href="domains_and_modes.html#1047662">Base and Derived Power Domains</a>
</p>

  <a name="1040436"> </a><li><p><a href="domains_and_modes.html#1040431">Primary and Secondary Power Domains of Instances</a>
</p>
<ul>
  <a name="1039786"> </a><li><p><a href="domains_and_modes.html#1039767">Secondary Power Domain of Isolation Instances</a>
</p>

  <a name="1047092"> </a><li><p><a href="domains_and_modes.html#1049136">Secondary Domain of Retention Logic</a>
</p>

  <a name="1049388"> </a><li><p><a href="domains_and_modes.html#1048801">Secondary Power Domain of Global Cells</a>
</p>

  <a name="1047911"> </a><li><p><a href="domains_and_modes.html#1049045">Input and Output Domains of Level Shifters</a>
</p>
</ul>
  <a name="1047096"> </a><li><p><a href="domains_and_modes.html#1049087">Power Domains of Pins and Ports</a>
</p>
</ul>
  <a name="1047397"></a><li><p><a href="domains_and_modes.html#1044136">Modes</a></p>
<ul>
  <a name="1048345"> </a><li><p><a href="domains_and_modes.html#1047402">Nominal Conditions</a>
</p>

  <a name="1049223"> </a><li><p><a href="domains_and_modes.html#1049198">Power Modes</a>
</p>

  <a name="1049147"> </a><li><p><a href="domains_and_modes.html#1049193">Generic Modes</a>
</p>

  <a name="1048353"> </a><li><p><a href="domains_and_modes.html#1048125">Illegal Domain Configurations</a>
</p>

  <a name="1048357"> </a><li><p><a href="domains_and_modes.html#1047931">Mode Transitions</a>
</p>
</ul></ul>
<br><br><br>
<h2>
  <a name="1036695"> </a>Power Domains</h2>


<br><br>
<h3>
  <a name="1040425"> </a>Power Domain Categories</h3>


<p>
  <a name="1042338"> </a>CPF considers three categories of power domains as shown in Figure <a href="domains_and_modes.html#1042340">4-1</a>. </p>


  <a name="1042340"> </a><h4>
Figure 4-1   Categories of Power Domains</h4>


<p>
  <a name="1042345"> </a><img src="images/domains_and_modesx1.png" border="0">
</p>


<p>
  <a name="1042346"> </a>Designers must accurately describe the design intention by correctly specifying the shutoff conditions. Implementers must correctly describe the power and ground network and indicate if there are external shutoff conditions. Verification tools should be able to check if the implementation matches the design intent.</p>


<h4>  <a name="1042347"> </a><i><strong><em><a name="unswitched"></a>unswitched</em></strong><strong> </strong>domain</i>
</h4>


<p>
  <a name="1042348"> </a>This domain is never powered down by controls in the scope in which it is created. </p>


<p>
  <a name="1047612"> </a>To model an unswitched domain</p>

<ul>
  <a name="1047613"></a><li><p>Specify the <a href="reference.html#1492744">create_power_domain</a> command without the <code>-shutoff_condition</code> or the -<code>external_controlled_shutoff</code> options.</p>

  <a name="1047625"></a><li><p>If you need to create its power and ground nets in CPF, create them without any external shutoff conditions.</p>
</ul>
  <a name="1047978"> </a><table border="0"><tr><td valign="top"><img src="../support/tip.gif"></td><td>An unswitched power domain can be part of a power mode definition where the domain is associated with a nominal condition of state <code>off</code>, indicating that the domain can be shut off externally.</td></table>

     <dl><dl>
<pre><a name="1048574"></a><nobr>create_power_domain -name PD1 -instances {...} <br>create_power_domain -name PD2 -instances {...}<br>create_power_mode -name PM1 -domain_conditions {PD1@on PD2@on}<br>create_power_mode -name PM2 -domain_conditions {PD1@on PD2@off}</nobr></pre>
</dl><dl>
<p>
  <a name="1048581"> </a>In the previous example, <code>PD1</code> is always on in current scope, but <code>PD2</code> can be switched off externally.</p>

</dl>     </dl>
<h4>  <a name="1048569"> </a><i><strong><em><a name="internal switchable"></a>internal switchable</em></strong> domain</i>
</h4>


<p>
  <a name="1042350"> </a>This domain can be powered down by an on-chip power or ground switch. This domain gets its power supply from another domain through a power switch network.</p>


<p>
  <a name="1042351"> </a>To model an internal switchable domain </p>

<ul>
  <a name="1042352"></a><li><p>Specify the condition that causes the power domain be powered down through the <code>-shutoff_condition</code> option of the <a href="reference.html#1492744">create_power_domain</a> command.</p>

  <a name="1042360"></a><li><p>Specify the domain from which the switchable domain (or the power switch) gets its power supply through the <code>-base_domains</code> option of the <code>create_power_domain</code> command.</p>

  <a name="1046338"></a><li><p>(optional) For physical implementation, define the on-chip power or ground switch using a power switch rule associated with the internal switchable domain (see <a href="rules.html#1035250">Chapter 6, "Precedence and Semantics of the Rules,"</a> for more information).</p>
<dl>
<p>
  <a name="1042361"> </a>For an internal switchable domain, the power switch rules associated with the power domain (specified with the <code>-enable_condition_</code><code><em>x</code></em> option of the <a href="reference.html#1329801">update_power_switch_rule</a> command) determine how the shutoff behavior for the domain will be implemented. The verification tools should check the consistency between the shutoff condition defined for the power domain and the shutoff condition derived from all associated power switch rules.</p>

</dl></ul>
<h4>  <a name="1042365"> </a><i><strong><em><a name="on-chip controlled"></a>on-chip controlled external switchable</em></strong> domain</i>
</h4>


<p>
  <a name="1042366"> </a>This domain can be powered down by an external power switch (outside of the chip), but the external switch is controlled by signals on the chip.</p>


<p>
  <a name="1042367"> </a>To model an on-chip controlled external switchable domain</p>


<table border="0" cellpadding="0">
<tr>
<td valign="top"><img src=../chars/arrwrite.gif>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a name="1042368"> </a>	 Specify the condition that causes the power domain be powered down through the <code>-shutoff_condition</code> option together with the <code>-external_controlled_shutoff</code> option of the <a href="reference.html#1492744">create_power_domain</a> command.</td>
</table>


<p>
<strong>Note:&nbsp;</strong>
<a name="1042373"> </a>Since the power (or ground) switch is not part of the chip, it cannot be described through a power switch rule.
</p>

<p>
  <a name="1042374"> </a>For an on-chip controlled external switchable domain, the implementation of the shutoff behavior for the domain is determined by the external shutoff condition specified for the primary power and ground nets of the power domain (defined in the <a href="reference.html#1253528">update_power_domain</a> command). The verification tools should check the consistency between the shutoff condition of the power domain and the external shutoff condition of the primary power and ground nets.</p>


<p>
  <a name="1042378"> </a>If an external shutoff condition is specified for the primary power and (or) ground net of an on-chip controlled external switchable power domain, it must match the shutoff condition specified for that domain in one of the following ways: </p>

<ul>
  <a name="1042379"></a><li><p>If an external shutoff condition is defined for only the primary power net, it must be identical to the shutoff condition of the domain.</p>

  <a name="1042380"></a><li><p>If an external shutoff condition is defined for only the primary ground net, it must be identical to the shutoff condition of the domain.</p>

  <a name="1042381"></a><li><p>If an external shutoff condition is defined for both the primary power and ground nets, the domain shutoff condition must be identical to the Boolean OR of the external shutoff condition definition of the power and ground nets.</p>
</ul>
<p>
  <a name="1042382"> </a><strong>Example</strong></p>


<p>
  <a name="1042383"> </a>If power domain <code>Z</code> is specified with shutoff condition <code>!A|!B</code> and with the <code>-external_controlled_shutoff</code> option, power domain <code>Z</code> is considered on-chip controlled external switchable. </p>


<p>
  <a name="1042384"> </a>If <code>VDD</code> and <code>VSS</code> are the primary power net and primary ground net for the domain, respectively, then the following specifications are valid for this design intent:</p>

<ul>
  <a name="1042385"></a><li><p><code>VDD</code> is specified with external shutoff condition <code>!A|!B.</code> <code>VSS</code> has no external shutoff condition.</p>

  <a name="1042386"></a><li><p><code>VSS</code> is specified with external shutoff condition <code>!A|!B</code>. <code>VDD</code> has no external shutoff condition.</p>

  <a name="1042387"></a><li><p><code>VDD</code> is specified with external shutoff condition <code>!A</code> and <code>VSS</code> is specified with external shutoff condition <code>!B</code></p>

  <a name="1042388"></a><li><p><code>VDD</code> is specified with external shutoff condition <code>!B</code> and <code>VSS</code> is specified with external shutoff condition <code>!A.</code></p>
</ul>
<br><br>
<h3>
  <a name="1047662"> </a>Base and Derived Power Domains</h3>


<p>
  <a name="1047663"> </a>A power domain <code>X</code> is a <strong><em>base</em></strong> power domain of power domain <code>Y</code> if the primary power and ground nets of power domain <code>X</code> provide the power supply to domain <code>Y</code> through some power switch network. Domain <code>Y</code> is called the <strong><em>derived</em></strong> domain of domain <code>X</code>.</p>


<p>
  <a name="1049284"> </a>A derived power domain connects through some sort of device, e.g. a header, footer, or regulator, to one or more base power domains. The shutoff condition for a derived power domain is defined in terms of ports and pins inside this scope (-shutoff_condition) and from which power domain it is derived (-base_domains). A derived power domain is considered to be off whenever all of its base power domains are off.</p>


<p>
  <a name="1047667"> </a><strong>Example</strong></p>


<p>
  <a name="1047671"> </a>Power domain <code>PD3</code> in Figure <a href="domains_and_modes.html#1047673">4-2</a> has two base power domains, <code>PD1</code> and <code>PD2</code>.</p>


  <a name="1047673"> </a><h4>
Figure 4-2   Sample Design</h4>


<p>
  <a name="1047678"> </a><img src="images/domains_and_modesx2.png" border="0">
</p>


<p>
  <a name="1047719"> </a>For an internal switchable domain, an error should be given if the base domain definition does not match the power switch rule definition of the domain. For example, the external power net of a power switch rule must be the primary power net of one of the base domains defined in the <code>-base_domains</code> option. </p>


<p>
  <a name="1047761"> </a>For the example in <a href="domains_and_modes.html#1047673">Figure 4-2</a>, the following CPF is valid:</p>


<pre><a name="1047723"></a><nobr>create_power_domain  -name PD1 ... <br>create_power_domain  -name PD2 ... <br>create_power_domain  -name PD3  -shutoff_condition { a &amp; b } \<br>&nbsp;&nbsp;-base_domains {PD1 PD2} ...<br>create_power_domain  -name PD4 ...<br>update_power_domain  -name PD1  -primary_power_net VDD1 <br>update_power_domain  -name PD2  -primary_power_net VDD2 <br>update_power_domain  -name PD3  -primary_power_net VDSW <br>create_power_switch_rule -name r1 -domain PD3 -external_power_net VDD1 <br>update_power_switch_rule -name r1 -enable_condition_1 a<br>create_power_switch_rule -name r2 -domain PD3 -external_power_net VDD2<br>update_power_switch_rule -name r2 -enable_condition_1 b <br>&nbsp;&nbsp;</nobr></pre>

<p>
  <a name="1047724"> </a>In the above example, the external power nets of the switch rules of <code>PD3</code> are <code>VDD1</code> and <code>VDD2</code> which matches the primary power nets defined for the base domains, <code>PD1</code> and <code>PD2</code>. </p>


<p>
  <a name="1047725"> </a>It is also possible to have an unswitched domain with a base domains defined. For example, if the two control signals <code>a</code> and b will never be high at the same time, domain <code>PD3</code> is an unswitched domain and should be created without a shutoff condition. The power switches are just a way to implement dynamic voltage scaling control. In this case, <code>PD3</code> still has <code>PD1</code> and <code>PD2</code> as its base domains by definition.</p>


<br><br>
<h3>
  <a name="1040431"> </a>Primary and Secondary Power Domains of Instances</h3>


<p>
  <a name="1037359"> </a>A power domain <code>X</code> is a <strong><em>secondary</em></strong> power domain of a special low power instance if the primary power and ground nets of the domain <code>X</code> provide the power supply to the secondary power and (or) ground pins of the instance. </p>


<p>
  <a name="1037362"> </a>A power domain <code>Y</code> is a <strong><em>primary</em></strong> power domain of a standard cell instance if the primary power and ground nets of domain <code>Y</code> provide the power supply to the primary power and ground pins (follow-pins) of the cell. </p>


<p>
  <a name="1037363"> </a>The secondary power domain definition for special low power logic is handled by corresponding <code>create_xx_rule</code> commands. CPF also provides a special command to give the user the flexibility to specify the expected secondary power domain of any special low power standard cell instances. If the secondary domain is neither specified in the <code>identify_secondary_domain</code> nor <code>create_xx_rule</code> command, the tools will derive the secondary domain as explained in the following sections.</p>


  <a name="1048714"> </a><table border="0"><tr><td valign="top"><img src="../support/tip.gif"></td><td>In this document, the power domain of a special low power cell instance refers to the primary power domain of that instance.</td></table>


<p>
  <a name="1047730"> </a>A derived domain can contain instances that have a secondary power domain definition, such as always-on instances. However the secondary domain of these instances is not always a base domain of the derived domain containing the instances. For the example shown in <a href="domains_and_modes.html#1047673">Figure 4-2</a>, <code>PD4</code> is not a secondary power domain for <code>PD3</code> even though <code>PD4</code> is the secondary domain for the always on buffer instance in <code>PD3</code>.</p>




<h4>
  <a name="1039767"> </a><a name="Secondary"></a>Secondary Power Domain of <a name="Isolation"></a>Isolation Instances</h4>


<p>
  <a name="1043125"> </a>If you plan to insert isolation logic in the from domain that is being powered down, you may need to use isolation cells with two sets of power supplies. In this case, it is recommended that you specify the secondary power domain for the isolation logic using the <code>-secondary_domain</code> option of the <code>create_isolation_rule</code> command. The primary power and ground nets of the specified secondary domain will be connected to the secondary power and ground pins of the isolation instances.</p>


<p>
  <a name="1047813"> </a>The secondary domain of an isolation instance is determined in the following order:</p>

<ol type="1">
  <li value="1"><p><a name="1049345"> </a>The secondary domain specified on the isolation instance using <a href="reference.html#1339622">identify_secondary_domain</a>.</p>
  <li value="2"><p><a name="1049349"> </a>The secondary domain specified in the corresponding isolation rule for the isolation instance.</p>
  <li value="3"><p><a name="1049343"> </a>The power domain of the logic that drives the enable pin.</p>
</ol>

<p>
  <a name="1048753"> </a>However, the tools cannot determine the secondary domain of the isolation logic in the following cases:</p>

<ul>
  <a name="1048754"></a><li><p>The enable expression is a complex expression of individual signals, possibly driven from different power domains or driven from a port without domain assignment (such as the ports in testbench).</p>

  <a name="1048755"></a><li><p>The isolation rule is specified with the <code>-no_condition</code> option</p>
</ul>
<p>
  <a name="1048756"> </a>If you plan to use single-rail isolation cells, the isolation rule does not need the specification of the secondary domain. The power domain of the isolation instance depends on the location of that instance. If the rule is specified with the <code>-secondary_domain</code> option, then the single-rail isolation instance must be instantiated in a domain compatible with the specified secondary domain, which implies that the location domain must be on whenever the secondary domain is on.</p>


<p>
  <a name="1048757"> </a>The verification tools will detect such cases and issue an error. </p>


<p>
  <a name="1048786"> </a>During simulation, the isolation logic inferred from the isolation rules must only be considered on if and only if the secondary domain is on. If the secondary domain is shut off, the simulators must consider the output of the inferred isolation logic corrupted. </p>




<h4>
  <a name="1049136"> </a>Secondary Domain of <a name="Retention"></a>Retention Logic</h4>


<p>
  <a name="1049137"> </a>The primary power domain of a state retention instance is the power domain of its parent module. The secondary power domain of a state retention instance is the domain that controls the retention logic within the cell. The primary power and ground nets of the secondary domain will be connected to the secondary power and ground pins of the state retention instances.</p>


<p>
  <a name="1049299"> </a>The secondary domain of a state retention instance is determined in the following order:</p>

<ol type="1">
  <li value="1"><p><a name="1049301"> </a>The secondary domain specified on the state retention instance using <a href="reference.html#1339622">identify_secondary_domain</a>.</p>
  <li value="2"><p><a name="1049327"> </a>The secondary domain specified in the corresponding state retention rule.</p>
  <li value="3"><p><a name="1049321"> </a>Use the base domain defined for the primary domain of the retention instance if there is one and only one base domain is specified.</p>
</ol>

<p>
  <a name="1048994"> </a>If the secondary domain cannot be determined using the above procedure, it is an error. </p>


<p>
  <a name="1048794"> </a>The operation mode of the retention logic depends on the state of the primary and secondary domain of the retention logic and which of the two drives the output of the retention logic. </p>


<p>
  <a name="1048795"> </a>During simulation, the retention logic inferred from the retention rules is considered to retain its state if and only if the secondary domain is on. If the secondary domain is shut off, the simulators must consider the output of the inferred retention logic corrupted. </p>




<h4>
  <a name="1048801"> </a>Secondary Power Domain of Global Cells </h4>


<p>
  <a name="1048802"> </a>It is recommended that you use the <a href="reference.html#1339622">identify_secondary_domain</a> command to explicitly set the secondary domain of a global cell. When not specified, the secondary domain of the global cell is assumed to be the power domain of the leaf driver of its data input pin.</p>


<p>
  <a name="1049004"> </a>For simulation purposes, an instance of a global cell keeps its normal function as long as the secondary domain is on. The simulator will corrupt the output of a global cell instance when the secondary domain is powered down.</p>


  <a name="1049005"> </a><table border="0"><tr><td valign="top"><img src="../support/tip.gif"></td><td>Starting from CPF version 2.0, it is recommended to use global cells instead of always-on cells.</td></table>




<h4>
  <a name="1049045"> </a>Input and Output Domains of <a name="Level Shifters"></a>Level Shifters</h4>


<p>
  <a name="1049046"> </a>The definitions of primary and secondary power domains do not always apply to level shifter instances. For level shifters, the more relevant definitions are input domain and output domain, which determine the power/ground connection to the input power/ground pins and output power/ground pins of the cell respectively.</p>


<p>
  <a name="1049067"> </a>The input power and/or ground pin of the level shifter cell must be connected to the primary power and/or ground net of the input power domain of the level shifter. The output power and/ or ground pin of the level shifter cell must be connected to the primary power and/or ground net of the output power domain. For the case of high to low level shifting, the input power domain specification can be ignored.</p>


<p>
  <a name="1049082"> </a>For a level shifter cell, all pins related to the input power/ground pins belong to the input domain; all pins related to the output power/ground pins belong to the output domain.</p>


<p>
  <a name="1049083"> </a>Given a level shifter instance in a design, the input domain of the level shifter instance is determined in the following order:</p>

<ol type="1">
  <li value="1"><p><a name="1049094"> </a>Input domain specification in the corresponding level shifter rule</p>
  <li value="2"><p><a name="1049096"> </a>Power domain of the leaf driver of this level shifter if the leaf driver is not the output pin of another level shifter cell</p>
  <li value="3"><p><a name="1049101"> </a>Power domain of the parent module of the level shifter instance if the valid location of the cell is from</p>
  <li value="4"><p><a name="1049106"> </a>Power domain of the parent module of the leaf driver</p>
</ol>

<p>
  <a name="1049111"> </a>Given a level shifter instance in a design, the output domain of the level shifter instance is determined in the following order:</p>

<ol type="1">
  <li value="1"><p><a name="1049116"> </a>Output domain specification in the corresponding level shifter rule</p>
  <li value="2"><p><a name="1049118"> </a>Power domain of the leaf receiver driven by the level shifter instance if the leaf receiver is not the input pin of another level shifter cell</p>
  <li value="3"><p><a name="1049121"> </a>Power domain of the parent module of the level shifter instance if the valid location of the cell is to</p>
  <li value="4"><p><a name="1049123"> </a>Power domain of the parent module of the leaf receiver</p>
</ol>

<br><br>
<h3>
  <a name="1049087"> </a><a name="pd_pins_ports"></a>Power Domains of Pins and Ports</h3>


<p>
  <a name="1046142"> </a>In most cases, the related power domain of an instance pin is the power domain of the instance. </p>

<ul>
  <a name="1048610"></a><li><p>For more information on how the power domain of an instance is determined, refer to the description of the <a href="reference.html#1492744">create_power_domain</a> command. </p>

  <a name="1048614"></a><li><p>Some leaf instances (such as multi-rail isolation cells, level-shifter cells, state retention cells) can also have a secondary power domain defined. For more information, refer to <a href="domains_and_modes.html#1040431">Primary and Secondary Power Domains of Instances</a>.</p>
</ul>
<p>
  <a name="1046145"> </a>For complex macro cells, the domain assignment of the instance itself is not important. Rather, the related power domain of each of its boundary pins is critical to describe the internal power structure of the cell and drive top-level implementations.</p>


<p>
  <a name="1046146"> </a>The related power domain of a pin or port object is determined as follows:</p>


<p>
  <a name="1046147"> </a>If a <em>primary input or primary output port </em>is part of the boundary port definition of a power domain (using the <code>-boundary_port</code> option of <code>create_power_domain</code>), the port belongs to that power domain. Otherwise, it belongs to the default power domain of the design. </p>


<p>
  <a name="1046148"> </a>A <em>hierarchical pin</em> does not belong to any power domain unless the corresponding port is a defined as a boundary port, and you specified the <code>-honor_boundary_port</code> option in a <code>set_design</code> command in a hierarchical CPF file. In this case the power domain of the hierarchical pin belongs to the power domain of the corresponding port. </p>


<p>
  <a name="1046149"> </a><em>Single rail standard cell instance pins</em> belong to the power domain of the instance.</p>


<p>
  <a name="1049522"> </a>In case of <em>multi-rail standard cell instances</em>, the power domain assignment of the pins depends on the cell definition as well as on the power domain assignment of the instances (refer to <a href="domains_and_modes.html#1040431">Primary and Secondary Power Domains of Instances</a>):</p>

<ul>
  <a name="1049524"></a><li><p>For global cells, state retention cells, and isolation cells: </p>
<ul>
  <a name="1049535"> </a><li><p>the pins related to the switchable power and ground pins belong to the primary 
power domain of the instances
</p>

  <a name="1049536"> </a><li><p>the pins related to the non-switchable power and ground pins belong to the 
secondary power domain of the instances
</p>
</ul>
  <a name="1049526"></a><li><p>For level shifter cells:</p>
<ul>
  <a name="1049537"> </a><li><p>the pins related to the input power and ground pins belong to the input domain of the 
instances
</p>

  <a name="1049538"> </a><li><p>the pins related to the output power and ground pins belong to the output domain of 
the instances
</p>
</ul>
  <a name="1049542"></a><li><p>For more information on the related power and ground pins of the data input and output pins of the special low power cells, such as state retention cell, isolation cell, power switch cell, refer to the description of the <code>define_xxx_cell</code> commands in <a href="lib_reference.html#1145979">Chapter 9, "define_always_on_cell."</a></p>
</ul>
<p>
  <a name="1048643"> </a>The power domain of a macro cell pin can be directly assigned using the <code>-boundary_ports </code>option of the <code>create_power_domain</code> command.</p>


<p>
  <a name="1048644"> </a>In the hierarchical flow, you can also define the power domain of a macro cell pin using a CPF macro model (see <a href="hier_flow.html#1048886">Modeling a Macro Cell</a> for more information). Once the macro cell is instantiated at the chip level, every non-internal switchable power domain of the macro cell must be mapped into a chip-level power domain. The power domain of the macro cell instance pins follow the corresponding cell pin definition or domain mapping specification</p>




<h4>
  <a name="1048648"> </a>Examples</h4>


<p>
  <a name="1049571"> </a>In the following examples, assume that the corresponding level shifter rule has no <code>-input</code> or <code>-output </code>domain specifications.</p>

<ol type="1">
  <li value="1"><p><a name="1048649"> </a>In the following example, the level shifter shifts from domain PD1 to PD2, is driven by an isolation cell in domain PD1, but is placed in domain PD3. In addition, the level shifter cell was defined with <code>-valid_location from</code>. As a result, PD1 and PD3 must have the same supply voltages in all power mode definitions.</p>
<dl>
<p>
  <a name="1048650"> </a>Input pin IN of the level shifter belongs to PD3, the input domain of the level shifter (because the driver of pin IN--the output pin of isolation cell <code>ISO</code>--belongs to PD3, the secondary domain of ISO). The output pin OUT belongs to the output domain of the level shifter which is PD2 (see <a href="domains_and_modes.html#1049045">Input and Output Domains of Level Shifters</a>).</p>


<p>
  <a name="1048657"> </a><img src="images/ls_from_new.gif">
</p>

</dl>  <li value="2"><p><a name="1048667"> </a>The following example has a back to back level shifter implementation from PD1 (0.8) to PD2 (1.2). The level shifters are located in domain PD3 (1.0). The first level shifter was defined with <code>-valid_location to</code>, while the second level shifter was defined with <code>-valid_location from.</code></p>
<dl>
<p>
  <a name="1048668"> </a>According to the semantics (<a href="domains_and_modes.html#1049045">Input and Output Domains of Level Shifters</a>), pin IN1 belongs to domain PD1, pins OUT1 and IN2 belong to domain PD3, and pinOUT2 belongs to domain PD2.</p>


<p>
  <a name="1048672"> </a><img src="images/ls_to_ls_from.gif">
</p>

</dl></ol>

<br><br><br>
<h2>
  <a name="1044136"> </a>Modes</h2>


<br><br>
<h3>
  <a name="1047402"> </a>Nominal Conditions</h3>


<p>
  <a name="1047406"> </a>A nominal condition is a typical operating condition under which the design or blocks perform. It is defined by the voltages of all power supplies applied to the power domains using this condition. At a minimum, a nominal condition specifies the power supply voltage, but it can also specify the ground supply voltage and PMOS and NMOS bias voltages. Depending on the technology used, this set of voltages determines whether the state of a power domain is on, off or in standby mode.</p>


<p>
  <a name="1048191"> </a>To define a nominal condition, use the <a href="reference.html#1422327">create_nominal_condition</a> command:</p>


<pre><a name="1049279"></a><nobr>create_nominal_condition <br>&nbsp; &nbsp;	 -name <code><em>string<br></code></em>&nbsp; &nbsp;	 -voltage {<code><em>voltage</code></em> | <code><em>voltage_list</code></em>}<code><em> <br></code></em>&nbsp; &nbsp;	 [-ground_voltage<code><em> </code></em>{<code><em>voltage</code></em> | <code><em>voltage_list</code></em>}]<br>&nbsp; &nbsp;	 [-state {on | off | standby}]<br>&nbsp; &nbsp;	 [-pmos_bias_voltage {<code><em>voltage</code></em> | <code><em>voltage_list</code></em>}] <br>&nbsp; &nbsp;	 [-nmos_bias_voltage {<code><em>voltage</code></em> | <code><em>voltage_list</code></em>}]<br>&nbsp; &nbsp;	 [-deep_pwell_voltage {<code><em>voltage</code></em> | <code><em>voltage_list</code></em>}]<br>&nbsp; &nbsp;	 [-deep_nwell_voltage {<code><em>voltage</code></em> | <code><em>voltage_list</code></em>}]</nobr></pre>



<h4>
  <a name="1048160"> </a>On State</h4>


<p>
  <a name="1047426"> </a>Indicates that all logic in the domain operates at operational speed. To improve performance in the on state, you can apply forward body biasing.</p>


<p>
  <a name="1048272"> </a>To describe forward body biasing, you must specify -<code>pmos_bias_voltage</code> with a value smaller than the value of -<code>voltage</code> and   -<code>nmos_bias_voltage</code> with a value greater than the value of -<code>ground_voltage</code>.</p>


<pre><a name="1048210"></a><nobr>create_nominal_condition -name super_fast -voltage 1.2 -ground_voltage 0.0 \<br>&nbsp; &nbsp;	 -state on -pmos_bias_voltage 1.0 -nmos_bias_voltage 0.2</nobr></pre>



<h4>
  <a name="1048242"> </a>Standby State</h4>


<p>
  <a name="1048243"> </a>Indicates that all logic in the domain retain their logic values as long as the inputs are stable. However, if the inputs are changed, the logical values will be corrupted. The standby state can be achieved by reverse body biasing (see example below) or source biasing.</p>


<pre><a name="1048256"></a><nobr>create_nominal_condition -name sleep2 -voltage 1.0 -state standby \<br>&nbsp; &nbsp;	 -pmos_bias_voltage 1.2</nobr></pre>



<h4>
  <a name="1048318"> </a>Off State</h4>


<p>
  <a name="1049191"> </a>The logic of a power domain in an <code>off</code> state will be corrupted unless the logic is associated with a secondary power domain and the <code>on</code> state of this secondary power domain is used to maintain valid values.</p>


<pre><a name="1049336"></a><nobr>create_nominal_condition -name power_down -voltage 0.0 -state off</nobr></pre>

<br><br>
<h3>
  <a name="1049198"> </a>Power Modes</h3>


<p>
  <a name="1049199"> </a>A steady state of the design in which some power domains are switched on and some power domains are switched off is called a <strong><em>power mode</em></strong>. In a power mode, each power domain operates at a specific nominal condition. </p>


<p>
  <a name="1049236"> </a>To define a power mode (or a legal configuration of all power domains in a scope), you need to specify the nominal condition of each power domain in that mode using the <a href="reference.html#1119974">create_power_mode</a> command. An unreferenced power domain is considered off.</p>


<pre><a name="1049204"></a><nobr>create_power_mode -name drowsy -domain_conditions {PD1@sleep PD2@normal}</nobr></pre>

<p>
  <a name="1049205"> </a>For each scope, an implicit power mode definition exists where all power domains at that scope operate in the <code>off</code> state.</p>


<p>
  <a name="1049206"> </a>In a hierarchical flow, a power mode can also contain any number of power mode control groups operating at specific power modes. See <a href="hier_flow.html#1044080">Power Mode Control Groups</a> for more information.</p>


<br><br>
<h3>
  <a name="1049193"> </a>Generic Modes</h3>


<p>
  <a name="1049194"> </a>A generic mode, also referred to simply as mode, is useful in the early design stage to describe one or more functions of a design. It can be used for early functional verification. </p>


<p>
  <a name="1049262"> </a>To define a generic mode, use the <a href="reference.html#1476709">create_mode</a> command.</p>


<p>
  <a name="1048863"> </a>A power mode can be considered as a special case of mode. While a power mode requires specification of the states of all the power domains in the current scope, a generic mode does not necessarily associate a specific state with each power domain in the current scope.</p>


<p>
  <a name="1048864"> </a>For example, if the current scope has 3 domains <code>PD1</code>, <code>PD2</code>, and <code>PD3</code>, and the definition of power mode <code>foo</code> omits the condition for <code>PD3</code>, it implies is that <code>PD3</code> is shut off in mode <code>foo</code>.</p>


<pre><a name="1048869"></a><nobr>create_power_mode -name foo -domain_conditions { PD1@1v PD2@off }</nobr></pre>

<p>
  <a name="1048871"> </a>For a generic mode defined the same way, it simply means that the mode applies whenever <code>PD1</code> is at 1v nominal condition and <code>PD2</code> is shut off, irrespective of the state of <code>PD3</code>:</p>


<pre><a name="1048876"></a><nobr>create_mode -name newMode -conditions { PD1@1v PD2@off }</nobr></pre>

<p>
  <a name="1048877"> </a>The example below shows how CPF modes can be used to describe the functionality of a low power design.</p>


<pre><a name="1048883"></a><nobr>set_design my_handheld_device<br>...<br>create_power_domain -name MAIN -default<br>create_power_domain -name MULTIMEDIA -instance "audio_mac video_mac"<br>create_mode -name SLEEP \<br>&nbsp; &nbsp;	 -condition "MAIN@LOWVDD &amp; MULTIMEDIA@OFF &amp; (sleep_reg == 1)" \<br>&nbsp; &nbsp;	 -probability 0.90<br>create_mode -name ON -condition "MAIN@NOMVDD" -probability 0.10<br>create_mode -name MM_ACTIVE \<br>&nbsp; &nbsp;	 -condition "@ON &amp; MULTIMEDIA@NOMVDD &amp; (media_active_reg == 1)" \<br>&nbsp; &nbsp;	 -probability 0.03<br>...<br>end_design</nobr></pre>

<p>
  <a name="1048899"> </a>This particular design has two power domains: <code>MAIN</code>, which contains the logic for normal operation, and <code>MULTIMEDIA</code>, which contains two blocks responsible for audio and video. The <code>SLEEP</code> mode describes the state of where <code>MAIN</code> is at lower voltage and <code>MULTIMEDIA</code> is completely off. The register named <code>sleep_reg</code> must be one in order to satisfy this mode. The designers estimate that the design will be in the <code>SLEEP</code> mode 90% of the time.</p>


<p>
  <a name="1048904"> </a>The <code>ON</code> mode describes the mode where the <code>MAIN</code> domain is operational. The design will be in this mode 10% of the time.</p>


<p>
  <a name="1048919"> </a>The <code>MM_ACTIVE</code> mode is a subset of <code>ON</code> mode. In order for the design to be in this mode, the requirements for mode <code>ON</code> must be satisfied. In addition, the <code>MULTIMEDIA</code> domain must be at the <code>NOMVDD</code> condition and the <code>media_active_reg</code> must set to one. This mode will be active 3% of the time.</p>


<p>
<strong>Note:&nbsp;</strong>
<a name="1048920"> </a>Since there is overlap in modes in the example, the probabilities do not add up to 1.0.
</p>

<br><br>
<h3>
  <a name="1048125"> </a>Illegal Domain Configurations</h3>


<p>
  <a name="1049216"> </a>To prevent that an unswitched power domain turns off in relation to other power domains (for example to prevent unisolated internal gates or a high current situation), the <a href="reference.html#1426142">assert_illegal_domain_configurations</a> command can be used to explicitly declare a power mode or a configuration of domain conditions as illegal.</p>


<p>
  <a name="1048098"> </a>At the block-level you define a set of legal configurations of block-level power domains that is crucial for the normal operation of the block. However, domain mapping can cause different configurations of these power domains at the top level which are not legal at the block level.You can use the <code>assert_illegal_domain_configurations</code> command to explicitly declare this configuration of domain conditions as illegal at the block level.</p>


<p>
  <a name="1048809"> </a>To explicitly declare that a particular configuration of domain conditions and/or power mode control group conditions is illegal at the block level, use the <code>-illegal</code> option of the <a href="reference.html#1119974">create_power_mode</a> command. </p>


<p>
  <a name="1048813"> </a>If a domain configuration is covered by both a legal and an illegal power mode definition (or through the <code>assert_illegal_domain_configurations</code> command), the domain configuration will be considered illegal.</p>


<p>
  <a name="1048822"> </a>The verification tools should issue a warning message if this happens.</p>


<br><br>
<h3>
  <a name="1047931"> </a>Mode Transitions </h3>


<p>
  <a name="1047936"> </a>A mode transition defines when the design transitions from one power mode to a different power mode. A mode transition can be characterized by specifying </p>

<ul>
  <a name="1048019"></a><li><p>An integer of number or range of clock <em>cycles</em> needed to complete the power mode transition. </p>

  <a name="1048037"></a><li><p>The time (<em>latency</em>) needed to complete the power mode transition. </p>
</ul>
<p>
  <a name="1048038"> </a>You can also define a start condition and end condition that describe the conditions to trigger and flag the end of the transition. </p>


<p>
  <a name="1048049"> </a>To define a mode transition, use the <a href="reference.html#1323388">create_mode_transition</a> command.</p>


  

</blockquote>

<br>
<a href="#pagetop">Return to top of page</a>
<hr>
<p>
<!-- Begin Buttons -->
<table border="0" cellpadding="0" cellspacing="0" width="650">
<tr>
  <td height="20" width="59"><a href="javascript:openLibrary()"><img src="../support/nav2_library.gif" border="0" alt="View Library" height="20" width="59"></a></td>
  <td height="20" width="73"><a href="cpf_refTOC.html"><img src="../support/nav2_toc.gif" border="0" alt="View Table Of Contents" height="20" width="73"></a></td>
  <td height="20" width="46"><a href="cpf_refIX.html"><img src="../support/nav2_index.gif" border="0" alt="View Index for This Manual" height="20" width="46"></a></td>
  <td height="20" width="83"><a href="format.html"><img src="../support/nav2_previous.gif" border="0" alt="View Previous Chapter in Book" height="20" width="83"></a></td>
  <td height="20" width="59"><a href="hier_flow.html"><img src="../support/nav2_next.gif" border="0" alt="View Next Chapter in Book" height="20" width="59"></a></td>
  <td height="20" width="114"><a href="cpf_ref.pdf"><img src="../support/nav2_print.gif" border="0" alt="Open PDF to print book" height="20" width="114"></a></td>
  <td height="20" width="61"><a href="/search.htm"><img src="../support/nav2_search.gif" border="0"  alt="Search Cadence Library" height="20" width="61"></a></td>
  <td height="20" width="76"><a href="/feedback.htm"><img src="../support/nav2_feedback.gif" border="0" alt="Email Comments" height="20" width="76"></a></td>
  <td height="20" width="43"><a href="../cdsuser/help.html"><img src="../support/nav2_help.gif" border="0" alt="Help Using Documentation" height="20" width="43"></a></td>
  <td height="20" width="37"><a href="/exitsearch.htm"><img src="../support/nav2_exit.gif" border="0" alt="Shut Down Cadence Documentation Server" height="20" width="37"></a></td>
</tr>
</table>
<!-- End Buttons -->
<p>
<p>


<!-- NOTES; -->

<!-- /address -->
<p>
<br>
<font size="-1">
For support, see <a href=http://www.cadence.com/support>http://www.cadence.com/support</a>
or try Cadence's <a href=http://sourcelink.cadence.com target=_blank>SourceLink</a> service.
<br><br>
<i>Copyright &#169; 2013, <a href=http://www.cadence.com>Cadence Design Systems, Inc.</a></i> 
<br>
All rights reserved.
<br>
<a href="titlecopy.html">Legal notices and trademark attributions</a>
<br>
<!-- This file was created with Quadralay WebWorks Publisher AutoMap 6.0.7 -->
<!-- -->
<!-- Last updated: Wed Jul 17 14:09:07 2013 -->
</font>
</body>
</html>


