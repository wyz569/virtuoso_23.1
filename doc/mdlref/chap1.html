
<html><head><title>Defining and Using Measurement Aliases</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="namratam" />
<meta name="CreateDate" content="2023-06-12" />
<meta name="CreateTime" content="1686596460" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes Spectre Measurement Description Language." />
<meta name="DocTitle" content="Spectre Circuit Simulator Measurement Description Language User Guide and Reference" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Defining and Using Measurement Aliases" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="mdlref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-06-12" />
<meta name="ModifiedTime" content="1686596460" />
<meta name="NextFile" content="chap2.html" />
<meta name="Group" content="MDL" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="preface.html" />
<meta name="c_product" content="Spectre" />
<meta name="Product" content="Spectre" />
<meta name="ProductFamily" content="Spectre" />
<meta name="ProductVersion" content="23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre Circuit Simulator Measurement Description Language User Guide and Reference -- Defining and Using Measurement Aliases" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="23.1" />
<meta name="SpaceKey" content="mdlref231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="mdlrefTOC.html">Contents</a></li><li><a class="prev" href="preface.html" title="Preface">Preface</a></li><li style="float: right;"><a class="viewPrint" href="mdlref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap2.html" title="Constructing MDL Expressions">Constructing MDL Expressions</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre Circuit Simulator Measurement Description Language User Guide and Reference<br />Product Version 23.1, June 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>1
<a id="pgfId-1032287"></a></h1>
<h1>
<a id="pgfId-1032288"></a><hr />
Defining and Using Measurement Aliases<hr />
</h1>

<p>
<a id="pgfId-1032693"></a>A <a id="marker-1033418"></a><a id="marker-1033595"></a>measurement alias is a Measurement Description Language (MDL) procedure that you can use to run an analysis and extract information about the performance of the circuit. For example, you might use a measurement alias to determine the bandwidth of an amplifier.</p>
<p>
<a id="pgfId-1032932"></a>Measurement aliases provide a way for you to bind <a id="marker-1033419"></a>analyses to MDL <a id="marker-1033420"></a>expressions, creating procedures that can be called multiple times and parameterized for specific applications.</p>
<p>
<a id="pgfId-1033539"></a>This chapter includes the following sections.</p>
<ul><li>
<a id="pgfId-1033540"></a><a href="chap1.html#83059">Defining a Measurement Alias</a></li><li>
<a id="pgfId-1033545"></a><a href="chap1.html#18899">Using a Measurement Alias</a></li><li>
<a id="pgfId-1040867"></a><a href="chap1.html#78280">Defining Measurement Aliases on the Fly</a></li><li>
<a id="pgfId-1040873"></a><a href="chap1.html#59775">Propagating Variables</a></li><li>
<a id="pgfId-1046789"></a><a href="chap1.html#33137">Accessing Netlist or Model Parameters</a></li><li>
<a id="pgfId-1040883"></a><a href="chap1.html#28540">Using Named and Primitive Analyses</a></li><li>
<a id="pgfId-1040884"></a><a href="chap1.html#63175">Looping Statements</a></li><li>
<a id="pgfId-1040885"></a><a href="chap1.html#70425">Include Statement</a></li><li>
<a id="pgfId-1040894"></a><a href="chap1.html#58156">Evaluating Expressions Selectively</a></li><li>
<a id="pgfId-1039086"></a><a href="chap1.html#56396">Specifying the Output File Format</a></li><li>
<a id="pgfId-1035398"></a><a href="chap1.html#89622">Autostop</a></li><li>
<a id="pgfId-1039572"></a><a href="chap1.html#18165">Monte Carlo</a></li><li>
<a id="pgfId-1041303"></a><a href="chap1.html#82513">Supported Spectre Circuit Simulator Analyses</a></li><li>
<a id="pgfId-1043059"></a><a href="chap1.html#60306">Supported Spectre Circuit Simulator Formats</a></li><li>
<a id="pgfId-1042503"></a><a href="chap1.html#38314">Optimizations and Tips and Tricks</a></li></ul>















<h2>
<a id="pgfId-1032694"></a><a id="marker-1035464"></a><a id="83059"></a>Defining a Measu<a id="measurementalias"></a>rement Alias</h2>

<p>
<a id="pgfId-1032695"></a>Defining a <a id="marker-1033421"></a>measurement alias involves combining a call to an analysis with one or more MDL expressions into a reusable procedure. You can define or include an alias measurement only at the top level of an MDL control file. An alias measurement must be defined before it is used in a MDL run statement.</p>

<a id="pgfId-1045809"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
alias_measurement_statement ::=
     <strong>alias measurement</strong> <code><em>measurement_name</em></code> <strong>{
</strong>     {<code><em>initialization_block</em></code>}
     <vlog-bold>
run</vlog-bold>
 <code><em>analysis</em></code> [ <vlog-bold>
as</vlog-bold>
 <code><em>othername</em></code>]
     {<code><em>export_block</em></code><strong>}
     }</strong></pre>
<a id="pgfId-1045857"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code><em>analysis</em></code> :: =
     <code><em>BuiltInAnalysis</em></code> | <code><em>PredefinedAnalysis</em></code> | <code><em>AnalysisVariable</em></code></pre>
<a id="pgfId-1049069"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code><em>BuiltInAnalysis</em></code> :: =
     dc | ac | tran | noise | info | sp</pre>
<table class="webflareTable" id="#id1049073">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049075"></a><code>alias measurement</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049077"></a>Keyword to define a measurement block.The block of MDL statements to be run when the measurement is called. The statements are executed in the defined order. A variable must be defined before it can be used. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049079"></a><span class="webflare-courier-new" style="white-space:pre"><em>measurement_name</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049081"></a>The name of the measurement alias you are defining. <strong>Note</strong>: You can use special characters like hyphen (-), ampersand (&amp;), caret (^), and so on in the measurement alias names, variable names, and analysis names. However, these special characters must be preceded by an escape symbol (\). For example, </p>
<p>
<a id="pgfId-1049148"></a><code>alias measurement transim\-montecarlo</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049083"></a><span class="webflare-courier-new" style="white-space:pre"><em>initialization_block</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049129"></a>The initialization block. Input variables can be defined only in this block, otherwise MDL ignores them and issues warning messages that they are ignored. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049091"></a><vlog-bold>
run</vlog-bold>
<span class="webflare-courier-new" style="white-space:pre"><em> analysis</em></span> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049093"></a>The run statement can be used to call a built in Spectre analysis such as dc, ac or tran, to call an analysis defined in the circuit netlist, or to call an analysis variable. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049095"></a><vlog-bold>
as</vlog-bold>
 <span class="webflare-courier-new" style="white-space:pre"><em>othername</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049097"></a>The results dataset is named <span class="webflare-courier-new" style="white-space:pre"><em>othername</em></span> if the <code>as</code> option is used. If othername is not specified, the results dataset is given the <span class="webflare-courier-new" style="white-space:pre"><em>measurement_name</em></span>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049099"></a><span class="webflare-courier-new" style="white-space:pre"><em>export_block</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049101"></a><code>One or more </code>MDL expressions that are evaluated as a result of the analysis. However, you cannot use the <code>search</code> or <code>foreach</code> commands in the <span class="webflare-courier-new" style="white-space:pre"><em>export_block</em></span>, nor can the <span class="webflare-courier-new" style="white-space:pre"><em>export_block</em></span> include a measurement alias.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049103"></a><span class="webflare-courier-new" style="white-space:pre"><em>PredefinedAnalysis</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049105"></a>Name of the analysis defined in the netlist or MDL control file. For information on the analyses supported by MDL, see <a href="chap1.html#82513">Supported Spectre Circuit Simulator Analyses</a> and <a href="appB.html#49863">SPICE Compatibility for Analyses</a>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049107"></a><span class="webflare-courier-new" style="white-space:pre"><em>AnalysisVariable</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049109"></a>Name of a pre-defined analysis variable or an element of an array of analyses. For more information, see <a href="chap2.html#85790">Analysis</a>.</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1049057"></a>For example, consider the following <a id="marker-1049056"></a>MDL control file.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1032633"></a>alias measurement showmaxmin { // The measurement alias is defined here.
&#160;&#160;&#160;&#160;run tran1(stop=1u)
&#160;&#160;&#160;&#160;export real maxout=max(V(out)) 
&#160;&#160;&#160;&#160;export real minout=min(V(out)) <br />}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033069"></a>run showmaxmin // This statement runs the measurement.</pre>

<p>
<a id="pgfId-1032664"></a>This control file first defines a measurement alias called <code>showmaxmin</code>. The <code>run</code> statement then runs the measurement alias and writes the <code>maxout</code> and <code>minout</code> values to the dataset.</p>

<h2>
<a id="pgfId-1033426"></a><a id="marker-1035466"></a><a id="18899"></a>Using a Measurement Alias</h2>

<p>
<a id="pgfId-1033427"></a>You must define a measurement alias before you can use it. To use a <a id="marker-1034642"></a>measurement alias, use the <code>run</code> command. If the measurement alias is defined appropriately, you can pass in parameters to the <code>run</code> command in the measurement alias to further specify the behavior. For example, assume you have an MDL control file with the following contents.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034739"></a>alias measurement falldelay {
&#160;&#160;&#160;&#160;input real transtop=2u    // This variable is given a default value.
&#160;&#160;&#160;&#160;input real prop_thresh    // This variable has no default value.
&#160;&#160;&#160;&#160;run tran(stop=transtop)&#160;&#160; // A run statement is required.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034740"></a> export real prop_delay_fall=deltax(sig1=V(inp), sig2=V(out),<br />         dir1=&#8217;fall, n1=1, start1=0, thresh1=prop_thresh, <br /> &#160;&#160;      dir2=&#8217;fall, n2=2, start2=0, thresh2=prop_thresh)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033450"></a>}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1033452"></a>run falldelay(transtop=1u, prop_thresh=2)</pre>

<p>
<a id="pgfId-1046434"></a>Notice how <code>transtop</code> and <code>prop_thresh</code> are declared as <a id="marker-1046432"></a><a id="marker-1046433"></a>input variables in the measurement alias. The <code>transtop</code> input variable is given a default value of <code>2u</code>. If you do not pass a value to <code>transtop</code> on the <code>run</code> statement, MDL uses the default value. However, the <code>prop_thresh</code> input variable does not have a default value, so if you do not pass in a value for it, MDL issues an error. Notice how, in this example, the values to be used for the input variables are passed in on the <code>run runtran(transtop=1u, prop_thresh=2)</code> statement.</p>
<p>
<a id="pgfId-1046437"></a>You can also use <a id="marker-1046435"></a><a id="marker-1046436"></a>netlist variables in the MDL control file without declaring the variables as input parameters. For example, notice the use of <code>vdd_val</code> in the <code>risetime</code> expression of the following control file.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034473"></a>alias measurement runtran {
&#160;&#160;&#160;&#160;input real transtop=2u
&#160;&#160;&#160;&#160;input real prop_thresh
&#160;&#160;&#160;&#160;run tran(stop=transtop)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034518"></a> export real rise=risetime(trim(sig=V(out),<br />  from=10n, to=70n), initval=vdd_val/5,  // vdd_val is used here...<br />  inittype=&#8217;y, finalval=(vdd_val/5)+2,   // and here.<br />  finaltype=&#8217;y, theta1=10, theta2=90)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034492"></a>}</pre>

<p>
<a id="pgfId-1034471"></a>The <code>vdd_val</code> parameter is a top level variable in the netlist. Notice how in the following netlist fragment, <code>vdd_val</code> is defined as a parameter.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034570"></a>global 0 vdd! vss!<br />include &quot;./testmodels.scs&quot; section tt<br />parameters capval=2.5p vss_val=-5 vdd_val=5&#160;&#160;// vdd_val is defined here.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1035264"></a>//top level<br />v2 (vss! 0) vsource dc=vss_val type=dc<br />v1 (vdd! 0) vsource dc=vdd_val type=dc</pre>

<p>
<a id="pgfId-1039602"></a>Statements that require simulation results/computation should follow the analysis statement, as shown in the following example.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1039609"></a>alias measurement cvmeas {
&#160;&#160;&#160;&#160;run ac1
&#160;&#160;&#160;&#160;export real cv = im(DUT:d) / (6.28319 * 100000)<br />}</pre>

<p>
<a id="pgfId-1046948"></a>There are two ways to define variables in a measurement alias. These are explained using the following example of a measurement alias.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046674"></a>alias measurement tranmeas {<br />export real outcross, maxq<br />run tran(stop=40n)<br />outcross=cross(V(q),thresh=2.5)<br />maxq=max(V(q))<br />}</pre>

<p>
<a id="pgfId-1046675"></a>In the following two lines in the measurement alias definition, the <code>maxq</code> variable is declared with the <code>export</code> qualifier in a statement that is separate from the statement that uses the variable.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046676"></a>export real outcross, maxq<br />maxq=max(q)</pre>

<p>
<a id="pgfId-1046610"></a>Alternatively, you can specify the <code>maxq</code> variable in the statement that uses it, as shown below, after the <code>run</code> statement.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046611"></a>export real outcross<br />export real maxq=max(q)</pre>
<h2>
<a id="pgfId-1035268"></a><a id="marker-1035468"></a><a id="78280"></a>Defining Measurement Aliases on the Fly</h2>

<p>
<a id="pgfId-1034848"></a>You can define measurement aliases on the fly by adding the <code>as</code> keyword to the <code>run</code> command.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034852"></a>run ac(center=1MHz, span=1kHz) as pb<br />run ac(start=1_Hz, stop=10MHz) as sb</pre>

<p>
<a id="pgfId-1034855"></a>The simulator creates the alias before running the analysis, so in these examples, the default parameter values for the base <code>ac</code> analysis are not affected.</p>
<p>
<a id="pgfId-1034857"></a>The <code>as</code> keyword must follow a measurement and applies only to that measurement. The following example</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034936"></a>temp=50</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034864"></a>run dc as dcat50 </pre>
<p>
<a id="pgfId-1034865"></a>reruns the <code>dc</code> analysis with <code>temp=50</code>.</p>

<p>
<a id="pgfId-1034869"></a>You can extend the same concept to analyses. For example, in this pair of statements</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034870"></a>run tran (stop=10u) as tran1<br />run tran1</pre>

<p>
<a id="pgfId-1034873"></a>the second statement runs <code>tran</code> with <code>stop=10u</code>. The first command creates an alias to <code>run tran(stop=10u)</code> as a new analysis called <code>tran1</code>.</p>

<h2>
<a id="pgfId-1035274"></a><a id="marker-1035470"></a><a id="marker-1035483"></a><a id="59775"></a>Propagating Variables</h2>

<p>
<a id="pgfId-1035275"></a>MDL allows you to propagate variables through your code. For example, in the following measurement alias, notice how <code>rise_edge</code> and <code>fall_edge</code> are first calculated and then used later to calculate the value <code>pw</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1042952"></a>alias measurement trans {
&#160;&#160;&#160;&#160;run tran(stop=5u)
&#160;&#160;&#160;&#160;real rise_edge=cross(sig=V(out), dir=&#8217;rise, n=1, thresh=1.5, start=0)
&#160;&#160;&#160;&#160;real fall_edge=cross(sig=V(out), dir=&#8217;fall, n=1, thresh=1.5, start=0)
&#160;&#160;&#160;&#160;export real pw=fall_edge-rise_edge<br />}<br />run trans</pre>
<h2>
<a id="pgfId-1048883"></a>Defining a Macro</h2>

<p>
<a id="pgfId-1048884"></a>You can define a macro in the MDL control file using the <code>#define</code> directive. However, to read and run the macro, you must use must specify <code>+/=mdle</code> at the command line. For example, you can define a macro for the export statement in the mdl control file, as follows:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048885"></a>#define insat(device) export real insat_/**/device = Idut.device.m0:vdss</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048886"></a>alias measurement dcmeas {</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048887"></a>    run dc</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048888"></a>    insat(M11)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048889"></a>    insat(M22)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048890"></a>    insat(M09)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048891"></a>}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048892"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048893"></a>run dcmeas</pre>

<p>
<a id="pgfId-1048894"></a>When MDL is run, the above statements expand to the following:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048895"></a>run dc</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048896"></a>    export real insat_M11=Idut.M11.m0:vdss</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048897"></a>    export real insat_M22=Idut.M22.m0:vdss</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048898"></a>    export real insat_M09=Idut.M09.m0:vdss</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048899"></a>}</pre>
<h2>
<a id="pgfId-1042961"></a><a id="33137"></a>Accessing Netlist or Model Parameters </h2>

<p>
<a id="pgfId-1042963"></a>MDL allows you to access the parameters in different hierarchical depths of the netlist by specifying the full path to the parameter in a measurement alias.</p>
<p>
<a id="pgfId-1042966"></a>For example, in a MDL measurement alias, </p>
<ul><li>
<a id="pgfId-1042967"></a>A global parameter<code> v_vdd</code> can be accessed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1042968">
<a id="pgfId-1042968"></a>export real par_vdd = v_vdd</pre></li><li>
<a id="pgfId-1042970"></a>A subcircuit parameter <code>mm</code> can be accessed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1042971">
<a id="pgfId-1042971"></a>export real par_mm=x1.xmm0:mm</pre></li><li>
<a id="pgfId-1046807"></a>An instance parameter <code>vth</code> can be accessed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1046808">
<a id="pgfId-1046808"></a>export real par_vth=i1.mp0:vth</pre></li><li>
<a id="pgfId-1042973"></a>A model parameter <code>vth0</code> can be accessed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1042974">
<a id="pgfId-1042974"></a>export real par_vth=i1.mp0.pch1:vth0</pre></li><li>
<a id="pgfId-1042976"></a>An <code>lv</code>/<code>lx</code> parameter of an element can be accessed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1042977">
<a id="pgfId-1042977"></a>export real mn0_lv1=i0.mn0:lv1</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1042959">
<a id="pgfId-1042959"></a>export real mn0_lv1=i0.mn0:lx2</pre></li></ul>










<p>
<a id="pgfId-1048486"></a>You can also change the value of a parameter by specifying the full path to the parameter either in a measurement alias or at the top level of a MDL control file. For example:</p>
<ul><li>
<a id="pgfId-1046841"></a>The value of a global parameter <code>v_vdd</code> can be changed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1046842">
<a id="pgfId-1046842"></a>v_vdd = 1.7</pre></li><li>
<a id="pgfId-1046843"></a>The value of a subcircuit parameter <code>mm</code> can be changed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1046844">
<a id="pgfId-1046844"></a>x1.xmm0:mm = 3</pre></li><li>
<a id="pgfId-1046845"></a>The value of a model parameter <code>vth0</code> can be changed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1046846">
<a id="pgfId-1046846"></a>i1.mp0.pch1:vth0 = 1.5</pre></li></ul>






<h2>
<a id="pgfId-1048621"></a>Accessing Model Names and Types</h2>

<p>
<a id="pgfId-1048622"></a>MDL allows you to access the model names and model types defined in the netlist.</p>
<p>
<a id="pgfId-1048623"></a>For example, in a MDL measurement alias:</p>
<ul><li>
<a id="pgfId-1048624"></a>A model name, say <code>mod1</code>, can be accessed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1048625">
<a id="pgfId-1048625"></a>export real mdname=mod1:_masterName_</pre>
<a id="pgfId-1048626"></a>If <code>mod1</code> is the name of a model, the model name is returned. If <code>mod1</code> is the name of a subcircuit, the subcircuit name is returned.</li><li>
<a id="pgfId-1048627"></a>The model type for the model <code>mod1</code> can be accessed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1048628">
<a id="pgfId-1048628"></a>export real mdtype=mod1:_type_</pre>
<a id="pgfId-1048629"></a>If <code>mod1</code> is a model, the primitive name for the model is returned. If <code>mod1</code> is a subcircuit, &quot;subckt&quot; is returned.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1048644"></a>Primitive name refers to the built-in device names predefined in Spectre.</div></li></ul>









<h2>
<a id="pgfId-1048664"></a>Accessing Noise Parameters</h2>

<p>
<a id="pgfId-1048678"></a>MDL allows you to access the noise parameters as follows:</p>
<ul><li>
<a id="pgfId-1048703"></a>The noise parameter <code>rd</code> can be accessed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1048710">
<a id="pgfId-1048710"></a>export real rd_noise=mn:rd</pre><br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1048789"></a>If a parameter is both a noise parameter and a device parameter, it is treated as a noise parameter.</div></li><li>
<a id="pgfId-1048742"></a>Spot noise at given frequency can be accessed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1048752">
<a id="pgfId-1048752"></a>export real spot_noise=mn:rd @1k</pre></li><li>
<a id="pgfId-1048762"></a>The total noise for a model can be accessed by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1048772">
<a id="pgfId-1048772"></a>export real total_noise=mn:total</pre></li><li>
<a id="pgfId-1049400"></a>The total noise for a circuit can be output by:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1049414">
<a id="pgfId-1049414"></a>export total_noise noise:out</pre></li></ul>











<h2>
<a id="pgfId-1042955"></a><a id="marker-1042953"></a><a id="28540"></a>Using Named and Primitive Analyses</h2>

<p>
<a id="pgfId-1042956"></a>In MDL, you can use both primitive analyses and named analyses. The primitive analyses are those built into Spectre. Named analyses are ones that you define in the netlist. For example, the following measurement alias runs <code>tran1</code>, which must be defined in the netlist. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1035284"></a>alias measurement trans {

&#160;&#160;&#160;&#160;run tran1 // This is an analysis specified in the netlist.

&#160;&#160;&#160;&#160;real rise_edge=cross(sig=V(out), dir=&#8217;rise, n=1, thresh=1.5, start=0)
&#160;&#160;&#160;&#160;real fall_edge=cross(sig=V(out), dir=&#8217;fall, n=1, thresh=1.5, start=0)

&#160;&#160;&#160;&#160;export real pw=fall_edge-rise_edge <br />}</pre>

<p>
<a id="pgfId-1035358"></a>In contrast, the following measurement alias runs <code>tran</code>, one of the analyses provided by the simulator.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1041324"></a>alias measurement trans {

&#160;&#160;&#160;&#160;run tran(stop=1u) /* This is a built-in, primitive analysis,
                          which is not defined in the netlist. */

&#160;&#160;&#160;&#160;real rise_edge=cross(sig=V(out), dir=&#8217;rise, n=1, thresh=1.5, start=0)
&#160;&#160;&#160;&#160;real fall_edge=cross(sig=V(out), dir=&#8217;fall, n=1, thresh=1.5, start=0)

&#160;&#160;&#160;&#160;export real pw=fall_edge-rise_edge<br />}</pre>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1052374"></a>The name of the primitive analyses and named analyses must be different. For more information, see <a actuate="user" class="URL" href="../spectreuser/chap7.html#analyses_chap" show="replace" xml:link="simple">Analyses</a> in <em>Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide</em>.</div>

<h2>
<a id="pgfId-1035283"></a><a id="marker-1035474"></a><a id="63175"></a><a id="marker-1034756"></a>Looping Statements</h2>

<p>
<a id="pgfId-1036456"></a>MDL provides the <code>foreach</code> statement to automate repetitive simulations and for sweeps, and provides the <code>search</code> statement to identify values that are associated with significant circuit events. With the <code>mvarsearch</code> statement, you can set up performance goals for a circuit along with parameters that may be varied in attempts to reach these goals. Spectre iterates to find the optimal solution.</p>

<h3>
<a id="pgfId-1034760"></a><a id="marker-1035476"></a><a id="80192"></a>foreach Statement</h3>

<p>
<a id="pgfId-1034763"></a>The <code>foreach</code><a id="marker-1034761"></a> statement provides a way for you to run a simulation repeatedly. </p>

<a id="pgfId-1034764"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
foreach_statement ::=
    <strong>foreach</strong> foreach_specifier [ <strong>onerror=</strong>conditions ]<strong>{
</strong>        <code>block_of_statements
</code>    <strong>}</strong> </pre>

<p>
<a id="pgfId-1038393"></a>foreach_specifier ::=<br />    <strong>&#160;&#160;   </strong><span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary </em></span><strong>from</strong><span class="webflare-courier-new" style="white-space:pre"><em> </em></span>alternatives<br />       | <span class="webflare-courier-new" style="white-space:pre"><em>paramset_name</em></span></p>

<a id="pgfId-1034765"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
alternatives ::=
    {<code><em>list}
</em></code>|   <code><em>array
</em></code>|   <strong>swp</strong> <strong>(</strong>swp_param<strong>)</strong></pre>
<a id="pgfId-1034766"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
swp_param ::=
    <strong>start</strong> <strong>=</strong> <code><em>strt</em></code><strong>,</strong> <strong>stop</strong> <strong>=</strong> <code><em>stop</em></code> [<strong>,</strong> step_def ]
|   <strong>center</strong> <strong>=</strong> <code><em>cntr</em></code><strong>,</strong> <strong>span</strong> <strong>=</strong> <code><em>spn </em></code>[<strong>,</strong> step_def ]</pre>
<a id="pgfId-1034768"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
step_def ::=
    <strong>step</strong> <strong>=</strong> <code><em>step
</em></code>|   <strong>lin</strong> <strong>=</strong> <code><em>lin_num_steps
</em></code>|   <strong>dec</strong> <strong>=</strong> <code><em>steps_per_decade
</em></code>|   <strong>log</strong> <strong>=</strong> log_num_<code><em>steps</em></code></pre>

<p>
<a id="pgfId-1045446"></a>conditions ::=<br />    <strong>&#8216;</strong>exit | <strong>&#8216;</strong>continue</p>
<table class="webflareTable" id="#id1049156">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049158"></a><span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049160"></a>The parameter that the <code>foreach</code> statement is to vary. This can be an MDL variable, a netlist parameter, or a device parameter. Valid data types are <code>real</code>, <code>int</code>, <code>cplx</code>, and <code>analysis</code>. </p>
<p>
<a id="pgfId-1049250"></a>Each time the <code>block_of_statements</code> iterates, the <span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span> is replaced by the next value from the alternatives, except when the <span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span> is <code>analysis</code>. When the <span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span> is <code>analysis</code>, a <code>run</code> statement is required to iterate the next value from the alternatives (see Example 3 for details).</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049162"></a><span class="webflare-courier-new" style="white-space:pre"><em>paramset_name</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049164"></a>Name of the paramset definition from the netlist. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049166"></a><code>block_of_statements</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049168"></a>One or more MDL statements, except variable declarations, measurement alias declarations, and include statements.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049170"></a><span class="webflare-courier-new" style="white-space:pre"><em>{list}</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049172"></a>A list of values containing alternative values for <span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span> in the form { <span class="webflare-courier-new" style="white-space:pre"><em>val1</em></span>, <span class="webflare-courier-new" style="white-space:pre"><em>val2</em></span>,...<span class="webflare-courier-new" style="white-space:pre"><em>valN</em></span> }. </p>
<p>
<a id="pgfId-1049243"></a>Valid data types are <code>real</code>, <code>int</code>, <code>cplx</code>, and <code>analysis</code>. If an array is present, it must be a de-referenced array element such as <code>mytran[0]</code>, <code>mytran[1]</code>, etc.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049174"></a><span class="webflare-courier-new" style="white-space:pre"><em>array</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049176"></a>An array of sweep values.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049178"></a><span class="webflare-courier-new" style="white-space:pre"><em>strt</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049180"></a>The starting value for <span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span>. The <span class="webflare-courier-new" style="white-space:pre"><em>strt</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>stop</em></span> parameters are used together to specify sweep limits.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049182"></a><span class="webflare-courier-new" style="white-space:pre"><em>stop</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049184"></a>The ending value for <span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span>. The <span class="webflare-courier-new" style="white-space:pre"><em>strt</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>stop</em></span> parameters are used together to specify sweep limits.</p>
<p>
<a id="pgfId-1049268"></a>If you do not give a step_def, the sweep is linear when the ratio of stop to strt values is less than 10, and logarithmic when this ratio is 10 or greater.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049190"></a><span class="webflare-courier-new" style="white-space:pre"><em>cntr</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049192"></a>Center value of sweep. The <span class="webflare-courier-new" style="white-space:pre"><em>cntr</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>spn</em></span> parameters are used together to specify sweep limits.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049194"></a><span class="webflare-courier-new" style="white-space:pre"><em>spn</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049196"></a>Span of sweep. The <span class="webflare-courier-new" style="white-space:pre"><em>cntr</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>spn</em></span> parameters are used together to specify sweep limits.</p>
<p>
<a id="pgfId-1049298"></a>If you do not give a <code>step_def</code>, the sweep is linear when the ratio of the end point of the span to the start point of the span is less than 10, and logarithmic when this ratio is 10 or greater.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049202"></a><span class="webflare-courier-new" style="white-space:pre"><em>step</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049204"></a>Step size for linear sweeps.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049206"></a><span class="webflare-courier-new" style="white-space:pre"><em>lin_num_steps</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049208"></a>Number of steps for linear sweeps.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049210"></a><span class="webflare-courier-new" style="white-space:pre"><em>steps_per_decade</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049212"></a>Number of points per decade for log sweeps.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049214"></a><span class="webflare-courier-new" style="white-space:pre"><em>log_num_steps</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049216"></a>Number of steps for logarithmic sweeps.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049218"></a><strong>&#8216;exit</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049220"></a>A keyword specifying that the <code>foreach</code> loop is to end when the simulation experiences an error, such as a convergence issue. This is the default behavior if the <code>onerror</code> option is not specified.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049222"></a><strong>&#8216;continue</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049224"></a>A keyword specifying that the <code>foreach</code> loop is to continue even when the simulation experiences an error, such as a convergence issue.</p>
</td>
</tr>
</tbody></table>

<h4>
<a id="pgfId-1045323"></a>Example 1</h4>

<p>
<a id="pgfId-1045527"></a>For example, you might define a measurement and <code>foreach</code><a id="marker-1045322"></a> statement like the following to determine the maximum output voltage of a circuit. Notice that the <code>foreach</code> statement is <em>not</em> placed inside the <code>alias measurement</code> statement.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1045324"></a>alias measurement findmax {
&#160;&#160;&#160;&#160;run tran(stop=1u)
&#160;&#160;&#160;&#160;export real maxout=max(V(out))<br />}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034791"></a>foreach vdd_val from swp(start=5, stop=7, step=0.5) {
&#160;&#160;&#160;&#160;foreach temp from {25, 50, 75, 100} {
&#160;&#160;&#160;&#160; run findmax<br /> }<br />}</pre>

<p>
<a id="pgfId-1034792"></a>In this example, the outer <code>foreach</code> statement varies the value of <code>vdd_val</code> and the inner <code>foreach</code> varies the value of <code>temp</code>. As a result, the <code>findmax</code> measurement alias runs with each combination of values, producing a <code>.measure</code> file like this.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034793"></a>Swept Measurements :<br />Measurement Name   :  findmax<br />Analysis Type&#160;&#160;    :  tran</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1036497"></a>maxout                vdd_val @ 5        temp @ 25   =  3.07027<br />maxout                vdd_val @ 5        temp @ 50   =  3.07326<br />maxout                vdd_val @ 5        temp @ 75   =  3.07565<br />maxout                vdd_val @ 5        temp @ 100   =  3.08015<br />maxout                vdd_val @ 5.5        temp @ 25   =  3.06517<br />maxout                vdd_val @ 5.5        temp @ 50   =  3.06917<br />maxout                vdd_val @ 5.5        temp @ 75   =  3.07468<br />maxout                vdd_val @ 5.5        temp @ 100   =  3.07433<br />maxout                vdd_val @ 6        temp @ 25   =  3.06553<br />maxout                vdd_val @ 6        temp @ 50   =  3.06703<br />maxout                vdd_val @ 6        temp @ 75   =  3.06865<br />maxout                vdd_val @ 6        temp @ 100   =  3.07364<br />maxout                vdd_val @ 6.5        temp @ 25   =  3.06373<br />maxout                vdd_val @ 6.5        temp @ 50   =  3.06524<br />maxout                vdd_val @ 6.5        temp @ 75   =  3.0695<br />maxout                vdd_val @ 6.5        temp @ 100   =  3.07092<br />maxout                vdd_val @ 7        temp @ 25   =  3.06274<br />maxout                vdd_val @ 7        temp @ 50   =  3.06595<br />maxout                vdd_val @ 7        temp @ 75   =  3.06798<br />maxout&#160;&#160;              vdd_val @ 7        temp @ 100   =  3.07035</pre>
<h4>
<a id="pgfId-1036498"></a>Example 2</h4>

<p>
<a id="pgfId-1045531"></a>As another example, the <code>paramset</code> statement is defined as follows in a netlist</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1036511"></a>data_v paramset {
&#160;&#160;&#160;&#160;vhi vlo
&#160;&#160;&#160;&#160;1.9 1.32
&#160;&#160;&#160;&#160;1.8 1.2
&#160;&#160;&#160;&#160;}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1036516"></a>data_fet paramset {
&#160;&#160;&#160;&#160;nw nl  pw pl
&#160;&#160;&#160;&#160;5u 3u 9u 3u
&#160;&#160;&#160;&#160;4u 3u 7u 3u
&#160;&#160;&#160;&#160;}</pre>

<p>
<a id="pgfId-1036504"></a>The <code>alias</code> and <code>foreach</code> statements are defined as follows in the <code>.mdl</code> file</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1036607"></a>alias measurement findvth {
&#160;&#160;&#160;&#160;run tran(stop=100n)
&#160;&#160;&#160;&#160;export real outVth = cross(sig=V(out), dir=&#39;cross, n=1, thresh=2.5, start=0)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1036610"></a>}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1036635"></a>foreach temp from {0, 130} {
&#160;&#160;&#160;&#160;foreach data_v {
&#160;&#160;&#160;&#160; foreach data_fet {<br />   run findvth<br />   }<br /> }<br />}</pre>

<p>
<a id="pgfId-1036659"></a>In this example, there are three-level nested sweeps: the inner <code>foreach</code> statement varies the value of <code>nw</code>, <code>nl</code>, <code>pw</code> and <code>pl</code> from the <code>data_fet</code> <code>paramset</code> statement defined in the netlist; the middle <code>foreach</code> statement varies the value of <code>vhi</code> and <code>vlo</code> from the <code>data_v</code> <code>paramset</code> statement defined in the netlist; and the outer <code>foreach</code> statement varies the value of <code>temp</code>. As a result, the <code>findvth</code> measurement alias is run eight times by MDL, producing a <code>.measure</code> file like this:</p>

<a id="pgfId-1036661"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
Swept Measurements :
Measurement Name    : findvth
Analysis Type    : tran</pre>
<a id="pgfId-1036992"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
outVth    temp @ 0
    vhi @ 1.9
    vlo @ 1.32
    nw @ 5e-06
    nl @ 3e-06
    pw @ 9e-06
    pl @ 3e-06    =  9.89772e-10</pre>
<a id="pgfId-1036671"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
outVth    temp @ 0
    vhi @ 1.9
    vlo @ 1.32
    nw @ 4e-06
    nl @ 3e-06
    pw @ 7e-06
    pl @ 3e-06   =  1.01348e-09</pre>
<a id="pgfId-1036678"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
outVth    temp @ 0
    vhi @ 1.8
    vlo @ 1.2
    nw @ 5e-06
    nl @ 3e-06
    pw @ 9e-06
    pl @ 3e-06   =  1.37049e-09</pre>
<a id="pgfId-1038336"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
outVth    temp @ 0
    vhi @ 1.8
    vlo @ 1.2
    nw @ 4e-06
    nl @ 3e-06
    pw @ 7e-06
    pl @ 3e-06   =  1.74369e-09</pre>
<a id="pgfId-1038344"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
outVth    temp @ 130
    vhi @ 1.9
    vlo @ 1.32
    nw @ 5e-06
    nl @ 3e-06
    pw @ 9e-06
    pl @ 3e-06   =  9.56855e-10</pre>
<a id="pgfId-1036699"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
outVth    temp @ 130
    vhi @ 1.9
    vlo @ 1.32
    nw @ 4e-06
    nl @ 3e-06
    pw @ 7e-06
    pl @ 3e-06   =  9.82614e-10</pre>
<a id="pgfId-1036706"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
outVth    temp @ 130
    vhi @ 1.8
    vlo @ 1.2
    nw @ 5e-06
    nl @ 3e-06
    pw @ 9e-06
    pl @ 3e-06   =  1.17573e-09</pre>
<a id="pgfId-1038362"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
outVth    temp @ 130
    vhi @ 1.8
    vlo @ 1.2
    nw @ 4e-06
    nl @ 3e-06
    pw @ 7e-06
    pl @ 3e-06   =  1.22687e-09 </pre>
<h4>
<a id="pgfId-1045535"></a>Example 3</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1045543"></a>alias measurement myrun {
&#160;&#160;&#160;&#160;input analysis tranRun = tran1
&#160;&#160;&#160;&#160;run tranRun
&#160;&#160;&#160;&#160;}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1045547"></a>analysis myAltergroups[] = { ag1, ag2, ag3, ag4 }</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1045548"></a>analysis ag, myAnalysis</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1045549"></a>foreach ag from myAltergroups {
&#160;&#160;&#160;&#160;run ag    //This is required to activate the next analysis
&#160;&#160;&#160;&#160;foreach myAnalysis from { dc1, dcswp, tran1 } { 
&#160;&#160;&#160;&#160;run myrun( tranRun = myAnalysis ) as myAnalysis
&#160;&#160;&#160;&#160;}<br />}</pre>
<h4>
<a id="pgfId-1048144"></a>Specifying the foreach S<a id="foreachwithinmeasurement"></a>tatement Within the measurement Alias</h4>

<p>
<a id="pgfId-1048158"></a>MDL also supports the <code>foreach</code> statement within the measurement alias. </p>

<h4><em>
<a id="pgfId-1048174"></a>Example</em></h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048185"></a>alias transient {
&#160;&#160;&#160;&#160;export real v1
&#160;&#160;&#160;&#160;export real temper
&#160;&#160;&#160;&#160;temper=temp
&#160;&#160;&#160;&#160;run tran( stop=7e-08 )
&#160;&#160;&#160;&#160;v1=aa*avg(V(vin))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048191"></a>}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048192"></a>alias measurement top_test {
&#160;&#160;&#160;&#160;export real sum =0;
&#160;&#160;&#160;&#160;export real each_v1[];
&#160;&#160;&#160;&#160;int index=0;
&#160;&#160;&#160;&#160;foreach aa from {10, 20 ,30} {
&#160;&#160;&#160;&#160;run transient as inner;
&#160;&#160;&#160;&#160;sum = sum + inner-&gt;v1;
&#160;&#160;&#160;&#160;each_v1[index] = inner-&gt;v1;
&#160;&#160;&#160;&#160;index = index+1;
&#160;&#160;&#160;&#160;}<br />}</pre>
<h3>
<a id="pgfId-1036501"></a><a id="marker-1036499"></a><a id="26435"></a>search Statement</h3>

<p>
<a id="pgfId-1034800"></a>The <code>search</code><a id="marker-1034798"></a> statement provides a way for you to find the value of a design parameter that corresponds to the circuit meeting or failing a specific performance criterion. The function operates by running the simulation repeatedly, varying the values of interest each time, until a specified condition is met. This capability is typically used to determine values such as setup time and maximum load.<a id="marker-1034799"></a></p>

<a id="pgfId-1046458"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
search_statement ::=
    <strong>search</strong> search_specifier [ <strong>output</strong>=conditions ]<strong> { 
</strong>        <code><em>block_of_statements
</em></code>    <strong>}</strong> method <strong>(</strong> <code><em>condition_statements</em></code> <strong>)</strong></pre>
<a id="pgfId-1046468"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
search_specifier<code><em> ::=
param_to_vary</em></code> <strong>from</strong> <strong>binary</strong> <strong>( start</strong>=<code><em>strt</em></code><strong>,</strong> <strong>stop</strong>=s<code><em>tp</em></code><strong>,</strong> <strong>tol</strong>=t<code><em>ol </em></code><strong>round</strong><code><em>=</em></code>[&#8217;no|&#8217;yes]<strong>) </strong></pre>
<a id="pgfId-1046472"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
conditions ::=
<strong>&#8217;none</strong> | <strong>&#8217;last</strong> | <strong>&#8217;all | &#8217;each</strong></pre>
<a id="pgfId-1046469"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
method::=
    <strong>until
</strong>|   <strong>while
</strong>|   <strong>bisection</strong></pre>
<table class="webflareTable" id="#id1049318">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049320"></a><span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049322"></a>The parameter that the search statement is to vary in a binary way.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049324"></a><span class="webflare-courier-new" style="white-space:pre"><em>strt</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049326"></a>The starting value for <span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span>. The <span class="webflare-courier-new" style="white-space:pre"><em>strt</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>stp</em></span> values should straddle the expected value. If both <span class="webflare-courier-new" style="white-space:pre"><em>strt</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>stp</em></span> result in a <span class="webflare-courier-new" style="white-space:pre"><em>condition_statement</em></span> that is true or if both result in a <span class="webflare-courier-new" style="white-space:pre"><em>condition_statement</em></span> that is false, the <code>search</code> statement fails.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049328"></a><span class="webflare-courier-new" style="white-space:pre"><em>stp</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049330"></a>The ending value for <span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span>. The <span class="webflare-courier-new" style="white-space:pre"><em>strt</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>stp</em></span> values should straddle the expected value. If both <span class="webflare-courier-new" style="white-space:pre"><em>strt</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>stp</em></span> result in a <span class="webflare-courier-new" style="white-space:pre"><em>condition_statement</em></span> that is true or if both result in a <span class="webflare-courier-new" style="white-space:pre"><em>condition_statement</em></span> that is false, the <code>search</code> statement fails.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049332"></a><span class="webflare-courier-new" style="white-space:pre"><em>tol</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049334"></a>The tolerance value, which specifies how precisely the final value is calculated.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049336"></a><code>round=&#8217;no|&#8217;yes</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049338"></a>If set to &#8217;yes, each iteration of the search is an integral value that is rounded of to the nearest middle value.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049340"></a><span class="webflare-courier-new" style="white-space:pre"><em>block_of_statements</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049342"></a>One or more <code>run</code> statements.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049344"></a><span class="webflare-courier-new" style="white-space:pre"><em>condition_statements</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049346"></a>A statement that determines when the search statement stops. You can use multiple boolean expressions in conditional statements. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049348"></a><strong>&#8217;none</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049350"></a>A keyword indicating that no analysis output is to be saved to the raw directory irrespective of whether the search succeeds or fails.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049352"></a><strong>&#8217;last</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049354"></a>A keyword indicating that the analysis output is to be saved only when the last iteration of the search succeeds. No output will be saved to the raw directory if the search fails.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049356"></a><strong>&#8217;all</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049358"></a>A keyword indicating that the analysis output is to be saved to the raw directory irrespective of whether the search succeeds or fails. This is the default keyword.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049360"></a><strong>&#8217;each</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049362"></a>A keyword indicating that the analysis output for each iteration of the search is saved to the raw directory irrespective of whether the search succeeds or fails.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049364"></a><strong>until</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049366"></a>A keyword indicating that the <code>search</code> statement is to continue looping until the value of <span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span> causes <span class="webflare-courier-new" style="white-space:pre"><em>condition_statements</em></span> to become true and then return the first iteration value that meets the tolerance (<code>tol</code>) criteria when <span class="webflare-courier-new" style="white-space:pre"><em>condition_statements</em></span> is true. If you use this keyword, <span class="webflare-courier-new" style="white-space:pre"><em>condition_statements</em></span> must initially be false.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049368"></a><strong>while</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049370"></a>A keyword indicating that the <code>search</code> statement is to continue looping until the value of <span class="webflare-courier-new" style="white-space:pre"><em>param_to_vary</em></span> causes <span class="webflare-courier-new" style="white-space:pre"><em>condition_statements</em></span> to become false and then return the last iteration value that meets the tolerance (<code>tol</code>) criteria when <span class="webflare-courier-new" style="white-space:pre"><em>condition_statements</em></span> is true. If you use this keyword, <code>condition_statements</code> must initially be true.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049372"></a><strong>bisection</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049374"></a>A keyword indicating that the <code>search</code> statement is to continue looping till either an <code>until</code> or a <code>while</code> condition is first met.</p>
</td>
</tr>
</tbody></table>
<h4><em>
<a id="pgfId-1034815"></a>Example 1</em></h4>

<p>
<a id="pgfId-1046974"></a>For example, you might define a measurement and <code>search</code><a id="marker-1034814"></a> statement like the following to determine the setup time of a flip-flop.<a id="marker-1034816"></a><a id="marker-1034817"></a></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034818"></a>alias measurement setup {
&#160;&#160;&#160;&#160;export real vddelay, outcross, Tsetup, vcdelay, setdelay, maxq
&#160;&#160;&#160;&#160;run tran(stop=40n)
&#160;&#160;&#160;&#160;vddelay=cross(sig=V(data), thresh=2.5, dir=&#8217;rise, n=1)
&#160;&#160;&#160;&#160;vcdelay=cross(sig=V(clock), thresh=2.5, dir=&#8217;rise, n=1)
&#160;&#160;&#160;&#160;outcross=cross(V(q),thresh=2.5)
&#160;&#160;&#160;&#160;maxq=max(V(q))
&#160;&#160;&#160;&#160;setdelay=vdata:delay
&#160;&#160;&#160;&#160;Tsetup=vcdelay-vddelay<br />}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034819"></a>search vdata:delay from binary(start=2n, stop=10n, tol=1p) {
&#160;&#160;&#160;&#160;run setup<br />} until ( setup-&gt;maxq &lt; 2.5)</pre>

<p>
<a id="pgfId-1034820"></a>In this example, the <code>search</code> statement varies the parameter <code>vdata:delay</code>, which is a parameter named <code>delay</code> on a instance named <code>vdata</code>. The simulation determines when <code>V(q)</code> crosses a threshold value. When <code>V(q)</code> fails to cross the threshold, <code>maxq</code> remains less than 2.5, making the <span class="webflare-courier-new" style="white-space:pre"><em>condition_statements</em></span> true. The <code>setup-&gt;maxq</code> syntax in the <span class="webflare-courier-new" style="white-space:pre"><em>condition_statement</em></span>, refers to the <code>maxq</code> value in the <code>setup</code> block.</p>
<p>
<a id="pgfId-1034821"></a>Through repeated simulations, the <code>search</code> statement closes in on the value of <code>vdata:delay</code> that marks the change from <span class="webflare-courier-new" style="white-space:pre"><em>condition_statements</em></span> being false to <span class="webflare-courier-new" style="white-space:pre"><em>condition_statements</em></span> being true.</p>

<h4><em>
<a id="pgfId-1046973"></a>Example 2</em></h4>

<p>
<a id="pgfId-1047054"></a>You can also choose whether to save the search results to the raw directory by specifying an output parameter. This feature can be used to prevent creating large size output files that may cause memory issues. </p>
<p>
<a id="pgfId-1047078"></a>For example, in the following <code>search</code> statement, two conditions are specified in the <code>while</code> criteria. The simulator will exit and return the last successful value whenever one of the two conditions fails.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1047072"></a>search vdata:delay from binary(start=2n,stop=10n,tol=1p) output=&#39;last {<br />         run setup<br />} while (setup-&gt;maxq &gt; 1.8 &amp;&amp; setup-&gt;outcross &lt; 10.3n)</pre>

<p>
<a id="pgfId-1047197"></a>As <code>output=&#39;last</code> is set, the analysis output of the setup measurement will be saved to the raw directory only when the last iteration of the search is successful, otherwise no analysis result is saved.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1047198"></a>If the two conditions in the <code>while</code> criteria are defined in an <code>OR</code> relationship (using the || operator), but not in an AND relationship (using the &amp;&amp; operator), the simulator will exit and return the last successful value only when both the conditions fail.</div>

<h3>
<a id="pgfId-1035576"></a>mvarsearch <a id="mvar"></a>Statement</h3>

<p>
<a id="pgfId-1035587"></a>The <code>mvarsearch</code> statement provides a way for you to find the values of design parameters that correspond to the optimal solution of a group of measurements. In essence, this statement provides a multi-parameter, multi-goal search functionality. </p>
<p>
<a id="pgfId-1043830"></a>This statement works by setting the design parameters to a value, running the defined measurement, evaluating the goal functions, calling an optimizer to determine the next set of design parameter values, and repeating. The statement iterates until an optimal solution is found, or until the maximum number of optimization iterations have been performed. </p>
<p>
<a id="pgfId-1043831"></a>When the <code>mvarsearch</code> is used inside a foreach loop, the <code>restoreParam</code> option must be set to <code>1</code> to reset the parameters to their initial values after the optimization is complete and avoid any errors in subsequent foreach loops.</p>

<a id="pgfId-1043832"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
mvarsearch_statement ::=
<vlog-bold>
mvarsearch</vlog-bold>
<strong> {
</strong>    <vlog-bold>
option</vlog-bold>
 {
        <code><em>options_statements
</em></code>    }
    <vlog-bold>
parameter</vlog-bold>
 {
        <code><em>parameter_statements
</em></code>    }
    <vlog-bold>
exec</vlog-bold>
 {
        <code><em>exec_statement
</em></code>    }
    <vlog-bold>
zero</vlog-bold>
 {
        <code><em>zero_statements
</em></code>    }
}</pre>
<a id="pgfId-1035669"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
options_statement ::=
[ method = <code><em>method</em></code> ]
[ accuracy = <code><em>conv_tol</em></code> ]
[ deltax = <code><em>diff_tol</em></code> ]
[ maxiter = <code><em>maxiter</em></code> ]
[ restoreParam = <code><em>restoreParam</em></code> ]</pre>
<a id="pgfId-1035733"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
parameter_statement ::=
{ <code><em>param_name</em></code>, <code><em>init_val</em></code>, <code><em>lower_val</em></code>, <code><em>upper_val</em></code> )</pre>
<p>
<a id="pgfId-1049882"></a></p>
<table class="webflareTable" id="#id1049883">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049924"></a><span class="webflare-courier-new" style="white-space:pre"><em>method</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049926"></a>The method to be used in the algorithm method. Possible values are <code>&#8216;newton</code> (newton solver) and <code>&#8216;lm</code> (levenburg marquardt). While <code>&#8216;newton</code> is faster than <code>&#8216;lm</code>, <code>&#8216;lm</code> has more robust convergence properties. You should use <code>&#8216;newton</code> only when <span class="webflare-courier-new" style="white-space:pre"><em>init_val</em></span> values are close to the final solution and you want a faster optimization. <br /><code>&#8216;newton</code> assumes that the number of <span class="webflare-courier-new" style="white-space:pre"><em>param_statement</em></span>=number of <span class="webflare-courier-new" style="white-space:pre"><em>zero_statement</em></span>. If this is not true, mvarsearch automatically changes method to <code>&#8216;lm</code>.<br />Default value: <code>&#8216;lm</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049928"></a><span class="webflare-courier-new" style="white-space:pre"><em>conv_tol</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049930"></a>Convergence tolerance. The optimization ends if the relative error in the sum of squares of the calculated objectives in the <span class="webflare-courier-new" style="white-space:pre"><em>zero_statements</em></span> is less than <span class="webflare-courier-new" style="white-space:pre"><em>conv_tol</em></span>. For example, given objectives <code>tmp1</code> and <code>tmp2</code>, the optimization ends if:<br />(<code>tmp1</code>*<code>tmp1</code> + <code>tmp2</code>*<code>tmp2</code>) &lt; <span class="webflare-courier-new" style="white-space:pre"><em>conv_tol<br /></em></span>The smaller the value of <span class="webflare-courier-new" style="white-space:pre"><em>conv_tol</em></span>, the more accurate the optimization solution.<br />Default value: 1.0e-04</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049932"></a><span class="webflare-courier-new" style="white-space:pre"><em>diff_tol</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1049934"></a>Step length for the forward-difference approximation to compute the numerical derivatives. For a design parameter of value <code>x</code>, the approximation uses <span class="webflare-courier-new" style="white-space:pre"><em>diff_tol</em></span>*<code>x</code> as the step length. If <code>x</code> is very small (less than the machine precision), the step length is taken as <span class="webflare-courier-new" style="white-space:pre"><em>diff_tol</em></span>.<br />Default value: <code>5.0e-03</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050010"></a><span class="webflare-courier-new" style="white-space:pre"><em>maxiter</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050012"></a>Maximum number of optimization iterations that should be evaluated before automatically exiting the optimization loop.<br />Default value: <code>300</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050014"></a><span class="webflare-courier-new" style="white-space:pre"><em>restoreParam</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050016"></a>Specifies if the parameters to be optimized should be reset to their initial values after the optimization is complete (<code>restoreParam</code>=<code>1</code>).<br />Default value: 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050018"></a><span class="webflare-courier-new" style="white-space:pre"><em>param_name</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050020"></a>The parameter to be optimized.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050108"></a><span class="webflare-courier-new" style="white-space:pre"><em>init_val</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050110"></a>Initial value for the parameter to be optimized. This value provides the optimization algorithm with an initial guess for the parameter to be optimized. <br />Default value: <code>1.0</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050112"></a><span class="webflare-courier-new" style="white-space:pre"><em>lower_val</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050114"></a>Lower limit for the parameter to be optimized. The optimization limits parameter to the value of <span class="webflare-courier-new" style="white-space:pre"><em>lower_val</em></span> if it becomes less than the specified value. <span class="webflare-courier-new" style="white-space:pre"><em>lower_val</em></span> can be used to force a lower limit on physical parameters (such as MOSFET channel width) to ensure that the optimized solution is physically possible.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050116"></a><span class="webflare-courier-new" style="white-space:pre"><em>upper_val</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050118"></a>Upper limit for the parameter to be optimized. The optimization limits the parameter to the value of <span class="webflare-courier-new" style="white-space:pre"><em>upper_val</em></span> if it exceeds the specified value. <span class="webflare-courier-new" style="white-space:pre"><em>upper_val</em></span> can be used to force an upper limit on physical parameters (such as MOSFET channel width) to ensure that the optimized solution is physical possible.<br />Setting <span class="webflare-courier-new" style="white-space:pre"><em>lower_val</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>upper_val</em></span> too close to each other can result in discontinuities, making the optimization unsuccessful.<br />Default value: 2.0*<span class="webflare-courier-new" style="white-space:pre"><em>init_val</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050204"></a><span class="webflare-courier-new" style="white-space:pre"><em>exec_statement</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050206"></a>run statement to compute goal values.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050208"></a><span class="webflare-courier-new" style="white-space:pre"><em>zero_statement</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050210"></a>Goal value to be minimized.</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1035997"></a>For example, you may define a measurement and <code>mvarsearch</code> statement as follows to obtain the optimal values of p-channel width and n-channel width, and an equivalent rise and fall time of 3ns for an inverter chain.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1036069"></a>alias measurement trans {
run tran( stop=1u, autostop=&#8217;yes )
&#160;&#160;&#160;&#160;export real rise=risetime(sig=V(d), initval=0, inittype=&#8217;y, finalval=3.0, 
&#160;&#160;&#160;&#160;   finaltype=&#8217;y, theta1=10, theta2=90) // measured from 10% to 90% 
&#160;&#160;&#160;&#160;export real fall=falltime(sig=V(d), initval=3.0, inittype=&#8217;y, finalval=0.0,
&#160;&#160;&#160;&#160;   finaltype=&#8217;y, theta1=90, theta2=10) // measured from 10% to 90% </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1036017"></a>}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1036081"></a>mvarsearch {
&#160;&#160;&#160;&#160;option {
&#160;&#160;&#160;&#160;   accuracy = 1e-3     // convergence tolerance of trans-&gt;rise
&#160;&#160;&#160;&#160;   deltax = 1e-3       // numerical difference % of design variables
&#160;&#160;&#160;&#160;   maxiter = 100       // limit to 100 iterations
&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;parameter {
&#160;&#160;&#160;&#160;   {para_pw, 1.2u, 0.1u, 10u}
&#160;&#160;&#160;&#160;   {para_nw, 1.2u, 0.1u, 10u}
&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;exec {
&#160;&#160;&#160;&#160;   run trans
&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;zero {
&#160;&#160;&#160;&#160;   tmp1 = trans-&gt;rise - 3ns
&#160;&#160;&#160;&#160;   tmp2 = trans-&gt;fall - 3ns 
&#160;&#160;&#160;&#160;}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1036098"></a>}</pre>

<p>
<a id="pgfId-1036236"></a>In the above example, design parameters <code>para_pw</code> and <code>para_nw</code> are varied by the optimization algorithm starting at an initial value of 1.2 microns with a maximum value of 10 microns and a lower limit of 0.1 microns. At each iteration, the measurement alias <code>trans</code> is run after the design parameter value is set. The <code>zero</code> values <code>tmp1</code> and <code>tmp2</code> are then computed using the results from the measurement alias. This iteration continues until one of the following happens:</p>
<ul><li>
<a id="pgfId-1036298"></a><code>tmp1</code> and <code>tmp2</code> satisfy the <span class="webflare-courier-new" style="white-space:pre"><em>conv_tool</em></span> criteria determined by the following equation:<br />
<a id="pgfId-1036295"></a>(<code>tmp1</code>*<code>tmp1</code> + <code>tmp2</code>*<code>tmp2</code>) &lt; 1.0e-03</li><li>
<a id="pgfId-1036238"></a>the <span class="webflare-courier-new" style="white-space:pre"><em>maxiter</em></span> parameter value is exceeded</li></ul>




<p>
<a id="pgfId-1036240"></a>During this optimization, the parameters <code>para_pw</code> and <code>para_nw</code> are clamped between the lower limit of 0.1u and the upper limit of 10u. This clamping forces the channel widths of the MOSFETs in this circuit to remain within defined limits while the optimization is performed. </p>
<p>
<a id="pgfId-1036316"></a>The above example results in the following output:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1042532"></a>Swept Measurements   :<br />Measurement Name     :  trans-meas_optimize<br />Analysis Type         :  tran<br />fall                   para_pw @ 2.3745e-06 <br />                       para_nw @ 1.16767e-06  =  2.99999997237325e-09<br />rise                   para_pw @ 2.3745e-06 <br />                        para_nw @ 1.16767e-06  =  3.00129681779706e-09</pre>

<p>
<a id="pgfId-1042539"></a>You can define a <code>mvarsearch</code> statement inside <code>foreach</code> statements as follows:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1042541"></a>foreach v_vdd from {3, 2.5}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1042543"></a>{
&#160;&#160;&#160;&#160;foreach temp from {25, 30}
&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160; mvarsearch {<br />   option {<br />   accuracy = 1e-3     // convergence tolerance of trans<br />   deltax = 1e-3       // step length<br />   maxiter = 100       // limit to 100 iterations<br />   restoreParam=1      // a must<br />  }<br />  parameter {<br />   {pw, 2u, 0.05u, 10u}<br />   {nw, 2u, 0.05u, 10u}<br />  }<br />  exec {<br />   run trans<br />  }<br />  zero {<br />   tmp1 = trans-&gt;rise-25p<br />   tmp2 = trans-&gt;fall-25p<br />    }<br />  }<br /> }<br />}</pre>

<p>
<a id="pgfId-1042567"></a>The above example results in the following output (with <code>-tab</code> option in the spectre =mdl command line):</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1042569"></a>Swept Measurements :
Measurement Name   :  trans
Analysis Type      :  tran
v_vdd&#160;&#160;&#160;&#160; temp  pw   nw   fall           rise<br />3&#160;&#160;&#160;&#160; 25  5.58951e-06   4.08718e-06   2.38087e-11            2.62996e-11<br />3&#160;&#160;&#160;&#160; 30  3.6754e-06   3.39895e-06   2.41e-11       2.66064e-11<br />2.5&#160;&#160;&#160;&#160; 25  3.72744e-06   2.05837e-06   2.32133e-11    2.87913e-11<br />2.5&#160;&#160;&#160;&#160; 30  3.35662e-06   1.84146e-06   2.41816e-11 2.96455e-11</pre>
<h2>
<a id="pgfId-1042535"></a><a id="70425"></a>Include Statement</h2>

<p>
<a id="pgfId-1039646"></a>The <code>include</code> statement provides a way for you to insert the contents of an MDL control file into another control file. This feature is useful for creating an MDL control file using other control files as components.</p>

<a id="pgfId-1039736"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
include_statement ::=
    <strong>include</strong> <strong>&#8220;</strong><code><em>mdlfile</em></code><strong>&#8221;</strong></pre>
<p>
<a id="pgfId-1050271"></a></p>
<table class="webflareTable" id="#id1050275">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050277"></a><span class="webflare-courier-new" style="white-space:pre"><em>mdlfile</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050279"></a>Path and filename of the MDL file to be inserted.</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1039796"></a>Remember the following rules when using the <code>include</code> statement.</p>
<ol><li>
<a id="pgfId-1039797"></a>The <code>include</code> statement is allowed at the top level of the MDL file only.</li><li>
<a id="pgfId-1039810"></a>Alias measurement blocks, foreach, search, mvarsearch, and montecarlo statements do not support the <code>include</code> statement as a subordinate command.</li></ol>

<p>
<a id="pgfId-1039668"></a>In the following example,</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1039672"></a>//File main.mdl<br />include &quot;simple.mdl&quot;<br />run tr</pre>

<p>
<a id="pgfId-1039836"></a>the <code>main.mdl</code> and <code>simple.mdl</code> files are placed in the current directory.</p>
<p>
<a id="pgfId-1039823"></a>In the following example,</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1039889"></a>//File simple.mdl
include &quot;meas/mdl2.2&quot;
alias measurement t
run tran(stop=140n)
&#160;&#160;&#160;&#160;export real val1=3*V(11)
&#160;&#160;&#160;&#160;}<br />run tr3<br />include &quot;meas/mdl1.2&quot;<br />run tr2 </pre>

<p>
<a id="pgfId-1039890"></a>the <code>mdl1.2</code> and <code>mdl1.2</code> files are placed in the <code>meas</code> directory.</p>

<h2>
<a id="pgfId-1041102"></a><a id="52692"></a><a id="58156"></a>Evaluating Expressions Selectively</h2>

<p>
<a id="pgfId-1039915"></a>You can specify the criteria based on which you want MDL to run other statements and evaluate expressions.</p>

<h3>
<a id="pgfId-1039916"></a>If/Else Statement</h3>

<p>
<a id="pgfId-1039922"></a>The <code>if/else</code> statement provides a way for MDL to run other statements selectively according to criteria that you specify.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1040146"></a>if ( <code><em>CONDITION</em></code> ) {
&#160;&#160;&#160;&#160;<code><em>TRUESTATEMENTS<br /></em></code> }<br />[ 
(
&#160;&#160;&#160;&#160;else if (<code><em>ELSEIFCONDITION</em></code>) {
&#160;&#160;&#160;&#160;<code><em>ELSEIFSTATEMENTS<br /></em></code> }<br />)+<br />]<br />[ <br />else {<br /><code><em>FALSEESTATEMENTS<br /></em></code>}<br />]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1050328"></a></pre>
<table class="webflareTable" id="#id1050332">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050334"></a>[...]</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050336"></a>Optional block.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050381"></a>(...)+</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050383"></a>Indicates that the block can be repeated.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050385"></a><code>if</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050387"></a>Indicates that this is an if block of the <code>if/else</code> statement.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050443"></a><code>else</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050445"></a>Indicates that this is an else block of the <code>if/else</code> statement.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050447"></a><span class="webflare-courier-new" style="white-space:pre"><em>CONDITION</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050449"></a>Conditional expression which returns 1 if the condition is true and 0 if the condition is false.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050451"></a><span class="webflare-courier-new" style="white-space:pre"><em>ELSEIFCONDITION</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050453"></a>Conditional expression which returns 1 if the condition is true and 0 if the condition is false.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050544"></a><span class="webflare-courier-new" style="white-space:pre"><em>TRUESTATEMENTS</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050546"></a>Statements that are read only if <code>CONDITION</code> is true.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050548"></a><span class="webflare-courier-new" style="white-space:pre"><em>ELSEIFSTATEMENTS</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050550"></a>Statements that are read only if <code>ELSEIFCONDITION</code> is true and <code>CONDITION</code> and all previous <code>ELSEIFCONDITION</code> are false.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050552"></a><span class="webflare-courier-new" style="white-space:pre"><em>FALSESTATEMENTS</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050554"></a>Statements that are read only if <code>CONDITION</code> and all previous <code>ELSEIFCONDITION</code> are only.</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1039924"></a>The <code>if/else</code> statement is allowed </p>
<ul><li>
<a id="pgfId-1039928"></a>at the top level of an MDL file, and it can include assign, run, mvarsearch, search, foreach, montecarlo, print statements</li><li>
<a id="pgfId-1040342"></a>inside alias measurement block and executed blocks of mvarsearch, search, montecarlo, foreach statements</li></ul>


<h4>
<a id="pgfId-1039979"></a>Example 1</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1039980"></a>int count=0
foreach count from swp(start=1, stop=3, step=1) {
&#160;&#160;&#160;&#160;if (count==1)
&#160;&#160;&#160;&#160; {<br />   run tr3<br />  }<br /> else if (count == 2) <br /> {<br />  if (tr2-&gt;val2 == 5)<br />  {<br />   run tr2<br />  }<br />  run tr1<br /> }<br /> else<br /> {<br /> run tr2<br /> }<br />}</pre>
<h4>
<a id="pgfId-1040000"></a>Example 2</h4>

<p>
<a id="pgfId-1040001"></a>The following example shows the value of v(11) change from 0 to 5 during the simulation.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1040004"></a>alias measurement tr1 {
&#160;&#160;&#160;&#160;run tran(stop=160n)
&#160;&#160;&#160;&#160;export real val2
&#160;&#160;&#160;&#160;export real val1
&#160;&#160;&#160;&#160;export real val3
&#160;&#160;&#160;&#160;export real val4
&#160;&#160;&#160;&#160;export real val5
&#160;&#160;&#160;&#160;export real val6
&#160;&#160;&#160;&#160;export real val7
&#160;&#160;&#160;&#160;export real val8</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1040624"></a>if ( v(11) &gt; 4)
{
&#160;&#160;&#160;&#160;if  ( v(11) &lt; 4.06 )
&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160; val1=v(11)<br /> }<br /> val2 = min(v(11))<br />}
else if ( v(11) &gt; 3 )
{
&#160;&#160;&#160;&#160;if ( (v(11) &gt; 3.5) &amp;&amp; (v(11)&lt;3.7) )
&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160; val3= max( v(11)<br />  val4= v(11)<br /> }<br /> else<br /> {<br />  val5=v(11)<br />  val6=max(v(11))<br /> }<br />}
else
{
&#160;&#160;&#160;&#160;val7 = max(v(11))
&#160;&#160;&#160;&#160;val8 = v(11)
&#160;&#160;&#160;&#160;}<br />}<br />run tr1 </pre>

<p>
<a id="pgfId-1040047"></a>In the example above, <code>val7</code> <code>= 2.955</code>, because the max function is a buffered function and assign statement <code>val7 = max(v(11))</code> is executed while <code>v(11) </code>&lt;= 3.</p>

<h3>
<a id="pgfId-1040661"></a>Ternary Expression Statement</h3>

<p>
<a id="pgfId-1040814"></a>The ternary expression statement provides a way for MDL to evaluate expressions selectively according to criteria that you specify. A ternary expression statement may be used at any location where an expression is supported. Furthermore, as this statement is an expression, its return value may be used as the argument to an assignment statement.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1040674"></a>(<code><em>CONDITION</em></code>) ? <code><em>TRUEEXPRESSION</em></code> : <code><em>FALSEEXPRESSION</em></code></pre>
<p>
<a id="pgfId-1050643"></a></p>
<table class="webflareTable" id="#id1050647">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050649"></a><code>?</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050651"></a>MDL keyword indicating that this is a ternary if-operator.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050697"></a><code>:</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050699"></a>MDL keyword separates TRUEEXPRESSION and FALSEEXPRESSION.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050701"></a><span class="webflare-courier-new" style="white-space:pre"><em>CONDITION</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050703"></a>Conditional expressions which returns <code>1</code> if the condition is true and <code>0</code> if the condition is false.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050705"></a><span class="webflare-courier-new" style="white-space:pre"><em>TRUEEXPRESSION</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050707"></a>Expression returned if <span class="webflare-courier-new" style="white-space:pre"><em>CONDITION</em></span> is true.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050795"></a><span class="webflare-courier-new" style="white-space:pre"><em>FALSEEXPRESSION</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050797"></a>Expression returned if <span class="webflare-courier-new" style="white-space:pre"><em>CONDITION</em></span> is false.</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1043876"></a>Remember the following when using a ternary expression statement:</p>
<ul><li>
<a id="pgfId-1043889"></a>Add a space before a not-equal-mark (!=). This is to differentiate the not-equal from value assignment to a global signal which is usually suffixed with &#8220;!&#8221;.</li><li>
<a id="pgfId-1043884"></a>Add a parenthesis before the colon mark (:) when a letter follows it. This is to differentiate the <span class="webflare-courier-new" style="white-space:pre"><em>TRUEEXPRESSION</em></span> from the expression of <span class="webflare-courier-new" style="white-space:pre"><em>instance</em></span><code>:</code><span class="webflare-courier-new" style="white-space:pre"><em>terminal</em></span></li></ul>


<h4>
<a id="pgfId-1043880"></a>Example</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1043877"></a>val2 = (v(11) == 5)&amp;&amp;(val1 != &#39;nan) ? v(11) : 2*v(11)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1040789"></a>val3 =(val1 != &#39;nan)?&#160;&#160;mag( V(11)==5?max(V(11)):10 )+3 :&#160;&#160; 2*V(11)</pre>
<h2>
<a id="pgfId-1039914"></a><a id="56396"></a>Specifying the Output File Format</h2>

<p>
<a id="pgfId-1044392"></a>The print statement provides a way for you to write strings and variables (such as parameters and measurement results) from an MDL control file to the standard output file or an output file defined by you. </p>
<p>
<a id="pgfId-1044398"></a>You can add a print statement at the following levels:</p>
<ul><li>
<a id="pgfId-1044399"></a>at the top level of an MDL control file</li><li>
<a id="pgfId-1044400"></a>at the level of an alias measurement </li><li>
<a id="pgfId-1044401"></a>inside a foreach looping statement</li><li>
<a id="pgfId-1044402"></a>inside an optimization looping statement (such as <code>search</code> or <code>mvarsearch</code>)</li><li>
<a id="pgfId-1044403"></a>inside a monte-carlo analysis</li></ul>





<a id="pgfId-1044473"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
print _statement::=
print fmt <strong>(</strong> <strong>&quot;</strong>format<strong>&quot;</strong>, <code><em>args </em></code><strong>)</strong> [ <strong>to=</strong><code><em>file </em></code>| <strong>addto=</strong><code><em>file</em></code> ]</pre>
<a id="pgfId-1044504"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
format::=
% [ flag ][ width][ .<code>precision</code> ] type [ \n| \t ]</pre>
<a id="pgfId-1045176"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
flag::=
<strong>-</strong></pre>
<a id="pgfId-1045634"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
type::=
<strong>d,i</strong> | <strong>E,e</strong> | <strong>f</strong> | <strong>G,g</strong> | <strong>o</strong> | S | <strong>s</strong> | <strong>u</strong> | <strong>X,x</strong> | <strong>V</strong></pre>
<h4>
<a id="pgfId-1038988"></a>Example 1</h4>
<table class="webflareTable" id="#id1050841">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050843"></a><code>flag</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050845"></a>Symbol used to align the text in the output file. <code>-</code> left-aligns the text. If <code>flag</code> is not specified, the text is right-aligned.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050891"></a><code>width</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050893"></a>Minimum field width.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050895"></a><em>precision</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050897"></a>Maximum number of the significant digits to be printed for <code>g</code>, <code>G</code>, <code>S</code>, and <code>s</code> types, or the number of decimal digits to be printed for <code>e,E</code> and <code>f</code> types.<br />Default value: 6</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050899"></a><code>type</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050901"></a>Defines how the text is to be printed to the output file. The following are supported in MDL:<br /><code>d,i</code> &#8211; signed decimal integer<br /><code>E,e</code> &#8211; floating point (in scientific notation)<br /><code>f</code> &#8211; floating point (in decimal)<br /><code>G,g</code> &#8211; the shorter of %e, %E and %f (suppresses non-significant zeros)<br /><code>o</code> &#8211; unsigned octal integer<br /><code>S</code> &#8211; engineering scale number (e.g. 5m, 5K)<br /><code>s</code> &#8211; string<br /><code>u</code> &#8211; unsigned decimal integer<br /><code>X,x</code> &#8211; unsigned hexadecimal integer.<br /><code>V</code> &#8211; the value of the args</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050987"></a>\n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050989"></a>Specifies that a new line is to be inserted.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050991"></a>\t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1050993"></a>Specifies that a tab space is to be inserted. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051055"></a><code>to</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051057"></a>Specifies that the existing results in the output file are to be overwritten by the new results. You should use the <code>to</code> option in the first print statement to clean the old results in the specified results file.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051059"></a><code>addto</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051061"></a>Specifies that the results are to be appended to the output file.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051119"></a><span class="webflare-courier-new" style="white-space:pre"><em>file</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051121"></a>File name.</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1046106"></a>The <code>enum</code>, <code>string</code>, <code>net</code>, <code>term</code> and <code>analysis</code> type data can be output by print statements. The following example shows output of both numbers and strings.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1045664"></a>alias measurement printmeas {
&#160;&#160;&#160;&#160;input string out=&quot;myfile.out&quot;
&#160;&#160;&#160;&#160;print fmt(&quot;Header is %s\n&quot;, out) to=out
&#160;&#160;&#160;&#160;print fmt(&quot;%s\t%s\t\t%s\t%s\t%s\n&quot;, &quot;maxq&quot;, &quot;minq&quot;, &quot;REG&quot;, \
&#160;&#160;&#160;&#160;&quot;INTREG&quot;, &quot;REALREG&quot;) addto=out</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1045685"></a> run tran1<br /> export real maxq=max(V(q))<br /> export real minq=min(V(q))<br /> enum REG = i0.mp0:region<br /> export int INTREG = i0.mp0:region<br /> export real REALREG = real(REG)<br /> print fmt(&quot;%V\t%V\t%V\t%V\t%V\n&quot;,maxq, minq, REG, INTREG, \<br /> REALREG) addto=out<br /> print fmt(&quot;\n%s\t%s\t%s\t%s\t%s\t%s\t%s\n&quot;, \ <br />  &quot;%d&quot;,&quot;%i&quot;,&quot;%g&quot;,&quot;%G&quot;,&quot;%e&quot;,&quot;%E&quot;,&quot;%f&quot;) addto=out<br /> print fmt(&quot;%d\t%i\t%g\t%G\t%e\t%E\t%f\n\n&quot;, \<br />  10,10,10,10,10,10,10) addto=out<br /> print fmt(&quot;\n%s\t%s\t%s\t%s\n&quot;, &quot;%o&quot;,&quot;%x&quot;,&quot;%X&quot;,&quot;%u&quot;) addto=out<br /> print fmt(&quot;%o\t%x\t%X\t%u\n&quot;,10,10,10,10) addto=out<br />}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1039003"></a>run printmeas (out=&quot;test.dat&quot;)</pre>

<p>
<a id="pgfId-1039005"></a>The simulator writes the following results to the <code>test.dat</code> file:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044789"></a>Header is test.dat</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044798"></a>maxq&#160;&#160;&#160;&#160; minq   REG  intReG  realREG<br />1.81826&#160;&#160;&#160;&#160; -0.0144086   off  0  0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044801"></a>%d&#160;&#160;&#160;&#160;%i&#160;&#160;&#160;&#160;%g&#160;&#160;&#160;&#160;%G&#160;&#160;&#160;&#160;%e&#160;&#160;&#160;&#160;  %E   %f<br />10&#160;&#160;&#160;&#160;10&#160;&#160;&#160;&#160;10&#160;&#160;&#160;&#160;10&#160;&#160;&#160;&#160;1.000000e+01&#160;&#160;&#160;&#160;  1.000000E+01   10.000000</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044804"></a>%o&#160;&#160;&#160;&#160; %x  %X  %u<br />12&#160;&#160;&#160;&#160; a  A  10</pre>
<h4>
<a id="pgfId-1044841"></a>Example 2</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046134"></a>print fmt (&quot;\n****Print Results of Foreach Sweep:****\n\n&quot;) addto=&quot;print.dat&quot;
print fmt (&quot;%-15s%-15s%-15s%-15s\n&quot;, &quot;Vdd&quot;, &quot;delay&quot;, &quot;rise&quot;, &quot;fall&quot;) addto=&quot;print.dat&quot;
foreach vdd from {1.5, 1.8, 2} {
&#160;&#160;&#160;&#160;run tranmeas
&#160;&#160;&#160;&#160;print fmt(&quot;%-15g%-15e%-15S%-15.8S\n&quot;, vdd, tranmeas-&gt;q_delay, \
&#160;&#160;&#160;&#160; tranmeas-&gt;q_rise_time, tranmeas-&gt;q_fall_time) addto=&quot;print.dat&quot;<br />}</pre>

<p>
<a id="pgfId-1046140"></a>The simulator writes the following results to the <code>print.dat</code> file:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044855"></a>****Print Results of Foreach Sweep:****</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1045749"></a>Vdd&#160;&#160;&#160;&#160; delay   rise   fall<br />1.5&#160;&#160;&#160;&#160; 2.016334e-10   106.898p       66.053876p<br />1.8&#160;&#160;&#160;&#160; 1.618669e-10   87.7326p       60.830271p<br />2&#160;&#160;&#160;&#160; 1.460035e-10&#160;&#160; 79.6162p&#160;&#160;     58.993397p</pre>
<h4>
<a id="pgfId-1045753"></a>Example 3</h4>

<p>
<a id="pgfId-1045754"></a>The following example shows how to print the intermediate results of an <code>mvarsearch</code> statement.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044974"></a>print fmt (&quot;\n****Print Results of Optimization Analysis****\n\n&quot;) to=&quot;print_opt.dat&quot;
print fmt (&quot;%-15s%-15s%-15s%-15s\n&quot;, &quot;pw&quot;,&quot;nw&quot;,&quot;rise&quot;,&quot;fall&quot;) addto=&quot;print_opt.dat&quot;
mvarsearch {
&#160;&#160;&#160;&#160;...
&#160;&#160;&#160;&#160;exec {
&#160;&#160;&#160;&#160;print fmt(&quot;%-15e%-15e&quot;, pw, nw) addto=&quot;print_opt.dat&quot;
&#160;&#160;&#160;&#160;run trans
&#160;&#160;&#160;&#160;print fmt(&quot;%-15e%-15e\n&quot;, trans-&gt;rise,trans-&gt;fall) \
&#160;&#160;&#160;&#160; addto=&quot;print_opt.dat&quot;<br /> }<br /> ...<br />}</pre>

<p>
<a id="pgfId-1044938"></a>The simulator writes the following results to the <code>print_opt.dat</code> file:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044940"></a>****Print Results of Optimization Analysis****</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1045067"></a>pw&#160;&#160;&#160;&#160;  nw   rise   fall<br />2.000000e-06&#160;&#160;&#160;&#160;  2.000000e-06   2.469632e-11   2.371606e-11<br />2.063246e-06&#160;&#160;&#160;&#160;  2.000000e-06   2.451040e-11   2.387945e-11<br />...
...
2.007259e-06&#160;&#160;&#160;&#160;  1.719886e-06   2.499470e-11   2.500292e-11<br />2.007259e-06&#160;&#160;&#160;&#160;  1.719886e-06   2.499470e-11   2.500292e-11</pre>
<h2>
<a id="pgfId-1044794"></a><a id="marker-1044792"></a><a id="89622"></a>Autostop</h2>

<p>
<a id="pgfId-1034993"></a>Autostop is a feature that halts simulation as soon as enough data has been collected to evaluate the MDL expressions associated with a transient analysis. Using the autostop feature can save you an enormous amount of simulation time when you characterize circuits. The autostop feature is supported only for transient analysis.</p>
<p>
<a id="pgfId-1035115"></a>Only functions that determine specific events, such as delay and event measurements, can cause an automatic stop. However, if non-event functions such as <code>max</code> and <code>min</code> are included in the same measurement alias, the functions are evaluated over the simulation period defined by the event functions.</p>
<p>
<a id="pgfId-1035094"></a>To use the autostop feature, you turn on the autostop parameter of the <code>tran</code> statement. For example, the <code>tran</code> statement defined in the design file might look like this.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1035003"></a>tran1 tran stop=6u method=gear2only autostop=yes</pre>

<p>
<a id="pgfId-1035004"></a>Then, in the MDL control file, you specify the information you want to gather. For example, your control file might look like this.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1035136"></a>alias measurement trans {
run tran1
&#160;&#160;&#160;&#160;export real out_1u=V(out)@1u
&#160;&#160;&#160;&#160;export real prop_delay_fall=deltax(sig1=V(inp), sig2=V(out), dir1=&#8217;fall,
&#160;&#160;&#160;&#160;   n1=1, start1=0, thresh1=1.5, dir2=&#8217;fall, n2=1, start2=0, thresh2=1.5)<br />}<br />run trans</pre>

<p>
<a id="pgfId-1035164"></a>This example control file contains two expressions. The first measures the output voltage at 1μs, and the second determines the delay between the input and output falling edges. Because the autostop feature is enabled, the simulation runs only as long as necessary to calculate the two specified values.</p>
<p>
<a id="pgfId-1035183"></a>If the control file also specifies a third expression such as </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1035160"></a>export real outmax=max(V(out))</pre>

<p>
<a id="pgfId-1035014"></a>the simulator finds the maximum value only in the part of the simulation prior to the automatic halt. If there happens to be a greater maximum that occurs after the automatic halt, the simulator does not find it when autostop is enabled.</p>

<h2>
<a id="pgfId-1039120"></a><a id="18165"></a>Monte Carlo</h2>

<p>
<a id="pgfId-1039124"></a>Monte Carlo statements provide a way to run Monte Carlo in MDL for measurement and statistical figures of merit. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1039126"></a>montecarlo_statement&#160;&#160;&#160;&#160;::=<br />run montecarlo   ( options_statements ) <br />{ </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1039203"></a>block of statements <br />}<br />options_statement ::=</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1039217"></a> [numruns = &lt;int&gt;, ]<br /> [seed = &lt;int&gt;, ]<br /> [variations= &lt;&#39;process |&#39;mismatch |&#39;all &gt;, ]<br /> [sampling=&lt;&#39;standard |&#39;lds |&#39;lhs&gt;, ]<br /> [firstrun = &lt;int&gt;, ]<br /> [ donominal = &lt; &#39;yes, &#39;no&gt;, ] <br /> [ scalarfile  =filename, ]<br /> [ appendsd&#160;&#160;= &lt; &#39;yes, &#39;no &gt;, ]</pre>

<p>
<a id="pgfId-1039143"></a>For more information on the <code>block of statements</code>, see <a href="chap1.html#18899">Using a Measurement Alias</a>.The options in the <code>options_statement</code> are consistent with the Monte Carlo analysis in Spectre. For more information on these options, see the <em>Spectre Classic Simulator, Spectre Accelerated Parallel Simulator (APS), and Spectre Extensive Partitioning Simulator (XPS) User Guide</em>. </p>
<p>
<a id="pgfId-1040899"></a>From the MMSIM6.1 release, you can have a Monte Carlo statement inside a foreach loop.</p>
<p>
<a id="pgfId-1039151"></a>The following information is written to the output file:</p>
<ul><li>
<a id="pgfId-1039153"></a>number of iterations </li><li>
<a id="pgfId-1039154"></a>exported measurement values for each of runs </li></ul>

<p>
<a id="pgfId-1039156"></a>Statistical figures of merit are also computed and output as part of the termination of the MDL Monte Carlo run:</p>

<p>
<a id="pgfId-1051154"></a></p>
<table class="webflareTable" id="#id1051158">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051160"></a><code>max</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051162"></a>The maximum value.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051208"></a><code>min</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051210"></a>The minimum value.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051212"></a><code>mean</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051214"></a>The mean value.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051216"></a><code>var</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051218"></a>The variance from the mean.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051220"></a><code>stddev</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051222"></a>The standard deviation.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051336"></a><code>avgdev</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051338"></a>The average deviation, mean absolute deviation.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051340"></a><code>failedtime</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1051342"></a>The number of failed runs.</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1042508"></a>When the monte carlo analysis is run in MDL for measurement, <code>max</code>, <code>min</code>, <code>mean</code>, <code>var</code>, <code>stddev</code>, and <code>avgdev</code> are computed and written to the output file and NULL values are ignored.</p>
<p>
<a id="pgfId-1048079"></a>For more information on the functions, see <a href="appA.html#49863">Appendix A, &#8220;Built-In Functions,&#8221;</a>.</p>
<p>
<a id="pgfId-1039165"></a>For example, you can define a measurement and Monte Carlo statement like the following for a flip-flop circuit </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1039507"></a>alias measurement tranmeas { 
export real rise_out
&#160;&#160;&#160;&#160;run tran(stop=40n, errpreset=&#39;conservative)
&#160;&#160;&#160;&#160;rise_out=risetime(V(q), initval=minq, finalval=maxq, inittype=&#39;y, \\
&#160;&#160;&#160;&#160;finaltype=&#39;y, theta1=10, theta2=90)<br />}<br />run montecarlo ( scalarfile=&quot;dflip.dat&quot;,numruns=50, seed=8, donominal=&#39;no, variations=&#39;all, sampling=&#39;lds firstrun=1) <br />{<br />run tranmeas<br />}</pre>
<h2>
<a id="pgfId-1040945"></a><a id="82513"></a>Supported Spectre Circuit S<a id="spectrereliabilityanalysis"></a>imulator Analyses</h2>

<p>
<a id="pgfId-1043069"></a>MDL supports the following Spectre circuit simulator analyses inside an alias measurement block:</p>
<ul><li>
<a id="pgfId-1043637"></a>Transient analysis, including transient noise, transient ac, and transient info (<code>tran</code>)</li><li>
<a id="pgfId-1043075"></a>AC analysis (<code>ac</code>)</li><li>
<a id="pgfId-1043094"></a>DC analysis (<code>dc</code>) </li><li>
<a id="pgfId-1043096"></a>Sweep analysis (<code>sweep</code>)</li><li>
<a id="pgfId-1043079"></a>Noise analysis (<code>noise</code>)</li><li>
<a id="pgfId-1043925"></a>Monte Carlo (<code>montecarlo</code>)</li><li>
<a id="pgfId-1044152"></a>Circuit Information (<code>info</code>)</li><li>
<a id="pgfId-1044153"></a>Alter Group (<code>altergroup</code>)</li><li>
<a id="pgfId-1043926"></a>S-parameter analysis (<code>sp</code>)</li><li>
<a id="pgfId-1047532"></a>Stability Analysis (<code>stb</code>)</li><li>
<a id="pgfId-1047593"></a>Reliability Analysis (<code>rel</code>)</li></ul>










<p>
<a id="pgfId-1043132"></a>The analysis can be defined in the netlist or in the MDL control file.</p>
<p>
<a id="pgfId-1043927"></a>The following table displays the syntax differences between Spectre and MDL.</p>

<p>
<a id="pgfId-1044349"></a></p>
<table class="webflareTable" id="#id1044261">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1044263">
<a id="pgfId-1044263"></a>Analysis</span>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1044265">
<a id="pgfId-1044265"></a>Spectre Circuit Simulator Syntax</span>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1044267">
<a id="pgfId-1044267"></a>MDL Syntax</span>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044269"></a>transient</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044271"></a>tran1 tran stop=1u errpreset=conservative</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044273"></a>run tran1 [as tran2]</pre>
<p>
<a id="pgfId-1044274"></a>or</p>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044275"></a>run tran (stop=1u, errpreset=&#8217;conservative) [as tran2]</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1046202"></a>transient ac</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046204"></a>tran2 tran actimes=[0 20n 40n] acnames=[CaptabInfo ac-2] stop=40n</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046213"></a>run tran2</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046216"></a>or</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046206"></a>run tran ( actimes={0, 20n, 40n}, acnames={CaptabInfo, ac-2}, stop=40n}</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1046196"></a>transient info</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046198"></a>tran3 tran infotimes=[10n 30n] infoname=opInfo stop=40n</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046200"></a>run tran3</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046221"></a>or</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046224"></a>run tran ( infotimes={10n, 30n}, infoname=opInfo, stop=40n}</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044277"></a>transient noise</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044279"></a>tran1 tran stop=50n noiseseed=10<br />noisefmax=30G noisefmin=1M </pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044281"></a>run tran ( stop=50n, noiseseed=10, noisefmax=30G, noisefmin=1M )</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044283"></a>AC</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044285"></a>ac1 ac start=0.1G stop=1G dec=25 </pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044287"></a>run ac1 [as ac2]</pre>

<p>
<a id="pgfId-1044288"></a>or</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044289"></a>run ac (start=0.1G, stop=1G, dec=25) [as ac2]</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044291"></a>DC</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044293"></a>dc1 dc oppoint=logfile </pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044295"></a>run dc1 [as dc2]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044296"></a>or</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044297"></a>run dc (oppoint=&#39;logfile) [as dc2]</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044299"></a>DC sweep</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044301"></a>dcswp1 dc param=temp start=-40 stop=40 step=10</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044303"></a>run dcswp1 [as dcswp2]</pre>

<p>
<a id="pgfId-1044304"></a>or</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044305"></a>run dc (param=temp, start=-40, stop=40, step=10) [as dcswp2]</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044307"></a>sweep</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044309"></a>swp1 sweep param=temp values=[25 50] {<br />  swp2 sweep param=vdd values=[0.8    3.3] {<br />   tran1 tran stop=10n</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044310"></a>  }<br />}</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046772"></a>run swp1</pre>
<p>
<a id="pgfId-1046773"></a>or</p>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046770"></a>foreach temp swp from{25, 50} {<br />  foreach vdd swp from {0.8, 3.3}<br />{<br />   run tran(stop=10n)<br />  }<br />}</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044314"></a>noise</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044316"></a>findNoise (out gnd) noise oprobe=out iprobe=v4 start=1 stop=1MHz dec=10 </pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044318"></a>run findNoise [as findNoise2]</pre>

<p>
<a id="pgfId-1044319"></a>or</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044320"></a>run noise( oprobe=out, iprobe=v4, start=1, stop=1M dec=10, terminals={&quot;out&quot;,&quot;gnd&quot;}) [as findNoise2]</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044322"></a>montecarlo</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044324"></a>mc1 montecarlo scalarfile=monte5a.dat numruns=10 variations=all seed=1 sampling=lds{<br />&#8230;<br />}</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044326"></a>run montecarlo (scalarfile=&quot;monte4.dat&quot;, numruns=10, variations=&#39;all, seed=1 sampling=&#39;lds) {<br />&#8230;<br />}</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044328"></a>circuit information </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044330"></a>dcOpInfo info what=oppoint where=rawfile</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044332"></a>run dcOpInfo [as dcOpInfo2]</pre>

<p>
<a id="pgfId-1044333"></a>or</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044334"></a>run info (what=&#39;oppoint where=&#39;rawfile) [as dcOpInfo2]</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044336"></a>alter group</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044338"></a>alter1 altergroup { &#8230;}</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044340"></a>run alter1 [as alter2]</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1044342"></a>S-parameter</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044344"></a>sp1 sp ports=[PORT_1 PORT_2] dec=20 start=0.1G stop=20G</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044346"></a>run sp1 [as sp2]</pre>

<p>
<a id="pgfId-1044347"></a>or</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1044348"></a>run sp (ports={PORT_1, PORT_2}, dec=20, start=0.1G, stop=20G) [as sp2]</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1047542"></a>Stability Analysis</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1047544"></a>stb1 stb start=1 stop=1e10&#160;&#160;dec=100 probe=Vprobe</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1047546"></a>run stb(start=1, stop=1e10, dec=100, probe=Vprobe)</pre>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1047606"></a>Reliability Analysis</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1047902"></a>rel reliablity {<br />age time = [10y] <br />deltad value = 0.1<br />&#8230;&#8230;<br />//run analysis<br />&#8230;&#8230;<br />}</pre>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1047972"></a>run reliability (time_age={10y}, deltad_value = 0.1 ) {<br />&#8230;&#8230;<br />//run MDL measurement</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1047976"></a>&#8230;&#8230;<br />}</pre>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1049762"></a>For the reliability commands and their equivalent MDL commands, see <a href="appD.html#49863">Appendix D, &#8220;Reliability Commands in MDL&#8221;</a>.</div>

</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1044375"></a>Note that <code>ac</code> or <code>info</code> analyses used as part of a <code>tran</code> statement (<code>opInfo</code>, <code>ac-2</code>, and <code>CaptabInfo</code> in the above table) must be defined in the netlist.</p>
<p>
<a id="pgfId-1046237"></a>Almost all Spectre netlist pre-defined core analyses are supported by MDL, except for sweep and montecarlo analyses. Therefore almost any predefined analysis can be defined and run outside the alias measurement blocks in an MDL control file, such as at the top level or anywhere a run statement may be present which includes inside the foreach, montecarlo, search and mvarsearch statements. But the results may not be accessible, nor may measurements be performed on the results as real time data from analyses is accessible only when the analysis is supported inside an alias measurement block. </p>

<h2>
<a id="pgfId-1044352"></a><a id="60306"></a>Supported Spectre Circuit Simulator Formats</h2>

<p>
<a id="pgfId-1040946"></a>The following Spectre circuit simulator formats allow the creation of an MDL <code>.measure</code> file:</p>
<ul><li>
<a id="pgfId-1040947"></a>PSFBIN</li><li>
<a id="pgfId-1040948"></a>PSFASCII</li><li>
<a id="pgfId-1040949"></a>SST2</li><li>
<a id="pgfId-1040950"></a>FSDB</li><li>
<a id="pgfId-1040951"></a>WDF</li><li>
<a id="pgfId-1040952"></a>TR0ASCII</li></ul>





<p>
<a id="pgfId-1040953"></a>The following Spectre circuit simulator formats are not supported and do not allow the creation of an MDL <code>.measure</code> file:</p>
<ul><li>
<a id="pgfId-1040954"></a>PSFBINF</li><li>
<a id="pgfId-1040963"></a>WSFBIN</li><li>
<a id="pgfId-1040964"></a>WSFASCII</li><li>
<a id="pgfId-1040965"></a>NUTBIN</li><li>
<a id="pgfId-1040966"></a>NUTASCII</li></ul>





<h2>
<a id="pgfId-1041471"></a><a id="38314"></a>Optimizations and Tips and Tricks</h2>
<h3>
<a id="pgfId-1041474"></a>Data Output Optimizations</h3>

<ol><li>
<a id="pgfId-1041475"></a>Use simulator option <code>save=nooutput</code> in your design file to disable simulator data save and enhance performance. If you want to save simulator data, use <code>save=selected</code> in your design file and specify the signals to be saved.</li><li>
<a id="pgfId-1047284"></a>Use the <code>-rmrawfiles</code> command line option to delete the <code>.raw</code> directory after each MDL run. The <code>.measure</code> file is preserved. This minimizes disk space usage between runs.</li><li>
<a id="pgfId-1041481"></a>Use <code>rawfmt=psfbin</code> (default setting) for best output performance.</li><li>
<a id="pgfId-1041482"></a>Only export the variables that you need written to the <code>.measure</code> file. </li></ol>




<h3>
<a id="pgfId-1047270"></a>Performance Optimizations</h3>

<ol><li>
<a id="pgfId-1047275"></a>Use the paramset in the <code>foreach</code> loop if multiple <code>foreach</code> runs are desired.</li><li>
<a id="pgfId-1047272"></a>Use the <code>autostop</code> parameter on the transient analysis runs with the functions <code>cross()</code>, <code>trim()</code>, <code>deltax()</code> to specify termination of the analysis run after values have been computed.</li><li>
<a id="pgfId-1041490"></a>Use default accuracy (<code>moderate</code>) on the transient analysis, as MDL thresholds and breakpoints ensure accuracy. You do not need to specify small timesteps for equivalent accuracy with MDL.</li><li>
<a id="pgfId-1041493"></a>Instead of recomputing multiple identical expressions, use a single expression computation and temporary variables in the measurement aliases.</li><li>
<a id="pgfId-1041496"></a>To speed up <code>mvarsearch</code> runs, set the nominal value of each varied parameter close to the expected value, if known.</li><li>
<a id="pgfId-1041498"></a> Use multiple measurement functions such as <code>crosses()</code> and <code>dutycycles()</code> instead of using multiple<code> cross()</code> or <code>dutycycle()</code> measurements.</li></ol>






<h3>
<a id="pgfId-1041501"></a>MDL Reuse</h3>

<ol><li>
<a id="pgfId-1041502"></a>Use parameterized alias measurements and <code>include</code> statements for MDL alias measurement code reuse.</li><li>
<a id="pgfId-1041504"></a>To share data between alias measurement runs, or access data from a run at the top level, use the <code>-&gt;</code> operator in the top level constructs for accessing previous alias measurement run results.</li><li>
<a id="pgfId-1041507"></a>When using the <code>-&gt;</code> operator to access computed data, remember that re-naming the measurement alias run using the <code>as</code> command changes the measurement alias name for the &#8220;-&gt;&#8221; operator. For example, <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1041510">
<a id="pgfId-1041510"></a>alias measurement maxout 
{
   input net mynet;
export real out;
run tran1; 
   out = max(V(mynet));
}</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1041517">
<a id="pgfId-1041517"></a>run maxout(mynet=out); 
// maxout-&gt;out = max(V(out))</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1042089">
<a id="pgfId-1042089"></a>run maxout(mynet=dout) as maxdout;
// maxout-&gt;out = max(V(out))</pre></li><li>
<a id="pgfId-1041524"></a>Avoid the use of design file global variables, if possible. Instead, use the input variable functionality of MDL to pass parameter values to the measurement alias.</li><li>
<a id="pgfId-1041527"></a>Use <code>;</code> at the end of each statement in a measurement alias.</li><li>
<a id="pgfId-1041528"></a>Use the <code>V()</code> and I() access functions to access voltages and currents instead of just inserting the signal name itself.</li><li>
<a id="pgfId-1041530"></a>Define the analysis to be run in the MDL control file and do not rely on the design containing the analysis definition. This is particularly important if you plan to parameterize or reuse the analysis run itself. </li></ol>










<h3>
<a id="pgfId-1041534"></a>Common Pitfalls</h3>

<ol><li>
<a id="pgfId-1041535"></a>To avoid search failures, ensure that the start and/or stop values of the search meet the search condition(s) before running the search.</li><li>
<a id="pgfId-1041537"></a>Use the search command when the conditions are continuous and monotonically increasing or decreasing. If the conditions are discontinuous or non-monotonic, use <code>mvarsearch</code>.</li><li>
<a id="pgfId-1041540"></a>Run newly defined alias measurements using default settings prior to inserting them into higher level constructs such as <code>foreach</code>, <code>montecarlo</code>, <code>search</code>, or <code>mvarsearch</code> to ensure that the alias measurement does not contain errors.</li><li>
<a id="pgfId-1042316"></a>Statements in the alias measurement block before the <code>run</code> statement are executed only once before the run statement is executed. Use this functionality to compute constant values, or testbench setup. These expressions are not evaluated at each iteration of the <code>run</code> analysis itself.</li><li>
<a id="pgfId-1041547"></a>Ensure that variables are not forward referenced by defining them prior to their usage.</li><li>
<a id="pgfId-1041549"></a>When specifying enumerated arguments, remember to include the single quotation mark. For example, to set <code>errpreset</code> on an MDL defined transient analysis, use <code>errpreset=&#8217;moderate</code>.</li></ol>






<h3>
<a id="pgfId-1041553"></a>Miscellaneous</h3>

<ol><li>
<a id="pgfId-1041554"></a>If an MDL run is inadvertently terminated prior to normal termination, or the output <em>.measure</em> file is inadvertently removed, use the <code>processmdl</code> script located at<span class="webflare-courier-new" style="white-space:pre"><em> install-path</em></span><code>/tools/mdl/bin</code> to recreate the <code>.measure</code> file. The syntax is as follows:
<code>processmdl</code> [options] <span class="webflare-courier-new" style="white-space:pre"><em>mdlfilename
</em></span>This is also useful for recreating the <code>.measure</code> file from the raw directory in tabular format (<code>-tab</code>) or for changing the precision of the results (<code>-prec</code>). The initial raw directory must remain intact for this to function correctly.</li><li>
<a id="pgfId-1041561"></a>To access online help on predefined functions, type <code>spectre =mdl -h</code> <span class="webflare-courier-new" style="white-space:pre"><em>functionname </em></span>in a terminal window (for example, <code>spectre =mdl -h cross</code>). For a list of predefined functions, type <code>spectre =mdl -h functions</code>.</li></ol>


<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="preface.html" id="prev" title="Preface">Preface</a></em></b><b><em><a href="chap2.html" id="nex" title="Constructing MDL Expressions">Constructing MDL Expressions</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>