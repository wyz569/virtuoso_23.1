
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="GENERATOR" content="Quadralay WebWorks Publisher AutoMap 6.0.7">
<meta name="TEMPLATEBASE" content="CadencePubs_HelpTopics">
<meta name="LASTUPDATED" content="Tue Oct 16 15:27:32 2012">

<script TYPE="text/javascript" LANGUAGE="JavaScript" >
  <!--
  // Dummy script statement to get rid of Netscape timing errors which may
  // print garbage JavaScript code at the top in Unix 4.x Netscape browser.
  // -->
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Browser.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Cookies.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Search.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript">
  <!--
  function window_resized(){
    window.location.reload();
  }
  window.onresize=window_resized;
                                                                                                                                                                
  /*
  * Initializes before submitting query
  */
  function initOnSubmit() {
    storeStateAndQuery();
  }
                                                                                                                                                                
  setCookie("DocumentTitle", "Common Power Format User Guide");
  setCookie("Chapter", "N/A");
  setCookie("Keyword", "search");
  setCookie("Version", "Product Version 2.2");

  // -->
  </script>


<title>Common Power Format User Guide -- 4. Hierarchical Flow</title>
<META NAME="Approver" CONTENT="Technical Publications">
<META NAME="Author" CONTENT="Technical Publications">
<META NAME="CreateDate" CONTENT="2012-10-16">
<META NAME="CreateTime" CONTENT="1350426467">
<META NAME="DataType" CONTENT="Manuals">
<META NAME="Description" CONTENT="Describes how to use CPF">
<META NAME="DocTitle" CONTENT="Common Power Format User Guide">
<META NAME="DocType" CONTENT="Manual">
<META NAME="FileTitle" CONTENT="4. Hierarchical Flow">
<META NAME="FileType" CONTENT="Chapter">
<META NAME="Keyword" CONTENT="cpf_user">
<META NAME="Language" CONTENT="English">
<META NAME="ModifiedDate" CONTENT="2012-10-16">
<META NAME="ModifiedTime" CONTENT="1350426467">
<META NAME="NextFile" CONTENT="modeling.html">
<META NAME="PageCount" CONTENT="30">
<META NAME="Platform" CONTENT="ALL">
<META NAME="PrevFile" CONTENT="methodology.html">
<META NAME="Product" CONTENT="Languages">
<META NAME="ProductFamily" CONTENT="Cadence Shared Tools">
<META NAME="ProductVersion" CONTENT="2.0">
<META NAME="RightsManagement" CONTENT="Copyright 2006 Cadence Design Systems Inc.">
<META NAME="Title" CONTENT="Common Power Format User Guide -- 4. Hierarchical Flow">
<META NAME="TopicTags" CONTENT="FALSE">
<META NAME="Version" CONTENT="2.0">
</head>

<body bgcolor="#ffffff">
<a name="firstpage"></a>
<a name="pagetop"></a>

<p>
<!-- Begin Buttons -->

<form name="advancedform" action="/vtopic.isapi" method="GET" onSubmit="initOnSubmit()">
<input type=hidden name="action" value="FilterSearch">
<input type=hidden name="Filter" value="altsearchfilter.hts">
<input type=hidden name="resulttemplate" value="altsearchresults.hts">
<input type=hidden name="resultcount" value="10">
<input type=hidden name="resultmaxdocs" value="-1">
<input type=hidden name="queryhidden" value="null">
<input type=hidden name="queryitemselected" value="no">

<table border="0" cellpadding="0" cellspacing="0" width="650">
<tr>
  <td height="36" width="650" colspan="10"><img src="../support/header_doc.gif" WIDTH="650" HEIGHT="36"></td>
</tr>
<tr>
  <td height="20" width="59"><a href="javascript:openLibrary()"><img src="../support/nav2_library.gif" border="0" alt="View Library" height="20" width="59"></a></td>
  <td height="20" width="73"><a href="cpf_userTOC.html"><img src="../support/nav2_toc.gif" border="0" alt="View Table Of Contents" height="20" width="73"></a></td>
  <td height="20" width="46"><img src="../support/nav2_index_b.gif" border="0" height="20" width="46"></a></td>
  <td height="20" width="83"><a href="methodology.html"><img src="../support/nav2_previous.gif" border="0" alt="View Previous Chapter in Book" height="20" width="83"></a></td>
  <td height="20" width="59"><a href="modeling.html"><img src="../support/nav2_next.gif" border="0" alt="View Next Chapter in Book" height="20" width="59"></a></td>
  <td height="20" width="114"><a href="cpf_user.pdf"><img src="../support/nav2_print.gif" border="0" alt="Open PDF to print book" height="20" width="114"></a></td>
  <td height="20" width="61"><img src="../support/nav2_black.gif" height="20" width="61"></td>
  <td height="20" width="76"><a href="/feedback.htm"><img src="../support/nav2_feedback.gif" border="0" alt="Email Comments" height="20" width="76"></a></td>
  <td height="20" width="43"><a href="../cdsuser/help.html"><img src="../support/nav2_help.gif" border="0" alt="Help Using Documentation" height="20" width="43"></a></td>
  <td height="20" width="37"><a href="/exitsearch.htm"><img src="../support/nav2_exit.gif" border="0" alt="Shut Down Cadence Documentation Server" height="20" width="37"></a></td>
</tr>
 <tr>
    <td colspan="10">
      <script type="text/javascript">
      <!--// We wrap all this inside javascript because we only want to display  -->
      <!--// the search bar if the http server is running. If it is not running  -->
      <!--// the search bar should not be visible to the user                    -->
      <!-- BEGIN SEARCH BAR -->
      var isloaded = isLoaded();
      var enteredquery = getCookie("enteredquery");
      if(enteredquery) {
        enteredquery = enteredquery.replace(/</g,"&lt ");
        enteredquery = enteredquery.replace(/>/g,"&gt ");
      } else {
         enteredquery = "";
      }
                                                                                                                                                                
      <!-- Only display search bar if server is running -->
      if(isloaded) {
                                                                                                                                                                
        display_search_bar(enteredquery);
                                                                                                                                                                
      }
      <!-- END SEARCH BAR -->
      </script>
    </td>
  </tr>
</table>
</form>

<!-- End Buttons -->
<p>
<p>
<hr>
<p>
<h3><center>Common Power Format User Guide&#0044; Version 2.0</center></h3><br>
<p>


<blockquote>

  
<div align="right">
<h1 align="left">
  <a name="1032955"> </a>4</h1>
</div>

<hr>
<h1>
  <a name="1035250"> </a>Hierarchical Flow</h1>





<ul>
  <a name="1036595"></a><li><p><a href="hierarchical.html#1035471">Introduction to Hierarchical Flow</a></p>

  <a name="1036600"></a><li><p><a href="hierarchical.html#1038213">CPF for Hierarchical Flow</a></p>

  <a name="1038489"></a><li><p><a href="hierarchical.html#1038463">Steps to Create the CPF File</a></p>
</ul>
<br><br><br>
<h2>
  <a name="1035471"> </a>Introduction to Hierarchical Flow</h2>


<p>
  <a name="1035472"> </a>In <a href="create_cpf.html#1036502">Chapter 2, "Creating a CPF File,"</a> you learned about the CPF constructs to describe three of the most used low power techniques in a non-hierarchical flow. In this chapter, you will learn more about the additional constructs you need to use for a bottom-up hierarchical flow. </p>


<p>
  <a name="1037884"> </a>Typically in a bottom-up <em>hierarchical</em> flow, the design instantiates IPs. </p>


<p>
  <a name="1042454"> </a>If an IP is designed or implemented with a complex power structure, the IP will have a separate CPF file to describe its power intent. </p>


<p>
  <a name="1042437"> </a>CPF distinguishes the following categories:</p>

<ul>
  <a name="1037679"></a><li><p>A <strong><em>hard non-custom IP</em></strong> is a block that has been synthesized and placed and routed, but small modifications can still be made. It is also referred to as a <em>hard IP</em>.</p>

  <a name="1036654"></a><li><p>A <strong><em>hard custom IP</em></strong> is a block that is mostly implemented by hand. Custom IP users cannot make any changes to the block. Examples are third-party memories. A hard custom IP is also referred to as a <em>macro cell</em>. </p>

  <a name="1037700"></a><li><p>A <strong><em>soft IP</em></strong> is a design module that can be supplied by a third-party. Users have the full capability to (re-)synthesize and place and route the design. Examples are synthesizable CPU cores, and so on.</p>
</ul>
<p>
  <a name="1037739"> </a>When the IP is instantiated at the top level, <strong><em>power domain mapping</em></strong><em> </em>is required to indicate which power domains from the top-level need to provide power supplies to the IP.</p>


<p>
  <a name="1040267"> </a>Mapping a power domain of a block (IP) to another power domain at the top level when the block is instantiated in the top-level design involves</p>

<ol type="1">
  <li value="1"><p><a name="1037742"> </a>Connecting the primary power and ground pins or nets of the block-level domain to the primary power and ground net of the domain specified at the top level</p>
  <li value="2"><p><a name="1037743"> </a>Merging the elements of the power domain of the block into the top-level domain</p>
  <li value="3"><p><a name="1037744"> </a>Merging the power modes</p>
  <li value="4"><p><a name="1037745"> </a>Resolving the precedence of the power domain settings</p>
  <li value="5"><p><a name="1037746"> </a>Resolving the precedence of the top-level and block-level rules</p>
</ol>

<p>
  <a name="1037747"> </a>Once a block-level power domain is mapped into a top-level power domain, the two power domains are considered identical and all instances of the two domains share the same power characteristics. For example, the standard cell instances of the two power domains will have their primary power and ground pin (follow pins) connected together to the same primary power and ground nets.</p>


<p>
  <a name="1037737"> </a>A simplified view of a DTMF receiver, the design used to illustrate the hierarchical flow, is shown in <a href="hierarchical.html#1041471">Figure 4-1</a>. </p>


<p>
  <a name="1041487"> </a>The DTMF receiver design uncompresses and accumulates an eight-bit uLaw encoded dual tone data sampled over a100 millisecond period into a dual buffer memory.</p>


<p>
  <a name="1037859"> </a>Once an entire sample has been received embedded DSP (TDSP) cores will read the input buffer and execute a modified discrete Fourier transform (DFT) algorithm to calculate a partial frequency spectrum. Upon completion the DSP cores forward the resulting frequency response data for comparison to values corresponding to DTMF digits. If a match is found the 8 bit ASCII digit is presented at the output of the core.</p>


<p>
  <a name="1039171"> </a>The voltage of the core is scaled depending on the requested function of the design. If the processing speed is critical a higher voltage is used, if the processing speed is not critical, the voltage is dynamically scaled down together with the clock frequency to save power. For this design we assume that the voltage supply is dynamically controlled external to the chip.</p>


  <a name="1041471"> </a><h4>
Figure 4-1   Example of Hierarchical Design</h4>


<p>
  <a name="1041478"> </a><img src="images/hierarchicalx1.png" border="0">
</p>


<p>
  <a name="1041493"> </a>The core of the design is the <code>DTMF_INST</code> instance. The I/O pads are instantiated in a hierarchical instance <code>IOPADS_INST.</code>The DTMF receiver design further contains</p>

<ul>
  <a name="1041505"></a><li><p>A PLL block </p>
<dl>
<p>
  <a name="1041506"> </a>This block is used to generate the clocks needed by all the blocks in the design. It has a reference clock, <code>refclk</code>, that is used to generate all other clocks.</p>


<p>
  <a name="1041522"> </a>Because the design uses two operating voltages, two clock signals are created.</p>


<p>
  <a name="1041507"> </a>This analog block needs to operate at a constant voltage to ensure correct operation. It therefore needs a dedicated power input, <code>Avdd</code>.</p>

</dl>
  <a name="1041464"></a><li><p>Two TDSP cores: <code>TDSP0</code> and <code>TDSP1</code> (in <a href="hierarchical.html#1041471">Figure 4-1</a>)</p>
<dl>
<p>
  <a name="1039296"> </a>These two digital signal processing blocks can operate at a higher voltage and frequency, and at a lower voltage and frequency when the processing speed is not critical. When the blocks do not need to be operational, they are powered down.</p>


<p>
  <a name="1041537"> </a>A <code>dvfs_en</code> signal at the input of the chip indicates to the <code>dvfs_controller</code> when the voltage and frequency can be adjusted. The controller sends a signal to the PLL and to the external voltage regulator to adjust the clock frequency and the voltage, respectively.</p>


<p>
  <a name="1039446"> </a>These blocks are instances of the soft block, <code>tdsp_core</code>. The <code>tdsp.cpf</code> file describes the power intent of this soft block.</p>

</dl>
  <a name="1039349"></a><li><p><code>Data RAM1</code> is a special RAM that can retain its memory when it is powered down. This RAM can operate at the same voltages as the design core.</p>
<dl>
<p>
  <a name="1039422"> </a>This RAM is an instance of the hard custom IP, <code>ram_256x16A</code>. The <code>ram.cpf</code> file describes the power intent of this RAM instance.</p>

</dl>
  <a name="1039377"></a><li><p><code>Data RAM</code> is a regular RAM. </p>
<dl>
<p>
  <a name="1039431"> </a>This RAM can only operate at one voltage. It can also be powered down when not operational. This RAM does not retain its memory when it is powered down.</p>

</dl>
  <a name="1039317"></a><li><p>The <code>pm_inst</code> block (not shown in <a href="hierarchical.html#1041471">Figure 4-1</a>)</p>
<dl>
<p>
  <a name="1039339"> </a>This block generates all power control signals for the chip.</p>


<p>
  <a name="1039340"> </a>This block operates at the same voltage as the top-level of the design.</p>

</dl></ul>
<p>
  <a name="1039453"> </a>The top-level of the design has the following power domains:</p>

<ul>
  <a name="1041566"></a><li><p>The <code>PDpll</code><code> </code>power domain contains the PLL block (<code>DTMF_INST/PLLCLK_INST</code>) and some of the IO pads (for example, <code>IOPADS_INST/Prefclkip</code>) that are connected to this block.</p>

  <a name="1041603"></a><li><p>The <code>PDtdsp</code> power domain contains the two TDSP cores (<code>DTMF_INST/TDSP_CORE_INST0, DTMF_INST/TDSP_CORE_INST1</code>) and the special RAM (<code>DTMF_INST/RAM_128x16_TEST_INST1</code>).</p>

  <a name="1042242"></a><li><p>The <code>PDram</code> power domain contains the regular RAM (<code>DTMF_INST/RAM_128x16_TEST_INST</code>).</p>

  <a name="1042243"></a><li><p>The <code>PDshutoff_io</code> power domain contains two I/O instances that can be powered down.</p>

  <a name="1041635"></a><li><p>The <code>PDdefault</code> power domain contains all other blocks that do not belong to any special power domain. All these blocks operate in DVFS mode.</p>

  <a name="1041644"></a><li><p>The <code>PDram_virtual</code> power domain contains no blocks. </p>
</ul>
<p>
  <a name="1042380"> </a>Power domains <code>PDdefault</code>, <code>PDpll</code> and <code>PDram_virtual</code> are <a href="../cpf_ref/domains_and_modes.html#unswitched">unswitched</a> domains. Power domains <code>PDtdsp</code>, <code>PDram</code>, and <code>PDshutoff_io</code> are switchable domains.</p>


<p>
  <a name="1042382"> </a>Power domain <code>PDshutoff_io</code> is an <a href="../cpf_ref/domains_and_modes.html#on-chip controlled ">on-chip</a> controlled external switchable domain, while power domains <code>PDtdsp</code> and <code>PDram </code>are <a href="../cpf_ref/domains_and_modes.html#internal switchable">internal</a> switchable domains; they can be switched off through an internal power switch network. The external power supply for the power switch network of power domain <code>PDtdsp</code> is provided by the power domain <code>PDdefault,</code> while the external power supply for the power switch network of power domain <code>PDram</code> is provided by the power domain <code>PDram_virtual.PDdefault</code> is the secondary power domain for domain <code>PDtdsp</code>, while <code>PDram_virtual</code> is the secondary power domain for domain <code>PDram.</code></p>


<p>
  <a name="1041668"> </a><a href="hierarchical.html#1037609">Table 4-1</a> shows the operating voltages for each of the power domains in the different power modes of the design.</p>


  <a name="1037609"> </a><h4>
Table 4-1   Voltages of the Power Domains at the Top Level in the Different Power Modes</h4>


<p>
  <a name="1037359"> </a><p>
<br>
<table valign="top" border="1" bordercolorlight="#FFFFFF" bordercolordark="#000000"
       cellpadding="5" cellspacing="0">
<div align="left"></div>
  <tr bgcolor="#CCCCCC"><div align="center">
    <th colspan=1 rowspan=2><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p><strong><a name="1037192"> </a>Power Mode</strong></p></div></font></th>
    <th colspan=6 rowspan=1><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p><strong><a name="1037194"> </a>Corresponding Power Domain </strong></p></div></font></th>
  </div></tr>
  <tr bgcolor="#CCCCCC"><div align="center">
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p>
<a name="1037236"> </a>PDdefault</p>
</div></font></th>
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p>
<a name="1037238"> </a>PDshutoff_io</p>
</div></font></th>
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p>
<a name="1037240"> </a>PDpll</p>
</div></font></th>
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p>
<a name="1037242"> </a>PDram_virtual</p>
</div></font></th>
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p>
<a name="1037244"> </a>PDram</p>
</div></font></th>
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p>
<a name="1037246"> </a>PDtdsp</p>
</div></font></th>
  </div></tr>
  <tr>
    <td valign="top"><p>
<a name="1037248"> </a>PMdvfs1</p>
</td>
    <td valign="top"><p>
<a name="1037250"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037252"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037254"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037256"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037258"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037260"> </a>0.81</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1037276"> </a>PMdvfs1_off</p>
</td>
    <td valign="top"><p>
<a name="1037278"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037378"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037282"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037284"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037286"> </a>0</p>
</td>
    <td valign="top"><p>
<a name="1037288"> </a>0</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1037290"> </a>PMdvfs1_shutoffio_off</p>
</td>
    <td valign="top"><p>
<a name="1037292"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037294"> </a>0</p>
</td>
    <td valign="top"><p>
<a name="1037296"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037390"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037300"> </a>0</p>
</td>
    <td valign="top"><p>
<a name="1037302"> </a>0</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1037304"> </a>PMdvfs2</p>
</td>
    <td valign="top"><p>
<a name="1037408"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037308"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037400"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037414"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037314"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037316"> </a>0.72</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1037318"> </a>PMdvfs2_off</p>
</td>
    <td valign="top"><p>
<a name="1037410"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037322"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037402"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037416"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037328"> </a>0</p>
</td>
    <td valign="top"><p>
<a name="1037330"> </a>0</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1037332"> </a>PMdvfs2_shutoffio_off</p>
</td>
    <td valign="top"><p>
<a name="1037412"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037336"> </a>0</p>
</td>
    <td valign="top"><p>
<a name="1037404"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037418"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037342"> </a>0</p>
</td>
    <td valign="top"><p>
<a name="1037344"> </a>0</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1037346"> </a>PMscan</p>
</td>
    <td valign="top"><p>
<a name="1037446"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037448"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037450"> </a>0.81</p>
</td>
    <td valign="top"><p>
<a name="1037452"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037454"> </a>0.72</p>
</td>
    <td valign="top"><p>
<a name="1037456"> </a>0.81</p>
</td>
  </tr>
</table>
<br>


</p>
</p>


<p>
  <a name="1041678"> </a><a href="hierarchical.html#1037362">Table 4-2</a> shows the different control signals needed at the top-level of the design to isolate logic, turn off the power supply switches, and save and restore the retention states. The always on domains do not need any control signals.</p>


  <a name="1037362"> </a><h4>
Table 4-2   Signals Controlling the Power Domains at the Top Level</h4>


<p>
  <a name="1036879"> </a><p>
<br>
<table valign="top" border="1" bordercolorlight="#FFFFFF" bordercolordark="#000000"
       cellpadding="5" cellspacing="0">
<div align="left"></div>
  <tr bgcolor="#CCCCCC"><div align="center">
    <th colspan=1 rowspan=2><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p><strong><a name="1036840"> </a>Power Domain</strong></p></div></font></th>
    <th colspan=3 rowspan=1><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p><strong><a name="1036842"> </a>Control Signals</strong></p></div></font></th>
  </div></tr>
  <tr bgcolor="#CCCCCC"><div align="center">
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p>
<a name="1036850"> </a>power switch </p>
</div></font></th>
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p>
<a name="1036852"> </a>isolation cell </p>
</div></font></th>
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p>
<a name="1036854"> </a>state retention cell</p>
</div></font></th>
  </div></tr>
  <tr>
    <td valign="top"><p>
<a name="1036856"> </a>PDdefault</p>
</td>
    <td valign="top"><p>
<a name="1037490"> </a>no control signal</p>
</td>
    <td valign="top"><p>
<a name="1036860"> </a>no control signal</p>
</td>
    <td valign="top"><p>
<a name="1037511"> </a>no control signal</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1041707"> </a>PDpll</p>
</td>
    <td valign="top"><p>
<a name="1041709"> </a>no control signal</p>
</td>
    <td valign="top"><p>
<a name="1041711"> </a>no control signal</p>
</td>
    <td valign="top"><p>
<a name="1041713"> </a>no control signal</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1041715"> </a>PDram_virtual</p>
</td>
    <td valign="top"><p>
<a name="1041717"> </a>no control signal</p>
</td>
    <td valign="top"><p>
<a name="1041719"> </a>no control signal</p>
</td>
    <td valign="top"><p>
<a name="1041721"> </a>no control signal</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1041723"> </a>PDram</p>
</td>
    <td valign="top"><p>
<a name="1041725"> </a>!power_switch_enable</p>
</td>
    <td valign="top"><p>
<a name="1041727"> </a>!isolation_enable</p>
</td>
    <td valign="top"><p>
<a name="1041729"> </a>no control signal</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1037134"> </a>PDtdsp</p>
</td>
    <td valign="top"><p>
<a name="1037136"> </a>!power_switch_enable</p>
</td>
    <td valign="top"><p>
<a name="1037138"> </a>!isolation_enable</p>
</td>
    <td valign="top"><p>
<a name="1037519"> </a>no control signal<a href="#1042016"><sup>1</sup></a></p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1041735"> </a>PDshutoff_io</p>
</td>
    <td valign="top"><p>
<a name="1041737"> </a>io_shutoff_ack</p>
</td>
    <td valign="top"><p>
<a name="1041739"> </a>!spi_ip_isolate</p>
</td>
    <td valign="top"><p>
<a name="1041741"> </a>no control signal</p>
</td>
  </tr>
</table>
<br>

<table>
  <tr>
    <td><a name="1042016"> </a><br><a href="#1037519"><sup>1</sup></a><a name="1042016"> </a>Although no state retention rules are specified at the top-level domain, state retention rules are defined for the special RAM, defined through the ram.cpf (see <a href="hierarchical.html#1035893">Macro CPF -- ram.cpf</a>), and for the soft block, defined through the tdsp.cpf (see <a href="hierarchical.html#1035899">Soft IP CPF -- tdsp.cpf</a>). 

</td>
  </tr>
</table>

</p>
</p>


<p>
  <a name="1041775"> </a>All control signals are generated by the power control manager (<code>PM_INST</code>) which is an instance of the core.</p>


<p>
  <a name="1041846"> </a><a href="hierarchical.html#1041776">Table 4-3</a> lists the operating corners for the design for the corresponding operating voltages.</p>


  <a name="1041776"> </a><h4>
Table 4-3   Operating Corners<br><p>
<br>
<table valign="top" border="1" bordercolorlight="#FFFFFF" bordercolordark="#000000"
       cellpadding="5" cellspacing="0">
<div align="left"></div>
  <tr bgcolor="#CCCCCC"><div align="center">
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p><strong><a name="1042612"> </a>Operating Corner</strong></p></div></font></th>
    <th><font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><div align="left"><p><strong><a name="1042614"> </a>Operating Voltage</strong></p></div></font></th>
  </div></tr>
  <tr>
    <td valign="top"><p>
<a name="1042616"> </a>PMdvfs2_bc</p>
</td>
    <td valign="top"><p>
<a name="1042618"> </a>0.88</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1042620"> </a>PMdvfs1_bc</p>
</td>
    <td valign="top"><p>
<a name="1042622"> </a>0.99</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1042624"> </a>PMdvfs1_wc</p>
</td>
    <td valign="top"><p>
<a name="1042626"> </a>0.81</p>
</td>
  </tr>
  <tr>
    <td valign="top"><p>
<a name="1042628"> </a>PMdvfs2_wc</p>
</td>
    <td valign="top"><p>
<a name="1042630"> </a>0.72</p>
</td>
  </tr>
</table>
<br>


</p>
</h4>


<p>
  <a name="1041790"> </a></p>


<p>
  <a name="1041895"> </a><a href="hierarchical.html#1038213">CPF for Hierarchical Flow</a> lists the complete CPF files used for this design.</p>


<p>
  <a name="1041899"> </a><a href="hierarchical.html#1038463">Steps to Create the CPF File</a> describes the specifics to create a CPF file for a hierarchical flow, assuming your design is using a hard and soft IP for which you have the CPF descriptions.</p>


<br><br><br>
<h2>
  <a name="1038213"> </a>CPF for Hierarchical Flow</h2>

<ul>
  <a name="1035501"></a><li><p><a href="hierarchical.html#1035504">Technology CPF File -- tech.cpf</a></p>

  <a name="1036641"></a><li><p><a href="hierarchical.html#1035888">Top CPF File</a></p>

  <a name="1036645"></a><li><p><a href="hierarchical.html#1035893">Macro CPF -- ram.cpf</a></p>

  <a name="1036649"></a><li><p><a href="hierarchical.html#1035899">Soft IP CPF -- tdsp.cpf</a></p>
</ul>
<br><br>
<h3>
  <a name="1035504"> </a>Technology CPF File -- tech.cpf</h3>


<pre><a name="1035511"></a><nobr>set_cpf_version 1.1</nobr></pre>

<pre><a name="1035512"></a><nobr>if { [set_instance] == [set_hierarchy_separator] } {</nobr></pre>

<pre><a name="1035513"></a><nobr>set libdir ../LIBS/N45GS/timing</nobr></pre>

<pre><a name="1035514"></a><nobr>set libdir_io ../LIBS/N65LP/timing</nobr></pre>

<pre><a name="1035516"></a><nobr>#######################################################################<br>#<br>#       Technology part of the CPF<br>#<br>########################################################################</nobr></pre>

<pre><a name="1036627"></a><nobr>define_always_on_cell -cells PTBUFFD2BWP \<br>&nbsp; &nbsp;	 -power_switchable VDD -power TVDD -ground VSS</nobr></pre>

<pre><a name="1036638"></a><nobr>define_isolation_cell -cells ISO* \<br>&nbsp; &nbsp;	 -power VDD -ground VSS \<br>&nbsp; &nbsp;	 -enable ISO \<br>&nbsp; &nbsp;	 -valid_location to</nobr></pre>

<pre><a name="1035521"></a><nobr>define_level_shifter_cell -cells LVL*HLD* \<br>&nbsp; &nbsp;	 -input_voltage_range 0.72:0.81:0.09 \<br>&nbsp; &nbsp;	 -output_voltage_range 0.72:0.81:0.09 \<br>&nbsp; &nbsp;	 -direction down \<br>&nbsp; &nbsp;	 -output_power_pin VDD \<br>&nbsp; &nbsp;	 -ground VSS \<br>&nbsp; &nbsp;	 -valid_location to</nobr></pre>

<pre><a name="1035530"></a><nobr>define_level_shifter_cell -cells PTLVL*HLD* \<br>&nbsp; &nbsp;	 -input_voltage_range 0.72:0.81:0.09 \<br>&nbsp; &nbsp;	 -output_voltage_range 0.72:0.81:0.09 \<br>&nbsp; &nbsp;	 -direction down \<br>&nbsp; &nbsp;	 -output_power_pin TVDD \<br>&nbsp; &nbsp;	 -ground VSS \<br>&nbsp; &nbsp;	 -valid_location to</nobr></pre>

<pre><a name="1035538"></a><nobr>define_level_shifter_cell -cells LVLLHCD* \<br>&nbsp; &nbsp;	 -input_voltage_range 0.72:0.81:0.09 \<br>&nbsp; &nbsp;	 -output_voltage_range 0.72:0.81:0.09 \<br>&nbsp; &nbsp;	 -enable NSLEEP \<br>&nbsp; &nbsp;	 -input_power_pin VDDL \<br>&nbsp; &nbsp;	 -output_power_pin VDD \<br>&nbsp; &nbsp;	 -direction up \<br>&nbsp; &nbsp;	 -ground VSS \<br>&nbsp; &nbsp;	 -enable NSLEEP \<br>&nbsp; &nbsp;	 -valid_location to</nobr></pre>

<pre><a name="1035560"></a><nobr>define_level_shifter_cell -cells LVLLHD* \<br>&nbsp; &nbsp;	 -input_voltage_range 0.72:0.81:0.09 \<br>&nbsp; &nbsp;	 -output_voltage_range 0.72:0.81:0.09 \<br>&nbsp; &nbsp;	 -input_power_pin VDDL \<br>&nbsp; &nbsp;	 -output_power_pin VDD \<br>&nbsp; &nbsp;	 -direction up \<br>&nbsp; &nbsp;	 -ground VSS \<br>&nbsp; &nbsp;	 -valid_location to</nobr></pre>

<pre><a name="1035569"></a><nobr>define_power_switch_cell -cells {HDRDID1BWPHVT HDRDIAOND1BWPHVT} \<br>&nbsp; &nbsp;	 -power_switchable VDD -power TVDD \<br>&nbsp; &nbsp;	 -stage_1_enable NSLEEPIN1 -stage_1_output NSLEEPOUT1 \<br>&nbsp; &nbsp;	 -stage_2_enable NSLEEPIN2 -stage_2_output NSLEEPOUT2 \<br>&nbsp; &nbsp;	 -type header</nobr></pre>

<pre><a name="1035576"></a><nobr>define_state_retention_cell \<br>&nbsp; &nbsp;	 -cells {MSRSDFCSNQHD2BWP} \<br>&nbsp; &nbsp;	 -cell_type "master_slave" \<br>&nbsp; &nbsp;	 -clock_pin CP \<br>&nbsp; &nbsp;	 -power TVDD -power_switchable VDD \<br>&nbsp; &nbsp;	 -ground VSS \<br>&nbsp; &nbsp;	 -restore_check "!CP" \<br>&nbsp; &nbsp;	 -save_function "!CP" \<br>&nbsp; &nbsp;	 -always_on_components DFF_inst</nobr></pre>

<pre><a name="1035588"></a><nobr>define_state_retention_cell \<br>&nbsp; &nbsp;	 -cells {RSDFCSRHD2BWP} \<br>&nbsp; &nbsp;	 -clock_pin CP \<br>&nbsp; &nbsp;	 -power TVDD -power_switchable VDD \<br>&nbsp; &nbsp;	 -ground VSS \<br>&nbsp; &nbsp;	 -save_function "SAVE" \<br>&nbsp; &nbsp;	 -cell_type "ballon_latch" \<br>&nbsp; &nbsp;	 -restore_function "!NRESTORE" \<br>&nbsp; &nbsp;	 -always_on_components save_data</nobr></pre>

<pre><a name="1035602"></a><nobr></nobr></pre>

<pre><a name="1035603"></a><nobr>########################################################################</nobr></pre>

<pre><a name="1035604"></a><nobr>## DEFINE LIBRARY SET</nobr></pre>

<pre><a name="1035605"></a><nobr>########################################################################</nobr></pre>

<pre><a name="1035606"></a><nobr>set lib_0v81_wc_base "$libdir/tcbn45gsbwpwc.lib"</nobr></pre>

<pre><a name="1035609"></a><nobr>set lib_0v81_wc_extra "\<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208wc0d720d9_modified.lib \<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208wc0d90d9_modified.lib \<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208wc_modified.lib \<br>&nbsp; &nbsp;	 $libdir/pllclk_slow.lib \<br>&nbsp; &nbsp;	 $libdir/ram_256x16A_slow_syn.lib \<br>&nbsp; &nbsp;	 $libdir/rom_512x16A_slow_syn.lib "</nobr></pre>

<pre><a name="1035617"></a><nobr>set lib_0v81_bc_base "$libdir/tcbn45gsbwpbc.lib "</nobr></pre>

<pre><a name="1035621"></a><nobr>set lib_0v81_bc_extra "\<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208bc0d881d1_modified.lib \<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208bc1d11d1_modified.lib \<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208bc_modified.lib \<br>&nbsp; &nbsp;	 $libdir/pllclk_slow.lib \<br>&nbsp; &nbsp;	 $libdir/ram_256x16A_slow_syn.lib \<br>&nbsp; &nbsp;	 $libdir/rom_512x16A_slow_syn.lib "</nobr></pre>

<pre><a name="1035629"></a><nobr>set lib_0v72_wc_base "$libdir/tcbn45gsbwpwc_0d72.lib "</nobr></pre>

<pre><a name="1035632"></a><nobr>set lib_0v72_wc_extra "\<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208wc0d90d72_modified.lib \<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwphvt_c070208wc0d72_modified.lib \<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208wc0d72_ptlvl_modified.lib \<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208wc0d720d72_modified.lib \<br>&nbsp; &nbsp;	 $libdir/ram_256x16A_slow_syn.lib \<br>&nbsp; &nbsp;	 $libdir/rom_512x16A_slow_syn.lib "</nobr></pre>

<pre><a name="1035640"></a><nobr>set lib_0v72_bc_base "$libdir/tcbn45gsbwpbc_0d88.lib "</nobr></pre>

<pre><a name="1035643"></a><nobr>set lib_0v72_bc_extra "\<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208bc1d10d88_modified.lib \<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwphvt_c070208bc0d88_modified.lib \<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208bc0d88_ptlvl_modified.lib \<br>&nbsp; &nbsp;	 $libdir/tcbn45lpbwp_c070208bc0d880d88_modified.lib \<br>&nbsp; &nbsp;	 $libdir/ram_256x16A_fast_syn.lib \<br>&nbsp; &nbsp;	 $libdir/rom_512x16A_slow_syn.lib "</nobr></pre>

<pre><a name="1035652"></a><nobr>set io_lib_wc "$libdir_io/tpzn65lpgv2wc.lib"</nobr></pre>

<pre><a name="1035656"></a><nobr>set io_lib_bc "$libdir_io/tpzn65lpgv2bc.lib"</nobr></pre>

<pre><a name="1035660"></a><nobr>define_library_set -name wc_0v81 -libraries "$lib_0v81_wc_base \<br>&nbsp; &nbsp;	 $lib_0v81_wc_extra $io_lib_wc"</nobr></pre>

<pre><a name="1035661"></a><nobr>define_library_set -name bc_0v81 -libraries "$lib_0v81_bc_base \<br>&nbsp; &nbsp;	 $lib_0v81_bc_extra $io_lib_bc"</nobr></pre>

<pre><a name="1035663"></a><nobr>define_library_set -name wc_0v72 -libraries "$lib_0v72_wc_base \<br>&nbsp; &nbsp;	 $lib_0v72_wc_extra $io_lib_wc"</nobr></pre>

<pre><a name="1035664"></a><nobr>define_library_set -name bc_0v72 -libraries "$lib_0v72_bc_base \<br>&nbsp; &nbsp;	 $lib_0v72_bc_extra $io_lib_wc"</nobr></pre>

<pre><a name="1035666"></a><nobr>}</nobr></pre>

<br><br>
<h3>
  <a name="1035888"> </a>Top CPF File</h3>


<pre><a name="1035898"></a><nobr>set_cpf_version 1.1</nobr></pre>

<pre><a name="1036090"></a><nobr>set_hierarchy_separator /</nobr></pre>

<pre><a name="1036091"></a><nobr>set_design dtmf_chip</nobr></pre>

<pre><a name="1036092"></a><nobr>set constraintDir $env(test_PATH)/RELEASE/mmmc</nobr></pre>

<pre><a name="1036094"></a><nobr><code><strong>include tech.cpf</strong></code></nobr></pre>

<pre><a name="1036096"></a><nobr>########################################################################<br>## create power domains<br>########################################################################</nobr></pre>

<pre><a name="1036099"></a><nobr>create_power_domain -name <code><strong>PDdefault</strong></code> -default</nobr></pre>

<pre><a name="1036100"></a><nobr>update_power_domain -name PDdefault -primary_power_net VDD -primary_ground_net VSS</nobr></pre>

<pre><a name="1036101"></a><nobr></nobr></pre>

<pre><a name="1036102"></a><nobr>create_power_domain -name <code><strong>PDshutoff_io</strong></code> \<br>&nbsp; &nbsp;	 -instances {IOPADS_INST/Pspifsip IOPADS_INST/Pspidip} \<br>&nbsp; &nbsp;	 -boundary_ports {spi_fs spi_data} \<br>&nbsp; &nbsp;	 -shutoff_condition {io_shutoff_ack} \<br>&nbsp; &nbsp;	 -external_controlled_shutoff</nobr></pre>

<pre><a name="1036109"></a><nobr>update_power_domain -name PDshutoff_io -primary_power_net VDD_IO \<br>&nbsp; &nbsp;	 -primary_ground_net VSS</nobr></pre>

<pre><a name="1036111"></a><nobr>create_power_domain -name <code><strong>PDpll</strong></code>  \<br>&nbsp; &nbsp;	 -instances {DTMF_INST/PLLCLK_INST \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 IOPADS_INST/Pibiasip \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 IOPADS_INST/Ppllrstip \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 IOPADS_INST/Prefclkip \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 IOPADS_INST/Pvcomop \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 IOPADS_INST/Pvcopop} \<br>&nbsp; &nbsp;	 -boundary_ports { ibias reset refclk vcom vcop pllrst }</nobr></pre>

<pre><a name="1036119"></a><nobr>update_power_domain -name PDpll -primary_power_net Avdd -primary_ground_net Avss</nobr></pre>

<pre><a name="1036122"></a><nobr>create_power_domain -name <code><strong>PDram_virtual</strong></code></nobr></pre>

<pre><a name="1036123"></a><nobr>update_power_domain -name PDram_virtual -primary_power_net VDDL \<br>&nbsp; &nbsp;	 -primary_ground_net VSS</nobr></pre>

<pre><a name="1036125"></a><nobr>create_power_domain -name <code><strong>PDram</strong></code> \<br>&nbsp; &nbsp;	 -shutoff_condition {!DTMF_INST/PM_INST/power_switch_enable} \<br>&nbsp; &nbsp;	 -base_domains PDram_virtual \<br>&nbsp; &nbsp;	 -instances  DTMF_INST/RAM_128x16_TEST_INST</nobr></pre>

<pre><a name="1036127"></a><nobr>update_power_domain -name PDram -primary_power_net VDDL_sw -primary_ground_net VSS</nobr></pre>

<pre><a name="1036129"></a><nobr>create_power_domain -name <code><strong>PDtdsp</strong></code> \<br>&nbsp; &nbsp;	 -shutoff_condition {!DTMF_INST/PM_INST/power_switch_enable} \<br>&nbsp; &nbsp;	 -base_domains PDdefault</nobr></pre>

<pre><a name="1036131"></a><nobr>update_power_domain -name PDtdsp -primary_power_net VDD_sw -primary_ground_net VSS</nobr></pre>

<pre><a name="1036133"></a><nobr>########################################################################<br>## create power modes<br>########################################################################</nobr></pre>

<pre><a name="1036136"></a><nobr>create_nominal_condition -name nom_0v81 -voltage 0.81<br>update_nominal_condition -name nom_0v81 -library_set wc_0v81</nobr></pre>

<pre><a name="1036139"></a><nobr>create_nominal_condition -name nom_0v72 -voltage 0.72<br>update_nominal_condition -name nom_0v72 -library_set wc_0v72</nobr></pre>

<pre><a name="1036142"></a><nobr>create_power_mode -name <code><strong>PMdvfs1</strong></code> \<br>&nbsp; &nbsp;	 -domain_conditions {PDpll@nom_0v81 PDdefault@nom_0v81 PDtdsp@nom_0v81 \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram@nom_0v72 PDshutoff_io@nom_0v81 \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram_virtual@nom_0v72} \<br>&nbsp; &nbsp;	 -default</nobr></pre>

<pre><a name="1036146"></a><nobr>update_power_mode -name PMdvfs1 -sdc_files ${constraintDir}/dtmf_dvfs1.sdc</nobr></pre>

<pre><a name="1036147"></a><nobr></nobr></pre>

<pre><a name="1040958"></a><nobr>create_power_mode -name <code><strong>PMdvfs1_off</strong></code> \<br>&nbsp; &nbsp;	 -domain_conditions {PDpll@nom_0v81 PDdefault@nom_0v81 PDshutoff_io@nom_0v81 \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram_virtual@nom_0v72}</nobr></pre>

<pre><a name="1040960"></a><nobr></nobr></pre>

<pre><a name="1036153"></a><nobr>create_power_mode -name <code><strong>PMdvfs1_shutoffio_off</strong></code> \<br>&nbsp; &nbsp;	 -domain_conditions {PDpll@nom_0v81 PDdefault@nom_0v81 PDram_virtual@nom_0v72}</nobr></pre>

<pre><a name="1041026"></a><nobr></nobr></pre>

<pre><a name="1036157"></a><nobr>create_power_mode -name <code><strong>PMdvfs2</strong></code> \<br>&nbsp; &nbsp;	 -domain_conditions {PDpll@nom_0v81 PDdefault@nom_0v72 PDtdsp@nom_0v72 \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram@nom_0v72 PDshutoff_io@nom_0v72 \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram_virtual@nom_0v72}</nobr></pre>

<pre><a name="1036161"></a><nobr>update_power_mode -name PMdvfs2 -sdc_files ${constraintDir}/dtmf_dvfs2.sdc</nobr></pre>

<pre><a name="1036162"></a><nobr></nobr></pre>

<pre><a name="1036163"></a><nobr>create_power_mode -name <code><strong>PMdvfs2_off</strong></code>  \<br>&nbsp; &nbsp;	 -domain_conditions {PDpll@nom_0v81 PDdefault@nom_0v72 PDshutoff_io@nom_0v72  \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram_virtual@nom_0v72}</nobr></pre>

<pre><a name="1041032"></a><nobr></nobr></pre>

<pre><a name="1036168"></a><nobr>create_power_mode -name <code><strong>PMdvfs2_shutoffio_off</strong></code> \<br>&nbsp; &nbsp;	 -domain_conditions {PDpll@nom_0v81 PDdefault@nom_0v72  PDram_virtual@nom_0v72}</nobr></pre>

<pre><a name="1041038"></a><nobr></nobr></pre>

<pre><a name="1037438"></a><nobr>create_power_mode -name <code><strong>PMscan</strong></code>  \<br>&nbsp; &nbsp;	 -domain_conditions {PDpll@nom_0v81 PDdefault@nom_0v81 PDtdsp@nom_0v81 \<br>&nbsp; &nbsp;	 PDram@nom_0v72 PDshutoff_io@nom_0v81  PDram_virtual@nom_0v72}</nobr></pre>

<pre><a name="1037440"></a><nobr>update_power_mode -name PMscan -sdc_files ${constraintDir}/dtmf_scan.sdc</nobr></pre>

<pre><a name="1036176"></a><nobr></nobr></pre>

<pre><a name="1036177"></a><nobr>########################################################################<br>## domain mapping<br>########################################################################</nobr></pre>

<pre><a name="1036181"></a><nobr>set_instance DTMF_INST/TDSP_CORE_INST0 \<br>&nbsp; &nbsp;	 -domain_mapping { {PDtdsp_block PDtdsp} } \<br>&nbsp; &nbsp;	 -port_mapping { {retention_save DTMF_INST/PM_INST/state_retention_save} \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 {retention_restore DTMF_INST/PM_INST/state_retention_restore} } </nobr></pre>

<pre><a name="1036185"></a><nobr><code><strong>include tdsp.cpf</strong></code></nobr></pre>

<pre><a name="1036190"></a><nobr>set_instance DTMF_INST/TDSP_CORE_INST1 \<br>&nbsp; &nbsp;	 -domain_mapping { {PDtdsp_block PDtdsp} } \<br>&nbsp; &nbsp;	 -port_mapping { {retention_save DTMF_INST/PM_INST/state_retention_save} \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 {retention_restore DTMF_INST/PM_INST/state_retention_restore} } </nobr></pre>

<pre><a name="1036194"></a><nobr><code><strong>include tdsp.cpf</strong></code></nobr></pre>

<pre><a name="1036196"></a><nobr>set_instance DTMF_INST/RAM_128x16_TEST_INST1/RAM_128x16_INST \<br>&nbsp; &nbsp;	 -domain_mapping { {RAM_DEFAULT PDtdsp} }</nobr></pre>

<pre><a name="1036198"></a><nobr><code><strong>include ram.cpf</strong></code></nobr></pre>

<pre><a name="1036199"></a><nobr></nobr></pre>

<pre><a name="1036200"></a><nobr>########################################################################<br>## create isolation and level shifter rules<br>########################################################################</nobr></pre>

<pre><a name="1036203"></a><nobr>create_isolation_rule -name ISORULE1 \<br>&nbsp; &nbsp;	 -from PDtdsp \<br>&nbsp; &nbsp;	 -to PDdefault \<br>&nbsp; &nbsp;	 -isolation_condition {!DTMF_INST/PM_INST/isolation_enable} \<br>&nbsp; &nbsp;	 -isolation_output high</nobr></pre>

<pre><a name="1036210"></a><nobr>create_isolation_rule -name ISORULE3 \<br>&nbsp; &nbsp;	 -from PDram \<br>&nbsp; &nbsp;	 -to PDdefault \<br>&nbsp; &nbsp;	 -isolation_condition {!DTMF_INST/PM_INST/isolation_enable} \<br>&nbsp; &nbsp;	 -isolation_output high</nobr></pre>

<pre><a name="1036217"></a><nobr>create_isolation_rule -name ISORULE4  \<br>&nbsp; &nbsp;	 -from PDshutoff_io \<br>&nbsp; &nbsp;	 -isolation_condition {!DTMF_INST/PM_INST/spi_ip_isolate} \<br>&nbsp; &nbsp;	 -isolation_output low</nobr></pre>

<pre><a name="1036222"></a><nobr></nobr></pre>

<pre><a name="1036223"></a><nobr>create_level_shifter_rule -name LSRULE_H2L3 \<br>&nbsp; &nbsp;	 -from PDdefault \<br>&nbsp; &nbsp;	 -to  PDram \<br>&nbsp; &nbsp;	 -exclude { DTMF_INST/PM_INST/power_switch_enable } </nobr></pre>

<pre><a name="1036237"></a><nobr>update_level_shifter_rules -names LSRULE_H2L3 -location to -cells LVLHLD2BWP</nobr></pre>

<pre><a name="1036238"></a><nobr></nobr></pre>

<pre><a name="1036239"></a><nobr>create_level_shifter_rule -name LSRULE_H2L3_SW \<br>&nbsp; &nbsp;	 -from PDdefault \<br>&nbsp; &nbsp;	 -to  PDram \<br>&nbsp; &nbsp;	 -pins { DTMF_INST/PM_INST/power_switch_enable }</nobr></pre>

<pre><a name="1036243"></a><nobr>update_level_shifter_rules -names LSRULE_H2L3_SW \<br>&nbsp; &nbsp;	 -location to \ <br>&nbsp; &nbsp;	 -cells PTLVLHLD2BWP \<br>&nbsp; &nbsp;	 -prefix CPF_LS_SW</nobr></pre>

<pre><a name="1036245"></a><nobr></nobr></pre>

<pre><a name="1036246"></a><nobr>create_level_shifter_rule -name LSRULE_L2H2  \<br>&nbsp; &nbsp;	 -from PDram \<br>&nbsp; &nbsp;	 -to   PDdefault</nobr></pre>

<pre><a name="1036251"></a><nobr></nobr></pre>

<pre><a name="1036252"></a><nobr>create_level_shifter_rule -name LSRULE_H2L_PLL \<br>&nbsp; &nbsp;	 -from PDpll</nobr></pre>

<pre><a name="1036256"></a><nobr></nobr></pre>

<pre><a name="1036257"></a><nobr>create_level_shifter_rule -name LSRULE_L2H3 <br>&nbsp; &nbsp;	 -from PDdefault   \<br>&nbsp; &nbsp;	 -to   PDpll</nobr></pre>

<pre><a name="1036262"></a><nobr></nobr></pre>

<pre><a name="1036263"></a><nobr>########################################################################<br>## create power net<br>########################################################################</nobr></pre>

<pre><a name="1036266"></a><nobr>create_power_nets  -nets VDD -voltage {0.72:0.81:0.09}</nobr></pre>

<pre><a name="1036267"></a><nobr>create_power_nets  -nets VDD_sw -internal -voltage {0.72:0.81:0.09}</nobr></pre>

<pre><a name="1036268"></a><nobr></nobr></pre>

<pre><a name="1036269"></a><nobr>create_power_nets  -nets VDDL -voltage 0.72</nobr></pre>

<pre><a name="1036270"></a><nobr>create_power_nets  -nets VDDL_sw -internal -voltage 0.72</nobr></pre>

<pre><a name="1036271"></a><nobr></nobr></pre>

<pre><a name="1036272"></a><nobr>create_power_nets  -nets Avdd -voltage 0.81</nobr></pre>

<pre><a name="1036273"></a><nobr></nobr></pre>

<pre><a name="1036274"></a><nobr>create_power_nets -nets VDD_IO -voltage {0.72:0.81:0.09} \<br>&nbsp; &nbsp;	 -external_shutoff_condition {io_shutoff_ack}</nobr></pre>

<pre><a name="1036276"></a><nobr></nobr></pre>

<pre><a name="1036279"></a><nobr>create_ground_nets -nets Avss -voltage 0</nobr></pre>

<pre><a name="1036280"></a><nobr>create_ground_nets -nets VSS -voltage 0</nobr></pre>

<pre><a name="1036281"></a><nobr></nobr></pre>

<pre><a name="1036282"></a><nobr>########################################################################<br>## create analysis view<br>########################################################################</nobr></pre>

<pre><a name="1036285"></a><nobr>create_operating_corner -name PMdvfs2_bc \<br>&nbsp; &nbsp;	 -process 1 -temperature 0 -voltage 0.88  \<br>&nbsp; &nbsp;	 -library_set bc_0v72</nobr></pre>

<pre><a name="1036289"></a><nobr>create_operating_corner -name PMdvfs1_bc \<br>&nbsp; &nbsp;	 -process 1 -temperature 0 -voltage 0.99 \<br>&nbsp; &nbsp;	 -library_set bc_0v81</nobr></pre>

<pre><a name="1036293"></a><nobr>create_operating_corner -name PMdvfs1_wc \<br>&nbsp; &nbsp;	 -process 1 -temperature 125 -voltage 0.81 \<br>&nbsp; &nbsp;	 -library_set wc_0v81</nobr></pre>

<pre><a name="1036297"></a><nobr>create_operating_corner -name PMdvfs2_wc \<br>&nbsp; &nbsp;	 -process 1 -temperature 125 -voltage 0.72 \<br>&nbsp; &nbsp;	 -library_set wc_0v72</nobr></pre>

<pre><a name="1036317"></a><nobr></nobr></pre>

<pre><a name="1036318"></a><nobr>create_analysis_view -name AV_dvfs1_BC -mode PMdvfs1    \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_bc PDdefault@PMdvfs1_bc PDtdsp@PMdvfs1_bc \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram@PMdvfs2_bc PDshutoff_io@PMdvfs1_bc}</nobr></pre>

<pre><a name="1036322"></a><nobr>create_analysis_view -name AV_dvfs1_WC -mode PMdvfs1 \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_wc PDdefault@PMdvfs1_wc PDtdsp@PMdvfs1_wc \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram@PMdvfs2_wc PDshutoff_io@PMdvfs1_wc}</nobr></pre>

<pre><a name="1036326"></a><nobr>create_analysis_view -name AV_dvfs1_off_BC -mode PMdvfs1_off \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_bc PDdefault@PMdvfs1_bc \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDshutoff_io@PMdvfs1_bc}</nobr></pre>

<pre><a name="1036329"></a><nobr>create_analysis_view -name AV_dvfs1_off_WC -mode PMdvfs1_off \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_wc PDdefault@PMdvfs1_wc \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDshutoff_io@PMdvfs1_wc}</nobr></pre>

<pre><a name="1036332"></a><nobr>create_analysis_view -name AV_dvfs1_shutoffio_off_BC -mode PMdvfs1_shutoffio_off \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_bc PDdefault@PMdvfs1_bc}</nobr></pre>

<pre><a name="1036335"></a><nobr>create_analysis_view -name AV_dvfs1_shutoffio_off_WC -mode PMdvfs1_shutoffio_off \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_wc PDdefault@PMdvfs1_wc}</nobr></pre>

<pre><a name="1036338"></a><nobr>create_analysis_view -name AV_dvfs2_BC -mode PMdvfs2 \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_bc PDdefault@PMdvfs2_bc PDtdsp@PMdvfs2_bc \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram@PMdvfs2_bc PDshutoff_io@PMdvfs2_bc}</nobr></pre>

<pre><a name="1036436"></a><nobr>create_analysis_view -name AV_dvfs2_WC -mode PMdvfs2 \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_wc PDdefault@PMdvfs2_wc PDtdsp@PMdvfs2_wc \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram@PMdvfs2_wc PDshutoff_io@PMdvfs2_wc}</nobr></pre>

<pre><a name="1036346"></a><nobr>create_analysis_view -name AV_PMdvfs2_off_BC -mode PMdvfs2_off \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_bc PDdefault@PMdvfs2_bc \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDshutoff_io@PMdvfs2_bc}</nobr></pre>

<pre><a name="1036349"></a><nobr>create_analysis_view -name AV_PMdvfs2_off_WC -mode PMdvfs2_off \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_wc PDdefault@PMdvfs2_wc \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDshutoff_io@PMdvfs2_wc}</nobr></pre>

<pre><a name="1036352"></a><nobr>create_analysis_view -name AV_dvfs2_shutoffio_off_BC -mode PMdvfs2_shutoffio_off \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_bc PDdefault@PMdvfs2_bc}</nobr></pre>

<pre><a name="1036355"></a><nobr>create_analysis_view -name AV_dvfs2_shutoffio_off_WC -mode PMdvfs2_shutoffio_off \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_wc PDdefault@PMdvfs2_wc}</nobr></pre>

<pre><a name="1036358"></a><nobr>create_analysis_view -name AV_scan_BC -mode PMscan \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_bc PDdefault@PMdvfs1_bc PDtdsp@PMdvfs1_bc \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram@PMdvfs2_bc PDshutoff_io@PMdvfs1_bc}</nobr></pre>

<pre><a name="1036362"></a><nobr>create_analysis_view -name AV_scan_WC -mode PMscan \<br>&nbsp; &nbsp;	 -domain_corners {PDpll@PMdvfs1_wc PDdefault@PMdvfs1_wc PDtdsp@PMdvfs1_wc\<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 PDram@PMdvfs2_wc PDshutoff_io@PMdvfs1_wc}</nobr></pre>

<pre><a name="1036365"></a><nobr>########################################################################<br>##power switch, level shifter, isolation cell<br>########################################################################</nobr></pre>

<pre><a name="1036368"></a><nobr>create_power_switch_rule -name PDram_SW -domain PDram -external_power_net VDDL</nobr></pre>

<pre><a name="1036370"></a><nobr>update_power_switch_rule -name PDram_SW \<br>&nbsp; &nbsp;	 -cells HDRDID1BWPHVT \<br>&nbsp; &nbsp;	 -prefix CDN_SW_RAM </nobr></pre>

<pre><a name="1036374"></a><nobr>create_power_switch_rule -name PDtdsp_SW -domain PDtdsp -external_power_net VDD</nobr></pre>

<pre><a name="1036376"></a><nobr>update_power_switch_rule -name PDtdsp_SW \<br>&nbsp; &nbsp;	 -cells HDRDID1BWPHVT \<br>&nbsp; &nbsp;	 -prefix CDN_SW_TDSP </nobr></pre>

<pre><a name="1036380"></a><nobr>end_design</nobr></pre>

<br><br>
<h3>
  <a name="1035893"> </a>Macro CPF -- ram.cpf</h3>


<pre><a name="1036058"></a><nobr>set_cpf_version 1.1</nobr></pre>

<pre><a name="1036059"></a><nobr>set_macro_model ram_256x16A </nobr></pre>

<pre><a name="1042090"></a><nobr># This is a special RAM that retains its memory when it is powered down </nobr></pre>

<pre><a name="1036061"></a><nobr># RAM has one power domain</nobr></pre>

<pre><a name="1036062"></a><nobr>create_power_domain -name RAM_DEFAULT -default \<br>&nbsp; &nbsp;	 -boundary_ports {A* D* CLK CEN WEN Q*}</nobr></pre>

<pre><a name="1036064"></a><nobr>update_power_domain -name RAM_DEFAULT -primary_power_net VDD \<br>&nbsp; &nbsp;	 -primary_ground_net VSS</nobr></pre>

<pre><a name="1036066"></a><nobr># incomplete iso rule specified: the required iso value at inputs <br># when driving domain is off</nobr></pre>

<pre><a name="1036067"></a><nobr>create_isolation_rule -name RAM_iso -isolation_output high -to RAM_DEFAULT <br>&nbsp; &nbsp;	 -pins {A* D* CLK CEN WEN}</nobr></pre>

<pre><a name="1036069"></a><nobr>create_state_retention_rule -name RAM_ret -instances mem* -save_edge !CLK</nobr></pre>

<pre><a name="1036072"></a><nobr>end_macro_model</nobr></pre>

<pre><a name="1036056"></a><nobr></nobr></pre>

<br><br>
<h3>
  <a name="1035899"> </a>Soft IP CPF -- tdsp.cpf</h3>


<pre><a name="1035906"></a><nobr>set_cpf_version 1.1</nobr></pre>

<pre><a name="1035907"></a><nobr>set_design tdsp_core -ports { retention_save retention_restore } <br></nobr></pre>

<pre><a name="1040109"></a><nobr>include tech.cpf</nobr></pre>

<pre><a name="1035911"></a><nobr>########################################################################<br>## create power domains<br>########################################################################<br>create_power_domain -name PDtdsp_block -default</nobr></pre>

<pre><a name="1035917"></a><nobr>update_power_domain -name PDtdsp_block -primary_power_net VDDtdsp_SW \<br>&nbsp; &nbsp;	 -primary_ground_net VSStdsp</nobr></pre>

<pre><a name="1035919"></a><nobr>create_nominal_condition -name nom_0v72 -voltage 0.72</nobr></pre>

<pre><a name="1035920"></a><nobr>update_nominal_condition -name nom_0v72 -library_set wc_0v72</nobr></pre>

<pre><a name="1035922"></a><nobr>create_nominal_condition -name off -voltage 0</nobr></pre>

<pre><a name="1035924"></a><nobr>create_isolation_rule -name PDtdsp_iso -to PDtdsp_block -isolation_output low</nobr></pre>

<pre><a name="1035925"></a><nobr>########################################################################<br>## create power modes<br>########################################################################<br>create_power_mode -name PMtdsp_ON \<br>&nbsp; &nbsp;	 -domain_conditions {PDtdsp_block@nom_0v72} \<br>&nbsp; &nbsp;	 -default</nobr></pre>

<pre><a name="1035933"></a><nobr>create_power_mode -name PMtdsp_OFF \<br>&nbsp; &nbsp;	 -domain_conditions {PDtdsp_block@off}</nobr></pre>

<pre><a name="1041211"></a><nobr>########################################################################<br>## low power rules<br>########################################################################<br>create_state_retention_rule -name PDtdsp_retention_rule \<br>&nbsp; &nbsp;	 -domain PDtdsp_block  -save_edge retention_save \<br>&nbsp; &nbsp;	 -restore_edge {!retention_restore} </nobr></pre>

<pre><a name="1041214"></a><nobr>update_state_retention_rules -names PDtdsp_retention_rule \<br>&nbsp; &nbsp;	 -cell_type "ballon_latch"</nobr></pre>

<pre><a name="1035936"></a><nobr></nobr></pre>

<pre><a name="1040114"></a><nobr>end_design</nobr></pre>

<br><br><br>
<h2>
  <a name="1038463"> </a>Steps to Create the CPF File</h2>


<p>
<strong>Note:&nbsp;</strong>
<a name="1040203"> </a>The example shown in <a href="hierarchical.html#1041471">Figure 4-1</a> is used throughout this section. 
</p>
<ul>
  <a name="1038468"></a><li><p><a href="hierarchical.html#1038469">Understanding the CPF file of the Macro Cell</a></p>

  <a name="1038996"></a><li><p><a href="hierarchical.html#1038962">Understanding the CPF file of the Soft IP</a></p>

  <a name="1039474"></a><li><p>&nbsp; &nbsp;	 <a href="hierarchical.html#1038959">Creating the CPF File for the Top-Level Design</a></p>
</ul>
<br><br>
<h3>
  <a name="1038469"> </a>Understanding the CPF file of the Macro Cell </h3>


<p>
  <a name="1038816"> </a>A macro cell can have a behavioral model to describe its functionality. Implementation and verification tools therefore have to rely on the CPF modeling of the internal power network using the boundary ports. This section shows some of the constructs you can expect in a CPF macro model.</p>


<p>
  <a name="1040295"> </a>For the complete CPF macro model used in this design, refer to <a href="hierarchical.html#1035893">Macro CPF -- ram.cpf</a>.</p>

<ol type="1">
  <li value="1"><p><a name="1038544"> </a>The definition of a CPF macro model starts with a <code><a href="../cpf_ref/reference.html#set_macro_model">set_macro_model</a></code> command that specifies the name of the library cell that represents the macro cell. </p>
<dl>
<p>
  <a name="1038654"> </a>For the macro model used in the design in <a href="hierarchical.html#1041471">Figure 4-1</a>:</p>

</dl><dl>
<pre><a name="1038649"></a><nobr>set_macro_model ram_256x16A </nobr></pre>
</dl>  <li value="2"><p><a name="1038640"> </a>The definition ends with an <code><a href="../cpf_ref/reference.html#end_macro_model">end_macro_model</a></code> command. </p>
<dl>
<p>
  <a name="1038644"> </a>The commands <code>set_macro_model</code> and <code>end_macro_model</code> delimit the scope of a macro model description. </p>


<p>
  <a name="1038545"> </a>All commands between <code>set_macro_model</code> and <code>end_macro_model</code> describe the internal implementation of the macro cell. </p>

</dl>  <li value="3"><p><a name="1038542"> </a>The CPF macro model lists all the power domains that the macro cell contains. </p>
<dl>
<p>
  <a name="1038664"> </a>Only the (boundary) input and output pins of the macro cell are visible to the outside world. The input and output pins that belong to a specific power domain are specified through the <code>-boundary_ports</code> option of the corresponding <code>create_power_domain</code> command.</p>


<p>
  <a name="1038670"> </a>The domain definition indicates whether the domain is always on or switchable. For switchable domains, the definition also indicates how the domain is powered down.</p>


<p>
  <a name="1038667"> </a>The CPF macro model used in the design in <a href="hierarchical.html#1041471">Figure 4-1</a> has one power domain. All of its boundary pins belong to this domain. The power domain is further unswitched.</p>

</dl><dl>
<pre><a name="1038616"></a><nobr>create_power_domain -name RAM_DEFAULT -default \<br>&nbsp; &nbsp;	 -boundary_ports {A* D* CLK CEN WEN Q*}</nobr></pre>
</dl><dl>
<p>
  <a name="1038595"> </a>If the pin is an input pin, the power domain driven by the pin is the specified domain. If the pin is an output pin, the domain driving the pin is the specified power domain. </p>

</dl>  <li value="4"><p><a name="1038501"> </a>The CPF macro model also specifies for each of its power domains the boundary ports that provide the power supply to that domain.</p>
<dl>
<p>
  <a name="1038679"> </a>For the CPF macro model used in the design in <a href="hierarchical.html#1041471">Figure 4-1</a>:</p>

</dl><dl>
<pre><a name="1038954"></a><nobr>update_power_domain -name RAM_DEFAULT -primary_power_net VDD \<br>&nbsp; &nbsp;	 -primary_ground_net VSS</nobr></pre>
</dl>  <li value="5"><p><a name="1038686"> </a>If the macro cell has switchable power domains, its CPF macro model can contain isolation rules.</p>
<dl>
<p>
  <a name="1038757"> </a>A complete isolation rule in a macro cell describes the isolation logic implemented inside the macro cell. Complete rules contain the isolation condition and isolation output. Complete rules are optional but can be specified for documentation purposes.</p>


<p>
  <a name="1038776"> </a>IP blocks can have special requirements for input ports. For example, when the domains driving these input ports are switched off, the signals must be held at specific values. For these signals, no isolation condition can be specified because the IP developer has no knowledge of how the IP will be used. </p>


<p>
  <a name="1038774"> </a>For such cases, isolation rules without enable conditions (neither <code>-isolation_condition</code> nor <code>-no_condition</code> option specified) are specified. Such isolation rules are called <em>incomplete</em> isolation rules. </p>


<p>
  <a name="1038764"> </a>For the CPF macro model used in the design in <a href="hierarchical.html#1041471">Figure 4-1</a>, an incomplete isolation rule specifies the required isolation value at its inputs when the driving domain is powered down.</p>

</dl><dl>
<pre><a name="1038484"></a><nobr>create_isolation_rule -name RAM_iso -to RAM_DEFAULT -isolation_output low \<br>&nbsp; &nbsp;	 -pins {A* D* CLK CEN WEN}</nobr></pre>
</dl><dl>
<p>
<strong>Note:&nbsp;</strong>
<a name="1042097"> </a>For more information on how incomplete isolation rules are addressed when the macro is used, refer to "Resolve the precedence of the top-level and block-level rules" in <a href="hierarchical.html#1039475">Instantiating the Macro Cell in the Top-Level CPF and Loading the Corresponding CPF</a>.
</p>

</dl>  <li value="6"><p><a name="1038846"> </a>If the macro cell has switchable power domains, the CPF macro model can contain state retention rules.</p>
<dl>
<p>
  <a name="1038485"> </a>For the macro cell in <a href="hierarchical.html#1041471">Figure 4-1</a>, one state retention rule is defined.</p>

</dl><dl>
<pre><a name="1038804"></a><nobr>create_state_retention_rule -name RAM_ret -instances mem* -save_edge !CLK</nobr></pre>
</dl><dl>
<p>
  <a name="1038863"> </a>In this example, the memory array register names start with <code>mem.</code></p>

</dl>  <li value="7"><p><a name="1040029"> </a>If the macro cell contains several switchable power domains, the CPF macro model can list its power modes. This allows the verification tools to check consistency between the modes defined at the top-level and in the macro to ensure that the macro cell is correctly integrated in the design.</p>
</ol>

  <a name="1038933"> </a><table border="0"><tr><td valign="top"><img src="../support/tip.gif"></td><td>Because a macro model is already implemented, there is no need to include a CPF file with technology-related information.</td></table>


<p>
  <a name="1039030"> </a>For more information on macro modeling, refer to <a href="../cpf_ref/hier_flow.html#Macro Cell">Modeling a Macro Cell </a>in the <em>Common Power Format Language Reference</em>.</p>


<br><br>
<h3>
  <a name="1038962"> </a>Understanding the CPF file of the Soft IP</h3>


<p>
  <a name="1039007"> </a>As opposed to a macro cell, the power intent of a soft IP still needs to be implemented. A soft IP can therefore be seen as an independent small design.</p>


<p>
  <a name="1040423"> </a>For the complete CPF of the soft block used in this design, refer to <a href="hierarchical.html#1035899">Soft IP CPF -- tdsp.cpf</a>.</p>

<ol type="1">
  <li value="1"><p><a name="1039012"> </a>The definition of a soft IP starts with a <code><a href="../cpf_ref/reference.html#set_design">set_design</a></code> command that specifies the name of the module that represents the soft IP. </p>
<dl>
<p>
  <a name="1040432"> </a>If the soft IP requires <em>virtual</em> ports (additional ports that do not exist in the definition of this module before implementation) for the control signals of the low power logic such as isolation logic, state-retention logic, and so on, these ports are specified with the <code>-ports</code> option of the <code><a href="../cpf_ref/reference.html#set_design">set_design</a></code> command.</p>


<p>
  <a name="1039016"> </a>For the soft block used in the design in <a href="hierarchical.html#1041471">Figure 4-1</a>:</p>

</dl><dl>
<pre><a name="1038968"></a><nobr>set_design tdsp_core -ports { retention_save retention_restore } </nobr></pre>
</dl><dl>
<p>
  <a name="1039107"> </a>The <code>retention_save</code> and <code>retention_restore</code> ports are the virtual ports of the soft IP used in this design.</p>

</dl>  <li value="2"><p><a name="1039064"> </a>The definition ends with an <code><a href="../cpf_ref/reference.html#end_design">end_design</a></code> command. </p>
  <li value="3"><p><a name="1039074"> </a>All commands between <code>set_design</code> and <code>end_design</code> describe the internal power intent of the soft IP.</p>
<dl>
<p>
  <a name="1040179"> </a>The constructs used depend on the low power technique used. For more information, see the <a href="create_cpf.html#1036502">Chapter 2, "Creating a CPF File."</a></p>

</dl></ol>

<br><br>
<h3>
  <a name="1038959"> </a>Creating the CPF File for the Top-Level Design</h3>


<p>
  <a name="1039477"> </a>The CPF of the top-level design contains the following information:</p>

<ul>
  <a name="1039480"></a><li><p>Definition of the power domains at the top level</p>

  <a name="1039482"></a><li><p>Definition of the nominal conditions at the top level</p>

  <a name="1039484"></a><li><p>Definition of the power modes at the top level</p>

  <a name="1039485"></a><li><p>Association of the library sets with the nominal conditions</p>

  <a name="1039546"></a><li><p><a href="hierarchical.html#1039475"><strong>Instantiating the Macro Cell in the Top-Level CPF and Loading the Corresponding CPF</strong></a><strong> </strong></p>

  <a name="1039547"></a><li><p><a href="hierarchical.html#1040750"><strong>Instantiating a Soft IP in the Top-Level CPF and Loading the Corresponding CPF</strong></a></p>

  <a name="1039490"></a><li><p>Specification of the rules at the top-level</p>

  <a name="1039491"></a><li><p>Specification of timing constraints, power targets, switching activities per mode</p>

  <a name="1039498"></a><li><p>Declaration of the power and ground nets</p>

  <a name="1039499"></a><li><p>Declaration of the global connections</p>

  <a name="1039500"></a><li><p>Addition of implementation information to the rules</p>

  <a name="1039504"></a><li><p>Specification of the operating corners</p>

  <a name="1039508"></a><li><p>Specification of the analysis views</p>
</ul>
<p>
  <a name="1039565"> </a>The steps shown in <strong>bold</strong> are unique to the hierarchical flow and will be further explained here.</p>


<p>
  <a name="1040472"> </a>For the complete CPF of the top-level design in <a href="hierarchical.html#1041471">Figure 4-1</a>, refer to <a href="hierarchical.html#1035888">Top CPF File</a>.</p>


<p>
  <a name="1040467"> </a></p>




<h4>
  <a name="1039475"> </a>Instantiating the Macro Cell in the Top-Level CPF and Loading the Corresponding CPF </h4>


<p>
  <a name="1040521"> </a>When you instantiate a macro cell in the design, you must indicate which CPF macro model applies to the specified instance. This can be done in one of the following ways:</p>

<ul>
  <a name="1039566"></a><li><p>First load the CPF macro model, then use the <code><a href="../cpf_ref/reference.html#set_instance">set_instance</a></code> command with the <code>-model</code> option to reference the CPF macro model.</p>
<dl>
<p>
  <a name="1039577"> </a>The CPF macro model can be included </p>

</dl><ul>
  <a name="1039590"> </a><li><p>Explicitly (see <a href="hierarchical.html#1039598">Example&nbsp;4-1</a>)
</p>

  <a name="1039591"> </a><li><p>Implicitly using the <code><a href="../cpf_ref/reference.html#include">include</a></code> command (see <a href="hierarchical.html#1039720">Example&nbsp;4-2</a>)
</p>
</ul>
  <a name="1039576"></a><li><p>Use the <code>set_instance</code> command without the <code>-model</code> option, immediately followed by the CPF macro model. </p>
<dl>
<p>
  <a name="1039689"> </a>The CPF macro model can be included </p>

</dl><ul>
  <a name="1039693"> </a><li><p>Explicitly (see <a href="hierarchical.html#1039726">Example&nbsp;4-3</a>)
</p>

  <a name="1039698"> </a><li><p>Implicitly using the <code><a href="../cpf_ref/reference.html#include">include</a></code> command (see <a href="hierarchical.html#1039710">Example&nbsp;4-4</a>)
</p>
</ul></ul>
  <a name="1039598"> </a><h4>
Example 4-1   Explicit CPF Specification of Macro Loaded before Macro Instantiation</h4>


<pre><a name="1039603"></a><nobr><code><strong>set_macro_model</strong></code> ram_256x16A <br>...<br><code><strong>end_macro_model</strong></code></nobr></pre>

<pre><a name="1039599"></a><nobr>set_design dtmf_chip</nobr></pre>

<pre><a name="1039620"></a><nobr>create_power_domain ...</nobr></pre>

<pre><a name="1039621"></a><nobr>create_nominal_condition ...</nobr></pre>

<pre><a name="1039622"></a><nobr>update_nominal_condition ...</nobr></pre>

<pre><a name="1039623"></a><nobr>create_power_mode...</nobr></pre>

<pre><a name="1039637"></a><nobr><code><strong>set_instance</strong></code> DTMF_INST/RAM_128x16_TEST_INST1/RAM_128x16_INST <code><strong>-model</strong></code> ram_256x16A \<br>&nbsp; &nbsp;	 -domain_mapping { {RAM_DEFAULT PDtdsp} }<br>...</nobr></pre>

<pre><a name="1040512"></a><nobr>end_design</nobr></pre>

  <a name="1039720"> </a><h4>
Example 4-2   Implicit CPF Specification of Macro Loaded before Macro Instantiation</h4>


<pre><a name="1039640"></a><nobr><code><strong>include</strong></code> ram.cpf</nobr></pre>

<pre><a name="1039649"></a><nobr>set_design dtmf_chip</nobr></pre>

<pre><a name="1039650"></a><nobr>create_power_domain ...</nobr></pre>

<pre><a name="1039651"></a><nobr>create_nominal_condition ...</nobr></pre>

<pre><a name="1039652"></a><nobr>update_nominal_condition ...</nobr></pre>

<pre><a name="1039653"></a><nobr>create_power_mode...</nobr></pre>

<pre><a name="1039654"></a><nobr><code><strong>set_instance</strong></code> DTMF_INST/RAM_128x16_TEST_INST1/RAM_128x16_INST <code><strong>-model</strong></code> ram_256x16A \<br>&nbsp; &nbsp;	 -domain_mapping { {RAM_DEFAULT PDtdsp} }<br>...</nobr></pre>

<pre><a name="1040513"></a><nobr>end_design</nobr></pre>

  <a name="1039726"> </a><h4>
Example 4-3   Explicit CPF Specification of Macro Loaded after Macro Instantiation</h4>


<pre><a name="1039744"></a><nobr>set_design dtmf_chip</nobr></pre>

<pre><a name="1039745"></a><nobr>create_power_domain ...</nobr></pre>

<pre><a name="1039746"></a><nobr>create_nominal_condition ...</nobr></pre>

<pre><a name="1039747"></a><nobr>update_nominal_condition ...</nobr></pre>

<pre><a name="1039748"></a><nobr>create_power_mode...</nobr></pre>

<pre><a name="1039752"></a><nobr><code><strong>set_instance</strong></code> DTMF_INST/RAM_128x16_TEST_INST1/RAM_128x16_INST \<br>&nbsp; &nbsp;	 -domain_mapping { {RAM_DEFAULT PDtdsp} }<br><code><strong>set_macro_model</strong></code> ram_256x16A </nobr></pre>

<pre><a name="1039757"></a><nobr>...<br><code><strong>end_macro_model</strong></code></nobr></pre>

<pre><a name="1040514"></a><nobr>...</nobr></pre>

<pre><a name="1040515"></a><nobr>end_design</nobr></pre>

  <a name="1039710"> </a><h4>
Example 4-4   Implicit CPF Specification of Macro Loaded after Macro Instantiation</h4>


<pre><a name="1039735"></a><nobr>set_design dtmf_chip</nobr></pre>

<pre><a name="1039736"></a><nobr>create_power_domain ...</nobr></pre>

<pre><a name="1039737"></a><nobr>create_nominal_condition ...</nobr></pre>

<pre><a name="1039738"></a><nobr>update_nominal_condition ...</nobr></pre>

<pre><a name="1039739"></a><nobr>create_power_mode...</nobr></pre>

<pre><a name="1039705"></a><nobr><code><strong>set_instance</strong></code> DTMF_INST/RAM_128x16_TEST_INST1/RAM_128x16_INST \<br>&nbsp; &nbsp;	 -domain_mapping { {RAM_DEFAULT PDtdsp} }</nobr></pre>

<pre><a name="1039706"></a><nobr><code><strong>include</strong></code> ram.cpf</nobr></pre>

<pre><a name="1040516"></a><nobr>...</nobr></pre>

<pre><a name="1040517"></a><nobr>end_design</nobr></pre>

<p>
  <a name="1039703"> </a>When you instantiate a macro cell in the design, you must also indicate how the domains of the CPF macro model must be mapped to the domains of the parent level using the <code>-domain_mapping</code> option of the <code>set_instance</code> command. For the example in <a href="hierarchical.html#1041471">Figure 4-1</a>:</p>


<pre><a name="1040566"></a><nobr>set_instance DTMF_INST/RAM_128x16_TEST_INST1/RAM_128x16_INST \<br>&nbsp; &nbsp;	 <code><strong>-domain_mapping { {RAM_DEFAULT PDtdsp} }</strong></code></nobr></pre>

<p>
  <a name="1039802"> </a>The <code>ram_256x16A</code> model contains one power domain, <code>RAM_DEFAULT</code>. The <code>set_instance</code> command indicates that this domain must be mapped to the <code>PDtdsp</code> domain.</p>


<p>
  <a name="1039789"> </a>By mapping the domains, the tools will be able to</p>

<ul>
  <a name="1039790"></a><li><p>Connect the primary power and ground pins of the block-level domain to the primary power and ground nets of the corresponding domain specified at the top level.</p>
<dl>
<p>
  <a name="1039841"> </a>The primary power and ground pins of power domain <code>RAM_DEFAULT</code> are <code>VDD</code> and <code>VSS</code>, while the primary nets of power domain <code>PDtdsp</code> are <code>VDDL_sw</code> and <code>VSS</code>. This implies that <code>VDD</code> will be connected to <code>VDDL_sw</code>, while the <code>VSS</code> pin will be connected to the <code>VSS</code> net.</p>

</dl>
  <a name="1039791"></a><li><p>Merge the elements of each block-level domain into the corresponding top-level domain.</p>
<dl>
<p>
  <a name="1040611"> </a>In this design, the <code>RAM_128x16_TEST_INST1</code> instance becomes a leaf instance in the <code>PDtdsp</code> domain.</p>

</dl>
  <a name="1040612"></a><li><p>Merge the power modes of the CPF macro model with the power modes of the top level. </p>
<dl>
<p>
  <a name="1040613"> </a>In this design, the <code>ram_256x16A</code> model does not have a power mode defined, it will have the same power modes as the top-level domain <code>PDtdsp</code>.</p>

</dl>
  <a name="1040074"></a><li><p>Resolve the precedence of the power domain settings.</p>
<dl>
<p>
  <a name="1039887"> </a>Power domain settings are also referred to as domain attributes. For more information, refer to <a href="../cpf_ref/hier_flow.html#Domain Attributes">Handling Domain Attributes after Domain Mapping</a> in the <em>Common Power Format Language Reference. </em>In this design there are no domain attributes to be resolved.</p>

</dl>
  <a name="1039794"></a><li><p>Resolve the precedence of the top-level and block-level rules.</p>
<dl>
<p>
  <a name="1039785"> </a>The CPF macro model used in this design has a state retention rule.</p>

</dl><dl>
<pre><a name="1040651"></a><nobr>create_state_retention_rule -name RAM_ret -instances mem* -save_edge !CLK</nobr></pre>
</dl><dl>
<p>
  <a name="1040627"> </a>The top-level domain <code>PDtdsp</code> has no state retention rules. Even if the domain did have a rule, the block-level rule would still overwrite the top-level rule. </p>


<p>
  <a name="1040628"> </a>The CPF macro model used in this design also has an isolation rule.</p>

</dl><dl>
<pre><a name="1040679"></a><nobr>create_isolation_rule -name RAM_iso -isolation_output low -to RAM_DEFAULT <br>&nbsp; &nbsp;	 -pins {A* D* CLK CEN WEN}</nobr></pre>
</dl><dl>
<p>
  <a name="1040694"> </a>The isolation rule <code>RAM_iso</code> is an incomplete rule and applies to the net segments that drive logic in the <code>RAM_DEFAULT</code> domain. It also requires that the output value of the isolation gates be low when isolation is in effect. The rule specifies the isolation requirements at the selected ports of the macro and this information can be used by the top-level CPF to generate the correct isolation rule at this port.</p>


<p>
  <a name="1040721"> </a>The tools will check the power domain to which the leaf level driver of a net selected by the rule belongs.</p>

</dl><ul>
  <a name="1040731"> </a><li><p>If the leaf-level driver belongs to the same power domain as the port that the rule 
applies to, or an unswitched power domain, no isolation of that net segment is needed.
</p>

  <a name="1040734"> </a><li><p>If the leaf-level driver belongs to a different switchable power domain, the tools will 
check if that power domain has a default isolation condition. If a default isolation 
condition is defined, this condition can be used by the incomplete isolation rule to 
make the rule complete. If no default isolation condition was defined for the driving 
power domain, the incomplete isolation rule is treated as a design constraint. 
</p>
</ul><dl>
<p>
  <a name="1040748"> </a>In this design the macro cell is driven by leaf-level drivers in the <code>PDdefault</code> domain, which is a non-switchable domain.</p>

</dl></ul>


<h4>
  <a name="1040750"> </a>Instantiating a Soft IP in the Top-Level CPF and Loading the Corresponding CPF</h4>


<p>
  <a name="1040785"> </a>When you instantiate a soft block in the design, you must indicate which CPF specification applies to the specified instance. This can be done in one of the following ways:</p>

<ul>
  <a name="1040122"></a><li><p>First load the CPF specification, then use the <code><a href="../cpf_ref/reference.html#set_instance">set_instance</a></code> command with the <code>-design</code> option.</p>
<dl>
<p>
  <a name="1040123"> </a>The CPF specification can be included </p>

</dl><ul>
  <a name="1040127"> </a><li><p>Explicitly (see <a href="hierarchical.html#1040796">Example&nbsp;4-5</a>)
</p>

  <a name="1040132"> </a><li><p>Implicitly using the <code><a href="../cpf_ref/reference.html#include">include</a></code> command (see <a href="hierarchical.html#1040806">Example&nbsp;4-6</a>)
</p>
</ul>
  <a name="1040133"></a><li><p>Use the <code>set_instance</code> command without the <code>-design</code> option, followed by the CPF specification. </p>
<dl>
<p>
  <a name="1040134"> </a>The CPF specification can be included </p>

</dl><ul>
  <a name="1040138"> </a><li><p>Explicitly (see <a href="hierarchical.html#1040831">Example&nbsp;4-7</a>)
</p>

  <a name="1040143"> </a><li><p>Implicitly using the <code><a href="../cpf_ref/reference.html#include">include</a></code> command (see <a href="hierarchical.html#1040842">Example&nbsp;4-8</a>)
</p>
</ul></ul>
  <a name="1040796"> </a><h4>
Example 4-5   Explicit CPF Specification of Soft IP Loaded before Soft IP Instantiation</h4>


<pre><a name="1042519"></a><nobr><code><strong>set_design</strong></code> tdsp_core -ports { retention_save retention_restore }</nobr></pre>

<pre><a name="1040797"></a><nobr>...<br><code><strong>end_design</strong></code></nobr></pre>

<pre><a name="1040799"></a><nobr>set_design dtmf_chip</nobr></pre>

<pre><a name="1042513"></a><nobr>create_power_domain ...</nobr></pre>

<pre><a name="1040800"></a><nobr>create_nominal_condition ...</nobr></pre>

<pre><a name="1040801"></a><nobr>update_nominal_condition ...</nobr></pre>

<pre><a name="1040802"></a><nobr>create_power_mode...</nobr></pre>

<pre><a name="1040863"></a><nobr><code><strong>set_instance</strong></code> DTMF_INST/TDSP_CORE_INST0 <code><strong>-design</strong></code> tdsp_core \<br>&nbsp; &nbsp;	 -domain_mapping { {PDtdsp_block PDtdsp} } \<br>&nbsp; &nbsp;	 -port_mapping { {retention_save DTMF_INST/PM_INST/state_retention_save} \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 {retention_restore DTMF_INST/PM_INST/state_retention_restore} } <br>...</nobr></pre>

<pre><a name="1040804"></a><nobr>end_design</nobr></pre>

  <a name="1040806"> </a><h4>
Example 4-6   Implicit CPF Specification of Soft IP Loaded before Soft IP Instantiation</h4>


<pre><a name="1040807"></a><nobr><code><strong>include</strong></code> tdsp.cpf</nobr></pre>

<pre><a name="1040808"></a><nobr>set_design dtmf_chip</nobr></pre>

<pre><a name="1040809"></a><nobr>create_power_domain ...</nobr></pre>

<pre><a name="1040810"></a><nobr>create_nominal_condition ...</nobr></pre>

<pre><a name="1040811"></a><nobr>update_nominal_condition ...</nobr></pre>

<pre><a name="1040812"></a><nobr>create_power_mode...</nobr></pre>

<pre><a name="1040867"></a><nobr><code><strong>set_instance</strong></code> DTMF_INST/TDSP_CORE_INST0 <code><strong>-design</strong></code> tdsp_core \<br>&nbsp; &nbsp;	 -domain_mapping { {PDtdsp_block PDtdsp} } \<br>&nbsp; &nbsp;	 -port_mapping { {retention_save DTMF_INST/PM_INST/state_retention_save} \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 {retention_restore DTMF_INST/PM_INST/state_retention_restore} } </nobr></pre>

<pre><a name="1040813"></a><nobr>...</nobr></pre>

<pre><a name="1040814"></a><nobr>end_design</nobr></pre>

  <a name="1040831"> </a><h4>
Example 4-7   Explicit CPF Specification of Soft IP Loaded after Soft IP Instantiation</h4>


<pre><a name="1040832"></a><nobr>set_design dtmf_chip</nobr></pre>

<pre><a name="1040833"></a><nobr>create_power_domain ...</nobr></pre>

<pre><a name="1040834"></a><nobr>create_nominal_condition ...</nobr></pre>

<pre><a name="1040835"></a><nobr>update_nominal_condition ...</nobr></pre>

<pre><a name="1040836"></a><nobr>create_power_mode...</nobr></pre>

<pre><a name="1040871"></a><nobr><code><strong>set_instance</strong></code> DTMF_INST/TDSP_CORE_INST0 -domain_mapping { {PDtdsp_block PDtdsp} } \<br>&nbsp; &nbsp;	 -port_mapping { {retention_save DTMF_INST/PM_INST/state_retention_save} \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 {retention_restore DTMF_INST/PM_INST/state_retention_restore} } </nobr></pre>

<pre><a name="1042515"></a><nobr><br><code><strong>set_design</strong></code> tdsp_core -ports { retention_save retention_restore }</nobr></pre>

<pre><a name="1040838"></a><nobr>...<br><code><strong>end_design</strong></code></nobr></pre>

<pre><a name="1040839"></a><nobr>...</nobr></pre>

<pre><a name="1040840"></a><nobr>end_design</nobr></pre>

  <a name="1040842"> </a><h4>
Example 4-8   Implicit CPF Specification of Soft IP Loaded after Soft IP Instantiation</h4>


<pre><a name="1040843"></a><nobr>set_design dtmf_chip</nobr></pre>

<pre><a name="1040844"></a><nobr>create_power_domain ...</nobr></pre>

<pre><a name="1040845"></a><nobr>create_nominal_condition ...</nobr></pre>

<pre><a name="1040846"></a><nobr>update_nominal_condition ...</nobr></pre>

<pre><a name="1040847"></a><nobr>create_power_mode...</nobr></pre>

<pre><a name="1040879"></a><nobr><code><strong>set_instance</strong></code> DTMF_INST/TDSP_CORE_INST0 -domain_mapping { {PDtdsp_block PDtdsp} } \<br>&nbsp; &nbsp;	 -port_mapping { {retention_save DTMF_INST/PM_INST/state_retention_save} \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 {retention_restore DTMF_INST/PM_INST/state_retention_restore} } </nobr></pre>

<pre><a name="1040848"></a><nobr></nobr></pre>

<pre><a name="1040849"></a><nobr><code><strong>include</strong></code> tdsp.cpf</nobr></pre>

<pre><a name="1040850"></a><nobr>...</nobr></pre>

<pre><a name="1040851"></a><nobr>end_design</nobr></pre>

<p>
  <a name="1040158"> </a>When you instantiate a soft block in the design, you must also indicate </p>

<ul>
  <a name="1041189"></a><li><p>How the domains of the soft block must be mapped to the domains of the parent level using the <code>-domain_mapping</code> option of the <code>set_instance</code> command. </p>

  <a name="1041194"></a><li><p>How the virtual ports must be mapped to the parent-level drivers using the <code>-port_mapping</code> option of the <code>set_instance</code> command. If there are no virtual ports declared in the corresponding <code>set_design</code> command, this option is not needed.</p>

  <a name="1042038"></a><li><p>The values that must be assigned to the parameters declared in the block-level CPF using the <code>-parameter_mapping</code> option of the <code>set_instance</code> command. If there are no parameters declared in the corresponding <code>set_design</code> command, this option is not needed.</p>
<dl>
<p>
<strong>Note:&nbsp;</strong>
<a name="1042107"> </a>For an example of parameter mapping, see the Examples for the <code><a href="../cpf_ref/reference.html#set_instance">set_instance</a></code> command.
</p>

</dl></ul>
<p>
  <a name="1041195"> </a>The example in <a href="hierarchical.html#1041471">Figure 4-1</a> has two instances of the same soft block:</p>


<pre><a name="1041171"></a><nobr>set_instance DTMF_INST/TDSP_CORE_INST0 \<br>&nbsp; &nbsp;	 <code><strong>-domain_mapping</strong></code> { {PDtdsp_block PDtdsp} } \<br>&nbsp; &nbsp;	 <code><strong>-port_mapping </strong></code>{ {retention_save DTMF_INST/PM_INST/state_retention_save} \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 {retention_restore DTMF_INST/PM_INST/state_retention_restore} } </nobr></pre>

<pre><a name="1041175"></a><nobr>set_instance DTMF_INST/TDSP_CORE_INST1 \<br>&nbsp; &nbsp;	 -<code><strong>domain_mapping</strong></code> { {PDtdsp_block PDtdsp} } \<br>&nbsp; &nbsp;	 <code><strong>-port_mapping</strong></code> { {retention_save DTMF_INST/PM_INST/state_retention_save} \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 {retention_restore DTMF_INST/PM_INST/state_retention_restore} }</nobr></pre>

<p>
  <a name="1041172"> </a>The <code>tdsp_core</code> model contains only one power domain, <code>PDtdsp_block</code>, which is mapped to the <code>PDtdsp</code> power domain for both instances. The two virtual ports for state retention control signals are connected to two output pins of the power control module (<code>PM_INST</code>).</p>


<p>
  <a name="1041351"> </a>The <code>PDtdsp_block</code> domain is an external switchable block-level domain, so it can be mapped into any type of domain at the top level. For other cases of domain mapping, refer to Handling Power Domain Mapping in the Common Power Format Language Reference.</p>


<p>
  <a name="1041221"> </a>By mapping the domains, the tools will be able to</p>

<ul>
  <a name="1041222"></a><li><p>Connect the primary power and ground nets of the block-level domain to the primary power and ground nets of the corresponding domain specified at the top level.</p>
<dl>
<p>
  <a name="1041223"> </a>The primary power and ground nets of power domain <code>PDtdsp_block</code> are <code>VDDtdsp_SW</code> and <code>VSStdsp</code>, while the primary nets of power domain <code>PDtdsp</code> are <code>VDDL_sw</code> and <code>VSS</code>. This implies that <code>VDDtdsp_SW</code> will be connected to <code>VDDL_sw</code>, while <code>VSStdsp</code> will be connected to the <code>VSS</code> net.</p>

</dl>
  <a name="1041224"></a><li><p>Merge the elements of each block-level domain into the corresponding top-level domain.</p>
<dl>
<p>
  <a name="1041225"> </a>Because the soft block In this design only has one block domain, the <code>TDSP_CORE_INST0</code> and <code>TDSP_CORE_INST1</code> instances becomes instances of the <code>PDtdsp</code> domain.</p>

</dl>
  <a name="1041226"></a><li><p>Merge the power modes of the soft IP with the power modes of the top level. </p>
<dl>
<p>
  <a name="1041322"> </a>If all block-level domains are mapped into top-level domains, the top-level mode definitions also become the power modes for the soft block after the domain mapping. </p>


<p>
  <a name="1041341"> </a>In this design, the <code>tdsp_core</code> model has two power modes defined. Because it's one power domain maps to a top-level power domain, the soft block will have the same power modes as the top-level domain <code>PDtdsp</code>.</p>


<p>
  <a name="1041342"> </a>For more information, refer to <a href="../cpf_ref/hier_flow.html#Power Modes">Handling Power Modes after Domain Mapping</a> in the <em>Common Power Format Language Reference</em>.</p>

</dl>
  <a name="1041228"></a><li><p>Resolve the precedence of the power domain settings.</p>
<dl>
<p>
  <a name="1041229"> </a>Power domain settings are also referred to as domain attributes. For more information, refer to <a href="../cpf_ref/hier_flow.html#Domain Attributes">Handling Domain Attributes after Domain Mapping</a> in the <em>Common Power Format Language Reference. </em>In this design there are no domain attributes to be resolved.</p>

</dl>
  <a name="1041234"></a><li><p>Resolve the precedence of the top-level and block-level rules.</p>
<dl>
<p>
  <a name="1041235"> </a>The CPF specification of the soft IP used in this design has a state retention rule.</p>

</dl><dl>
<pre><a name="1041374"></a><nobr>create_state_retention_rule -name PDtdsp_retention_rule \<br>&nbsp; &nbsp;	 -domain PDtdsp_block  -save_edge retention_save \<br>&nbsp; &nbsp;	 -restore_edge {!retention_restore} </nobr></pre>
</dl><dl>
<p>
  <a name="1041237"> </a>The top-level domain <code>PDtdsp</code> has no state retention rules. Even if the domain did have a rule, the block-level rule would still overwrite the top-level rule. </p>


<p>
  <a name="1041378"> </a>The CPF specification of the soft IP used in this design also has an isolation rule.</p>

</dl><dl>
<pre><a name="1040092"></a><nobr>create_isolation_rule -name PDtdsp_iso -to PDtdsp_block -isolation_output low</nobr></pre>
</dl><dl>
<p>
  <a name="1041389"> </a>The isolation rule <code>PDtdsp_iso</code> is an incomplete rule and applies to the net segments that drive logic in the <code>PDtdsp_block</code> domain. It also requires that the output value of the isolation gates be low when isolation is in effect. However to complete the rule, the isolation condition must be derived from the corresponding top-level domain.</p>


<p>
  <a name="1041390"> </a>The tools will check the power domain to which the leaf level driver of a net selected by the rule belongs.</p>

</dl><ul>
  <a name="1041391"> </a><li><p>If the leaf-level driver belongs to the same power domain, no isolation of that net 
segment is needed.
</p>

  <a name="1041392"> </a><li><p>If the leaf-level driver belongs to a different switchable power domain, the tools will 
check if that power domain has a default isolation condition. If a default isolation 
condition is defined, this condition can be used by the incomplete isolation rule to 
make the rule complete. If no default isolation condition was defined for the driving 
power domain, the incomplete isolation rule is treated as a design constraint. 
</p>
</ul><dl>
<p>
  <a name="1041404"> </a>In this design the IP instances, <code>TDSP_CORE_INST0</code> and <code>TDSP_CORE_INST1,</code>are driven by leaf-level drivers in the <code>PDdefault</code> domain, which is a non-switchable domain.</p>


<p>
  <a name="1041383"> </a>For more information refer to <a href="../cpf_ref/rules.html#Hierarchical Flow">Precedence of Rules in the Hierarchical Flow</a> in the <em>Common Power Format Language Reference</em></p>

</dl></ul>
  

</blockquote>

<br>
<a href="#pagetop">Return to top of page</a>
<hr>
<p>
<!-- Begin Buttons -->
<table border="0" cellpadding="0" cellspacing="0" width="650">
<tr>
  <td height="20" width="59"><a href="javascript:openLibrary()"><img src="../support/nav2_library.gif" border="0" alt="View Library" height="20" width="59"></a></td>
  <td height="20" width="73"><a href="cpf_userTOC.html"><img src="../support/nav2_toc.gif" border="0" alt="View Table Of Contents" height="20" width="73"></a></td>
  <td height="20" width="46"><img src="../support/nav2_index_b.gif" border="0" height="20" width="46"></a></td>
  <td height="20" width="83"><a href="methodology.html"><img src="../support/nav2_previous.gif" border="0" alt="View Previous Chapter in Book" height="20" width="83"></a></td>
  <td height="20" width="59"><a href="modeling.html"><img src="../support/nav2_next.gif" border="0" alt="View Next Chapter in Book" height="20" width="59"></a></td>
  <td height="20" width="114"><a href="cpf_user.pdf"><img src="../support/nav2_print.gif" border="0" alt="Open PDF to print book" height="20" width="114"></a></td>
  <td height="20" width="61"><a href="/search.htm"><img src="../support/nav2_search.gif" border="0"  alt="Search Cadence Library" height="20" width="61"></a></td>
  <td height="20" width="76"><a href="/feedback.htm"><img src="../support/nav2_feedback.gif" border="0" alt="Email Comments" height="20" width="76"></a></td>
  <td height="20" width="43"><a href="../cdsuser/help.html"><img src="../support/nav2_help.gif" border="0" alt="Help Using Documentation" height="20" width="43"></a></td>
  <td height="20" width="37"><a href="/exitsearch.htm"><img src="../support/nav2_exit.gif" border="0" alt="Shut Down Cadence Documentation Server" height="20" width="37"></a></td>
</tr>
</table>
<!-- End Buttons -->
<p>
<p>


<!-- NOTES; -->

<!-- /address -->
<p>
<br>
<font size="-1">
For support, see <a href=http://www.cadence.com/support>http://www.cadence.com/support</a>
or try Cadence's <a href=http://sourcelink.cadence.com target=_blank>SourceLink</a> service.
<br><br>
<i>Copyright &#169; 2012, <a href=http://www.cadence.com>Cadence Design Systems, Inc.</a></i> 
<br>
All rights reserved.
<br>
<a href="titlecopy.html">Legal notices and trademark attributions</a>
<br>
<!-- This file was created with Quadralay WebWorks Publisher AutoMap 6.0.7 -->
<!-- -->
<!-- Last updated: Tue Oct 16 15:27:32 2012 -->
</font>
</body>
</html>


