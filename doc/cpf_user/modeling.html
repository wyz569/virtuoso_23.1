
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="GENERATOR" content="Quadralay WebWorks Publisher AutoMap 6.0.7">
<meta name="TEMPLATEBASE" content="CadencePubs_HelpTopics">
<meta name="LASTUPDATED" content="Tue Oct 16 15:27:34 2012">

<script TYPE="text/javascript" LANGUAGE="JavaScript" >
  <!--
  // Dummy script statement to get rid of Netscape timing errors which may
  // print garbage JavaScript code at the top in Unix 4.x Netscape browser.
  // -->
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Browser.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Cookies.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript" src="/Search.js">
  </script>
                                                                                                                                                                
  <script type="text/javascript" language="JavaScript">
  <!--
  function window_resized(){
    window.location.reload();
  }
  window.onresize=window_resized;
                                                                                                                                                                
  /*
  * Initializes before submitting query
  */
  function initOnSubmit() {
    storeStateAndQuery();
  }
                                                                                                                                                                
  setCookie("DocumentTitle", "Common Power Format User Guide");
  setCookie("Chapter", "N/A");
  setCookie("Keyword", "search");
  setCookie("Version", "Product Version 2.2");

  // -->
  </script>

<title>Common Power Format User Guide -- 5. Modeling Special Cells</title>
<META NAME="Approver" CONTENT="Technical Publications">
<META NAME="Author" CONTENT="Technical Publications">
<META NAME="CreateDate" CONTENT="2012-10-16">
<META NAME="CreateTime" CONTENT="1350426467">
<META NAME="DataType" CONTENT="Manuals">
<META NAME="Description" CONTENT="Describes how to use CPF">
<META NAME="DocTitle" CONTENT="Common Power Format User Guide">
<META NAME="DocType" CONTENT="Manual">
<META NAME="FileTitle" CONTENT="5. Modeling Special Cells">
<META NAME="FileType" CONTENT="Chapter">
<META NAME="Keyword" CONTENT="cpf_user">
<META NAME="Language" CONTENT="English">
<META NAME="ModifiedDate" CONTENT="2012-10-16">
<META NAME="ModifiedTime" CONTENT="1350426467">
<META NAME="NextFile" CONTENT="">
<META NAME="PageCount" CONTENT="59">
<META NAME="Platform" CONTENT="ALL">
<META NAME="PrevFile" CONTENT="hierarchical.html">
<META NAME="Product" CONTENT="Languages">
<META NAME="ProductFamily" CONTENT="Cadence Shared Tools">
<META NAME="ProductVersion" CONTENT="2.0">
<META NAME="RightsManagement" CONTENT="Copyright 2006 Cadence Design Systems Inc.">
<META NAME="Title" CONTENT="Common Power Format User Guide -- 5. Modeling Special Cells">
<META NAME="TopicTags" CONTENT="FALSE">
<META NAME="Version" CONTENT="2.0">
</head>

<body bgcolor="#ffffff">
<!-- INDEX template -->
<a name="firstpage"></a>
<a name="pagetop"></a>

<!-- Begin Buttons -->
<form name="advancedform" action="/vtopic.isapi" method="GET" onSubmit="initOnSubmit()">
<input type=hidden name="action" value="FilterSearch">
<input type=hidden name="Filter" value="altsearchfilter.hts">
<input type=hidden name="resulttemplate" value="altsearchresults.hts">
<input type=hidden name="resultcount" value="10">
<input type=hidden name="resultmaxdocs" value="-1">
<input type=hidden name="queryhidden" value="null">
<input type=hidden name="queryitemselected" value="no">

<table border="0" cellpadding="0" cellspacing="0" width="650">
<tr>
  <td height="34" width="650" colspan="10"><img src="../support/header_doc.gif" WIDTH="650" HEIGHT="36"></td>
</tr>
<tr>
  <td height="20" width="59"><a href="javascript:openLibrary()"><img src="../support/nav2_library.gif" border="0" alt="View Library" height="20" width="59"></a></td>
  <td height="20" width="73"><a href="cpf_userTOC.html"><img src="../support/nav2_toc.gif" border="0" alt="View Table Of Contents" height="20" width="73"></a></td>
  <td height="20" width="46"><img src="../support/nav2_index_b.gif" border="0" height="20" width="46"></td>
  <td height="20" width="83"><a href="hierarchical.html"><img src="../support/nav2_previous.gif" border="0" alt="View Previous Chapter in Book" height="20" width="83"></a></td>
  <td height="20" width="59"><img src="../support/nav2_next_b.gif" border="0" height="20" width="59"></td>
  <td height="20" width="114"><a href="cpf_user.pdf"><img src="../support/nav2_print.gif" border="0" alt="Open PDF to print book" height="20" width="114"></a></td>
  <td height="20" width="61"><img src="../support/nav2_black.gif" height="20" width="61"></td>  
  <td height="20" width="76"><a href="/feedback.htm"><img src="../support/nav2_feedback.gif" border="0" alt="Email Comments" height="20" width="76"></a></td>
  <td height="20" width="43"><a href="../cdsuser/help.html"><img src="../support/nav2_help.gif" border="0" alt="Help Using Documentation" height="20" width="43"></a></td>
  <td height="20" width="37"><a href="/exitsearch.htm"><img src="../support/nav2_exit.gif" border="0" alt="Shut Down Cadence Documentation Server" height="20" width="37"></a></td>
</tr>
 <tr>
    <td colspan="10">
      <script type="text/javascript">
      <!--// We wrap all this inside javascript because we only want to display  -->
      <!--// the search bar if the http server is running. If it is not running  -->
      <!--// the search bar should not be visible to the user                    -->
      <!-- BEGIN SEARCH BAR -->
      var isloaded = isLoaded();
      var enteredquery = getCookie("enteredquery");
      if(enteredquery) {
        enteredquery = enteredquery.replace(/</g,"&lt ");
        enteredquery = enteredquery.replace(/>/g,"&gt ");
      } else {
         enteredquery = "";
      }
                                                                                                                                                                
      <!-- Only display search bar if server is running -->
      if(isloaded) {
                                                                                                                                                                
        display_search_bar(enteredquery);
                                                                                                                                                                
      }
      <!-- END SEARCH BAR -->
      </script>
    </td>
  </tr>
</table>
</form>



<!-- End Buttons -->
<p>
<p>
<hr>
<p>
<h3><center>Common Power Format User Guide&#0044; Version 2.0</center></h3>
<p>
<br>

<blockquote>
  
<div align="right">
<h1 align="left">
  <a name="1032287"> </a>5</h1>
</div>

<hr>
<h1>
  <a name="1032288"> </a>Modeling Special Cells</h1>





<ul>
  <a name="1032659"></a><li><p><a href="modeling.html#1032853">Modeling Level Shifters</a></p>

  <a name="1033220"></a><li><p><a href="modeling.html#1033145">Modeling Isolation Cells</a></p>

  <a name="1035067"></a><li><p><a href="modeling.html#1038830">Modeling State Retention Cells</a></p>

  <a name="1036037"></a><li><p><a href="modeling.html#1035833">Modeling Power Switch Cells</a></p>

  <a name="1037721"></a><li><p><a href="modeling.html#1037328">Modeling Pad Cells</a></p>

  <a name="1037725"></a><li><p><a href="modeling.html#1037460">Modeling a Voltage Regulator</a></p>
</ul>
<br><br><br>
<h2>
  <a name="1032853"> </a><a name="Modeling Level Shifters"></a>Modeling Level Shifters</h2>

<ul>
  <a name="1032857"></a><li><p><a href="modeling.html#1032879">Types of Level Shifters</a></p>

  <a name="1032861"></a><li><p><a href="modeling.html#1037068">Modeling a Power Level Shifter</a></p>

  <a name="1032865"></a><li><p><a href="modeling.html#1032907">Modeling a Ground Level Shifter</a></p>

  <a name="1032869"></a><li><p><a href="modeling.html#1032924">Modeling a Power and Ground Level Shifter</a></p>

  <a name="1032873"></a><li><p><a href="modeling.html#1032958">Modeling an Enabled Level Shifter</a></p>

  <a name="1037043"></a><li><p><a href="modeling.html#1037150">Modeling a Bypass Level Shifter</a></p>

  <a name="1037047"></a><li><p><a href="modeling.html#1037204">Modeling a Multi-Stage Level Shifter</a></p>

  <a name="1038043"></a><li><p><a href="modeling.html#1038018">Modeling a Multi-bit Level Shifter Cell</a></p>
</ul>
<br><br>
<h3>
  <a name="1032879"> </a>Types of Level Shifters</h3>


<p>
  <a name="1032880"> </a>To pass signals between portions of the design that operate on different power or ground voltages, level shifters are needed.</p>


<p>
  <a name="1032881"> </a>CPF can describe many different types of level shifters. The following is a list of the most typical level shifters:</p>

<ul>
  <a name="1032882"></a><li><p>power level shifters--pass signals between portions of the design that operate on different power voltages but the same ground voltages</p>

  <a name="1032883"></a><li><p>ground level shifters--pass signals between portions of the design that operate on different ground voltages but the same power voltages</p>

  <a name="1032884"></a><li><p>power and ground level shifters--pass signals between portions of the design that operate on different power and ground voltages</p>

  <a name="1032885"></a><li><p>enabled level shifters--level shifters with an enable pin which allows them to be used as isolation cell as well</p>

  <a name="1037058"></a><li><p>bypass level shifters--a level shifter whose level shifting functionality can be bypassed under certain conditions</p>
</ul>
<p>
  <a name="1038012"> </a>In addition, CPF can model multi-stage and multi-bit level shifters.</p>


<p>
  <a name="1037066"> </a>All types of level shifters are defined using the <code><a href="../cpf_ref/lib_reference.html#define_level_shifter_cell">define_level_shifter_cell</a></code> command. The following sections indicate which command options to use for each type.</p>


<br><br>
<h3>
  <a name="1037068"> </a>Modeling a Power Level Shifter </h3>


<p>
  <a name="1037069"> </a>To model a power level shifter use the <code>define_level_shifter_cell</code> command with the following options.</p>


<a name="1032892"></a><dl><code>
<dt>define_level_shifter_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code>-</code><code><strong>input_voltage_range</strong></code><i><code> </code></i>{<code><em>voltage_list</code></em> | <code><em>voltage_range_list</code></em>}<dd>
<code>-</code><code><strong>output_voltage_range</strong></code><i><code> </code></i>{<code><em>voltage_list</code></em> | <code><em>voltage_range_list</code></em>}<dd>
[-direction {up|down|bidir}]<dd>
[-<code><strong>input_power_pin</strong></code> <code><em>LEF_power_pin</code></em>]<code><em> </code></em>[-<code><strong>output_power_pin</strong></code> <code><em>LEF_power_pin</code></em>]<dd>
|-<code><strong>ground</strong></code> <code><em>LEF_ground_pin</code></em>}<code><em> <dd>
</code></em>[-valid_location {to | from | either}]
</code></dl>

<p>
  <a name="1032896"> </a>Figure<a href="modeling.html#1032898">5-1</a> shows a power domain at 0.8V and one at 1.2V. The ground voltage for both domains is 0.0V. In this case, for data signals going from the domain at 0.8V to the domain at 1.2V a power level shifter with direction <code><strong>up</strong></code> is needed, while for data signals going from the domain at 1.2V to the domain at 0.8V a power level shifter with direction <code><strong>down</strong></code> is needed.</p>


  <a name="1032898"> </a><h4>
Figure 5-1   Power Level Shifter</h4>


<p>
  <a name="1032902"> </a><img src="images/power_LS.gif">
</p>


<p>
  <a name="1032903"> </a>Sample commands to model these power level shifters are:</p>


<pre><a name="1032904"></a><nobr>define_level_shifter_cell  -cells up_shift \<br>&nbsp; &nbsp;	 -input_voltage_range 0.8:1.0 -output_voltage_range 1.0:1.2 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_IN -output_power_pin VDD_OUT -ground VSS_IN \<br>&nbsp; &nbsp;	 -direction up  -valid_location from<br>define_level_shifter_cell  -cells down_shift \<br>&nbsp; &nbsp;	 -input_voltage_range 1.0:1.2 -output_voltage_range 0.8:1.0 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_IN -output_power_pin VDD_OUT -ground VSS_IN \<br>&nbsp; &nbsp;	 -direction down -valid_location from</nobr></pre>

<br><br>
<h3>
  <a name="1032907"> </a>Modeling a Ground Level Shifter </h3>


<p>
  <a name="1032908"> </a>To model ground level shifter use the <code>define_level_shifter_cell</code> command with the following options.</p>


<a name="1037966"></a><dl><code>
<dt>define_level_shifter_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code>-</code><code><strong>ground_input_voltage_range</strong></code><i><code> </code></i>{<code><em>voltage_list</code></em> | <code><em>voltage_range_list</code></em>}<dd>
<code>-</code><code><strong>ground_output_voltage_range</strong></code><i><code> </code></i>{<code><em>voltage_list</code></em> | <code><em>voltage_range_list</code></em>}<dd>
[-direction {up|down|bidir}]<dd>
[-<code><strong>input_ground_pin</strong></code> <code><em>LEF_power_pin</code></em>]<code><em> </code></em>[-<code><strong>output_ground_pin</strong></code> <code><em>LEF_power_pin</code></em>]<dd>
[-<code><strong>power</strong></code> <code><em>LEF_ground_pin</code></em>]<code><em> <dd>
</code></em>[-valid_location {to | from | either}]
</code></dl>

<p>
  <a name="1032913"> </a>The two power domains in Figure<a href="modeling.html#1032915">5-2</a> have the same power supply 1.2V. However, the ground voltage for the first domain is at 0.0V, while the ground voltage for the second domain is at 0.5V. For data signals going from the domain with ground voltage 0.0V to the domain with ground voltage 0.5V a ground level shifter with direction <code><strong>up</strong></code> is required. For data signals going from the domain with ground voltage 0.5V to the domain with ground voltage 0.0V a ground level shifter with direction <code><strong>down</strong></code> is required.</p>


  <a name="1032915"> </a><h4>
Figure 5-2   Ground Level Shifter</h4>


<p>
  <a name="1032919"> </a><img src="images/ground_LS.gif">
</p>


<p>
  <a name="1032920"> </a>Sample commands to model these ground level shifters are:</p>


<pre><a name="1032921"></a><nobr>define_level_shifter_cell  -cells up_shift \<br>&nbsp; &nbsp;	 -ground_input_voltage_range 0.0:0.1 -ground_output_voltage_range 0.4:0.5 \<br>&nbsp; &nbsp;	 -input_ground_pin VSS_IN -output_ground_pin VSS_OUT -power VDD_IN \<br>&nbsp; &nbsp;	 -direction up  -valid_location from</nobr></pre>

<pre><a name="1032922"></a><nobr>define_level_shifter_cell  -cells down_shift \<br>&nbsp; &nbsp;	 -ground_input_voltage_range 0.4:0.5 -ground_output_voltage_range 0.0:0.1 \<br>&nbsp; &nbsp;	 -input_ground_pin VSS_IN -output_ground_pin VDD_OUT -power VDD_IN \<br>&nbsp; &nbsp;	 -direction down -valid_location from</nobr></pre>

<br><br>
<h3>
  <a name="1032924"> </a>Modeling a Power and Ground Level Shifter </h3>


<p>
  <a name="1032925"> </a>To model a power and ground level shifter, use two <code>define_level_shifter_cell</code> commands: one which defines the power level shifting and one which defines the ground level shifting. Both commands must point to the same cell(s), and must have the same value for the <code>-valid_location</code> option.</p>


<a name="1032926"></a><dl><code>
<dt>define_level_shifter_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code>-</code><code><strong>input_voltage_range</strong></code><i><code> </code></i>{<code><em>voltage_list</code></em> | <code><em>voltage_range_list</code></em>}<dd>
<code>-</code><code><strong>output_voltage_range</strong></code><i><code> </code></i>{<code><em>voltage_list</code></em> | <code><em>voltage_range_list</code></em>}<dd>
[-direction {up|down|bidir}]<dd>
[-<code><strong>input_power_pin</strong></code> <code><em>LEF_power_pin</code></em>]<code><em> </code></em>[-<code><strong>output_power_pin</strong></code> <code><em>LEF_power_pin</code></em>]<dd>
[-<code><strong>ground</strong></code> <code><em>LEF_ground_pin</code></em>]<code><em> <dd>
</code></em>[-valid_location {to | from | either}]
</code></dl>

<a name="1032927"></a><dl><code>
<dt>define_level_shifter_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code>-</code><code><strong>ground_input_voltage_range</strong></code><i><code> </code></i>{<code><em>voltage_list</code></em> | <code><em>voltage_range_list</code></em>}<dd>
<code>-</code><code><strong>ground_output_voltage_range</strong></code><i><code> </code></i>{<code><em>voltage_list</code></em> | <code><em>voltage_range_list</code></em>}<dd>
[-direction {up|down|bidir}]<dd>
[-<code><strong>input_ground_pin</strong></code> <code><em>LEF_power_pin</code></em>]<code><em> </code></em>[-<code><strong>output_ground_pin</strong></code> <code><em>LEF_power_pin</code></em>]<dd>
[-<code><strong>power</strong></code> <code><em>LEF_ground_pin</code></em>]<code><em> <dd>
</code></em>[-valid_location {to | from | either}]
</code></dl>

<p>
  <a name="1032931"> </a>The two power domains in Figure <a href="modeling.html#1032933">5-3</a> have different power and ground voltages. Going from <code>domain_1</code> to the <code>domain_2</code> requires an power level shifter in the up direction and a ground level shifter in the down direction. Going from <code>domain_2</code> to <code>domain_1</code> requires a power level shifter in the down direction and a ground level shifter in the up direction.</p>


  <a name="1032933"> </a><h4>
Figure 5-3   Power and Ground Level Shifter</h4>


<p>
  <a name="1032945"> </a><img src="images/modelingx1.png" border="0">
</p>


<p>
  <a name="1032946"> </a>The following commands models the power and ground level shifter to go from <code>domain_1</code> to <code>domain_2</code>:</p>


<pre><a name="1032947"></a><nobr>define_level_shifter_cell  <code><strong>-cells X \<br></strong></code>&nbsp; &nbsp;	 -input_voltage_range 0.8:1.0 -output_voltage_range 1.0:1.2 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_IN -output_power_pin VDD_OUT -ground VSS_IN \<br>&nbsp; &nbsp;	 <code><strong>-direction up  -valid_location from</strong></code></nobr></pre>

<pre><a name="1032948"></a><nobr>define_level_shifter_cell  <code><strong>-cells X<br></strong></code>&nbsp; &nbsp;	 -ground_input_voltage_range 0.4:0.5 -ground_output_voltage_range 0.0:0.1 \<br>&nbsp; &nbsp;	 -input_ground_pin VSS_IN -output_ground_pin VSS_OUT -power VDD_OUT \<br>&nbsp; &nbsp;	 <code><strong>-direction down -valid_location from</strong></code></nobr></pre>

<p>
  <a name="1032949"> </a>Both commands refer to the same cell, use the same valid location and have opposite directions for the power and ground level shifting.</p>


<p>
  <a name="1032950"> </a>The following commands models the power and ground level shift to go from <code>domain_2</code> to <code>domain_1</code>:</p>


<pre><a name="1032951"></a><nobr>define_level_shifter_cell  <code><strong>-cells Y \<br></strong></code>&nbsp; &nbsp;	 -input_voltage_range 1.0:1.2 -output_voltage_range 0.8:1.0 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_OUT -output_power_pin VDD_IN -ground VSS_OUT \<br>&nbsp; &nbsp;	 <code><strong>-direction down -valid_location to</strong></code></nobr></pre>

<pre><a name="1032952"></a><nobr>define_level_shifter_cell  <code><strong>-cells Y \<br></strong></code>&nbsp; &nbsp;	 -ground_input_voltage_range 0.0:0.1 -ground_output_voltage_range 0.4:0.5 \<br>&nbsp; &nbsp;	 -input_ground_pin VSS_OUT -output_ground_pin VSS_OUT -power VDD_OUT \<br>&nbsp; &nbsp;	 <code><strong>-direction up -valid_location to</strong></code></nobr></pre>

<br><br>
<h3>
  <a name="1032958"> </a>Modeling an Enabled Level Shifter</h3>


<p>
  <a name="1032959"> </a>To model a level shifter that can also be used for isolation purposes, use the <code>define_level_shifter_cell</code> command with the <code>-enable</code> option. </p>


<p>
  <a name="1036911"> </a>This type of cell uses an enable pin to control the voltage shifting. Typically the enable pin is related to the output supplies of the level shifter. In other words, the enable control needs to have the same voltage as the to domain. If both domains are powered on, you can tie the enable to be always active and it works as a level shifter.</p>


  <a name="1034946"> </a><table border="0"><tr><td valign="top"><img src="../support/tip.gif"></td><td>To model an isolation-level-shifter combo cell, see <a href="modeling.html#1034891">Modeling an Isolation-Level Shifter Combo Cell</a>.</td></table>




<h4>
  <a name="1032960"> </a>Modeling an Enabled Power Level Shifter</h4>


<p>
  <a name="1034010"> </a>Assume that the power level shifter shown in <a href="modeling.html#1032898">Figure 5-1</a> also has an enable pin to enable the level-shifting functionality. If the enable signal is inactive for the level shifting purposes, it protects the level shifter cell when the input power supply is powered down and causes the output to be a specific logic value determined by its functionality. However, the driver of the level shifter data pin is not protected. For such a cell to be used for isolation purposes when the driving domain is switched off using a header power switch, its input power pin must be connected to the primary power net of the driving domain. In this case the definition should be adjusted as follows:</p>


<pre><a name="1032965"></a><nobr>define_level_shifter_cell  -cells up_shift \<br>&nbsp; &nbsp;	 -input_voltage_range 0.8:1.0 -output_voltage_range 1.0:1.2 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_IN -output_power_pin VDD_OUT -ground VSS_IN \<br>&nbsp; &nbsp;	 -direction up  -valid_location from \<br><code><strong>&nbsp; &nbsp;	 -enable en</strong></code></nobr></pre>

<p>
  <a name="1037138"> </a>Where <code>en</code> is the enable pin that controls the power shifting. Typically the enable pin is related to the output supplies of the level shifter.</p>




<h4>
  <a name="1032967"> </a>Modeling an Enabled Ground Level Shifter</h4>


<p>
  <a name="1034043"> </a>Assume that the ground level shifter shown in <a href="modeling.html#1032915">Figure 5-2</a> also has an enable pin to enable the level-shifting functionality. If the enable signal is inactive for the level shifting purposes, it protects the level shifter cell when the input ground supply is shut off and causes the output to be a specific logic value determined by its functionality. However, the driver of the level shifter data pin is not protected. For such a cell to be used for isolation purposes when the driving domain is switched off using a footer ground switch, its input ground pin must be connected to the primary ground net of the driving domain. In this case the definition should be adjusted as follows:</p>


<pre><a name="1032972"></a><nobr>define_level_shifter_cell  -cells down_shift \<br>&nbsp; &nbsp;	 -ground_input_voltage_range 0.4:0.5 -ground_output_voltage_range 0.0:0.1 \<br>&nbsp; &nbsp;	 -input_ground_pin VSS_IN -output_ground_pin VDD_OUT -power VDD_IN \<br>&nbsp; &nbsp;	 -direction down -valid_location from \<br><code><strong>&nbsp; &nbsp;	 -enable en</strong></code></nobr></pre>

<p>
  <a name="1037143"> </a>Where <code>en</code> is the enable pin that controls the ground shifting. Typically the enable pin is related to the output supplies of the level shifter.</p>




<h4>
  <a name="1032973"> </a>Modeling an Enabled Power and Ground Level Shifter</h4>


<p>
  <a name="1032974"> </a>For power and ground level shifter cells, the enable pin needs to be specified with the definition of the power (ground) level shifter depending on whether the pin needs to control the power (ground) shifting. The layout of the cell determines whether it can be used in a domain that is power-switched (using a header switch cell) or ground-switched (using a footer switch cell). This section will illustrate a couple of examples. </p>


<p>
  <a name="1032975"> </a>In all examples, data signal <code>A</code> is driven by a power domain whose power and ground supply connects to <code>VDD_IN</code> and <code>VSS_IN</code>, respectively. The data output signal <code>Y</code> feeds in to a domain whose power and ground supply connects to <code>VDD_OUT</code> and <code>VSS_OUT</code>, respectively. This requires a power and ground level shifter cell. In the following examples, the following relations apply:</p>


<pre><a name="1032976"></a><nobr>VSS_OUT &lt; VSS_IN</nobr></pre>

<pre><a name="1032977"></a><nobr>VDD_OUT &gt; VDD_IN</nobr></pre>

<p>
  <a name="1032978"> </a>In addition, because the power domain driving <code>A</code> can be switched off, the level shifter must also be an enabled shifter. The required type of the enabled power and ground shifter will depend on whether the power domain is <em>power</em> or <em>ground</em> switched and on where the enabling logic gets is power and ground supply from.</p>


<h4>  <a name="1032979"> </a><i>Example 1</i>
</h4>


<p>
  <a name="1032983"> </a>The type of level shifter shown in Figure <a href="modeling.html#1032985">5-4</a>, can be used when the power domain driving signal A is ground switched. The power and ground of the enabling logic are connected to <code>VDD_OUT</code> and <code>VSS_OUT</code>, respectively.</p>


  <a name="1032985"> </a><h4>
Figure 5-4   Type 1: Ground Shifter in Input Stage and Enabling Logic in Output Stage</h4>


<p>
  <a name="1032989"> </a><img src="images/power_ground_LS_typ1.gif">
</p>


<p>
  <a name="1032990"> </a>The following CPF commands describe this type 1 power and ground enabled level shifter:</p>


<pre><a name="1032991"></a><nobr>define_level_shifter_cell  -cells X \<br>&nbsp; &nbsp;	 -ground_input_voltage_range 0.2:0.3 -ground_output_voltage_range 0.1:0.2 \<br>&nbsp; &nbsp;	 -input_ground_pin VSS_IN -output_ground_pin VSS_OUT -power <code><strong>VDD_IN</strong></code> \<br>&nbsp; &nbsp;	 -direction down -valid_location from </nobr></pre>

<pre><a name="1032992"></a><nobr>define_level_shifter_cell  -cells X \<br>&nbsp; &nbsp;	 -input_voltage_range 0.8:1.0 -output_voltage_range 1.0:1.2 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_IN -output_power_pin VDD_OUT -ground <code><strong>VSS_OUT</strong></code> \<br>&nbsp; &nbsp;	 -direction up  -valid_location from <br><code><strong>&nbsp; &nbsp;	 -enable en</strong></code></nobr></pre>

<h4>  <a name="1032993"> </a><i>Example 2</i>
</h4>


<p>
  <a name="1032997"> </a>The type of level shifter shown in Figure <a href="modeling.html#1032999">5-5</a>, can be used when the power domain of signal A is power switched. The power and ground of the enabling logic are connected to <code>VDD_OUT</code> and <code>VSS_OUT</code>, respectively.</p>


  <a name="1032999"> </a><h4>
Figure 5-5   Type 2: Power Shifter in Input Stage and Enable Logic in Output Stage</h4>


<p>
  <a name="1033003"> </a><img src="images/power_ground_LS_typ2.gif">
</p>


<p>
  <a name="1033004"> </a>The following CPF commands describe this type 2 of power and ground enabled level shifter:</p>


<pre><a name="1033005"></a><nobr>define_level_shifter_cell  -cells X \<br>&nbsp; &nbsp;	 -ground_input_voltage_range 0.2:0.3 -ground_output_voltage_range 0.1:0.2 \<br>&nbsp; &nbsp;	 -input_ground_pin VSS_IN -output_ground_pin VSS_OUT -power <code><strong>VDD_OUT</strong></code> \<br>&nbsp; &nbsp;	 -direction down -valid_location from <code><strong>-enable en</strong></code></nobr></pre>

<pre><a name="1033006"></a><nobr>define_level_shifter_cell  -cells X \<br>&nbsp; &nbsp;	 -input_voltage_range 0.8:1.0 -output_voltage_range 1.0:1.2 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_IN -output_power_pin VDD_OUT -ground <code><strong>VSS_IN</strong></code> \<br>&nbsp; &nbsp;	 -direction up  -valid_location from </nobr></pre>

<h4>  <a name="1033007"> </a><i>Example 3</i>
</h4>


<p>
  <a name="1033011"> </a>The type of level shifter shown in Figure <a href="modeling.html#1033013">5-6</a>, can be used when the power domain is ground switched. The power and ground of the enabling logic are connected to <code>VDD_IN</code> and <code>VSS_OUT</code>, respectively.</p>


  <a name="1033013"> </a><h4>
Figure 5-6   Type 3: Ground Shifter and Enable Logic in Input Stage</h4>


<p>
  <a name="1033017"> </a><img src="images/power_ground_LS_typ3.gif">
</p>


<p>
  <a name="1033018"> </a>The following CPF commands describe this type 3 of power and ground enabled level shifter:</p>


<pre><a name="1033019"></a><nobr>define_level_shifter_cell  -cells X \<br>&nbsp; &nbsp;	 -ground_input_voltage_range 0.2:0.3 -ground_output_voltage_range 0.1:0.2 \<br>&nbsp; &nbsp;	 -input_ground_pin VSS_IN -output_ground_pin VSS_OUT -power <code><strong>VDD_IN</strong></code> \<br>&nbsp; &nbsp;	 -direction down -valid_location from <code><strong>-enable en</strong></code></nobr></pre>

<pre><a name="1033020"></a><nobr>define_level_shifter_cell  -cells X \<br>&nbsp; &nbsp;	 -input_voltage_range 0.8:1.0 -output_voltage_range 1.0:1.2 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_IN -output_power_pin VDD_OUT -ground <code><strong>VSS_OUT</strong></code> \<br>&nbsp; &nbsp;	 -direction up  -valid_location from </nobr></pre>

<h4>  <a name="1033021"> </a><i>Example 4</i>
</h4>


<p>
  <a name="1033025"> </a>The type of level shifter shown in Figure <a href="modeling.html#1033027">5-7</a>, can be used when the power domain is power switched. The power and ground of the enabling logic are connected to <code>VDD_OUT</code> and <code>VSS_IN</code>, respectively. </p>


  <a name="1033027"> </a><h4>
Figure 5-7   Type 4: Power Shifter and Enable Logic in Input Stage</h4>


<p>
  <a name="1033031"> </a><img src="images/power_ground_LS_typ4.gif">
</p>


<p>
  <a name="1033032"> </a>The following CPF commands describe this type 4 of power and ground enabled level shifter:</p>


<pre><a name="1033033"></a><nobr>define_level_shifter_cell  -cells X \<br>&nbsp; &nbsp;	 -ground_input_voltage_range 0.2:0.3 -ground_output_voltage_range 0.1:0.2 \<br>&nbsp; &nbsp;	 -input_ground_pin VSS_IN -output_ground_pin VSS_OUT -power <code><strong>VDD_OUT</strong></code> \<br>&nbsp; &nbsp;	 -direction down -valid_location from </nobr></pre>

<pre><a name="1033034"></a><nobr>define_level_shifter_cell  -cells X \<br>&nbsp; &nbsp;	 -input_voltage_range 0.8:1.0 -output_voltage_range 1.0:1.2 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_IN -output_power_pin VDD_OUT -ground <code><strong>VSS_IN</strong></code> \<br>&nbsp; &nbsp;	 -direction up  -valid_location from <code><strong>-enable en</strong></code></nobr></pre>

<br><br>
<h3>
  <a name="1037150"> </a>Modeling a Bypass Level Shifter</h3>


<p>
  <a name="1037151"> </a>To model a level shifter whose level shifting functionality can be bypassed under certain conditions, use the <code>define_level_shifter_cell</code> command with the <code>-bypass_enable</code> option.</p>


<p>
  <a name="1037155"> </a>An example of such a cell is shown in Figure<a href="modeling.html#1037157">5-8</a>. When the <code>bp_enable</code> signal is <code>true</code>, the level shifting functionality is bypassed and signal OUT will be coming from the top buffer.</p>


  <a name="1037157"> </a><h4>
Figure 5-8   Bypass Level Shifter Cell</h4>


<p>
  <a name="1037190"> </a><img src="images/modelingx2.png" border="0">
</p>


<p>
  <a name="1037191"> </a>The following CPF command can be used to describe a bypass level shifter:</p>


<pre><a name="1037192"></a><nobr>define_level_shifter_cell  -cells up_shift \<br>&nbsp; &nbsp;	 -input_voltage_range 0.8:1.0 -output_voltage_range 1.0:1.2 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_IN -output_power_pin VDD_OUT -ground VSS \<br>&nbsp; &nbsp;	 -direction up -valid_location from <code><strong>-bypass_enable bp_enable</strong></code></nobr></pre>

<p>
  <a name="1038049"> </a>To apply such a cell for a specific level shifter rule, you need to use the <code>-bypass_condition</code> option of the <code>create_level_shifter_rule</code> command to indicate the signal for the bypass enable pin for the cell.</p>


<br><br>
<h3>
  <a name="1037204"> </a>Modeling a Multi-Stage Level Shifter</h3>


<p>
  <a name="1037205"> </a>When the voltage difference between the driving (or originating) and receiving (or destination) power domains is large, multiple level shifters or a single multi-stage level shifter might be required.</p>


<p>
  <a name="1037206"> </a>To model a single multi-stage level shifter cell, define the level-shifter cell with the <code>-multi_stage</code> option in the <code>define_level_shifter_cell</code> command to identify the stage of the multi-stage level shifter to which this definition (command) applies. </p>


<p>
  <a name="1037207"> </a>For a level shifter cell with N stages, N definitions must be specified for the same cell. Each definition must associate a number from 1 to N for this option to indicate the corresponding stage of this definition. A definition must not have the same stage defined twice.</p>


<p>
  <a name="1037211"> </a>An example of a single multi-stage level-shifter cell is shown in Figure <a href="modeling.html#1037213">5-9</a>.</p>


  <a name="1037213"> </a><h4>
Figure 5-9   Multi-Stage Level Shifter</h4>


<p>
  <a name="1037217"> </a><img src="images/multi-stage-LS.gif">
</p>


<p>
  <a name="1039123"> </a>The following CPF commands can be used to describe the single level shifter cell shown in Figure <a href="modeling.html#1037213">5-9</a>.</p>


<pre><a name="1039127"></a><nobr>define_level_shifter_cell -cells <code><strong>fooA</strong></code> <code><strong>-multi_stage 1</strong></code> -input_power_pin V1 \<br>-output_power_pin V2 -input_ground_pin VS1 -output_ground_pin VS2 </nobr></pre>

<pre><a name="1037223"></a><nobr>define_level_shifter_cell -cells <code><strong>fooA</strong></code> <code><strong>-multi_stage 2</strong></code> -input_power_pin V2 \<br>-input_ground_pin VS2 -output_voltage_pin V3 -output_ground_pin VS2 </nobr></pre>

<p>
  <a name="1037224"> </a>When you define the level shifter rule, you can indicate in the <code>update_level_shifter_rules</code> command whether to use a single multi-stage level-shifter cell or an ordered list of level-shifter cells:</p>

<ul>
  <a name="1037225"></a><li><p>To use a single multi-stage level-shifter cell you must use the <code>-through</code> option to specify the subsequent domains for the multi-stage level shifting between the first domain (specified with <code>-from</code> in the <code>create_level_shifter_rule</code> command) and the last domain (specified with <code>-to</code> in the <code>create_level_shifter_rule</code> command).</p>
<dl>
<p>
  <a name="1037226"> </a>In this case, the cell must have been defined with the <code>-multi_stage</code> option in the <code>define_level_shifter_cell</code> command. </p>

</dl>
  <a name="1037227"></a><li><p>To use multiple cells, you must specify an ordered list of N cell lists for the <code>-cells </code>option, where N is the number of stages in the level-shifting. Each list contains the cells appropriate for its stage.</p>
</ul>
<br><br>
<h3>
  <a name="1038018"> </a>Modeling a Multi-bit Level Shifter Cell</h3>


<p>
  <a name="1038019"> </a>A multi-bit level shifter cell has multiple pairs of input and output pins with each pair serving as a single bit level shifter. An example is shown in <a href="modeling.html#1038028">Figure 5-10</a>.</p>


<p>
  <a name="1038023"> </a>For the following multi-bit level shifter cells, there is no difference in modeling such a multi-bit cell with respect to the single bit level shifter cell:</p>

<ul>
  <a name="1038024"></a><li><p>a multi-bit simple level shifter without an enable pin </p>

  <a name="1038025"></a><li><p>a multi-bit enable level shifter with the same enable pin for all bits </p>
</ul>
<p>
  <a name="1038026"> </a>If the cell has different enable pins for the input and output pairs, you must model the cell using the <code>-pin_groups</code> option of the <code>define_level_shifter_cell</code> command. </p>


  <a name="1038028"> </a><h4>
Figure 5-10   Multi-Bit Level Shifter</h4>


<p>
  <a name="1038032"> </a><img src="images/multi_bit_ls.gif">
</p>


<p>
  <a name="1038033"> </a>The following CPF command can be used to describe the multi-bit level shifter cell shown in <a href="modeling.html#1038028">Figure 5-10</a>.</p>


<pre><a name="1038037"></a><nobr>define_level_shifter_cell -cells multi_bit_en \<br>&nbsp; &nbsp;	 -input_voltage_range 0.8:1.0 -output_voltage_range 1.0:1.2 \<br>&nbsp; &nbsp;	 -input_power_pin VDD_IN -output_power_pin VDD_OUT -ground VSS \<br>&nbsp; &nbsp;	 -direction up -valid_location from \<br><code><strong>&nbsp; &nbsp;	 -pin_groups {{in1 out1 en1} {in2 out2 en1} {in3 out3 en2}}</strong></code></nobr></pre>

<p>
<strong>Note:&nbsp;</strong>
<a name="1038038"> </a><code>-pin_groups</code> is a new option introduced in the SI2 CPF 2.0 version.
</p>

<br><br><br>
<h2>
  <a name="1033145"> </a><a name="Modeling Isolation Cells"></a>Modeling Isolation Cells</h2>

<ul>
  <a name="1037981"></a><li><p><a href="modeling.html#1033171">Types of Isolation Cells</a></p>

  <a name="1037985"></a><li><p><a href="modeling.html#1035497">Modeling an Isolation Cell to be Placed in the Unswitched Domain</a></p>

  <a name="1037989"></a><li><p><a href="modeling.html#1036525">Modeling An Isolation Cell for Ground Switchable Domain</a></p>

  <a name="1037993"></a><li><p><a href="modeling.html#1033185">Modeling An Isolation Cell for Power Switchable Domain</a></p>

  <a name="1033161"></a><li><p><a href="modeling.html#1033190">Modeling An Isolation Cell for Power and Ground Switchable Domains</a></p>

  <a name="1037244"></a><li><p><a href="modeling.html#1037265">Modeling An Isolation Cells that Can Be Placed in Any Domain</a></p>

  <a name="1034747"></a><li><p><a href="modeling.html#1037265">Modeling An Isolation Cells that Can Be Placed in Any Domain</a></p>

  <a name="1037251"></a><li><p><a href="modeling.html#1037274">Modeling An Isolation Clamp Cell</a></p>

  <a name="1034894"></a><li><p><a href="modeling.html#1034891">Modeling an Isolation-Level Shifter Combo Cell</a></p>

  <a name="1038239"></a><li><p><a href="modeling.html#1038231">Modeling an Isolation Cell with Multiple Enable Pins</a></p>

  <a name="1038625"></a><li><p><a href="modeling.html#1038424">Modeling an Isolation Latch with a Set or Reset Pin</a></p>

  <a name="1038123"></a><li><p><a href="modeling.html#1038069">Modeling a Multi-bit Isolation Cell</a></p>

  <a name="1038957"></a><li><p><a href="modeling.html#1038768">Modeling a Complex Isolation Cell</a></p>
</ul>
<br><br>
<h3>
  <a name="1033171"> </a>Types of Isolation Cells</h3>


<p>
  <a name="1033172"> </a>Isolation logic is required when the leaf drivers and leaf loads of a net are in power domains that are not on and off at the same time, or because it is part of the design intent. CPF can describe many different types of isolation cells. Below is a list of the most typical isolation cells:</p>

<ul>
  <a name="1038694"></a><li><p>Isolation cell to be placed in the unswitched domain</p>

  <a name="1038695"></a><li><p>Isolation cell to be used in a ground switchable domain</p>

  <a name="1038696"></a><li><p>Isolation cell to be used in a power switchable domain</p>

  <a name="1033176"></a><li><p>Isolation cells to be used in a a power or ground switchable domain</p>

  <a name="1037256"></a><li><p>Isolation cells without followpins that can be placed in any domain</p>

  <a name="1037257"></a><li><p>Isolation cells without an enable pin</p>

  <a name="1037258"></a><li><p>Isolation clamp cell</p>

  <a name="1037259"></a><li><p>Isolation-level shifter combo cell</p>
</ul>
<p>
  <a name="1036045"> </a>All types of isolation cells are defined using the <code><a href="../cpf_ref/lib_reference.html#define_isolation_cell">define_isolation_cell</a></code> command. The following sections indicate which command options to use for each type.</p>


<br><br>
<h3>
  <a name="1035497"> </a>Modeling an Isolation Cell to be Placed in the Unswitched Domain</h3>


<p>
  <a name="1035500"> </a>To model an isolation cell to be placed in an unswitched domain, use the <code>define_isolation_cell</code> command with the following options.</p>


<a name="1035502"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>] <dd>
-power <code><em>LEF_power_pin</code></em>&nbsp;-ground <code><em>LEF_ground_pin<dd>
</code></em><code><strong>-valid_location on<dd>
</strong></code>{ -enable <code><em>pin</code></em> | -no_enable {high|low|hold} } [-non_dedicated]
</code></dl>

<p>
  <a name="1035517"> </a><a href="modeling.html#1035519">Figure 5-11</a> shows an AND cell that can be used for isolation purposes.</p>


  <a name="1035519"> </a><h4>
Figure 5-11   Dedicated Isolation Cell in Unswitched Domain</h4>


<p>
  <a name="1035523"> </a><img src="images/modelingx3.png" border="0">
</p>


<p>
  <a name="1035527"> </a>The following command models the isolation cell in Figure <a href="modeling.html#1035519">5-11</a>:</p>


<pre><a name="1036522"></a><nobr>define_isolation_cell \<br>&nbsp; &nbsp;	 -cells IsoLL \<br>&nbsp; &nbsp;	 -power VDD -ground VSS \<br>&nbsp; &nbsp;	 -enable E \<br>&nbsp; &nbsp;	 <code><strong>-valid_location on </strong></code></nobr></pre>

<p>
<strong>Note:&nbsp;</strong>
<a name="1036523"> </a>If you also want to use the cell in regular logic, you must add the <code>-non_dedicated</code> option. Non-dedicated cells can typically only be placed in the unswitched domain (<code>-valid_location on</code>).
</p>

<br><br>
<h3>
  <a name="1036525"> </a>Modeling An Isolation Cell for Ground Switchable Domain</h3>


<p>
  <a name="1033181"> </a>To model an isolation cell to be used in a ground switchable domain, use the <code>define_isolation_cell</code> command with the following options.</p>


<a name="1033183"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>] <dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code><strong>-ground_switchable</strong></code> <code><em>LEF_ground_pin<dd>
</code></em>-power <code><em>LEF_power_pin</code></em>&nbsp;-ground <code><em>LEF_ground_pin<dd>
</code></em>[-valid_location { from | to | on | off}]<dd>
{ -enable <code><em>pin</code></em> | -no_enable {high|low|hold} } [-non_dedicated]
</code></dl>

<p>
  <a name="1034989"> </a><a href="modeling.html#1034983">Figure 5-12</a> shows an AND cell that has the path from power to ground cut off on the ground side. This AND cell can only be used for isolation.</p>


  <a name="1034983"> </a><h4>
Figure 5-12   Dedicated Ground Switchable Isolation Cell</h4>


<p>
  <a name="1034984"> </a><img src="images/ground_iso.gif">
</p>


<p>
  <a name="1034994"> </a>The following command models the isolation cell in Figure <a href="modeling.html#1034983">5-12</a>:</p>


<pre><a name="1034998"></a><nobr>define_isolation_cell \<br>&nbsp; &nbsp;	 -cells IsoLL \<br>&nbsp; &nbsp;	 <code><strong>-ground_switchable</strong></code> GSW \<br>&nbsp; &nbsp;	 -power VDD -ground VSS \<br>&nbsp; &nbsp;	 -enable E \<br>&nbsp; &nbsp;	 -valid_location from</nobr></pre>

<br><br>
<h3>
  <a name="1033185"> </a>Modeling An Isolation Cell for Power Switchable Domain</h3>


<p>
  <a name="1033186"> </a>To model an isolation cell to be used in a power switchable domain, use the <code>define_isolation_cell</code> command with the following options.</p>


<a name="1033188"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code><strong>-power_switchable</strong></code> <code><em>LEF_power_pin</code></em> <dd>
-power <code><em>LEF_power_pin</code></em>&nbsp;-ground <code><em>LEF_ground_pin<dd>
</code></em>[-valid_location { from | to | on | off}]<dd>
{ -enable <code><em>pin</code></em> | -no_enable {high|low|hold} } 
</code></dl>

<p>
  <a name="1035032"> </a><a href="modeling.html#1035034">Figure 5-13</a> shows an AND cell that has the path from power to ground cut off on the power side. This AND cell can only be used for isolation.</p>


  <a name="1035034"> </a><h4>
Figure 5-13   Dedicated Power Switchable Isolation Cell</h4>


<p>
  <a name="1035038"> </a><img src="images/power_iso.gif">
</p>


<p>
  <a name="1035042"> </a>The following command models the isolation cell in Figure <a href="modeling.html#1035034">5-13</a>:</p>


<pre><a name="1035044"></a><nobr>define_isolation_cell \<br>&nbsp; &nbsp;	 -cells IsoLL \<br>&nbsp; &nbsp;	 <code><strong>-power_switchable</strong></code> VSW \<br>&nbsp; &nbsp;	 -power VDD -ground VSS \<br>&nbsp; &nbsp;	 -enable E \<br>&nbsp; &nbsp;	 -valid_location from</nobr></pre>

<br><br>
<h3>
  <a name="1033190"> </a>Modeling An Isolation Cell for Power and Ground Switchable Domains</h3>


<p>
  <a name="1033191"> </a>To model an isolation cell to be used in a power and ground switchable domain, use the <code>define_isolation_cell</code> command with the following options.</p>


<a name="1033193"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code><strong>-power_switchable</strong></code> <code><em>LEF_power_pin</code></em> <code><strong>-ground_switchable</strong></code> <code><em>LEF_ground_pin<dd>
</code></em>-power <code><em>LEF_power_pin</code></em>&nbsp;-ground <code><em>LEF_ground_pin<dd>
</code></em>[-valid_location { from | to | on | off}]<dd>
{ -enable <code><em>pin</code></em> | -no_enable {high|low|hold} }
</code></dl>

<p>
  <a name="1035737"> </a><a href="modeling.html#1035739">Figure 5-14</a> shows an AND cell that has the path from power to ground cut off on the power and ground sides. This AND cell can only be used for isolation.</p>


  <a name="1035739"> </a><h4>
Figure 5-14   Dedicated Power and Ground Switchable Isolation Cell</h4>


<p>
  <a name="1035743"> </a><img src="images/power_ground_iso.png">
</p>


<p>
  <a name="1035747"> </a>The following command models the isolation cell in Figure <a href="modeling.html#1035739">5-14</a>:</p>


<pre><a name="1035749"></a><nobr>define_isolation_cell \<br>&nbsp; &nbsp;	 -cells IsoLL \<br>&nbsp; &nbsp;	 <code><strong>-power_switchable</strong></code> VSW <code><strong>-ground_switchable</strong></code> GSW \<br>&nbsp; &nbsp;	 -power VDD -ground VSS \<br>&nbsp; &nbsp;	 -enable E \<br>&nbsp; &nbsp;	 -valid_location from</nobr></pre>

<br><br>
<h3>
  <a name="1037265"> </a>Modeling An Isolation Cells that Can Be Placed in Any Domain</h3>


<p>
  <a name="1037266"> </a>To model an isolation cell to be used in any domain, use the <code>define_isolation_cell</code> command with the following options.</p>


<a name="1037268"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
-power <code><em>LEF_power_pin</code></em>&nbsp;-ground <code><em>LEF_ground_pin</code></em>&nbsp;<dd>
<code><strong>-valid_location any<dd>
</strong></code>{ -enable <code><em>pin</code></em> | -no_enable {high|low|hold} }<dd>
[-non_dedicated]
</code></dl>

<br><br>
<h3>
  <a name="1034686"> </a>Modeling An Isolation Cell Without Enable Pin</h3>


<p>
  <a name="1034708"> </a>There are special isolation cells which do not have an enable pin but still can clamp output to a logic value when primary power supply is switched off. To model such a cell, use <code>define_isolation_cell</code> command with the following options.</p>


<a name="1034716"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
[-power_switchable <code><em>LEF_power_pin</code></em>] [-ground_switchable <code><em>LEF_ground_pin</code></em>]<dd>
[-power <code><em>LEF_power_pin</code></em>] [-ground <code><em>LEF_ground_pin</code></em>]<dd>
[-valid_location { from | to | on | off | any}]<dd>
<code><strong>-no_enable {high|low|hold}
</strong></code></code></dl>

<p>
<strong>Note:&nbsp;</strong>
<a name="1034709"> </a>You can only infer such cells in a design by specifying the <code>create_isolation_rule</code> command with <code>-no_condition</code> option.
</p>

<br><br>
<h3>
  <a name="1037274"> </a>Modeling An Isolation Clamp Cell</h3>


<p>
  <a name="1037275"> </a>An isolation clamp high cell is a simple PMOS transistor with the gate input being used as the enable pin. When its driver is switched off by a ground switch and the enable pin has value 0, the connected net can be clamped to a logic high value as shown in <a href="modeling.html#1037280">Figure 5-15</a>.</p>


  <a name="1037280"> </a><h4>
Figure 5-15   Isolation clamp high cell</h4>


<p>
  <a name="1037284"> </a><img src="images/iso_clamp_high.gif">
</p>


<p>
  <a name="1037285"> </a>To model an isolation clamp high cell, use the <code>define_isolation_cell</code> command with the following options.</p>


<a name="1037286"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code><strong>-power</strong></code> <code><em>LEF_power_pin<dd>
</code></em>[-valid_location { from | to | on | off | any}]<dd>
-enable <code><em>pin</code></em> <code><strong>-clamp high <dd>
</strong></code>[-non_dedicated]
</code></dl>

<p>
  <a name="1037287"> </a>An isolation clamp low cell is a simple NMOS transistor with the gate input being used as the enable pin. When its driver is switched off by a power switch and the enable pin has value 1, the connected net can be clamped to a logic low value as shown in <a href="modeling.html#1037292">Figure 5-16</a>.</p>


  <a name="1037292"> </a><h4>
Figure 5-16   Isolation clamp low cell</h4>


<p>
  <a name="1037296"> </a><img src="images/iso_clamp_low.gif">
</p>


<p>
  <a name="1037297"> </a>To model an isolation clamp low cell, use the <code>define_isolation_cell</code> command with the following options.</p>


<a name="1037298"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code><strong>-ground</strong></code> <code><em>LEF_ground_pin<dd>
</code></em>[-valid_location { from | to | on | off | any}]<dd>
-enable <code><em>pin</code></em> <code><strong>-clamp low</strong></code> <dd>
[-non_dedicated]
</code></dl>

<p>
  <a name="1038222"> </a>Due to its special connectivity requirement, to apply such a power or ground clamp cell for a specific isolation rule, you need to use <code>-isolation_output</code> option with either the<code> clamp_high</code> or <code>clamp_low value</code> in the <code>create_isolation_rule</code> command.</p>


<br><br>
<h3>
  <a name="1034891"> </a>Modeling an Isolation-Level Shifter Combo Cell</h3>


<p>
  <a name="1034925"> </a>A combo cell isolates or protects the input when the driving logic is powered down and generates an output isolation value at the same voltage as the output supply of the cell. Typically the enable pin is related to the input supplies of the cell. </p>


<p>
  <a name="1036745"> </a>The most common combo cells are the isolation cells with high to low shifting capabilities.</p>


<p>
  <a name="1034926"> </a>To model a combo cell you need two commands. For example to model an isolation cell for power switchable domain that is also a power level shifter, use the following definitions:</p>


<a name="1034928"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code><strong>-power_switchable</strong></code> <code><em>LEF_power_pin</code></em> <dd>
-power <code><em>LEF_power_pin</code></em>&nbsp;-ground <code><em>LEF_ground_pin<dd>
</code></em>[-valid_location {to | from}]<dd>
{ -enable <code><em>pin</code></em> | -no_enable {high|low|hold} } [-non_dedicated]
</code></dl>

<a name="1034921"></a><dl><code>
<dt>define_level_shifter_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
[-always_on_pins <code><em>pin_list</code></em>]<dd>
<code>-</code><code><strong>input_voltage_range</strong></code><i><code> </code></i>{<code><em>voltage</code></em> | <code><em>voltage_range</code></em>}<dd>
<code>-</code><code><strong>output_voltage_range</strong></code><i><code> </code></i>{<code><em>voltage</code></em> | <code><em>voltage_range</code></em>}<dd>
-direction down<dd>
[-<code><strong>input_power_pin</strong></code> <code><em>LEF_power_pin</code></em>]<code><em> </code></em>[-<code><strong>output_power_pin</strong></code> <code><em>LEF_power_pin</code></em>]<dd>
[-<code><strong>ground</strong></code> <code><em>LEF_ground_pin</code></em>]<code><em> <dd>
</code></em>[-valid_location {to | from}]
</code></dl>

<p>
<strong>Note:&nbsp;</strong>
<a name="1038061"> </a>You cannot use the <code>-enable</code> option in the <code>define_level_shifter_cell</code> definition.In addition, you must specify the same value for the <code>-valid_location</code> option in both commands.
</p>

  <a name="1034940"> </a><table border="0"><tr><td valign="top"><img src="../support/tip.gif"></td><td>If you want to model an enabled level shifter, see <a href="modeling.html#1032958">Modeling an Enabled Level Shifter</a>.</td></table>


<br><br>
<h3>
  <a name="1038231"> </a>Modeling an Isolation Cell with Multiple Enable Pins</h3>


<p>
  <a name="1038236"> </a>Some isolation cells have besides an enable pin that is related to the non-switchable supply of the cell, additional enable pins that are related to the switchable supply. The switchable enable pin can be used to synchronize the isolation logic right before the non-switchable enable pin is activated or deactivated. To model an isolation cell with multiple enable pins, use the <code>define_isolation_cell</code> command with the following options.</p>


<a name="1038411"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
<code><strong>-aux_enables</strong></code> <code><em>pin_list<dd>
</code></em>[-power_switchable <code><em>LEF_power_pin</code></em>] [-ground_switchable <code><em>LEF_ground_pin</code></em>]<dd>
[-power <code><em>LEF_power_pin</code></em>] [-ground <code><em>LEF_ground_pin</code></em>]<dd>
[-valid_location {from | to | on | off | any}]<dd>
<code><strong>-enable</strong></code> <code><em>pin</code></em> [-clamp {high|low}] 
</code></dl>

<p>
  <a name="1038468"> </a>When you specify an isolation rule that targets these types of isolation cells, you need to use the <code><a href="../cpf_ref/reference.html#create_isolation_rule">create_isolation_rule</a></code> command with the <code>-isolation_control </code>option with control type <code>sync_enable</code>.</p>


<p>
  <a name="1038457"> </a><a href="modeling.html#1038255">Figure 5-17</a>shows two examples of cells with multiple enable pins. The <code>iso </code>enable pin is related to the non-switchable supply <code>vddc</code>, while the <code>en</code> enable pin is related to the switchable supply <code>vdd</code>. </p>


  <a name="1038255"> </a><h4>
Figure 5-17   Isolation Cells with Multiple Enable Pins</h4>


<p>
  <a name="1038256"> </a><img src="images/modelingx4.png" border="0">
</p>


<p>
  <a name="1038262"> </a>The following command models the <code>isoandlow</code> and <code>isoorhigh</code> cells in <a href="modeling.html#1038255">Figure 5-17</a>:</p>


<a name="1038288"></a><dl><code>
<dt>define_isolation_cell \<dd>
-cells {isoandlow isoorhigh} \<dd>
<code><strong>-aux_enables</strong></code> en \<dd>
-power_switchable vdd \<dd>
-power vddc -ground vss \<dd>
-enable iso 
</code></dl>

<p>
  <a name="1038546"> </a>The following commands show the isolation rules that target the <code>isoandlow</code> and <code>isoorhigh</code> cells in <a href="modeling.html#1038255">Figure 5-17</a>:</p>


<a name="1038481"></a><dl><code>
<dt>create_isolation_rule \<dd>
-name iso1 \<dd>
-isolation_condition iso_drvr \<dd>
-from PD1 \<dd>
-isolation_output low \<dd>
<code><strong>-isolation_control </strong></code>{ {sync_enable en_drvr} } \<dd>
-secondary_domain iso_supply_domain
</code></dl>

<a name="1038533"></a><dl><code>
<dt>create_isolation_rule \<dd>
-name iso2 \<dd>
-isolation_condition iso_drvr \<dd>
-from PD1 \<dd>
-isolation_output high \<dd>
<code><strong>-isolation_control</strong></code> { {sync_enable en_drvr} } \<dd>
-secondary_domain iso_supply_domain
</code></dl>

<br><br>
<h3>
  <a name="1038424"> </a>Modeling an Isolation Latch with a Set or Reset Pin</h3>


<p>
  <a name="1038606"> </a>Some isolation latches are designed with a set or reset pin to ensure that the latch output has a known value at the time when the design is initially powered up. To model an isolation latch with a set or reset pin, use the <code>define_isolation_cell</code> command with the following options.</p>


<a name="1038620"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
<code>-</code><code><strong>always_on_pins</strong></code> <code><em>pin_list<dd>
</code></em>[-power_switchable <code><em>LEF_power_pin</code></em>] [-ground_switchable <code><em>LEF_ground_pin</code></em>]<dd>
[-power <code><em>LEF_power_pin</code></em>] [-ground <code><em>LEF_ground_pin</code></em>]<dd>
[-valid_location {from | to | on | off | any}]<dd>
<code><strong>-enable</strong></code> <code><em>pin</code></em> [-clamp {high|low}]
</code></dl>

<p>
  <a name="1038647"> </a>When you specify an isolation rule that targets these types of isolation cells, you need to use the <code><a href="../cpf_ref/reference.html#create_isolation_rule">create_isolation_rule</a></code> command with the <code>-isolation_control</code> option with control type <code>set</code> or <code>reset</code> and the <code>-isolation_output</code> option with value <code>hold</code>.</p>


<p>
  <a name="1038387"> </a><a href="modeling.html#1038329">Figure 5-18</a> shows two examples of such latches. The <code>iso</code> enable pin, <code>isoprez</code> (set), the <code>isoclr</code> (reset) pins are all related to the non-switchable supply <code>vddc</code>.</p>


  <a name="1038329"> </a><h4>
Figure 5-18   Isolation Cells with Set and Reset Pins</h4>


<p>
  <a name="1038334"> </a><img src="images/modelingx5.png" border="0">
</p>


<p>
  <a name="1038357"> </a>The following commands model the <code>isolatchclr</code> and <code>isolatchprez </code>cells in <a href="modeling.html#1038329">Figure 5-18</a>:</p>


<a name="1038379"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells isolatchclr <dd>
<code><strong>-always_on_pins</strong></code> isoprez<dd>
-power_switchable vdd <dd>
-power vddc -ground vss<dd>
-enable iso 
</code></dl>

<a name="1038571"></a><dl><code>
<dt>define_isolation_cell <dd>
-cells isolatchclr <dd>
<code><strong>-always_on_pins</strong></code> isoclr<dd>
-power_switchable vdd <dd>
-power vddc -ground vss<dd>
-enable iso 
</code></dl>

<p>
  <a name="1038663"> </a>The following commands show the isolation rules that targets the <code>isolatchclr</code> and <code>isolatchprez</code> cells in <a href="modeling.html#1038329">Figure 5-18</a>:</p>


<a name="1038667"></a><dl><code>
<dt>create_isolation_rule \<dd>
-name iso1 \<dd>
-isolation_condition iso_drvr \<dd>
-from PD1<dd>
-isolation_output hold \<dd>
<code><strong>-isolation_control </strong></code>{ {set iso_prez} } \<dd>
-secondary_domain iso_supply_domain
</code></dl>

<a name="1038668"></a><dl><code>
<dt>create_isolation_rule \<dd>
-name iso2 \<dd>
-isolation_condition iso_drvr \<dd>
-from PD1 \<dd>
-isolation_output hold \<dd>
<code><strong>-isolation_control</strong></code> { {reset iso_clr} } \<dd>
-secondary_domain iso_supply_domain
</code></dl>

<br><br>
<h3>
  <a name="1038069"> </a>Modeling a Multi-bit Isolation Cell</h3>


<p>
  <a name="1038070"> </a>A multi-bit isolation cell has multiple pairs of input and output pins with each pair serving as a single bit isolation cell. An example is shown in <a href="modeling.html#1038077">Figure 5-19</a>.</p>


<p>
  <a name="1038074"> </a>If the cell uses the same enable pin for all pairs of input and output pins, there is no difference in modeling such a multi-bit cell with respect to the single bit isolation cell. </p>


<p>
  <a name="1038075"> </a>If the cell has different enable pins for the input and output pairs, you must model the cell using the <code>-pin_groups</code> option of the <code>define_isolation_cell</code> command. </p>


  <a name="1038077"> </a><h4>
Figure 5-19   Multi-bit Isolation Cell</h4>


<p>
  <a name="1038089"> </a><img src="images/modelingx6.png" border="0">
</p>


<p>
  <a name="1038090"> </a>The following CPF command can be used to describe the multi-bit isolation cell for power switchable domain shown in <a href="modeling.html#1038077">Figure 5-19</a> (see <a href="modeling.html#1035034">Figure 5-13</a> for the corresponding single bit cell).</p>


<pre><a name="1038767"></a><nobr>define_isolation_cell -cells IsoLL \<br>-power_switchable VSW \<br>-power VDD -ground VSS \<br><code><strong>-pin_groups {{in1 out1 en1} {in2 out2 en2} {in3 out3 en3}}</strong></code></nobr></pre>

<br><br>
<h3>
  <a name="1038768"> </a>Modeling a Complex Isolation Cell</h3>


<p>
  <a name="1038774"> </a>For complex isolation cells that cannot be modeled using the previous techniques, CPF provides a generic mechanism.</p>


<p>
  <a name="1038777"> </a>To model a complex isolation cell, use the <code>update_isolation_rules</code> command with the following options.</p>


<a name="1038786"></a><dl><code>
<dt><code><a href="../cpf_ref/reference.html#update_isolation_rules">update_isolation_rules</a></code> -names <code><em>rule_list<dd>
</code></em><code><strong>-cells</strong></code> <code><em>cell_list </code></em>[-use_model <code><strong>-pin_mapping</strong></code> <code><em>pin_mapping_list<dd>
&nbsp; &nbsp; </code></em><code>[</code><code><strong>-domain_mapping</strong></code><i><code> domain_mapping_list</code></i>] ]
</code></dl>

<p>
  <a name="1038826"> </a>In this case, the first cell specified in the cell list refers to the complicated isolation cell that cannot be modelled using the <code>define_isolation_cell</code> command. The cell name that you specify must correspond to both the model name used in simulation and the cell name used for implementation.</p>

<p>
<a name="1038839"> </a>Use the following format for the <code><em>pin_mapping_list</code></em> to specify the connection of each cell pin to a pin or port in the design:</p>

<pre><a name="1038840"></a><nobr><code>{</code><code><em>cell_pin</code></em><code> </code><code><em>design_pin_reference</code></em><code>}</code></nobr></pre>
<ul>
  <a name="1038842"> </a><li><p><code><em>cell_pin</code></em> is the name of the pin in the cell definition</p></p>


  <a name="1038844"> </a><li><p><code><em>design_pin_reference</code></em> is one of the following:</p></p>

<ul>
  <a name="1038845"> </a><li><p>the name of a design port or instance pin--You can prepend the "!" character to the 
name if the inverse of the port/pin is used to drive the cell pin
</p>

  <a name="1038847"> </a><li><p><code><em>isolation_signal</code></em>, which refers to the expression in 
<code>-isolation_condition
</code></p>
</ul></ul>
<p>
  <a name="1038835"> </a>If the cell has a corresponding macro model definition in CPF, you can specify the mapping of the domains in the macro model to the top-level domains. </p>

<p>
<a name="1038873"> </a>Use the following format to specify a domain mapping:</p>

<pre><a name="1038874"></a><nobr><code>{</code><code><em>domain_in_child_scope</code></em><code> </code><code><em>domain_in_parent_level_scope</code></em><code>}</code></nobr></pre>
<p>
<a name="1038884"> </a>The specified domain mapping applies to all instantiations of the specified isolation cell.</p>
<p>
<a name="1038885"> </a>If the macro model has multiple power domains defined, this option must be used.</p>

<br><br><br>
<h2>
  <a name="1038830"> </a><a name="Modeling State Retention Cells"></a>Modeling State Retention Cells</h2>

<ul>
  <a name="1035202"></a><li><p><a href="modeling.html#1035204">Types of State Retention Cells</a></p>

  <a name="1035207"></a><li><p><a href="modeling.html#1035125">State Retention Cell that Restores when Power is Turned On</a></p>

  <a name="1035208"></a><li><p><a href="modeling.html#1039141">State Retention Cell that Restores when Control Signal is Deactivated</a></p>

  <a name="1035225"></a><li><p><a href="modeling.html#1035819">State Retention Cells with Save and Restore Controls</a></p>

  <a name="1037861"></a><li><p><a href="modeling.html#1037817">State Retention Cells without Save or Restore Control</a></p>

  <a name="1038951"></a><li><p><a href="modeling.html#1038892">Modeling a Complex State Retention Cell</a></p>
</ul>
<br><br>
<h3>
  <a name="1035204"> </a>Types of State Retention Cells</h3>


<p>
  <a name="1035165"> </a>State retention cells are used for sequential cells to keep their previous state prior to power down.</p>


<p>
  <a name="1038228"> </a>CPF can describe different types of state retention cells. The following is a list of the most typical state retention cells:</p>

<ul>
  <a name="1035097"></a><li><p>State Retention Cell with Save Control</p>

  <a name="1035115"></a><li><p>State Retention Cell with Restore Control</p>

  <a name="1035112"></a><li><p>State Retention Cells with Save and Restore Controls</p>

  <a name="1037804"></a><li><p>State Retention Cells without Save or Restore Control</p>
</ul>
<p>
  <a name="1035155"> </a>All types of state retention cells are defined using the <code><a href="../cpf_ref/lib_reference.html#define_state_retention_cell">define_state_retention_cell</a></code> command. The following sections indicate which command options to use for each type.</p>


<br><br>
<h3>
  <a name="1035125"> </a>State Retention Cell that Restores when Power is Turned On</h3>


<p>
  <a name="1035076"> </a>To model a state retention cell that saves the current value when the control pin becomes active while the power is on, retains the saved value when power is off, and restores the saved value when the power is turned on, use the following command options:</p>


<pre><a name="1035417"></a><nobr>define_state_retention_cell <br>&nbsp; &nbsp;	 -cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<br>&nbsp; &nbsp;	 [-cell_type <code><em>string</code></em>]<br>&nbsp; &nbsp;	 [-always_on_pins <code><em>pin_list</code></em>]<br><code>&nbsp; &nbsp;	 [-clock_pin </code><code><em>pin</code></em>]<br>&nbsp; &nbsp;	 <code><strong>-save_function</strong></code><i><code> expression<br></code></i>&nbsp; &nbsp;	 [-restore_check<code><em> expression</code></em>] [-save_check<code><em> expression</code></em>] <br>&nbsp; &nbsp;	 [-always_on_components <code><em>component_list</code></em>]<br>&nbsp; &nbsp;	 [ {-power_switchable <code><em>LEF_power_pin</code></em> <br>&nbsp; &nbsp;	 &nbsp;&nbsp;|-ground_switchable <code><em>LEF_ground_pin<br></code></em>&nbsp; &nbsp;	 &nbsp;&nbsp;|-power_switchable <code><em>LEF_power_pin </code></em>-ground_switchable <code><em>LEF_ground_pin</code></em>}<br>&nbsp; &nbsp;	 -power <code><em>LEF_power_pin</code></em>&nbsp; -ground <code><em>LEF_ground_pin</code></em>&nbsp;]&nbsp; &nbsp;	 </nobr></pre>

<p>
  <a name="1035597"> </a><a href="modeling.html#1037785">Figure 5-20</a> shows an example of such a cell. </p>


  <a name="1037785"> </a><h4>
Figure 5-20   State Retention with Save Control</h4>


<p>
  <a name="1037788"> </a><img src="images/state_retention_save.gif">
</p>


<p>
  <a name="1037792"> </a>To model the cell shown in <a href="modeling.html#1037785">Figure 5-20</a>, use the following command:</p>


<pre><a name="1039139"></a><nobr>define_state_retention_cell -cells SR1 \<br>&nbsp; &nbsp;	 -clock_pin Clk \<br>&nbsp; &nbsp;	 <code><strong>-save_function</strong></code><i><code> </code></i>save \<br>&nbsp; &nbsp;	 -restore_check<code><em> </code></em>!Clk<code><em> </code></em>-save_check<code><em> </code></em>!Clk \<br>&nbsp; &nbsp;	 -power_switchable VSW \<br>&nbsp; &nbsp;	 -power VDD -ground VSS</nobr></pre>

<br><br>
<h3>
  <a name="1039141"> </a>State Retention Cell that Restores when Control Signal is Deactivated</h3>


<p>
  <a name="1035249"> </a>To model a state retention cell that saves the current value when the control pin becomes deactivated and restores the saved value when the control signal becomes activated, use the following command options:</p>


<pre><a name="1035389"></a><nobr>define_state_retention_cell <br>&nbsp; &nbsp;	 -cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<br>&nbsp; &nbsp;	 [-cell_type <code><em>string</code></em>]<br>&nbsp; &nbsp;	 [-always_on_pins <code><em>pin_list</code></em>]<br><code>&nbsp; &nbsp;	 [-clock_pin </code><code><em>pin</code></em>]<br>&nbsp; &nbsp;	 <code><strong>-restore_function</strong></code><i><code> expression<br></code></i>&nbsp; &nbsp;	 [-restore_check<code><em> expression</code></em>] [-save_check<code><em> expression</code></em>] <br>&nbsp; &nbsp;	 [-always_on_components <code><em>component_list</code></em>]<br>&nbsp; &nbsp;	 [ {-power_switchable <code><em>LEF_power_pin</code></em> <br>&nbsp; &nbsp;	 &nbsp;&nbsp;|-ground_switchable <code><em>LEF_ground_pin<br></code></em>&nbsp; &nbsp;	 &nbsp;&nbsp;|-power_switchable <code><em>LEF_power_pin </code></em>-ground_switchable <code><em>LEF_ground_pin</code></em>}<br>&nbsp; &nbsp;	 -power <code><em>LEF_power_pin</code></em>&nbsp; -ground <code><em>LEF_ground_pin</code></em>&nbsp;]&nbsp; &nbsp;	 </nobr></pre>

<p>
  <a name="1035386"> </a><a href="modeling.html#1035230">Figure 5-21</a> shows an example of such a cell. </p>


  <a name="1035230"> </a><h4>
Figure 5-21   State Retention with Restore Control</h4>


<p>
  <a name="1035231"> </a><img src="images/state_retention_restore.gif">
</p>


<p>
  <a name="1035363"> </a>To model the cell shown in <a href="modeling.html#1035230">Figure 5-21</a>, use the following command:</p>


<pre><a name="1035365"></a><nobr>define_state_retention_cell -cells SR1 \<br>&nbsp; &nbsp;	 -clock_pin Clk \<br>&nbsp; &nbsp;	 <code><strong>-restore_function</strong></code><i><code> </code></i>!Ret \<br>&nbsp; &nbsp;	 -restore_check<code><em> </code></em>!Clk<code><em> </code></em>-save_check<code><em> </code></em>!Clk \<br>&nbsp; &nbsp;	 -power_switchable VSW \<br>&nbsp; &nbsp;	 -power VDD -ground VSS</nobr></pre>

<br><br>
<h3>
  <a name="1035819"> </a>State Retention Cells with Save and Restore Controls</h3>


<p>
  <a name="1035820"> </a>If you have a state retention cell with both save and restore control, the cell saves the current value when the save control pin is activated and the power is on, while the cell restores the saved value when the restore control pins is activated. To model such a cell use the following command options:</p>


<pre><a name="1035474"></a><nobr>define_state_retention_cell <br>&nbsp; &nbsp;	 -cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<br>&nbsp; &nbsp;	 [-cell_type <code><em>string</code></em>]<br>&nbsp; &nbsp;	 [-always_on_pins <code><em>pin_list</code></em>]<br><code>&nbsp; &nbsp;	 [-clock_pin </code><code><em>pin</code></em>]<br>&nbsp; &nbsp;	 <code><strong>-restore_function</strong></code><i><code> expression </code></i><code><strong>-save_function</strong></code><i><code> expression<br></code></i>&nbsp; &nbsp;	 [-restore_check<code><em> expression</code></em>] [-save_check<code><em> expression</code></em>] <br>&nbsp; &nbsp;	 [-always_on_components <code><em>component_list</code></em>]<br>&nbsp; &nbsp;	 [ {-power_switchable <code><em>LEF_power_pin</code></em> <br>&nbsp; &nbsp;	 &nbsp;&nbsp;|-ground_switchable <code><em>LEF_ground_pin<br></code></em>&nbsp; &nbsp;	 &nbsp;&nbsp;|-power_switchable <code><em>LEF_power_pin </code></em>-ground_switchable <code><em>LEF_ground_pin</code></em>}<br>&nbsp; &nbsp;	 &nbsp;&nbsp;-power <code><em>LEF_power_pin</code></em>&nbsp; -ground <code><em>LEF_ground_pin</code></em>&nbsp;]&nbsp; &nbsp;	 </nobr></pre>

<p>
  <a name="1035402"> </a>In this case, the cell saves the current value when the save expression is <code>true</code> and the power is on. The cell restores the saved value when the restore expression is <code>true</code> and the power is on.</p>


<p>
  <a name="1035483"> </a>It is an error if you use the same pin or same expressions for both the save and restore function. For example the following two commands are not correct: </p>


<pre><a name="1035403"></a><nobr>define_state_retention_cell -cells My_Cell -restore_function pg -save_function !pg<br>define_state_retention_cell -cells foo -restore_function pg -save_function pg</nobr></pre>

<p>
  <a name="1035400"> </a><a href="modeling.html#1035263">Figure 5-22</a> shows an example of such a cell.</p>


  <a name="1035263"> </a><h4>
Figure 5-22   State Retention with Save and Restore Controls</h4>


<p>
  <a name="1035268"> </a><img src="images/state_retention_restore_save.gif">
</p>


<p>
  <a name="1035072"> </a>To model the cell shown in <a href="modeling.html#1035263">Figure 5-22</a>, use the following command:</p>


<pre><a name="1035319"></a><nobr>define_state_retention_cell -cells SR2 \<br>&nbsp; &nbsp;	 -clock_pin Clk \<br>&nbsp; &nbsp;	 <code><strong>-restore_function</strong></code><i><code> </code></i>Wake<code><em> </code></em><code><strong>-save_function</strong></code><i><code> </code></i>Sleep \<br>&nbsp; &nbsp;	 -restore_check<code><em> </code></em>"!Clk"<code><em> </code></em>-save_check<code><em> </code></em>"!Clk" \<br>&nbsp; &nbsp;	 -power_switchable VSW \<br>&nbsp; &nbsp;	 -power VDD -ground VSS</nobr></pre>

<p>
  <a name="1035316"> </a>The state will be saved when Sleep is active and the clock is down and the state will also be restored when Wake is active and the clock is down.</p>


<br><br>
<h3>
  <a name="1037817"> </a>State Retention Cells without Save or Restore Control</h3>


<p>
  <a name="1037835"> </a>A master-slave type state retention cell does not have a save or restore control pin. It has a secondary power or ground pin to provide continuous power supply to the slave latch. The clock signal acts as the retention control signal. As a result, you should use the clock signal for the registers as the restore edge and save edge. </p>


<p>
  <a name="1037836"> </a>When the clock signal is used as the restore or save signal for a flop, then the synthesis tool will synthesize it using a master-slave type retention cell. For library definition, the clock pin needs to be declared as the only save and restore signal and has to be an always-on pin.</p>


<p>
  <a name="1037825"> </a>To model such a cell use the following command options:</p>


<pre><a name="1037827"></a><nobr>define_state_retention_cell <br>&nbsp; &nbsp;	 -cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<br>&nbsp; &nbsp;	 [-cell_type <code><em>string</code></em>]<br>&nbsp; &nbsp;	 [-always_on_pins <code><em>pin_list</code></em>]<br><code>&nbsp; &nbsp;	 [-clock_pin </code><code><em>pin</code></em>]<br>&nbsp; &nbsp;	 <code><strong>-save_function</strong></code><i><code> expression<br></code></i>&nbsp; &nbsp;	 [-restore_check<code><em> expression</code></em>] [-save_check<code><em> expression</code></em>] <br>&nbsp; &nbsp;	 [-always_on_components <code><em>component_list</code></em>]<br>&nbsp; &nbsp;	 [ {-power_switchable <code><em>LEF_power_pin</code></em> <br>&nbsp; &nbsp;	 &nbsp;&nbsp;|-ground_switchable <code><em>LEF_ground_pin<br></code></em>&nbsp; &nbsp;	 &nbsp;&nbsp;|-power_switchable <code><em>LEF_power_pin </code></em>-ground_switchable <code><em>LEF_ground_pin</code></em>}<br>&nbsp; &nbsp;	 &nbsp;&nbsp;-power <code><em>LEF_power_pin</code></em>&nbsp; -ground <code><em>LEF_ground_pin</code></em>&nbsp;]&nbsp; &nbsp;	 </nobr></pre>

<p>
  <a name="1038999"> </a>When you specify a state retention rule that targets these types of state retention cells, you need to use the <code><a href="../cpf_ref/reference.html#create_state_retention_rule">create_state_retention_rule</a></code> command with the <code>-save_edge</code> option and the clock signal in the expression.</p>


<p>
  <a name="1039048"> </a>The following example models master-slave retention cell <code>ms_ret</code>:</p>


<pre><a name="1039016"></a><nobr>define_state_retention_cell -cells ms_ret \<br>&nbsp; &nbsp;	 -clock_pin CLK \<br>&nbsp; &nbsp;	 <code><strong>-save_function</strong></code> CLK \<br>&nbsp; &nbsp;	 -restore_check "!CLK" -save_check "!CLK"</nobr></pre>

<p>
  <a name="1039060"> </a>The following command shows the state retention rule that targets cell <code>ms_ret</code></p>


<pre><a name="1038997"></a><nobr>create_state_retention_rule -name sr1 \<br>&nbsp; &nbsp;	 -domain PD1 \<br>&nbsp; &nbsp;	  <code><strong>-save_edge</strong></code> clock </nobr></pre>

<br><br>
<h3>
  <a name="1038892"> </a>Modeling a Complex State Retention Cell</h3>


<p>
  <a name="1038893"> </a>For complex state retention cells that cannot be modeled using the previous techniques, CPF provides a generic mechanism. To model such a cell, use the <code>update_isolation_rules</code> command with the following options.</p>


<a name="1038895"></a><dl><code>
<dt><code><a href="../cpf_ref/reference.html#update_state_retention_rules">update_state_retention_rules</a></code> -names <code><em>rule_list<dd>
</code></em><code><strong>-cells</strong></code> <code><em>cell_list </code></em>[-use_model <code><strong>-pin_mapping</strong></code> <code><em>pin_mapping_list<dd>
&nbsp; &nbsp; </code></em><code>[</code><code><strong>-domain_mapping</strong></code><i><code> domain_mapping_list</code></i>] ]
</code></dl>

<p>
  <a name="1038896"> </a>In this case, the first cell specified in the cell list refers to the complicated state retention cell that cannot be modelled using the <code>define_state_retention_cell</code> command. The cell name that you specify must correspond to both the model name used in simulation and the cell name used for implementation.</p>

<p>
<a name="1038897"> </a>Use the following format for the <code><em>pin_mapping_list</code></em> to specify the connection of each cell pin to a pin or port in the design:</p>

<pre><a name="1038898"></a><nobr><code>{</code><code><em>cell_pin</code></em><code> </code><code><em>design_pin_reference</code></em><code>}</code></nobr></pre>
<ul>
  <a name="1038899"> </a><li><p><code><em>cell_pin</code></em> is the name of the pin in the cell definition</p></p>


  <a name="1038900"> </a><li><p><code><em>design_pin_reference</code></em> is one of the following:</p></p>

<ul>
  <a name="1038933"> </a><li><p>the name of a design port or instance pin. You can prepend the "!" character to the 
name if the inverse of the port/pin is used to drive the cell pin
</p>

  <a name="1038934"> </a><li><p><code><em>save_signal</code></em>, which refers to the expression in <code>-save_edge</code> or <code>-save_level</code> 
option
</p>

  <a name="1038935"> </a><li><p><code><em>restore_signal</code></em>, which refers to the expression in <code>-restore_edge</code> or 
<code>-restore_level</code> option
</p>
</ul></ul>
<p>
  <a name="1038903"> </a>If the cell has a corresponding macro model definition in CPF, you can specify the mapping of the domains in the macro model to the top-level domains. </p>

<p>
<a name="1038904"> </a>Use the following format to specify a domain mapping:</p>

<pre><a name="1038905"></a><nobr><code>{</code><code><em>domain_in_child_scope</code></em><code> </code><code><em>domain_in_parent_level_scope</code></em><code>}</code></nobr></pre>
<p>
<a name="1038906"> </a>The specified domain mapping applies to all instantiations of the specified state retention cell.</p>
<p>
<a name="1038907"> </a>If the macro model has multiple power domains defined, this option must be used.</p>

<br><br><br>
<h2>
  <a name="1035833"> </a><a name="Modeling Power Switch Cells"></a>Modeling Power Switch Cells</h2>

<ul>
  <a name="1035845"></a><li><p><a href="modeling.html#1035836">Types of Power Switch Cells</a></p>

  <a name="1035873"></a><li><p><a href="modeling.html#1035839">Modeling a Single Stage Power Switch Cell</a></p>

  <a name="1036944"></a><li><p><a href="modeling.html#1036758">Modeling a Power Switch cell with Gate Bias</a></p>

  <a name="1035878"></a><li><p><a href="modeling.html#1035935">Modeling a Single Stage Ground Switch Cell</a></p>

  <a name="1035883"></a><li><p><a href="modeling.html#1035844">Modeling a Dual-Stage Power Switch Cell</a></p>

  <a name="1036311"></a><li><p><a href="modeling.html#1036174">Modeling a Dual-Stage Ground Switch Cell</a></p>
</ul>
<br><br>
<h3>
  <a name="1035836"> </a>Types of Power Switch Cells</h3>


<p>
  <a name="1035848"> </a>To connect and disconnect the power (or ground) supply from the gates in internal switchable power domains, you must add power switch logic.</p>


<p>
  <a name="1035889"> </a>CPF can describe different types of power switch cells. The following is a list of the most typical cells:</p>

<ul>
  <a name="1035846"></a><li><p>single stage power switch cell--single transistor that controls the primary power supply to the logic of an internal switchable domain</p>

  <a name="1036055"></a><li><p>single stage ground switch cell--single transistor that controls the primary ground supply to the logic of an internal switchable domain</p>

  <a name="1036056"></a><li><p>dual-stage power switch--power switch with a weak and strong transistor to control the primary power supply to the logic of an internal switchable domain</p>

  <a name="1036246"></a><li><p>dual-stage ground switch--ground switch with a weak and strong transistor to control the primary ground supply to the logic of an internal switchable domain</p>
</ul>
<p>
  <a name="1036028"> </a>All types of power switch cells are defined using the <code><a href="../cpf_ref/lib_reference.html#define_power_switch_cell">define_power_switch_cell</a></code> command. The following sections indicate which command options to use for each type.</p>


<br><br>
<h3>
  <a name="1035839"> </a>Modeling a Single Stage Power Switch Cell</h3>


<p>
  <a name="1035899"> </a>To model a single stage power switchable power switch cell use the <code>define_power_switch_cell</code> command with the following options:</p>


<a name="1035981"></a><dl><code>
<dt>define_power_switch_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
<code><strong>-stage_1_enable</strong></code> <code><em>expression</code></em><code> [</code><code><strong>-stage_1_output</strong></code><i><code> expression</code></i>]<dd>
-type <code><strong>header<dd>
-power_switchable</strong></code> <code><em>LEF_power_pin</code></em> &nbsp;<code><strong>-power</strong></code> <code><em>LEF_power_pin<dd>
</code></em>[<code><strong>-ground</strong></code> <code><em>LEF_ground_pin</code></em>] <dd>
[-enable_pin_bias [<code><em>float</code></em>:]<code><em>float</code></em>] [ -gate_bias_pin <code><em>LEF_power_pin</code></em>]<dd>
[ -stage_1_on_resistance <code><em>float</code></em> ] [ -stage_1_saturation_current <code><em>float</code></em>]<dd>
[ -leakage_current <code><em>float </code></em>]
</code></dl>

<p>
  <a name="1037013"> </a>In case of an unbuffered power switch cell, you do not need to specify the <code>-stage_1_output</code> and <code>-ground</code> options.</p>


<p>
  <a name="1035900"> </a>Figure <a href="modeling.html#1035917">5-23</a> shows a power switch cell with an internal buffer. <code>VIN</code> is the pin connected to the unswitched power. <code>VSW</code> is the pin connected to the switchable power that is connected to the logic. When the enable signal <code>Ei</code> is activated the unswitched power is supplied to the logic. As shown in Figure <a href="modeling.html#1035917">5-23</a>, this type of cell usually contains a buffer that allows multiple power switch cells to be chained together to form a power switch column or ring. However, the power and ground of this buffer must be unswitchable.</p>


  <a name="1035917"> </a><h4>
Figure 5-23   Single Stage Power Switch</h4>


<p>
  <a name="1035929"> </a><img src="images/power_switch_single_header.gif">
</p>


<p>
  <a name="1035933"> </a>The following command models the power switch cell shown in Figure <a href="modeling.html#1035917">5-23</a>:</p>


<a name="1035954"></a><dl><code>
<dt>define_power_switch_cell \<dd>
-cells sw1 \<dd>
<code><strong>-stage_1_enable</strong></code> Ei<code> </code><code><strong>-stage_1_output</strong></code><i><code> </code></i>Eo \<dd>
-type <code><strong>header \<dd>
-power_switchable</strong></code> VSW <code><strong>-power</strong></code> VIN <code><strong>-ground</strong></code> VSS
</code></dl>

<br><br>
<h3>
  <a name="1036758"> </a>Modeling a Power Switch cell with Gate Bias</h3>


<p>
  <a name="1036765"> </a>To model a single stage power switchable power switch cell with gate bias use the <code>define_power_switch_cell</code> command with the following options:</p>


<a name="1036777"></a><dl><code>
<dt>define_power_switch_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
<code><strong>-stage_1_enable</strong></code> <code><em>expression</code></em><code> [</code><code><strong>-stage_1_output</strong></code><i><code> expression</code></i>]<dd>
-type <code><strong>header<dd>
-power_switchable</strong></code> <code><em>LEF_power_pin</code></em> &nbsp;<code><strong>-power</strong></code> <code><em>LEF_power_pin<dd>
&nbsp; &nbsp; </code></em>[<code><strong>-ground</strong></code> <code><em>LEF_ground_pin</code></em>] <dd>
<code><strong>-enable_pin_bias</strong></code> [<code><em>float</code></em>:]<code><em>float</code></em> <code><strong>-gate_bias_pin</strong></code> <code><em>LEF_power_pin<dd>
</code></em>[ -stage_1_on_resistance <code><em>float</code></em> ] [ -stage_1_saturation_current <code><em>float</code></em>]<dd>
[ -leakage_current <code><em>float </code></em>]
</code></dl>

<p>
  <a name="1036763"> </a>Typically the enable pin is related to the power and the ground pin. With gate bias the enable pin is related to the gate bias pin and the ground. The voltage on the gate bias pin is larger than the voltage of the power pin. Such as cell creates less leakage power compared to the cell without gate bias.</p>


<p>
  <a name="1036784"> </a>In Figure <a href="modeling.html#1036788">5-24</a>, the gate bias pin is <code>VGB</code>. Assume that input voltage <code>VIN</code> is at 1.2V and the gate bias pin is at 3.3 V.</p>


  <a name="1036788"> </a><h4>
Figure 5-24   Single Stage Power Switch with Gate Bias</h4>


<p>
  <a name="1036792"> </a><img src="images/power_switch_single_gatebias.png">
</p>


<p>
  <a name="1036799"> </a>The following command models the power switch cell shown in Figure <a href="modeling.html#1036788">5-24</a>:</p>


<a name="1036800"></a><dl><code>
<dt>define_power_switch_cell \<dd>
-cells sw1 \<dd>
<code><strong>-stage_1_enable</strong></code> Ei<code> </code><code><strong>-stage_1_output</strong></code><i><code> </code></i>Eo \<dd>
-type <code><strong>header \<dd>
-power_switchable</strong></code> VSW <code><strong>-power</strong></code> VIN <code><strong>-ground</strong></code> VSS \<dd>
-gate_bias_pin VGB -enable_pin_bias 2.1
</code></dl>

<br><br>
<h3>
  <a name="1035935"> </a>Modeling a Single Stage Ground Switch Cell</h3>


<p>
  <a name="1035997"> </a>To model a single stage ground switchable power switch cell use the <code>define_power_switch_cell</code> command with the following options:</p>


<a name="1036480"></a><dl><code>
<dt>define_power_switch_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
<code><strong>-stage_1_enable</strong></code> <code><em>expression</code></em><code> [</code><code><strong>-stage_1_output</strong></code><i><code> expression</code></i>]<dd>
-type <code><strong>footer<dd>
-ground_switchable</strong></code> <code><em>LEF_ground_pin</code></em> &nbsp;<code><strong>-ground</strong></code> <code><em>LEF_ground_pin<dd>
&nbsp; &nbsp; </code></em>&nbsp;[<code><strong>-power</strong></code> <code><em>LEF_power_pin</code></em>] <dd>
[-enable_pin_bias [<code><em>float</code></em>:]<code><em>float</code></em>] [ -gate_bias_pin <code><em>LEF_power_pin</code></em>]<dd>
[ -stage_1_on_resistance <code><em>float</code></em> ] [ -stage_1_saturation_current <code><em>float</code></em>]<dd>
[ -leakage_current <code><em>float </code></em>]
</code></dl>

<p>
  <a name="1036324"> </a>Figure <a href="modeling.html#1036326">5-25</a> shows a ground switch cell. <code>VSS</code> is the pin connected to the unswitched ground. <code>VSW</code> is the pin connected to the switchable ground that is connected to the logic. When the enable signal <code>Ei</code> is activated the unswitched ground is supplied to the logic. As shown in Figure <a href="modeling.html#1036326">5-25</a>, this type of cell usually contains a buffer that allows multiple ground switch cells to be chained together to form a ground switch column or ring. However the power and ground of this buffer must be unswitchable.</p>


  <a name="1036326"> </a><h4>
Figure 5-25   Single Stage Ground Switch</h4>


<p>
  <a name="1036330"> </a><img src="images/ground_switch_single_header.png">
</p>


<p>
  <a name="1036334"> </a>The following command models the ground switch cell shown in Figure <a href="modeling.html#1036326">5-25</a>:</p>


<a name="1036335"></a><dl><code>
<dt>define_power_switch_cell \<dd>
-cells gw1 \<dd>
<code><strong>-stage_1_enable</strong></code> Ei<code> </code><code><strong>-stage_1_output</strong></code><i><code> </code></i>Eo \<dd>
-type <code><strong>header \<dd>
-ground_switchable</strong></code> GSW <code><strong>-ground</strong></code> VSS <code><strong>-power</strong></code> VDD
</code></dl>

<br><br>
<h3>
  <a name="1035844"> </a>Modeling a Dual-Stage Power Switch Cell</h3>


<p>
  <a name="1036024"> </a>To model a power switch cell with two stages, use the following command options:</p>


<a name="1038735"></a><dl><code>
<dt>define_power_switch_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
<code><strong>-stage_1_enable</strong></code> <code><em>expression</code></em><code> [</code><code><strong>-stage_1_output</strong></code><i><code> expression</code></i>]<dd>
<code><strong>-stage_2_enable</strong></code> <code><em>expression</code></em><code> [</code><code><strong>-stage_2_output</strong></code><i><code> expression</code></i>]<dd>
-type <code><strong>header<dd>
-power_switchable</strong></code> <code><em>LEF_power_pin</code></em> &nbsp;<code><strong>-power</strong></code> <code><em>LEF_power_pin<dd>
&nbsp; &nbsp; </code></em>[<code><strong>-ground</strong></code> <code><em>LEF_ground_pin</code></em>] <dd>
[-enable_pin_bias [<code><em>float</code></em>:]<code><em>float</code></em>] [ -gate_bias_pin <code><em>LEF_power_pin</code></em>]<dd>
[ -stage_1_on_resistance <code><em>float</code></em> ] [ -stage_1_saturation_current <code><em>float</code></em>]<dd>
[ -stage_2_on_resistance <code><em>float</code></em> ] [ -stage_2_saturation_current <code><em>float</code></em>]<dd>
[ -leakage_current <code><em>float </code></em>]
</code></dl>

<p>
  <a name="1036070"> </a>Figure <a href="modeling.html#1036072">5-26</a> shows a dual-stage power switch cell. <code>VIN</code> is the pin connected to the unswitched power. <code>VSW</code> is the pin connected to the switchable power that is connected to the logic. Only when both enable signals Ri and <code>Ei</code> are activated can the unswitched power be supplied to the logic. The <code>Ri</code> enable signal drives the stage-1 (weak) transistor which requires less current to restore the unswitched power. The <code>Ei</code> enable signal drives the stage-2 (strong) transistor which requires more current to fully supply the unswitched power to the logic. This type of cell usually contains two buffers that allow multiple power switch cells to be chained together to form a power switch column or ring. However the power and ground of these buffers must be unswitchable.</p>


  <a name="1036072"> </a><h4>
Figure 5-26   Dual-Stage Power Switch</h4>


<p>
  <a name="1036076"> </a><img src="images/power_switch_multi_header.gif">
</p>


<p>
  <a name="1036080"> </a>The following command models the power switch cell shown in Figure <a href="modeling.html#1036072">5-26</a>:</p>


<a name="1036081"></a><dl><code>
<dt>define_power_switch_cell \<dd>
-cells sw1 \<dd>
<code><strong>-stage_1_enable</strong></code> Ri<code> </code><code><strong>-stage_1_output</strong></code><i><code> </code></i>Ro \<dd>
<code><strong>-stage_2_enable</strong></code> Ei<code> </code><code><strong>-stage_2_output</strong></code><i><code> </code></i>Eo \<dd>
-type <code><strong>header \<dd>
-power_switchable</strong></code> VSW <code><strong>-power</strong></code> VIN <code><strong>-ground</strong></code> VSS
</code></dl>

<br><br>
<h3>
  <a name="1036174"> </a>Modeling a Dual-Stage Ground Switch Cell</h3>


<p>
  <a name="1036175"> </a>To model a ground switch cell with two stages, use the following command options:</p>


<a name="1036176"></a><dl><code>
<dt>define_power_switch_cell <dd>
-cells <code><em>cell_list</code></em> [-library_set <code><em>library_set</code></em>]<dd>
<code><strong>-stage_1_enable</strong></code> <code><em>expression</code></em><code> [</code><code><strong>-stage_1_output</strong></code><i><code> expression</code></i>]<dd>
<code><strong>-stage_2_enable</strong></code> <code><em>expression</code></em><code> [</code><code><strong>-stage_2_output</strong></code><i><code> expression</code></i>]<dd>
-type <code><strong>footer<dd>
-ground_switchable</strong></code> <code><em>LEF_ground_pin</code></em> &nbsp;<code><strong>-ground</strong></code> <code><em>LEF_ground_pin<dd>
&nbsp; &nbsp; </code></em>[<code><strong>-power</strong></code> <code><em>LEF_power_pin</code></em>] <dd>
[-enable_pin_bias [<code><em>float</code></em>:]<code><em>float</code></em>] [ -gate_bias_pin <code><em>LEF_power_pin</code></em>]<dd>
[ -stage_1_on_resistance <code><em>float</code></em> ] [ -stage_1_saturation_current <code><em>float</code></em>]<dd>
[ -stage_2_on_resistance <code><em>float</code></em> ] [ -stage_2_saturation_current <code><em>float</code></em>]<dd>
[ -leakage_current <code><em>float </code></em>]
</code></dl>

<p>
  <a name="1036180"> </a>Figure <a href="modeling.html#1036181">5-27</a> shows a dual-stage ground switch cell. <code>VSS</code> is the pin connected to the unswitched ground. <code>GSW</code> is the pin connected to the switchable ground that is connected to the logic. Only when both enable signals Ri and <code>Ei</code> are activated can the unswitched ground be supplied to the logic. The <code>Ri</code> enable signal drives the stage-1 (weak) transistor which requires less current to restore the unswitched ground. The <code>Ei</code> enable signal drives the stage-2 (strong) transistor which requires more current to fully supply the unswitched ground to the logic. This type of cell usually contains two buffers that allow multiple ground switch cells to be chained together to form a ground switch column or ring. However the power and ground of these buffers must be unswitchable. </p>


  <a name="1036181"> </a><h4>
Figure 5-27   Dual-Stage Ground Switch</h4>


<p>
  <a name="1036185"> </a><img src="images/ground_switch_multi_header.gif">
</p>


<p>
  <a name="1036189"> </a>The following command models the ground switch cell shown in Figure <a href="modeling.html#1036181">5-27</a>:</p>


<a name="1036190"></a><dl><code>
<dt>define_power_switch_cell \<dd>
-cells gsw \<dd>
<code><strong>-stage_1_enable</strong></code> Ri<code> </code><code><strong>-stage_1_output</strong></code><i><code> </code></i>Ro \<dd>
<code><strong>-stage_2_enable</strong></code> Ei<code> </code><code><strong>-stage_2_output</strong></code><i><code> </code></i>Eo \<dd>
-type <code><strong>footer \<dd>
-ground_switchable</strong></code> GSW <code><strong>-ground</strong></code> VSS <code><strong>-power</strong></code> VDD
</code></dl>

<br><br><br>
<h2>
  <a name="1037328"> </a><a name="set_pad_ports"></a><a name="Modeling a Pad Cell"></a>Modeling Pad Cells </h2>


<p>
  <a name="1037329"> </a>CPF provides two methods to model a cell pad:</p>

<ul>
  <a name="1037333"></a><li><p><a href="modeling.html#1037356">Using a Pad Cell Definition to Create a Simplified Pad Cell Model</a>.</p>

  <a name="1037337"></a><li><p><a href="modeling.html#1037420">Using a CPF Macro Model to Create a Detailed Pad Cell Model</a></p>
<dl>
<p>
  <a name="1037338"> </a>The detailed model is required when your pad cell contains any of the following:</p>

</dl><ul>
  <a name="1037339"> </a><li><p>Internal power switch or state retention
</p>

  <a name="1037340"> </a><li><p>Complex internal isolation control
</p>

  <a name="1037341"> </a><li><p>Internal feed- through nets for data signals
</p>
</ul></ul>
<p>
<strong>Note:&nbsp;</strong>
<a name="1037342"> </a>if you created a simplified and detailed model, the detailed model (macro model definition) will take precedence.
</p>

<p>
  <a name="1037343"> </a>Every instance of a pad cell must be instantiated in CPF:</p>

   <ul><ul>
  <a name="1037344"> </a><li><p>If you created a simplified model, you must declare the pad instances with the 
<code><a href="../cpf_ref/reference.html#create_pad_rule">create_pad_rule</a></code> command.
</p>

  <a name="1037348"> </a><li><p>If you created a detailed model, you can instantiate the pad instances with the 
<code><a href="../cpf_ref/reference.html#set_instance">set_instance</a></code> command or with the <code>create_pad_rule</code> command.
</p>
</ul>   </ul>
<p>
  <a name="1037352"> </a>An instance is identified as a pad instance if the cell is defined in the <code><a href="../cpf_ref/lib_reference.html#define_pad_cell">define_pad_cell</a></code> or there is a macro model definition for the cell that has the <code><a href="../cpf_ref/reference.html#set_pad_ports">set_pad_ports</a></code> command included.</p>


<br><br>
<h3>
  <a name="1037356"> </a>Using a Pad Cell Definition to Create a Simplified Pad Cell Model</h3>


<p>
  <a name="1037360"> </a>Consider the pad shown in <a href="modeling.html#1037362">Figure 5-28</a>. This I/O pad cell has one pin (<code>pad</code>) that will be directly connected to the board. The signal coming in through this pin goes through internal level shifting that produces three signals connected to the core of the chip. The input pins <code>pad</code>, <code>resetb</code>, <code>pdn</code>, and <code>pup</code> connect to logic whose power is supplied by <code>VDDO</code> and <code>VSSO</code>, while the three other output pins (<code>din</code>, <code>dout</code>, and <code>oeb</code>) are driven by logic whose power is supplied by <code>VDDC</code> and <code>VSSC</code>. </p>


  <a name="1037362"> </a><h4>
Figure 5-28   I/O Pad Cell</h4>


<p>
  <a name="1037377"> </a><img src="images/modelingx7.png" border="0">
</p>


<p>
  <a name="1037378"> </a>For a simplified pad cell model you need to declare </p>

<ul>
  <a name="1037379"></a><li><p>The pins that connect directly to the package or the board </p>

  <a name="1037382"></a><li><p>The groups of pins that are related to the same power supplies</p>
<dl>
<p>
  <a name="1037384"> </a>You can specify a power or ground pin in multiple pin groups.</p>


<p>
  <a name="1037385"> </a>Each power and ground pin must belong to at least one group. </p>


<p>
  <a name="1037386"> </a>If a group has more than one power (ground) pin, these power (ground) pins are considered to be equivalent for that group.</p>


<p>
  <a name="1037387"> </a>If a power or ground pin appears in multiple pin groups, the top-level power domains that those groups are mapped to must have the same primary power or ground net defined. Otherwise, it is an error.</p>


<p>
  <a name="1037388"> </a>Pins in a group without power and ground pins, or not specified in any pin group are considered to be floating pins.</p>


<p>
  <a name="1037389"> </a>It is an error if you specify a non-power or ground pin in multiple pin groups.</p>

</dl>
  <a name="1037390"></a><li><p>The pins which connect to internal isolation logic</p>
</ul>
<p>
  <a name="1037397"> </a>This information can be given with the <code><a href="../cpf_ref/lib_reference.html#define_pad_cell">define_pad_cell</a></code> command as shown in Figure <a href="modeling.html#1037413">5-29</a>.</p>


<p>
  <a name="1037398"> </a>When you defined a simple pad cell model, you need to declare the pad instances using the <code><a href="../cpf_ref/reference.html#create_pad_rule">create_pad_rule</a></code> command. The pad rule defines how to map the pin groups of the pad instances to the top-level power domains. </p>


  <a name="1037402"> </a><table border="0"><tr><td valign="top"><img src="../support/important.gif"></td><td>It is an error If a pin group of a pad cell is not specified in the mapping option.</td></table>


<p>
  <a name="1037406"> </a><a href="modeling.html#1037413">Figure 5-29</a> shows an extract of a CPF file with the simplified pad cell definition and pad instantiation for the pad shown in <a href="modeling.html#1037362">Figure 5-28</a>. </p>


<p>
  <a name="1037410"> </a>In this example all instantiations of cell <code>data_io_3V</code> that are connected to the ports of <code>FOO[0:127]</code> follow the same domain mapping specified in the pad rule. The pins <code>resetb</code>, <code>pdn</code>, <code>pup</code>, and <code>pad</code> belong to domain <code>PD_PAD</code> and the power pin <code>VDDO</code> and the ground pin <code>VSSO</code> must be connected to the primary power and ground nets of domain <code>PD_PAD</code>, respectively.</p>


<p>
  <a name="1037411"> </a>Similarly, the pins <code>din</code>, <code>dout</code>, and <code>oeb</code> belong to domain <code>PD_CORE</code> and the power pin <code>VDDC</code> and the ground pin <code>VSSC</code> must be connected to the primary power and ground nets of domain <code>PD_CORE</code>, respectively.</p>


  <a name="1037413"> </a><h4>
Figure 5-29   Pad Cell Definition and Instantiation</h4>


<pre><a name="1037414"></a><nobr><code><strong>define_pad_cells</strong></code> -cells &nbsp; &nbsp;	 data_io_3V &nbsp;\<br>&nbsp; &nbsp;	 -pad_pins pad \&nbsp;<br>&nbsp; &nbsp;	 -pin_groups { IO:{ VDDO VSSO resetb pdn pup pad} \<br>&nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp; &nbsp;	 &nbsp;&nbsp;CORE:{ VDDC VSSC din dout oeb} } </nobr></pre>

<pre><a name="1037415"></a><nobr>set_design top</nobr></pre>

<pre><a name="1037416"></a><nobr>create_power_domain -name PD_PAD ...</nobr></pre>

<pre><a name="1037417"></a><nobr>create_power_domain -name PD_CORE ...</nobr></pre>

<pre><a name="1037418"></a><nobr><code><strong>create_pad_rule</strong></code> -name pad1 -of_bond_ports {FOO[0:127]} &nbsp;\<br>&nbsp; &nbsp;	 -mapping { {IO PD_PAD} {CORE PD_CORE}} <br>...<br>end_design</nobr></pre>

<br><br>
<h3>
  <a name="1037420"> </a>Using a CPF Macro Model to Create a Detailed Pad Cell Model </h3>


<p>
  <a name="1037421"> </a>For the detailed model, you must declare the pins that connect directly to the package or the board in the macro model. Use the <code><a href="../cpf_ref/reference.html#set_pad_ports">set_pad_ports</a></code> command (between the <code>set_macro_model</code> and <code>end_macro_model</code> commands) to do this. </p>


<p>
  <a name="1037428"> </a>To model internal diodes in the macro model, you can use the <code><a href="../cpf_ref/reference.html#set_diode_ports">set_diode_ports</a></code> command to declare the pins of the macro cell that connect to the positive and negative pins of a diode. </p>


<p>
  <a name="1037429"> </a>To declare the instances of a pad cell in the CPF file, you can use either the <code>set_instance</code> command or the <code><a href="../cpf_ref/reference.html#create_pad_rule">create_pad_rule</a></code> command. The pad rule defines how to map the power domains of the pad cell macro model to the top-level power domains.</p>


<p>
  <a name="1037439"> </a><a href="modeling.html#1037413">Figure 5-29</a> shows an extract of a CPF file with the detailed pad cell definition and pad instantiation for the pad shown in <a href="modeling.html#1037362">Figure 5-28</a>.</p>


<p>
  <a name="1037445"> </a>The semantics of this example is the same as for the example shown in <a href="modeling.html#1037413">Figure 5-29</a>.</p>


  <a name="1037447"> </a><h4>
Figure 5-30   Detailed Pad Cell Model and Instantiation</h4>


<pre><a name="1037448"></a><nobr>set_macro_model data_io_3V <br>set_pad_ports { pad } </nobr></pre>

<pre><a name="1037449"></a><nobr>create_power_domain  -name PDCore -default \<br>&nbsp; &nbsp;	 -boundary_ ports &nbsp;{din dout oeb} </nobr></pre>

<pre><a name="1037450"></a><nobr>update_power_domain -name PDCore -primary_power_net VDDC -primary_ground_net VSSC</nobr></pre>

<pre><a name="1037451"></a><nobr>create_power_domain  -name PDIO  -boundary_ ports &nbsp;{VDDO VSSO resetb pdn pup pad}</nobr></pre>

<pre><a name="1037452"></a><nobr>update_power_domain -name PDIO -primary_power_net VDDO -primary_ground_net VSSO</nobr></pre>

<pre><a name="1037453"></a><nobr>end_macro_model </nobr></pre>

<pre><a name="1037454"></a><nobr>set_design top</nobr></pre>

<pre><a name="1037455"></a><nobr>create_power_domain  -name PD_PAD ...<br>create_power_domain  -name PD_CORE ...</nobr></pre>

<pre><a name="1037456"></a><nobr>create_pad_rule  -name -of_bond_ports {FOO[ 0: 127]} \<br>&nbsp; &nbsp;	 -mapping { {PDIO PD_PAD} {PDCore PD_CORE}} </nobr></pre>

<pre><a name="1037457"></a><nobr>...</nobr></pre>

<pre><a name="1037458"></a><nobr>end_design</nobr></pre>

<br><br><br>
<h2>
  <a name="1037460"> </a><a name="Modeling a Voltage Regulator"></a>Modeling a Voltage Regulator</h2>


<p>
  <a name="1037465"> </a><a href="modeling.html#1037467">Figure 5-31</a> shows an example of a voltage regulator. Pin <code>HAVDD</code> is the pin to which the high voltage supply needed for the proper operation of the voltage regulator is applied. The reference power and ground supplies are applied to pins <code>AVDD</code> and <code>AVSS</code>, respectively. The control signals to regulate the voltage are applied to pins <code>C1</code> and <code>C2</code>. Pin <code>VBB</code> corresponds to the output power supply.</p>


  <a name="1037467"> </a><h4>
Figure 5-31   Voltage Regulator</h4>


<p>
  <a name="1037471"> </a><img src="images/volt_regulator_1.gif">
</p>


<p>
  <a name="1037475"> </a>The voltage regulator of Figure <a href="modeling.html#1037467">5-31</a> has three power domains. The power domain associated with the output power supply is referred to as a <em>power source domain</em>.</p>


<p>
  <a name="1037476"> </a>To model a voltage regulator, you need to use a CPF macro model:</p>

<ul>
  <a name="1037477"></a><li><p>The power source domain must be identified with the <code>-power_source</code> option in the <code>create_power_domain</code>.</p>

  <a name="1037478"></a><li><p>The power domain of the high input voltage supply must be declared as the base domain (<code>-base_domains</code>) of the power source domain.</p>
<dl>
<p>
<strong>Note:&nbsp;</strong>
<a name="1037479"> </a>The primary supply voltage of the base domain can be different from the voltage of the power source domain.
</p>

</dl>
  <a name="1037480"></a><li><p>The options of the <code>update_power_domain</code> command for the power source domain depend on whether the output power supply is used as power source for the primary power supply or body bias supply of other domains:</p>
<ul>
  <a name="1037481"> </a><li><p>Use the <code>-primary_power_net</code> option if the power source can only be used a 
primary power supply of other domains
</p>

  <a name="1037482"> </a><li><p>Use the <code>-primary_ground_net</code> option if the power source is a primary ground 
supply of other domains
</p>
<dl>
<p>
  <a name="1037483"> </a>This occurs when a top design uses the ground bias supply to control the power dissipation and performance and uses the output of the voltage regulator for the ground connection.</p>

</dl>
  <a name="1037484"> </a><li><p>Use the <code>-pmos_bias_net</code> or <code>-nmos_bias_net</code> option (without the 
<code>-primary_power_net</code> or <code>-primary_ground_net</code> specification) if the power 
source can only be used as body bias supply of other domains
</p>

  <a name="1037485"> </a><li><p>Use the <code>-primary_power_net</code> and <code>-pmos_bias_net</code> options if the power 
source can be used as a primary power supply and pmos body bias supply of other 
domains
</p>

  <a name="1037486"> </a><li><p>Use the <code>-primary_ground_net</code> and <code>-nmos_bias_net</code> options if the power 
source can be used as a primary ground supply and nmos body bias supply of other 
domains
</p>
</ul><dl>
<p>
<strong>Note:&nbsp;</strong>
<a name="1037488"> </a>If the macro has an internal regulator whose output supply only drives logic within the macro, the <code>update_power_domain</code> command for the power source domain will not have any primary power, primary ground, or body bias net specifications. The power source domain is then referred to as an <em>internal power source domain</em>.
</p>

</dl>
  <a name="1037489"></a><li><p>Specify the reference signal for the power source domain with the <code>set_power_source_reference_pin</code> command.</p>

  <a name="1037490"></a><li><p>In any power mode definition, the nominal condition for the power source domain should have a lower voltage range than the nominal condition for its base domain.</p>
</ul>
<p>
  <a name="1037500"> </a>Examples <a href="modeling.html#1037502">5-31</a> through <a href="modeling.html#1037513">5-31</a> apply to <a href="modeling.html#1037467">Figure 5-31</a>.</p>


  <a name="1037502"> </a><h4>
Example 5-1   Voltage Regulator Model for Output Power Supply Used as PMOS Body Bias Supply</h4>


<p>
  <a name="1037506"> </a>Power supply <code>VBB</code> will be used as the PMOS body bias supply of top-level domain <code>PDDVFS</code>.</p>


<pre><a name="1037507"></a><nobr>set_macro_model regulator<br>create_power_domain -name PDVIN <br>update_power_domain -name PDVIN -primary_power_net <code><strong>HAVDD</strong></code> -primary_ground_net AVSS<br>create_power_domain -name PDVOUT <code><strong>-default -base_domains {PDVIN} -power_source<br></strong></code>update_power_domain -name PDVOUT <code><strong>-pmos_bias_net VBB<br></strong></code>create_power_domain -name PDREF -boundary_ports {C1 C2}<br>update_power_domain -name PDREF -primary_power_net AVDD -primary_ground_net AVSS<br>...<br><code><strong>set_power_source_reference_pin AVDD -domain PDVOUT voltage_range 1.0:1.1<br></strong></code>end_macro_model regulator</nobr></pre>

<pre><a name="1037508"></a><nobr>set_design top<br>create_power_domain -name PDDefault -default<br>update_power_domain -name PDDefault -primary_power_net AVDD \<br>&nbsp; &nbsp;	 -primary_ground_net AVSS<br>create_power_domain -name PDDirty <br>update_power_domain -name PDDirty -primary_power_net HighVdd \<br>&nbsp; &nbsp;	 -primary_ground_net VSS<br>create_power_domain -name PDDVFS -instances ...<br>update_power_domain -name PDDVFS -primary_power_net VDD -primary_ground_net VSS \<br>&nbsp; &nbsp;	 <code><strong>-pmos_bias_net VBB</strong></code> -nmos_bias_net VSS0<br>set_instance I_regulator -domain_mapping { {PDVIN PDDirty} {PDREF PDDefault} \<br>&nbsp; &nbsp;	 {<code><strong>PDVOUT PDDVFS</strong></code>}}<br>....</nobr></pre>

  <a name="1037509"> </a><h4>
Example 5-2   Voltage Regulator Model for Output Power Supply Used as PMOS Body Bias Supply with Voltage Range Specification</h4>


<p>
  <a name="1037510"> </a>In this example, the CPF contains voltage ranges for the nominal condition of the power source domain but does not specify how the output voltage is controlled. The simulation model could contain the output voltage behavior.</p>


<pre><a name="1037511"></a><nobr>set_macro_model regulator<br>create_power_domain -name PDVIN <br>update_power_domain -name PDVIN -primary_power_net HAVDD -primary_ground_net AVSS<br>create_power_domain -name PDVOUT -default -base_domains {PDVIN} -power_source<br>update_power_domain -name PDVOUT -pmos_bias_net VBB<br>create_power_domain -name PDREF -boundary_ports {C1 C2}<br>update_power_domain -name PDREF -primary_power_net AVDD -primary_ground_net AVSS<br><code><strong>create_nominal_condition -name LDO_range -voltage 1.1 -pmos_bias_voltage 1.1:1.3<br>create_nominal_condition -name HVDD -voltage 2.45:2.55 -ground_voltage 0.0<br>create_nominal_condition -name REF -voltage 1.1 -ground_voltage 0.0<br>create_power_mode -name PM -default -domain_conditions \<br>&nbsp; &nbsp;	 { PDREF@REF PDVIN@HVDD PDVOUT@LDO_range }<br></strong></code>set_power_source_reference_pin AVDD -domain PDVOUT voltage_range 1.1:1.1<br>end_macro_model regulator</nobr></pre>

  <a name="1037513"> </a><h4>
Example 5-3   Voltage Regulator Model for Output Power Supply Used as PMOS Body Bias Supply with Voltage Control Specification</h4>


<p>
  <a name="1037514"> </a>In this example, the CPF does specify how the output voltage is controlled.</p>


<p>
  <a name="1037515"> </a>VBB=1.1v when C1=1, C2=0; VBB=1. 2v when C1=0, C2=1; VBB=1. 3v when C1=1, C2=1</p>


<pre><a name="1037516"></a><nobr>set_macro_model regulator<br><code><strong>create_nominal_condition -name LDO1 -voltage 1.1 -pmos_bias_voltage 1.1<br>create_nominal_condition -name LDO2 -voltage 1.1 -pmos_bias_voltage 1.2<br>create_nominal_condition -name LDO3 -voltage 1.1 -pmos_bias_voltage 1.3<br></strong></code>create_nominal_condition -name HVDD -voltage 2.5 -ground_voltage 0.0<br>create_nominal_condition -name REF -voltage 1.1 -ground_voltage 0.0<br>create_power_domain -name PDVIN <br>update_power_domain -name PDVIN -primary_power_net HAVDD -primary_ground_net AVSS<br>create_power_domain -name PDVOUT -default -base_domains {PDVIN} -power_source \<br>&nbsp; &nbsp;	 <code><strong>-active_state_conditions { LDO1@"C1&amp;!C2" LDO2@"!C1&amp;C2" LDO3@"C1&amp;C2" }<br></strong></code>update_power_domain -name PDVOUT -pmos_bias_net VBB<br>create_power_domain -name PDREF -boundary_ports {C1 C2}<br>update_power_domain -name PDREF -primary_power_net AVDD -primary_ground_net AVSS<br><code><strong>create_power_mode -name PM1 -default -domain_conditions \<br>&nbsp; &nbsp;	 { PDREF@REF PDVIN@HVDD PDVOUT@LDO1 }<br>create_power_mode -name PM2 -domain_conditions \<br>&nbsp; &nbsp;	 { PDREF@REF PDVIN@HVDD PDVOUT@LDO2 }<br>create_power_mode -name PM3 -domain_conditions \<br>&nbsp; &nbsp;	 { PDREF@REF PDVIN@HVDD PDVOUT@LDO3 }<br></strong></code>set_power_source_reference_pin AVDD -domain PDVOUT voltage_range 1.1:1.1<br>end_macro_model regulator</nobr></pre>

  <a name="1037517"> </a><h4>
Example 5-4   Macro Cell with an Internal Regulator</h4>


<p>
  <a name="1037518"> </a>The macro below has an internal power regulator. The macro has no pin to export the internal power supply. Some output data pins are driven by logic that are in tern driven by the internal supply.</p>


  <a name="1037519"> </a><h4>
Figure 5-32   Internal Voltage Regulator</h4>


<p>
  <a name="1037524"> </a><img src="images/modelingx8.png" border="0">
</p>


<pre><a name="1037525"></a><nobr>set_macro_model regulator<br>create_power_domain -name PDVIN <br>update_power_domain -name PDVIN -primary_power_net HAVDD -primary_ground_net AVSS<br>create_power_domain -name PDVOUT -default -base_domains {PDVIN} <code><strong>-power_source<br></strong></code>create_power_domain -name PDREF -boundary_ports {C1 C2}<br>update_power_domain -name PDREF -primary_power_net AVDD -primary_ground_net AVSS<br>create_nominal_condition -name OUT -voltage 0.9:1.1<br>create_nominal_condition -name HDVV -voltage 2.5 -ground_voltage 0.0<br>create_nominal_condition -name REF -voltage 1.1 -ground_voltage 0.0<br><br>create_power_mode -name PM -default -domain_conditions \<br>&nbsp; &nbsp;	 { PDREF@REF PDVIN@HVDD PDVOUT@OUT }<br>set_power_source_reference_pin AVDD -domain PDVOUT voltage_range 1.1:1.1<br>end_macro_model regulator</nobr></pre>

<p>
  <a name="1037526"> </a>Power source domain PDVOUT has no <code>update_power_domain</code> command that contains any primary power, primary ground, or body bias net specifications.</p>


<br><br>
<h3>
  <a name="1037528"> </a>Power Domain Mapping of a Power Source Domain</h3>


<p>
  <a name="1037529"> </a>There are special semantics for power domain mapping in case of a power source domain,</p>


<p>
  <a name="1037533"> </a>The top-level domain inherits all the attributes related to the macro model power source domain:   </p>

<ul>
  <a name="1037537"></a><li><p>The top-level domain uses the power ports of a power source domain as either primary supply or body bias supply depending on the specification in the macro model   </p>

  <a name="1037538"></a><li><p>If the top-level domain already has a shutoff condition specified, it must be functionally equivalent to the conditions specified for the power source domain and the domain must be an external switchable domain.</p>

  <a name="1037545"></a><li><p>If the top-level domain also has active state conditions specified, it must be functionally equivalent to the corresponding condition specified for the power source domain. </p>
</ul>
<p>
  <a name="1037552"> </a>A power source domain can be mapped into multiple top-level domains.</p>

<ul>
  <a name="1037556"></a><li><p>These top-level domains must have consistent nominal conditions in all power modes </p>

  <a name="1037559"></a><li><p>It is an error if multiple power source domains are mapped into the same top-level domain.</p>
</ul>
<p>
  <a name="1037564"> </a>The top-level domain's voltage range (specified across all power modes) must be within the voltage range specified with the power source domain.</p>

<ul>
  <a name="1037568"></a><li><p>Depending on the definition and usage of the regulator output port, the top-level domain's nominal operating voltages can be any of the following: power voltage, ground voltage, pmos bias voltage, or nmos bias voltage, or a combination of these.   For example, if a regulator output port is defined as a pmos bias supply, then among all power mode definitions for the corresponding top level domain, its pmos bias voltage must be within the range of the operating voltage of the corresponding power source domain. </p>

  <a name="1037572"></a><li><p>If a power source domain is switchable, and if the top-level domain it is mapped to is an unswitched domain, the top-level domain becomes switchable with the shutoff condition specified in the macro model using the cell pins. It is an error if a switchable power source domain is mapped into a top-level internal switchable domain.</p>
</ul>
<p>
  <a name="1037576"> </a>If a power domain is an <em>internal</em> power source domain, the domain cannot be mapped. The <code>update_power_domain</code> command for the power source domain will not have any primary power, primary ground, or body bias port specifications. </p>


<br><br>
<h3>
  <a name="1037578"> </a>Simulation Semantic</h3>


<p>
  <a name="1037579"> </a>In simulation a power source domain is considered to be corrupted if</p>

<ul>
  <a name="1037580"></a><li><p>Its base domain is off or operates out of the required voltage ranges</p>

  <a name="1037581"></a><li><p>Its reference pin is corrupted or operates out of the specified voltage ranges</p>
</ul>
<p>
  <a name="1037582"> </a>When a power source domain is corrupted, the power domains mapped to this power source domain are corrupted as well. The corruption semantics applies recursively to all domain mappings that root from the power source domain.</p>


<p>
  <a name="1037606"> </a></p>


  
</blockquote>

<br>
<a href="#pagetop">Return to top of page</a>
<hr>
<p>
<!-- Begin Buttons -->
<table border="0" cellpadding="0" cellspacing="0" width="650">
<tr>
  <td height="20" width="59"><a href="javascript:openLibrary()"><img src="../support/nav2_library.gif" border="0" alt="View Library" height="20" width="59"></a></td>
  <td height="20" width="73"><a href="cpf_userTOC.html"><img src="../support/nav2_toc.gif" border="0" alt="View Table Of Contents" height="20" width="73"></a></td>
  <td height="20" width="46"><img src="../support/nav2_index_b.gif" border="0" height="20" width="46"></td>
  <td height="20" width="83"><a href="hierarchical.html"><img src="../support/nav2_previous.gif" border="0" alt="View Previous Chapter in Book" height="20" width="83"></a></td>
  <td height="20" width="59"><img src="../support/nav2_next_b.gif" border="0" height="20" width="59"></td>
  <td height="20" width="114"><a href="cpf_user.pdf"><img src="../support/nav2_print.gif" border="0" alt="Open PDF to print book" height="20" width="114"></a></td>
  <td height="20" width="61"><a href="/search.htm"><img src="../support/nav2_search.gif" border="0"  alt="Search Cadence Library" height="20" width="61"></a></td>
  <td height="20" width="76"><a href="/feedback.htm"><img src="../support/nav2_feedback.gif" border="0" alt="Email Comments" height="20" width="76"></a></td>
  <td height="20" width="43"><a href="../cdsuser/help.html"><img src="../support/nav2_help.gif" border="0" alt="Help Using Documentation" height="20" width="43"></a></td>
  <td height="20" width="37"><a href="/exitsearch.htm"><img src="../support/nav2_exit.gif" border="0" alt="Shut Down Cadence Documentation Server" height="20" width="37"></a></td>
</tr>
</table>

<!-- End Buttons -->
<p>
<p>

<!-- NOTES; -->

<!-- /address -->
<p>
<br>
<font size="-1">
For support, see <a href=http://www.cadence.com/support>http://www.cadence.com/support</a>
or try Cadence's <a href=http://sourcelink.cadence.com target=_blank>SourceLink</a> service.
<br><br>
<i>Copyright &#169; 2012, <a href=http://www.cadence.com>Cadence Design Systems, Inc.</a></i> 
<br>
All rights reserved.
<br>
<a href="titlecopy.html">Legal notices and trademark attributions</a>
<br>
<!-- This file was created with Quadralay WebWorks Publisher AutoMap 6.0.7 -->
<!-- -->
<!-- Last updated: Tue Oct 16 15:27:34 2012 -->
</font>
</body>
</html>


