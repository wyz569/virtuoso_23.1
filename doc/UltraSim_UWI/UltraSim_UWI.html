<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html xmlns="http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Virtuoso UltraSim Waveform Interface Reference -- Virtuoso UltraSim Waveform Interface</title>
<META NAME="Approver" CONTENT="Technical Publications">
<META NAME="Author" CONTENT="Technical Publications">
<META NAME="CreateDate" CONTENT="2018-12-07">
<META NAME="CreateTime" CONTENT="1544165303">
<META NAME="DataType" CONTENT="Manuals">
<META NAME="Description" CONTENT="The Virtuoso UltraSim Waveform Interface (UWI) allows users to write Virtuoso UltraSim probe data and read the data into the Virtuoso UltraSim simulator.">
<META NAME="DocTitle" CONTENT="Virtuoso UltraSim Waveform Interface Reference">
<META NAME="DocType" CONTENT="Reference">
<META NAME="EdmsRelease" CONTENT="FM-Wiki-2.0_HF1">
<META NAME="FileTitle" CONTENT="Virtuoso UltraSim Waveform Interface">
<META NAME="FileType" CONTENT="Chapter">
<META NAME="Keyword" CONTENT="UltraSim_UWI">
<META NAME="Language" CONTENT="English">
<META NAME="ModifiedDate" CONTENT="2018-12-07">
<META NAME="ModifiedTime" CONTENT="1544165303">
<META NAME="NextFile" CONTENT="">
<META NAME="PageCount" CONTENT="12">
<META NAME="Platform" CONTENT="ALL">
<META NAME="PrevFile" CONTENT="UltraSim_UWITOC.html">
<META NAME="Product" CONTENT="UltraSim">
<META NAME="ProductFamily" CONTENT="Analog & Mixed-Signal Design">
<META NAME="ProductVersion" CONTENT="18.1">
<META NAME="RightsManagement" CONTENT="Copyright 2003Ð2019 Cadence Design Systems Inc.">
<META NAME="Title" CONTENT="Virtuoso UltraSim Waveform Interface Reference -- Virtuoso UltraSim Waveform Interface">
<META NAME="TopicTags" CONTENT="TRUE">
<META NAME="Version" CONTENT="18.1">
  </head>
  <body style="margin-left: 5%;">
    <a name="pagetop"></a>
    <a name="firstpage"></a>
    <!-- Begin Buttons -->
    <table width="650" cellpadding="0" cellspacing="0" border="0">
      <tr>
        <td height="36" width="650" colspan="10">
          <img src="images/header_doc.gif" width="650" height="34">
        </td>
      </tr>
      <tr>
        <td height="20" width="59">
<a href="javascript:openLibrary()"><img src="../support/nav2_library.gif" border="0" alt="View Library" height="20" width="59"></a>

                </td>
<td height="20" width="73">
<a href="UltraSim_UWITOC.html"><img src="../support/nav2_toc.gif" alt="Table of Contents" border="0"></a>
</td>
<td height="20" width="46">
<img src="../support/nav2_index_b.gif" border="0">
</td>

        <td>
          <a href="UltraSim_UWITOC.html"><img src="images/nav2_previous.gif" alt="Previous" border="0"></a>
        </td>
        <td height="20">
          <img src="images/nav2_next_b.gif" alt="Previous">
        </td>
        <td height="20">
          <a>
<a href="UltraSim_UWI.pdf"><img src="../support/nav2_print.gif" border="0" alt="Open PDF to print book" height="20" width="114"></a>

          </a>
        </td>
        <td height="20" width="59">
          <img src="images/nav_next_b.gif" alt="Next" border="0">
        </td>
        <td height="20" width="61">
<img src="../support/nav2_black.gif" border="0"  height="20" width="76">

        </td>
        <td height="20" width="76">
<a href="/feedback.htm"><img src="../support/nav2_feedback.gif" border="0" alt="Email Comments" height="20" width="76"></a>

        </td>
        <td height="20" width="43">
<a href="../cdsuser/help.html"><img src="../support/nav2_help.gif" border="0" alt="Help Using Documentation" height="20" width="43"></a>

        </td>
        <td height="20" width="37">
<a href="/exitsearch.htm"><img src="../support/nav2_exit.gif" border="0" alt="Shut Down Cadence Documentation Server" height="20" width="37"></a>

        </td>
      </tr>
    </table>
    <!-- End Buttons -->
    <p>
    <hr>
    <p>
      <h3>
        <center>
          <font >
            <div>Virtuoso<sup>&#174;</sup> UltraSim Waveform Interface Reference </div>
            <font >
              <div>Product Version 18.1  January 2019</div>
            </font>
          </font>
        </center>
      </h3>
      <br>
    </p>
    <div>
      <h1><a name="42402">Virtuoso UltraSim Waveform Interface</a></h1>
      <p><a name="42403">The Virtuoso</a><font color="#000000"><sup>&#174;</sup></font> UltraSim<font color="#000000"><sup>&#8482;</sup></font> waveform interface (UWI) lets you write Virtuoso UltraSim probe data and read probe data into the Virtuoso UltraSim simulator. The current application programming interface (API) supports writing Virtuoso UltraSim simulation data to user&#45;defined formats. This document describes creating Virtuoso UltraSim waveform outputs in user&#45;defined formats.</p>
      <p><a name="41480">The Virtuoso UltraSim waveform interface is comprised of a set of functions that enables simulation data to be written in a variety of formats (see Figure </a><a href="#41485" title="Virtuoso UltraSim Waveform Interface"><font color="#0000ff"><u>1&#45;1</u></font></a>).</p>
      <p>
        <strong><font color="#000000"><strong>Figure 1&#45;1&nbsp; </strong></font></strong>
        <strong><a name="41485">UWI Overview</a></strong>
      </p>
      <p align="left"><a name="41511"><img src="images/UltraSim_UWI.3.1.1.png" width="488" height="271" alt=""><br></a></p>
      <p><a name="41477">You create source files (C&#45;source files) containing the API function definitions for each output format specified in the netlist. You can specify more than one format in the netlist and, for each format, you should define the APIs in a separate </a><font size="2" face="'Courier New'" color="#000000">.C</font> source file. Dynamic libraries are created from these source files and are linked to the Virtuoso UltraSim simulator during run time.</p>
      <!-- [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=UltraSim Waveform Interface Directory Structure

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->

      <h2><a name="41467">UltraSim Waveform Interface Directory Structure</a></h2>
      <p><a name="26147">The Virtuoso UltraSim waveform interface functions are linked to the Virtuoso UltraSim simulator through dynamically shared libraries. The shared libraries contain user&#45;provided definitions to Virtuoso UltraSim waveform API calls.</a></p>
      <p><a name="40054">To minimize the effort required for creating these libraries, auto&#45;build scripts and makefiles are included in the </a><font size="2" face="'Courier New'" color="#000000">ultrasim&#47;</font> directory. Figure <a href="#41012" title="Virtuoso UltraSim Waveform Interface"><font color="#0000ff"><u>1&#45;2</u></font></a> shows the complete waveform interface directory structure.</p>
      <p>
        <strong><font color="#000000"><strong>Figure 1&#45;2&nbsp; </strong></font></strong>
        <strong><a name="41012">UWI Directory Structure</a></strong>
      </p>
      <p align="left"><a name="41070"><img src="images/UltraSim_UWI.3.1.2.png" width="675" height="227" alt=""><br></a></p>
      <p align="left"><a name="39499">&nbsp;</a></p>
      <table summary="" border="1" cellpadding="5" cellspacing="0" width="648">
        <caption>
          <p align="left">
            <strong><font color="#000000"><strong>Table 1&#45;1&nbsp; </strong></font></strong>
            <strong><a name="32205">UWI Directories and Files&nbsp;</a></strong>
          </p>
        </caption>
        <tr>
          <td bgcolor="#CCCCCC" cellpadding="4" border="2" bordercolor="#000000" valign="middle" width="243">
            <p>
              <font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><strong><a name="32178">Directory and Filenames</a></strong></font>
            </p>
          </td>
          <td bgcolor="#CCCCCC" cellpadding="4" border="2" bordercolor="#000000" valign="middle" width="405">
            <p>
              <font face="Verdana, Arial, Helvetica, sans-serif" color="#003366"><strong><a name="32180">Descriptions</a></strong></font>
            </p>
          </td>
        </tr>
        <tr>
          <td cellpadding="4" border="1" bordercolor="#000000" valign="top">
            <p><a name="32182"><font size="2" face="'Courier New'" color="#000000">etc&#47;doc</font></a></p>
          </td>
          <td cellpadding="4" border="1" bordercolor="#000000" valign="top">
            <p><a name="32184">Virtuoso UltraSim waveform interface documentation.</a></p>
          </td>
        </tr>
        <tr>
          <td cellpadding="4" valign="top">
            <p><a name="32186"><font size="2" face="'Courier New'" color="#000000">&#47;etc</font></a></p>
          </td>
          <td cellpadding="4" valign="top">
            <p><a name="32188">Automated scripts for building library.</a></p>
            <p><a name="40277">uconfig</a> and umake for automating the process of building the shared Virtuoso UltraSim waveform interface library.</p>
          </td>
        </tr>
        <tr>
          <td cellpadding="4" valign="top">
            <p><a name="32191"><font size="2" face="'Courier New'" color="#000000">&#47;apiexample</font></a></p>
          </td>
          <td cellpadding="4" valign="top">
            <p><a name="32193">Example source files, config file, and </a><font size="2" face="'Courier New'" color="#000000">makefile.file</font>.</p>
          </td>
        </tr>
        <tr>
          <td cellpadding="4" valign="top">
            <p><a name="32195"><font size="2" face="'Courier New'" color="#000000">&#47;include</font></a></p>
          </td>
          <td cellpadding="4" valign="top">
            <p><a name="32197">Header file for Virtuoso UltraSim waveform interface structures and function prototypes.</a></p>
          </td>
        </tr>
        <tr>
          <td cellpadding="4" border="1" bordercolor="#000000" valign="top">
            <p><a name="32199"><font size="2" face="'Courier New'" color="#000000">&#47;lib	</font></a></p>
          </td>
          <td cellpadding="4" border="1" bordercolor="#000000" valign="top">
            <p><a name="32201">Object files for building shared library.</a></p>
          </td>
        </tr>
      </table>
<!-- [TOPIC_END] -->

      <!-- [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=uwi_lib

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->

      <h2><a name="26529">uwi_lib</a></h2>
      <dl>
        <font size="2" face="'Courier New'" color="#000000"><a name="26508">.usim_opt <dd>[ wf_format = </a><font size="2" face="'Courier New'" color="#000000"><em>formatName</em></font> ]<dd>uwi_lib = <font size="2" face="'Courier New'" color="#000000"><em>libraryPath</em></font></font>
      </dl>
      <p><a name="40390"><font color="#000000"><strong>Arguments</strong></font></a></p>
      <p align="left"><a name="25586">&nbsp;</a></p>
      <table summary="" cellpadding="4" cellspacing="0" bgcolor="#FFFFFF" width="648">
        <tr>
          <td cellpadding="4" border="0" valign="top" width="156">
            <p><a name="40328"><font size="2" face="'Courier New'" color="#000000"><em>formatName</em></font></a></p>
          </td>
          <td cellpadding="4" border="0" valign="top" width="492">
            <p><a name="41150">Specifies the output waveform format. Different output waveform formats can be generated using </a><font size="2" face="'Courier New'" color="#000000">wf_format</font> statements. Set <font size="2" face="'Courier New'" color="#000000">wf_format</font> in the <font size="2" face="'Courier New'" color="#000000">uconfig.pl</font> file.</p>
            <p><a name="40331">Valid Values: </a><font size="2" face="'Courier New'" color="#000000">fsdb</font>, <font size="2" face="'Courier New'" color="#000000">sst2</font>, <font size="2" face="'Courier New'" color="#000000">psf</font>, <font size="2" face="'Courier New'" color="#000000">psfascii</font>, <font size="2" face="'Courier New'" color="#000000">wdf</font>, <font size="2" face="'Courier New'" color="#000000">psfxl</font>, and user&#45;defined formats.<br>Default:<font size="2" face="'Courier New'" color="#000000"> sst2</font></p>
          </td>
        </tr>
        <tr>
          <td cellpadding="4" border="0" valign="top">
            <p><a name="40333"><font size="2" face="'Courier New'" color="#000000"><em>libraryPath</em></font></a></p>
          </td>
          <td cellpadding="4" border="0" valign="top">
            <p><a name="41158">Specifies the shared libraries for the requested formats. All formats require a </a><font size="2" face="'Courier New'" color="#000000">uwi_lib</font> statement, except for <font size="2" face="'Courier New'" color="#000000">sst2</font> (default), <font size="2" face="'Courier New'" color="#000000">psf</font>, <font size="2" face="'Courier New'" color="#000000">fsdb</font>, <font size="2" face="'Courier New'" color="#000000">psfascii</font>, <font size="2" face="'Courier New'" color="#000000">wdf</font>, and <font size="2" face="'Courier New'" color="#000000">psfxl</font>.</p>
          </td>
        </tr>
      </table>
      <p><a name="40317">If waveforms need to be generated in </a><font size="2" face="'Courier New'" color="#000000">sst2</font> format, specify this information in the netlist along with the other formats.</p>
      <p><a name="25606"><font color="#000000"><strong>Example</strong></font></a></p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="25587">.usim_opt wf_format = xydb<br>.usim_opt uwi_lib = .&#47;libXYDB.so</a></font>
      </p>
      <p><a name="25959">Generates all signals specified in the probe statements in </a><font size="2" face="'Courier New'" color="#000000">xydb</font> format. The shared library contains definitions of API functions to create the user&#45;defined output format.</p>
      <p><font color="#000000"><strong>Note: </strong></font><a name="25964">The Virtuoso UltraSim simulator generates signals in user&#45;defined formats and, if required for postprocessing, in </a><font size="2" face="'Courier New'" color="#000000">sst2</font> formats. Postprocessing occurs when the netlist contains <font size="2" face="'Courier New'" color="#000000">.measure</font> statements.</p>
<!-- [TOPIC_END] -->

      <!-- [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=UltraSim Waveform Interface APIs

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->

      <h2><a name="27158">UltraSim Waveform Interface APIs</a></h2>
      <p><a name="26697">This section describes the Virtuoso UltraSim waveform interface API syntax and functionality. The data structures mentioned in this section are specified in the </a><font size="2" face="'Courier New'" color="#000000">uwi.h</font> file.</p>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="31.999679999999998">
              <div>
                <nobr>
                  <font color="#000000"><img src="images/b_bullet.gif" alt="ParagraphBullet" border="0"></font>
                </nobr>
              </div>
            </td>
            <td><a href="#26604" title="Virtuoso UltraSim Waveform Interface" name="41580"><font color="Blue"><u>uwi_WfIntDef</u></font></a><a href="#26604" title="Virtuoso UltraSim Waveform Interface"> </a></td>
          </tr>
        </table>
      </div>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="31.999679999999998">
              <div>
                <nobr>
                  <font color="#000000"><img src="images/b_bullet.gif" alt="ParagraphBullet" border="0"></font>
                </nobr>
              </div>
            </td>
            <td><a href="#41550" title="Virtuoso UltraSim Waveform Interface" name="41585"><font color="Blue"><u>uwi_Setup</u></font></a><a href="#41550" title="Virtuoso UltraSim Waveform Interface"> </a></td>
          </tr>
        </table>
      </div>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="31.999679999999998">
              <div>
                <nobr>
                  <font color="#000000"><img src="images/b_bullet.gif" alt="ParagraphBullet" border="0"></font>
                </nobr>
              </div>
            </td>
            <td><a href="#39524" title="Virtuoso UltraSim Waveform Interface" name="41590"><font color="Blue"><u>uwi_WfDefinition</u></font></a><a href="#39524" title="Virtuoso UltraSim Waveform Interface"> </a></td>
          </tr>
        </table>
      </div>
<!-- [TOPIC_END] -->

      <!-- [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=uwi_WfIntDef

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->

      <h3><a name="26604">uwi_WfIntDef</a></h3>
      <dl>
        <font size="2" face="'Courier New'" color="#000000"><a name="39655">struct uwi_WfIntDef {<dd>uwi_StreamHandle (*open) (const uwi_Setup* );<dd>uwi_WfHandle (*defineWf) (uwi_StreamHandle, const uwi_WfDefinition* );<dd>void (*defineAliasName) (uwi_StreamHandle stream, uwi_WfHandle wfHdl, <dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const struct uwi_WfDefinition *aliasWfDef);<dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#47;* Add the alias name for the current waveform. *&#47;<dd>int (*endDefineWfs( uwi_StreamHandle );<dd>int (*addDWfPoint) ( uwi_StreamHandle, uwi_WfHandle, uwi_Logic, double t);<dd>int (*addAWfPoint) (uwi_StreamHandle, uwi_WfHandle, double, double);<dd>int (*flush)( uwi_StreamHandle );<dd>int (*close) (uwi_StreamHandle);<dd>int (*resetXcoord)(uwi_StreamHandle);<dd>char* (*getErrMsg) ( );<dd>const char* format;<dd>}</a></font>
      </dl>
      <p><a name="32326"><font color="#000000"><strong>Description</strong></font></a></p>
      <p><a name="32327">Registers the public functions of a waveform library with the Virtuoso UltraSim simulator. The function is called on each shared library after loading. The function returns a pointer to a </a><font size="2" face="'Courier New'" color="#000000">uwi_WfIntDef</font> structure containing pointers to the API functions. The user defines the functions and assigns them to the members of this structure.</p>
      <p><font color="#000000"><strong>Note: </strong></font><a name="26617">The memory to the structure is allocated by the user and should not be freed until the Virtuoso UltraSim process is terminated. The intention is that each shared library contains a static instance of such a structure.</a></p>
      <p><a name="26743">The </a><font size="2" face="'Courier New'" color="#000000">uwi_register</font> function is required for every library. The Virtuoso UltraSim simulator, in addition, has the following requirements on the function handlers returned. The functions <font size="2" face="'Courier New'" color="#000000">open</font> and <font size="2" face="'Courier New'" color="#000000">defineWf</font> are mandatory. </p>
      <p><a name="26664">The format character string within the </a><font size="2" face="'Courier New'" color="#000000">uwi_WfIntDef</font> structure identifies the provided waveform format. This string needs to match the <font size="2" face="'Courier New'" color="#000000">wf_format</font> string in the netlist to activate the provided waveform output.</p>
      <p><a name="26654"><font color="#000000"><strong>Example</strong></font></a></p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="25723">uwi_StreamHandle open( const uwi_Setup* initData )</a></font>
      </p>
      <p><a name="25611">This function is called whenever a new file stream in the user&#45;defined output format needs to be opened. </a><font size="2" face="'Courier New'" color="#000000">uwi_StreamHandle</font> associates the waveforms with the format written. </p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="26770">typedef void* uwi_StreamHandle;</a></font>
      </p>
      <p><a name="25618">This function is called by the Virtuoso UltraSim simulator with a </a><font size="2" face="'Courier New'" color="#000000">uwi_Setup</font> argument. The argument contains the description of the global simulation information valid for the current output being written. </p>
      <p><font color="#000000"><strong>Note: </strong></font><a name="25763">On return of the function, the Virtuoso UltraSim simulator deletes or reuses the memory of the structure argument passed to the function.</a></p>
<!-- [TOPIC_END] -->

      <!-- [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=uwi_Setup

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->

      <h3><a name="41550">uwi_Setup</a></h3>
      <dl>
        <font size="2" face="'Courier New'" color="#000000"><a name="41600">struct uwi_Setup {<dd>const char*&nbsp;</a><font size="2" face="'Courier New'" color="#000000"><em>filename</em></font>;<dd>uwi_AnalysisType analysis;<dd>int alterIter;<dd>int ageIter;<dd>double temp;<dd>double tRes;<dd>}</font>
      </dl>
      <p><a name="26778"><font color="#000000"><strong>Description</strong></font></a></p>
      <p><a name="41566">The information provided in the </a><font size="2" face="'Courier New'" color="#000000">uwi_Setup</font> structure is intended to provide a precise description of the overall simulation run associated with this stream. <font size="2" face="'Courier New'" color="#000000"><em>filename</em></font> is the name of the SPICE netlist and the analysis field is defined as</p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="25818">enum uwi_AnalysisType {TRAN, DC, NOISE, AC}</a></font>
      </p>
      <p><a name="26799"><font size="2" face="'Courier New'" color="#000000">alterIter</font></a>, <font size="2" face="'Courier New'" color="#000000">ageIter</font>, <font size="2" face="'Courier New'" color="#000000">temp</font>, and <font size="2" face="'Courier New'" color="#000000">tRes</font> provide additional information in case of more complex simulation runs. In general, output systems can take advantage of this information beginning with better error checking and output filename creation up to more efficient data structures. <font size="2" face="'Courier New'" color="#000000">tRes</font> gives the time resolution of the x axis specified in the <font size="2" face="'Courier New'" color="#000000">usim</font> options. The default is 1ps.</p>
      <p><a name="27133"><font color="#000000"><strong>Example</strong></font></a></p>
      <p><a name="41612">You can replace </a><font size="2" face="'Courier New'" color="#000000"><em>filename</em></font> in <font size="2" face="'Courier New'" color="#000000">uwi_Setup</font> with your own output file and then open that to dump the waveform or other information. If you open a file for writing and you want it to be used as the stream, that file handle must be returned by </p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="25770">uwi_WfHandle defineWf( uwi_StreamHandle stream, const uwi_WfDefinition* wfDef )</a></font>
      </p>
      <p><a name="25772">This function creates a handle for the given waveform definition in the given stream. The signal name, scope of the signal, units represented, and type of the signal are passed through by the </a><a href="#39524" title="Virtuoso UltraSim Waveform Interface"><font color="#0000ff"><u>uwi_WfDefinition</u></font></a> structure. The function returns a pointer to <font size="2" face="'Courier New'" color="#000000">uwi_WfHandle</font> if successful. The waveform handle is subsequently used while calling the function to write Virtuoso UltraSim simulation data.</p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="39523">typedef void* uwi_WfHandle;</a></font>
      </p>
<!-- [TOPIC_END] -->

      <!-- [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=uwi_WfDefinition

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->

      <h3><a name="39524">uwi_WfDefinition</a></h3>
      <dl>
        <font size="2" face="'Courier New'" color="#000000"><a name="25778">struct uwi_WfDefinition {<dd>const char*&nbsp;wfName;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<dd>const char**&nbsp;scopeName; <dd>const char*&nbsp;units;<dd>uwi_WfType&nbsp;wfType; <dd>}</a></font>
      </dl>
      <p><a name="25779"><font color="#000000"><strong>Description</strong></font></a></p>
      <p><a name="41571"><font size="2" face="'Courier New'" color="#000000">uwi_WfDefinition</font></a> is defined as a structure containing all signal&#45;specific information. The instance of this structure is controlled by the Virtuoso UltraSim simulator and is not guaranteed to exist during the call to the <font size="2" face="'Courier New'" color="#000000">defineWf</font> function.</p>
      <p><a name="41554">The individual field descriptions are as follows:</a></p>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="31.999679999999998">
              <div>
                <nobr>
                  <font color="#000000"><img src="images/b_bullet.gif" alt="ParagraphBullet" border="0"></font>
                </nobr>
              </div>
            </td>
            <td><a name="41203"><font size="2" face="'Courier New'" color="#000000">wfName</font></a> represents the actual signal name</td>
          </tr>
        </table>
      </div>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="31.999679999999998">
              <div>
                <nobr>
                  <font color="#000000"><img src="images/b_bullet.gif" alt="ParagraphBullet" border="0"></font>
                </nobr>
              </div>
            </td>
            <td><a name="41204"><font size="2" face="'Courier New'" color="#000000">scopeName</font></a> is a null&#45;terminated <font size="2" face="'Courier New'" color="#000000">char*</font> array</td>
          </tr>
        </table>
      </div>
      <blockquote><a name="41215">Each entry in this array represents the part of the hierarchical path to this signal, starting with the top level. </a></blockquote>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="31.999679999999998">
              <div>
                <nobr>
                  <font color="#000000"><img src="images/b_bullet.gif" alt="ParagraphBullet" border="0"></font>
                </nobr>
              </div>
            </td>
            <td><a name="41205"><font size="2" face="'Courier New'" color="#000000">units</font></a> identifies the physical unit of this signal (either a V for voltage or A for current) </td>
          </tr>
        </table>
      </div>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="31.999679999999998">
              <div>
                <nobr>
                  <font color="#000000"><img src="images/b_bullet.gif" alt="ParagraphBullet" border="0"></font>
                </nobr>
              </div>
            </td>
            <td><a name="41206"><font size="2" face="'Courier New'" color="#000000">uwi_WfType</font></a> is an <font size="2" face="'Courier New'" color="#000000">enum</font> defined as </td>
          </tr>
        </table>
      </div>
      <blockquote>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"></font>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="25825">enum uwi_WfType {ANALOG,DIGITAL}</a></font>
      </blockquote>
      <p><a name="26829">The type of a distinguishes between continuous time signals and discrete signal values. </a></p>
      <p><font color="#000000"><strong>Note: </strong></font><a name="25807">At the return of the function, the Virtuoso UltraSim simulator deletes or reuses the memory allocated to the structure.</a></p>
      <p><a name="41621"><font color="#000000"><strong>Examples</strong></font></a></p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="39697">int endDefineWfs( uwi_StreamHandle stream )</a></font>
      </p>
      <p><a name="39842">This function indicates the completion of definition of all waveforms to be added to the database. This optional function can be ignored by setting the function pointer in the </a><font size="2" face="'Courier New'" color="#000000">uwi_WfIntDef</font> structure to <font size="2" face="'Courier New'" color="#000000">null</font>.</p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="39844">int addDWfPoint( uwi_StreamHandle stream, uwi_WfHandle wfHandle, uwi_Logic val, double t )</a></font>
      </p>
      <p><a name="25863">This function sets the digital value of the waveform in a stream, pointed to by </a><font size="2" face="'Courier New'" color="#000000">wfHandle</font>. The x axis value is passed through the argument <font size="2" face="'Courier New'" color="#000000">t</font> (for DC, <font size="2" face="'Courier New'" color="#000000">t</font> is ignored). The digital value passed through the argument value is one of the enumerated types defined in <font size="2" face="'Courier New'" color="#000000">uwi_Logic</font>. If successful, the function returns <font size="2" face="'Courier New'" color="#000000">0</font>.</p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="39710">enum uwi_Logic {IN, OUT, X, Z}<br>int addAWfPoint(uwi_StreamHandle stream, uwi_WfHandle wfHandle, double val, double t)</a></font>
      </p>
      <p><a name="25872">This function sets the analog value of a waveform in a stream pointed to by </a><font size="2" face="'Courier New'" color="#000000">wfHandle</font> for the time <font size="2" face="'Courier New'" color="#000000">t</font>. If successful, the function returns <font size="2" face="'Courier New'" color="#000000">0</font>.</p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="26847">int flush(uwi_StreamHandle stream)</a></font>
      </p>
      <p><a name="25886">This function is called when the Virtuoso UltraSim simulator requires the flushing of the waveform data corresponding to the </a><font size="2" face="'Courier New'" color="#000000">uwi_StreamHandle</font>. If successful, the function returns <font size="2" face="'Courier New'" color="#000000">0</font>.</p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="25894">int close(uwi_StreamHandle stream)</a></font>
      </p>
      <p><a name="25896">This function closes the stream handle instance referred to by </a><font size="2" face="'Courier New'" color="#000000">stream</font>. This function is called once for each stream opened. The function returns <font size="2" face="'Courier New'" color="#000000">0</font> if successful. It is a good practice to close the open streams. That would avoid any conflict during output process.</p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="25897">int resetXCoord(uwi_StreamHandle stream)</a></font>
      </p>
      <p><a name="27677">This function resets the x coordinate of the database to time 0. All signals that are written after this function would start from time zero.</a></p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="25898">char* getErrMsg()</a></font>
      </p>
      <p><a name="25906">This function returns a textual description of the last error that occurred in one of the API functions. Depending on the importance of an error within the Virtuoso UltraSim flow, the textual message might be printed to the output.</a></p>
      <p><font color="#000000"><strong>Note: </strong></font><a name="39717">Other functions and variables defined in the </a><font size="2" face="'Courier New'" color="#000000">uwi.h</font> header file are used internally by the Virtuoso UltraSim simulator and can be ignored.</p>
<!-- [TOPIC_END] -->

      <!-- [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Building a Shared Library

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->

      <h2><a name="26042">Building a Shared Library</a></h2>
      <p><a name="25918">This section describes how to use the scripts provided to build the shared library.</a></p>
      <p><a name="41540">To build a shared library,</a></p>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="28.8" align="center">
              <div>
                <nobr><font color="#000000"><strong>	1.	</strong></font></nobr>
              </div>
            </td>
            <td><a name="26089">Create a directory and create the </a><font size="2" face="'Courier New'" color="#000000">.c</font> files containing the function definition of the APIs. </td>
          </tr>
        </table>
      </div>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="28.8" align="center">
              <div>
                <nobr><font color="#000000"><strong>	2.	</strong></font></nobr>
              </div>
            </td>
            <td><a name="26090">Run </a><font size="2" face="'Courier New'" color="#000000">uconfig.pl</font> in the directory containing the source files (<font size="2" face="'Courier New'" color="#000000">.c</font> files) by typing</td>
          </tr>
        </table>
      </div>
      <blockquote>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"></font>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="40556">uconfig.pl uwi [ &#45;P:64 ]</a></font>
      </blockquote>
      <blockquote><a name="27681">(Use </a><font size="2" face="'Courier New'" color="#000000">&#45;P:64</font> for 64&#45;bit applications.)</blockquote>
      <blockquote><a name="40587">A makefile to create the library is generated.</a></blockquote>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="28.8" align="center">
              <div>
                <nobr><font color="#000000"><strong>	3.	</strong></font></nobr>
              </div>
            </td>
            <td><a name="26118">Compile to code using the generated makefile and create the shared library by typing</a></td>
          </tr>
        </table>
      </div>
      <blockquote>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"></font>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="26124">umake.pl</a></font>
      </blockquote>
      <p><a name="26128">Windows NT users should consider the following:</a></p>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="31.999679999999998">
              <div>
                <nobr>
                  <font color="#000000"><img src="images/b_bullet.gif" alt="ParagraphBullet" border="0"></font>
                </nobr>
              </div>
            </td>
            <td><a name="40580">The system variable </a><font size="2" face="'Courier New'" color="#000000">CELESTRT_HOME</font> should be set correctly to the <font size="2" face="'Courier New'" color="#000000">ultrasim&#47;</font> home directory. </td>
          </tr>
        </table>
      </div>
      <div>
        <table border="0" cellspacing="0" cellpadding="3" summary="">
          <tr valign="baseline">
            <td width="31.999679999999998">
              <div>
                <nobr>
                  <font color="#000000"><img src="images/b_bullet.gif" alt="ParagraphBullet" border="0"></font>
                </nobr>
              </div>
            </td>
            <td><a name="40607">The compiler used in the scripts to build the library is the Visual C++ compiler. Set the Windows system variables </a><font size="2" face="'Courier New'" color="#000000">INCLUDE</font>, <font size="2" face="'Courier New'" color="#000000">PATH</font>, and <font size="2" face="'Courier New'" color="#000000">LIB</font> to specify the include files, the Visual C++ path, and the library before using the scripts to build the library. </td>
          </tr>
        </table>
      </div>
      <blockquote><a name="40614">For example, if your Visual C++ is installed at </a><font size="2" face="'Courier New'" color="#000000">C:\Program Files\Microscoft Visual Studio</font>, the Windows system variable <font size="2" face="'Courier New'" color="#000000">INCLUDE</font> should include the directory <font size="2" face="'Courier New'" color="#000000">c:\Program Files\Microsoft Visual Studio\vc98\include</font>, <font size="2" face="'Courier New'" color="#000000">PATH</font> should include the directory <font size="2" face="'Courier New'" color="#000000">c:\Program Files\Microsoft Visual Studio\vc98\bin</font>, and <font size="2" face="'Courier New'" color="#000000">LIB</font> should include <font size="2" face="'Courier New'" color="#000000">c:\Program Files\Microsoft Visual Studio\vc98\lib</font>.</blockquote>
      <p><font color="#000000"><strong>Note: </strong></font><a name="41408">To use the Virtuoso UltraSim waveform interface, you need to recompile the UWI header file (MMSIM 6.0 USR1 and newer releases).</a></p>
<!-- [TOPIC_END] -->

      <!-- [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=UltraSim Waveform Interface Example

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->

      <h2><a name="27171">UltraSim Waveform Interface Example</a></h2>
      <p><a name="27175">This example illustrates the use of these APIs to dump a waveform in a simple ASCII format.</a></p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="27852">&#47;**************************************************************<br>This is a simple program to explain the UWI interface. The main <br>purpose of this code is to demonstrate the UWI interface through<br>a very simple example.<br>**************************************************************&#47;<br><br>#include &#60;stdio.h&#62;<br>#include &#60;string.h&#62;<br>#include &#34;uwi.h&#34;<br><br>&#47;**************************************************************<br>This structure defines a stream in terms of a file pointer where data will be<br>stored. It also has arrays for data, digital time, analog time and digital value<br>to store waveform data<br>*************************************************************&#47;<br><br>typedef struct wfInfo<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;int  index;<br>&nbsp;&nbsp;&nbsp;&nbsp;double time;<br>&nbsp;&nbsp;&nbsp;&nbsp;double val;<br>&nbsp;&nbsp;&nbsp;&nbsp;short isDigital;<br><br>} sigData;<br><br>struct wfFormat<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;FILE* fp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#47;*   Defines output stream&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;char* sigName[100];&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&#47;*   Stores the name of the signals&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;sigData signal[1000]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#47;*   Stores signal name starting and index &nbsp;&nbsp;&nbsp;&nbsp;    *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;int sigCount; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#47;*   Stores the index of the signal Name &nbsp;&nbsp;&nbsp;&nbsp;    *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;int dataCount;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#47;*   Stores the number of data points to be flushed *&#47;<br>};<br><br>static struct wfFormat format; &#47;* Creates static instance of struct to store<br>waveform *&#47;<br><br>&#47;* Function delclaration to convert and integer to corresponding string value {0,<br>1, x, z}*&#47;<br>char* getLogicStr(int val);<br><br>char* getLogicStr(int val)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;if(val == 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;return &#34;0&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;else if(val ==1 )<br>&nbsp;&nbsp;&nbsp;&nbsp;return &#34;1&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;else if(val == 2)<br>&nbsp;&nbsp;&nbsp;&nbsp;return &#34;x&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;else if(val == 3)<br>&nbsp;&nbsp;&nbsp;&nbsp;return &#34;z&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;return &#34;&#34;;</a></font>
      </p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="27903">}<br><br><br>&#47;* This defines the open function *&#47;<br>uwi_StreamHandle open(const struct uwi_Setup* setup)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;char name[1000];<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* Initialize the data&#45;structure wfFormat *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;format.fp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;format.sigCount&nbsp;&nbsp;&nbsp;= 0;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;strcpy(name, setup&#45;&#62;fileName);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* create a unique file name depending upon the analysis type *&#47;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;if(setup&#45;&#62;analysis == DC)<br>&nbsp;&nbsp;&nbsp;&nbsp;strcat(name, &#34;_DC.saf&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;else if(setup&#45;&#62;analysis == TRAN)<br>&nbsp;&nbsp;&nbsp;&nbsp;strcat(name, &#34;.saf&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;else if(setup&#45;&#62;analysis == NOISE)<br>&nbsp;&nbsp;&nbsp;&nbsp;strcat(name, &#34;_NOISE.saf&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;else if(setup&#45;&#62;analysis == AC)<br>&nbsp;&nbsp;&nbsp;&nbsp;strcat(name, &#34;_AC.saf&#34;);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;*open the file*&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;format.fp = fopen(name, &#34;w+&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* Print the header information*&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;fprintf( format.fp,&#34;\tSignal\t\tTime\t\tVal\n&#34;);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return format.fp;<br>}<br><br>&#47;* Defining the waveform handle function *&#47;<br>uwi_WfHandle defineWf(uwi_StreamHandle strHandle, const struct uwi_WfDefinition*<br>wfDef)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;int index, sigSize = 0;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* Allocate memory for the signal *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;if( wfDef&#45;&#62;wfName )<br>&nbsp;&nbsp;&nbsp;&nbsp;sigSize = sizeof( wfDef&#45;&#62;wfName );<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if( sigSize )<br>&nbsp;&nbsp;&nbsp;&nbsp;format.sigName[format.sigCount] = (char *)malloc(sigSize);<br>&nbsp;&nbsp;&nbsp;&nbsp;else <br>&nbsp;&nbsp;&nbsp;&nbsp;return NULL;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* Copy the signal name to the struct defined at the start of the program *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;strcpy(format.sigName[format.sigCount], wfDef&#45;&#62;wfName);&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* increment the index of the name array *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;index = ++format.sigCount;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* Return the index as Waveform Handle *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;return (uwi_WfHandle)index;</a></font>
      </p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="40839"><br>}<br><br>&#47;* Define the flush function *&#47;<br>int flush(uwi_StreamHandle stream)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;int i;<br>&nbsp;&nbsp;&nbsp;&nbsp;sigData&nbsp;&nbsp;sig;<br>&nbsp;&nbsp;&nbsp;&nbsp;char*&nbsp;&nbsp;name;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;for(i = 0; i&#60; format.dataCount; ++i)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;sig&nbsp;=&nbsp;format.signal[i];<br>&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;format.sigName[sig.index&#45;1];<br>&nbsp;&nbsp;&nbsp;&nbsp;if( !sig.isDigital )<br>&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stream, &#34;\t%s \t%e  \t%e\n&#34;, name, sig.time, sig.val);</a></font>
      </p>
      <p>
        <font size="2" face="&quot;Courier New&quot;" color="#000000"><a name="40870">&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;char* lStr = getLogicStr((int)sig.val);<br>&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stream, &#34;\t%s \t%e  \t%s\n&#34;,name, sig.time, lStr );<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;return 0;<br>}<br><br>&#47;* Defines the close API *&#47;<br>int close(uwi_StreamHandle stream)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;int i;<br>&nbsp;&nbsp;&nbsp;&nbsp;fclose((FILE*)stream);<br>&nbsp;&nbsp;&nbsp;&nbsp;for( i = 0 ; i &#60; format.sigCount ; ++i )<br>&nbsp;&nbsp;&nbsp;&nbsp;free( format.sigName[i] );<br>&nbsp;&nbsp;&nbsp;&nbsp;return 0;<br>}<br><br>&#47;* Defines the addDWfPoint API *&#47;<br>int addDWfPoint(uwi_StreamHandle stream, uwi_WfHandle wfHandle, enum uwi_Logic<br>val, double t)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* Add the digital value and the corresponding time into the array of the struct &nbsp;&nbsp;&nbsp;&nbsp;*&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;long index = (long)(wfHandle);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;format.signal[format.dataCount].time      = t;<br>&nbsp;&nbsp;&nbsp;&nbsp;format.signal[format.dataCount].val       = (double)val;<br>&nbsp;&nbsp;&nbsp;&nbsp;format.signal[format.dataCount].index     = index;<br>&nbsp;&nbsp;&nbsp;&nbsp;format.signal[format.dataCount].isDigital = 1;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;++format.dataCount;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return 0;<br>}<br><br>&#47;* Defines addAWfPoint API *&#47;<br>int addAWfPoint(uwi_StreamHandle stream, uwi_WfHandle wfHandle, double val, double<br>t)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;long index = (long)(wfHandle);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;format.signal[format.dataCount].time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= t;<br>&nbsp;&nbsp;&nbsp;&nbsp;format.signal[format.dataCount].val&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= val;<br>&nbsp;&nbsp;&nbsp;&nbsp;format.signal[format.dataCount].index&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= index;<br>&nbsp;&nbsp;&nbsp;&nbsp;format.signal[format.dataCount].isDigital&nbsp;= 0;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;++format.dataCount;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return 0;<br>}<br><br><br>&#47;* Finally register all the functions defined above with uwi_register() API *&#47;<br>struct uwi_WfIntDef* uwi_register()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* Defines a static struct of the waveform interface definition *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;static struct uwi_WfIntDef wfIntDef;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* Assigns all the user defined functions to the members of the waveform &nbsp;&nbsp;&nbsp;&nbsp;interface object *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;wfIntDef.open&nbsp;= open;<br>&nbsp;&nbsp;&nbsp;&nbsp;wfIntDef.defineWf&nbsp;=&nbsp;defineWf;<br>&nbsp;&nbsp;&nbsp;&nbsp;wfIntDef.endDefineWfs = NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;wfIntDef.addDWfPoint&nbsp;= addDWfPoint;<br>&nbsp;&nbsp;&nbsp;&nbsp;wfIntDef.addAWfPoint = addAWfPoint;<br>&nbsp;&nbsp;&nbsp;&nbsp;wfIntDef.flush = flush;<br>&nbsp;&nbsp;&nbsp;&nbsp;wfIntDef.close = close;<br>&nbsp;&nbsp;&nbsp;&nbsp;wfIntDef.resetXCoord = NULL;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&#47;* the format is SAF the user needs specify the same format in the netlist *&#47;<br>&nbsp;&nbsp;&nbsp;&nbsp;wfIntDef.format = &#34;SAF&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;return &amp;wfIntDef;<br>}</a></font>
      </p>
<!-- [TOPIC_END] -->

      <p><a name="41750">&nbsp;</a></p>
    </div>
    <br>
    <a href="#pagetop">Return to top of page</a>
    <hr>
    <hr align="left">
    <div style="text-align: left;">
      <!-- Begin Buttons -->      <table width="650" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td height="20" width="59">
<a href="javascript:openLibrary()"><img src="../support/nav2_library.gif" border="0" alt="View Library" height="20" width="59"></a>

                    </td>
<td height="20" width="73">
<a href="UltraSim_UWITOC.html"><img src="../support/nav2_toc.gif" alt="Table of Contents" border="0"></a>
</td>
<td height="20" width="46">
<img src="../support/nav2_index_b.gif" border="0">
</td>

          <td>
            <a href="UltraSim_UWITOC.html"><img src="images/nav2_previous.gif" alt="Previous" border="0"></a>
          </td>
          <td height="20">
            <img src="images/nav2_next_b.gif" alt="Previous">
          </td>
          <td>
            <a>
<a href="UltraSim_UWI.pdf"><img src="../support/nav2_print.gif" border="0" alt="Open PDF to print book" height="20" width="114"></a>

            </a>
          </td>
          <td height="20" width="59">
            <img src="images/nav_next_b.gif" alt="Next" border="0">
          </td>
          <td height="20" width="61">
<img src="../support/nav2_black.gif" border="0"  height="20" width="76">

          </td>
          <td height="20" width="76">
<a href="/feedback.htm"><img src="../support/nav2_feedback.gif" border="0" alt="Email Comments" height="20" width="76"></a>

          </td>
          <td height="20" width="43">
<a href="../cdsuser/help.html"><img src="../support/nav2_help.gif" border="0" alt="Help Using Documentation" height="20" width="43"></a>

          </td>
          <td height="20" width="37">
<a href="/exitsearch.htm"><img src="../support/nav2_exit.gif" border="0" alt="Shut Down Cadence Documentation Server" height="20" width="37"></a>

          </td>
        </tr>
      </table>
      <!-- End Buttons -->
    </div>
    <br>
    <font size="-1" >
For support, see <a href="http://support.cadence.com" target="_blank">Cadence Online Support</a> service.</font>
    <br>
    <br>
    <font size="-1" >
      <i>Copyright &#169; 2019, <a href="http://www.cadence.com">Cadence Design Systems, Inc.</a></i>
    </font>
    <br>
    <font size="-1" >
All rights reserved.</font>
    <br>
    <br>
  </body>
</html>
