
<html><head><title>Advanced Rule Macros</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="parula" />
<meta name="CreateDate" content="2023-08-04" />
<meta name="CreateTime" content="1691137336" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes SKILL IDE debugger that is used to debug SKILL code" />
<meta name="DocTitle" content="Cadence SKILL IDE User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Advanced Rule Macros" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="skillide" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-08-04" />
<meta name="ModifiedTime" content="1691137336" />
<meta name="NextFile" content="appendixB_Rule_Definition_Locations.html" />
<meta name="Group" content="SKILL Language" />
<meta name="Platform" content="Cadence Shared Tools" />
<meta name="PrevFile" content="appendixB_Rule_Reporting_Macros.html" />
<meta name="c_product" content="Virtuoso Layout Suite,Virtuoso Schematic Editor,Virtuoso Analog Design Environment" />
<meta name="Product" content="SKILL" />
<meta name="ProductFamily" content="SKILL" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Cadence SKILL IDE User Guide -- Advanced Rule Macros" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="concept" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="SKILL Infrastructure" />
<meta name="prod_subfeature" content="SKILL IDE" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="skillideIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="skillideTOC.html">Contents</a></li><li><a class="prev" href="appendixB_Rule_Reporting_Macros.html" title="Rule Reporting Macros">Rule Reporting Macros</a></li><li style="float: right;"><a class="viewPrint" href="skillide.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="appendixB_Rule_Definition_Locations.html" title="Rule Definition Locations">Rule Definition Locations</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Cadence SKILL IDE User Guide<br />Product Version IC23.1, August 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a id="Filename:Advanced_Rule_Macros" title="Advanced Rule Macros"></a><h2>
<a id="pgfId-1306430"></a><a id="18288"></a>Advanced Rule <a id="Advanced Rule Macros"></a>Macros</h2>

<p>
<a id="pgfId-1306431"></a>Cadence provides the following advanced rule macros for your convenience:</p>
<ul><li>
<a id="pgfId-1306435"></a><a href="appendixB_Advanced_Rule_Macros.html#55131">SK_CHANGED_IN( t_release )</a></li><li>
<a id="pgfId-1306439"></a><a href="appendixB_Advanced_Rule_Macros.html#20956">SK_CHECK_STRINGFORM( t_stringForm )</a></li><li>
<a id="pgfId-1306443"></a><a href="appendixB_Advanced_Rule_Macros.html#76113">SK_RULE( SK_CONTROL ... )</a></li><li>
<a id="pgfId-1306447"></a><a href="appendixB_Advanced_Rule_Macros.html#62273">SK_CHECK_FORM( l_form )</a></li><li>
<a id="pgfId-1306451"></a><a href="appendixB_Advanced_Rule_Macros.html#23249">SK_PUSH_FORM( l_form ) SK_POP_FORM()</a></li><li>
<a id="pgfId-1306455"></a><a href="appendixB_Advanced_Rule_Macros.html#21078">SK_PUSH_VAR( s_var )</a></li><li>
<a id="pgfId-1306459"></a><a href="appendixB_Advanced_Rule_Macros.html#50477">SK_POP_VAR( s_var [dont_check] )</a></li><li>
<a id="pgfId-1306463"></a><a href="appendixB_Advanced_Rule_Macros.html#17322">SK_USE_VAR( s_var )</a></li><li>
<a id="pgfId-1306467"></a><a href="appendixB_Advanced_Rule_Macros.html#98729">SK_ALIAS( s_function s_alias )</a></li></ul>









<h3>
<a id="pgfId-1306470"></a><a id="marker-1306468"></a><a id="55131"></a>SK_CHANGED_IN( t_release )</h3>

<p>
<a id="pgfId-1306471"></a>This macro is used to specify the release version (e.g. &quot;500&quot; for IC5.0.0) that a function is changed. The <code>SK_CHANGED_IN</code> macro must be embedded as the second argument of <code>SK_RULE</code>. For example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1306472"></a>SK_RULE( myFunc<br />   SK_CHANGED_IN(&quot;500&quot;)<br />   SK_INFO( myFunc<br />   . . .<br />)</pre>

<p>
<a id="pgfId-1306473"></a><code>SK_CHANGED_IN</code> evaluates to non-nil if the code being checked, as specified with the <code>sklint</code> argument <code>?codeVersion</code>, is from an earlier release than the release specified through the argument of <code>SK_CHANGED_IN</code> and the SKILL Lint rules message that describes function change (only) will be reported. The argument must me a numeric string of the release version (for example, <span class="webflare-courier-new" style="white-space:pre"><em>500</em></span> for IC 5.0.0). If <code>?codeVersion</code> is not specified, <code>SK_CHANGED_IN</code> will always evaluate to non-nil and a function change rules message will be reported.</p>
<p>
<a id="pgfId-1306474"></a>This macro is useful when the user wants to restrict reporting of function change rule messages which occurred after the release for which the code being checked was written. When users check the code in IC500 they will not be interesting in seeing the information about the change in IC 4.4.5, since that was before they wrote the code (or perhaps before it was migrated).</p>
<p>
<a id="pgfId-1306475"></a>If the function changes more than once, then there should be a separate SKILL Lint rule for each change, each with a different <code>SK_CHANGED_IN</code> macro.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1306476"></a><code>SK_CHANGED_IN</code> should only be used for filtering out function changed rule messages. Function deleted rule messages should always be reported.</div>

<h3>
<a id="pgfId-1306479"></a><a id="marker-1306477"></a><a id="20956"></a>SK_CHECK_STRINGFORM( t_stringForm )</h3>

<p>
<a id="pgfId-1306480"></a>This macro is similar to <code>SK_CHECK_FORM</code> but it is used to check SKILL form in strings (e.g. callback string). This macro is added to deal with the problem that when a string form is converted to a SKILL form, the line number of the string form will be messed up and causes an incorrect line number to be reported. </p>
<p>
<a id="pgfId-1306481"></a>An example of usage: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1306482"></a>procedure( test()<br />    let( (c)<br />      c = myFunc(<br />           &quot;foreach(i &#8217;(1 2 3 4) a=i)&quot;<br />      )<br />    c<br />   )<br />)<br />SK_RULE( myFunc<br />   t<br />   SK_CHECK_STRINGFORM( SK_ARGS() )<br />)</pre>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1306483"></a>The argument to SK_CHECK_STRINGFORM must be a string.</div>

<h3>
<a id="pgfId-1306486"></a><a id="marker-1306484"></a><a id="76113"></a>SK_RULE( SK_CONTROL ... )</h3>

<p>
<a id="pgfId-1306487"></a>The <code>SK_RULE</code> macro has an optional first argument which is the keyword <code>SK_CONTROL</code>. When this keyword is given, it means that this rule is a &#8220;controlling&#8221; rule. This means that the arguments to the function are not themselves checked by SKILL Lint. Usually, SKILL Lint will first apply checking to all the arguments of a function call and then to the call itself. However, if there is a controlling rule, then the arguments are not checked automatically. This type of rule is usually needed for <code>nlambda</code> expression (for example <code>nprocedures</code>) where only some of the arguments are evaluated.</p>

<h3>
<a id="pgfId-1306490"></a><a id="marker-1306488"></a><a id="62273"></a>SK_CHECK_FORM( l_form )</h3>

<p>
<a id="pgfId-1306491"></a>This macro can be used to apply checking to a statement. This is usually useful within a controlling rule. The argument is a list whose first element is the SKILL code to be checked.</p>
<p>
<a id="pgfId-1306492"></a>For example, consider a rule to be written for the <code>if</code> function (ignoring for the moment that there are internal rules for <code>if</code>.) This function evaluates all its arguments at one time or another, except for the <code>then</code> and <code>else</code> keywords. Writing a rule for <code>if</code> would require a controlling rule, which would call this macro to check all the arguments except for the <code>then</code> and <code>else</code>. For example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1306493"></a>SK_RULE( SK_CONTROL if <br />   t <br />   foreach(map statement SK_ARGS() <br />      unless(memq(car(statement) &#8216;(then else)) SK_CHECK_FORM(statement))<br />   )<br />)</pre>

<p>
<a id="pgfId-1306494"></a>The <code>SK_CONTROL</code> keyword means that the arguments to <code>if</code> will not be checked automatically. The test in this case is <code>t</code>, which means that the rule will be applied to all calls to <code>if</code>. The rule command is a call to <code>foreach</code>, with <code>map</code> as the first argument. Each time through the loop the statement is a new <code>cdr</code> of the arguments. We check that this is not a <code>then</code> or <code>else</code>, and if not, then call <code>SK_CHECK_FORM</code> to check the argument. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1306495"></a>The argument to <code>SK_CHECK_FORM</code> must be a list whose first element is the statement to check, not the statement itself.</div>
<p>
<a id="pgfId-1306496"></a>It is important to call the checker on all appropriate arguments to a function, even if they are just symbols, because the checker handles trapping of variables which are unused, or are illegal globals and so forth.</p>
<p>
<a id="pgfId-1306497"></a>There should only be a single control rule for any function.</p>

<h3>
<a id="pgfId-1306500"></a><a id="marker-1306498"></a><a id="23249"></a>SK_PUSH_FORM( l_form ) 
<a id="marker-1306501"></a>SK_POP_FORM()</h3>

<p>
<a id="pgfId-1306502"></a>These two macros are used to indicate an extra level of evaluation, such as is introduced by the various branches of a <code>cond</code> or <code>case</code> function call. These macros should not be needed by most user rules. They are used in rare circumstances to indicate to the dead-code spotting routines where branches occur in the code.</p>

<h3>
<a id="pgfId-1306505"></a><a id="marker-1306503"></a><a id="21078"></a>SK_PUSH_VAR( s_var )</h3>

<p>
<a id="pgfId-1306506"></a>Declares a new variable. For example, the rules for <code>let</code>, <code>setof</code>, etc. declare the variables in their first argument using this function. The function should be called <em>before</em> calling <code>SK_CHECK_FORM</code> on the statements in the body of the routine.</p>

<h3>
<a id="pgfId-1306509"></a><a id="marker-1306507"></a><a id="50477"></a>SK_POP_VAR( s_var [dont_check] )</h3>

<p>
<a id="pgfId-1306510"></a>Pops a variable that was previously declared by <code>SK_PUSH_VAR</code>. Unless the second argument is <code>t</code>, the variable is checked to see whether it was used by any of the statements which were checked between the calls to <code>SK_PUSH_VAR</code> and <code>SK_POP_VAR</code>.</p>
<p>
<a id="pgfId-1306511"></a>For example, consider a new function called <code>realSetOf</code>. Assume this function works just like <code>setof</code>, except that it removes any duplicates from the list that is returned. The rule is a control rule which pushes the variable given as the first argument, checks the rest of the arguments, and then pops the variable, checking that it was used within the loop: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1306512"></a>SK_RULE( SK_CONTROL realSetOf <br />   t <br />   SK_PUSH_VAR(car(SK_ARGS()))<br />   map(&#8216;SK_CHECK_FORM cdr(SK_ARGS()) ) <br />   SK_POP_VAR(car(SK_ARGS())) <br />)</pre>
<h3>
<a id="pgfId-1306515"></a><a id="marker-1306513"></a><a id="17322"></a>SK_USE_VAR( s_var )</h3>

<p>
<a id="pgfId-1306516"></a>Marks the given variable as having been used. Usually a variable is marked as having been used if it is passed to a function. However, if a function has a controlling rule, and does not call <code>SK_CHECK_FORM</code> then it might wish to mark a variable as having been used. For example, the rule for <code>putprop</code> marks the first argument as having been used. The same rule ignores the third argument (the property name) and calls the checker on the second argument. If <code>putprop</code> did not have a controlling rule, then the symbol used for the property name would get marked as having been used and would probably be reported as an error global.</p>

<h3>
<a id="pgfId-1306519"></a><a id="marker-1306517"></a><a id="98729"></a>SK_ALIAS( s_function s_alias )</h3>

<p>
<a id="pgfId-1306520"></a>This macro can be used where one function should be checked with the same rules as another function. For example, it is fairly common to see functions replacing <code>printf</code>, which add a standard prefix to the function. For example: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1306521"></a>procedure( ERROR(fmt @rest args) <br />   fmt = strcat(&#8220;ERROR: &#8220; fmt)       <br />   apply(&#8216;printf cons(fmt args)) <br />) </pre>

<p>
<a id="pgfId-1306522"></a>It would be nice to check calls to ERROR with the same rules as are used for <code>printf</code> (mainly to check that the number of arguments matches that expected by the format string.) This can be achieved using the following call: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1306523"></a>SK_ALIAS( ERROR printf ) </pre>

<p>
<a id="pgfId-1306524"></a>This macro, like <code>SK_REGISTER</code>, is used outside of any rule definitions.</p>

<h4><em>
<a id="pgfId-1308832"></a>Related Topics</em></h4>

<p>
<a id="pgfId-1308836"></a><a href="appendixB.html#31836">SKILL Lint Rules</a></p>
<p>
<a id="pgfId-1308877"></a><a href="appendixB.html#36641">Rule Structure - SK_RULE Macro</a></p>
<p>
<a id="pgfId-1308861"></a><a href="appendixB_Rule_Access_Macros.html#13644">Rule Access Macros</a></p>
<p>
<a id="pgfId-1308840"></a><a href="appendixB_Rule_Reporting_Macros.html#12391">Rule Reporting Macros</a></p>
<p>
<a id="pgfId-1308844"></a><a href="appendixB_Advanced_Rule_Macros.html#18288">Advanced Rule Macros</a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="appendixB_Rule_Reporting_Macros.html" id="prev" title="Rule Reporting Macros">Rule Reporting Macros</a></em></b><b><em><a href="appendixB_Rule_Definition_Locations.html" id="nex" title="Rule Definition Locations">Rule Definition Locations</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;⠀ </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>