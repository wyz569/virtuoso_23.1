
<html><head><title>Verifying CDF Operation</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="rgirdhar" />
<meta name="CreateDate" content="2023-06-12" />
<meta name="CreateTime" content="1686598878" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the parameters, attributes of parameters of individual components, and libraries of components to let you create and describe your own components" />
<meta name="DocTitle" content="Component Description Format User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Verifying CDF Operation" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="cdfuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-06-12" />
<meta name="ModifiedTime" content="1686598878" />
<meta name="NextFile" content="appA.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Cadence Shared Tools" />
<meta name="PrevFile" content="chap7.html" />
<meta name="c_product" content="Cadence Shared Tools" />
<meta name="Product" content="Cadence Shared Tools" />
<meta name="ProductFamily" content="Cadence Shared Tools" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Component Description Format User Guide -- Verifying CDF Operation" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="cdfuserIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="cdfuserTOC.html">Contents</a></li><li><a class="prev" href="chap7.html" title="Writing Callbacks">Writing Callbacks</a></li><li style="float: right;"><a class="viewPrint" href="cdfuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="appA.html" title="Advice and Warnings">Advice and Warnings</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Component Description Format User Guide<br />Product Version IC23.1, June 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>8
<a id="pgfId-993921"></a></h1>
<h1>
<a id="pgfId-993922"></a><hr />
Verifying CDF Operation<hr />
</h1>

<ul><li>
<a id="pgfId-993925"></a><a href="chap9.html#40844">Testing the Component</a></li><li>
<a id="pgfId-993926"></a><a href="chap9.html#20249">Finishing the NFET Example</a></li></ul>


<h2>
<a id="pgfId-993924"></a><a id="marker-993923"></a><a id="40844"></a>Testing the Component </h2>

<p>
<a id="pgfId-437126"></a>Once you have completed the design of your component (all views and the Component Description Format are done), test the operation of the component&#8217;s CDF description before using the component in your design. The following is a procedure you might use.</p>

<h3>
<a id="pgfId-437127"></a>Test Procedure</h3>

<ol><li>
<a id="pgfId-437638"></a>Open an empty schematic and place instances of your symbol. </li><li>
<a id="pgfId-437128"></a>As you place the instances, use different parameter values. <br />
<a id="pgfId-437960"></a>Check the Add Instance form for confirmation that your parameter definitions and callbacks are working. Look for the following indications:<ul><li>
<a id="pgfId-437129"></a><a id="marker-437298"></a>Parameters have the units you expected.</li><li>
<a id="pgfId-437130"></a>Parameters have the defaults you expected.</li><li>
<a id="pgfId-437131"></a>The correct parameters are at the top of the list of parameters. You should not have to keep scrolling down the form to edit important parameters. </li><li>
<a id="pgfId-437132"></a>Parameters that are supposed to become noneditable do so when expected.</li><li>
<a id="pgfId-437133"></a>Parameters that are not supposed to be displayed are not displayed as expected.</li><li>
<a id="pgfId-437134"></a>Do your callbacks get called? First check. Do they stacktrace because you forgot to load them?</li><li>
<a id="pgfId-437135"></a>Parameters whose values depend on other parameters update as you expect.</li><li>
<a id="pgfId-437136"></a>Are your callbacks doing the range checking you set up?</li><li>
<a id="pgfId-437137"></a>Can you enter bad parameter values?</li></ul></li><li>
<a id="pgfId-437138"></a>After you place the instances, use Edit Properties (in the schematic editor) to look at the properties stored on the instances.<br />
<a id="pgfId-438003"></a>Look for the following:<ul><li>
<a id="pgfId-437139"></a>Are you saving the default values?</li><li>
<a id="pgfId-437140"></a>Are nondisplayed parameters being set as you expected? If they are not displayed, it is hard to know that they worked.</li></ul></li><li>
<a id="pgfId-437141"></a>Draw a minimal schematic and go to the simulator you will be using. Generate a netlist to make sure that your component netlists as you expect.</li><li>
<a id="pgfId-437142"></a>Once you are satisfied with the schematic and simulation results, go to an empty layout and repeat the CDF tests to see the effect on your layout.</li></ol>


















<h3>
<a id="pgfId-438484"></a>Virtuoso XL Layout Editor Procedure</h3>

<p>
<a id="pgfId-437143"></a>If you are going to use the Virtuoso<sup>&#174;</sup> XL Layout Editor (Virtuoso XL), </p>
<ol><li>
<a id="pgfId-438038"></a>Make a simple schematic with some examples of your component randomly wired to each other.</li><li>
<a id="pgfId-438041"></a>Go through the Virtuoso XL design cycle.</li><li>
<a id="pgfId-438044"></a>Check that you have set all the parameters that Virtuoso XL requires. </li><li>
<a id="pgfId-438054"></a>Does Virtuoso XL place the layouts you expect with appropriate connectivity?</li></ol>




<h3>
<a id="pgfId-438502"></a>LVS Procedure</h3>

<p>
<a id="pgfId-437144"></a>If you are using Layout Versus Schematic (LVS), </p>
<ol><li>
<a id="pgfId-438106"></a>Create a simple schematic and layout with few instances. </li><li>
<a id="pgfId-438109"></a>Run extraction and LVS. </li><li>
<a id="pgfId-438110"></a>Make sure the LVS netlist is correct. <br />
<a id="pgfId-438111"></a>This also gives you a chance to check out the LVS rules in a controlled experiment using just one device.</li></ol>




<h3>
<a id="pgfId-438538"></a>Making Changes</h3>

<p>
<a id="pgfId-438539"></a>If you find a problem or change the design, follow these guidelines:</p>
<ul><li>
<a id="pgfId-438540"></a>If problems occur during testing, fix the views or CDF and retest.</li><li>
<a id="pgfId-997026"></a>For the parameter type <code>netSet</code>, it is mandatory to set the attribute <em>storeDefault</em> to <em>yes</em>. </li><li>
<a id="pgfId-997013"></a>If the problem or change occurs after you have placed multiple instances of the component, consider the following:<ul><li>
<a id="pgfId-438542"></a>You might need to change just the user interface, such as the order of the parameters or which parameters are displayed in the form or label display. When you make a change, it is inherited by all existing instances.</li><li>
<a id="pgfId-438543"></a>If you change the default value of a parameter with the attribute <em>storeDefault = no,</em> it is inherited by all existing instances. (Use the <em>Window &#8211; Redraw</em> command to see the changes reflected in the current window.)</li><li>
<a id="pgfId-438544"></a>If you change the default value of a parameter with <em>storeDefault = yes,</em> changing the default value does not update the existing instance, because the value was saved as a property on each instance.</li><li>
<a id="pgfId-996959"></a>If you change a callback that sets the value of one parameter based on an equation involving another parameter, changing the default value does not update the existing instances. You must also trigger the callback again, for each instance.</li></ul><br />
<a id="pgfId-996883"></a>In the last two cases, you can update existing instances using the <em>Cadence Analog Design Environment &#8211; Design Variables &#8211; Update </em>command. This command updates the default values and triggers all of the callbacks of all of the instances in the current window. The <em>Update </em>command has the following limitations:<ul><li>
<a id="pgfId-438547"></a>The update works only on the open cell.</li><li>
<a id="pgfId-438548"></a>The update does not traverse the design hierarchy.</li><li>
<a id="pgfId-438549"></a>There is no guaranteed order of running the callbacks, so you need to make sure that your callbacks work well together.</li></ul></li></ul>











<h2>
<a id="pgfId-437156"></a><a id="20249"></a>Finishing the <a id="marker-437503"></a>NFET Example</h2>

<p>
<a id="pgfId-437782"></a>In the last part of the NFET example you can see visible changes in the cell layout and form displays as a result of changing the CDF data.</p>

<h3>
<a id="pgfId-437112"></a>Varying the Layout</h3>

<p>
<a id="pgfId-437661"></a>Once you enter all the CDF information for the NFET into the system, you can display the transistor layout. The Pcell layout (stored in view <em>layout</em>) might look as shown in the following figure:</p>

<div class="webflare-div-image">
<img src="images/pg187_chap9.gif" /></div>

<p>
<a id="pgfId-437114"></a>This is a Pcell with the following parameters:</p>
<table class="webflareTable" id="#id994755">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-994757"></a>width</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-994759"></a>float, defining the width of the gates</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-994761"></a>length</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-994763"></a>float, defining the length of the gates</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-994765"></a>bend</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-994767"></a>Boolean, to control conditional inclusion of shapes for bend</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-994820"></a>bendt</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-994822"></a>float, to help in stretching shapes correctly when bend occurs</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-994816"></a>diffD</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-994818"></a>Boolean, to control conditional inclusion of shapes for diffusion<br />drain contact versus metal drain contact</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-437121"></a>The NFET looks like the following with different parameter combinations:</p>

<p>
<a id="pgfId-994264"></a></p>
<div class="webflare-div-image">
<img width="671" height="638" src="images/chap9-3.gif" /></div>

<p>
<a id="pgfId-437124"></a>In addition, you need the fixed layout for the power applications. This might be stored under view <em>layout.pwr</em>, have a gate width of 880 micrometers and length of 12 micrometers, and look like this:</p>

<div class="webflare-div-image">
<img src="images/pg189_chap9.gif" /></div>
<h3>
<a id="pgfId-437684"></a><a id="marker-437683"></a>Changing Parameters</h3>

<p>
<a id="pgfId-993996"></a>Now try to <a id="marker-994038"></a>use the NFET in a design. </p>

<p>
<a id="pgfId-994289"></a></p>
<div class="webflare-div-image">
<img width="544" height="679" src="images/chap9-5.gif" /></div>

<p>
<a id="pgfId-994034"></a>When you first use the Add Instance form, some fields are dimmed.</p>
<p>
<a id="pgfId-994012"></a>The first time you open the Add Instance form for your component, it shows all default values. Some default values are not defined. At this point, you might want to go back to the Edit CDF form and add the appropriate default values.</p>
<p>
<a id="pgfId-437159"></a>Notice, however, that you cannot enter values in the fields with dim names. If you use the CDF description to set a parameter to be displayed, but not editable, the parameter field is not editable on the Add Instance form.</p>
<p>
<a id="pgfId-438189"></a>The type of <em>layout</em> is <em>cyclic,</em> as you specified. The width and length are prompted for only once, as a string with units of length.</p>
<p>
<a id="pgfId-437160"></a>As you place instances of the NFET, you never change the value for the bulk node connection. Therefore, you might use the Edit CDF form to move that parameter down in the list of parameters until it is below other parameters that you do change.</p>
<ol><li>
<a id="pgfId-437161"></a>Change the Type of Layout cyclic button. The Add Instance form updates as follows:<br />
<a id="pgfId-994311"></a><div class="webflare-div-image">
<img width="668" height="756" src="images/chap9-6.gif" /></div>
<a id="pgfId-437162"></a>You can see the form modify itself to show the new fields, indicating that the callbacks are working.<br />
<a id="pgfId-437163"></a>At this point you still cannot see if the Pcell parameters are being set properly. </li><li>
<a id="pgfId-437809"></a>Use the <em>Edit &#8211; Properties &#8211; Object</em> command on a few examples to verify the operation of the Pcell parameters in the CDF description.</li><li>
<a id="pgfId-437164"></a>Using the <a id="marker-437506"></a>Edit Object Properties form, create an instance with <em>width</em> set to <code>30u</code>, <em>length</em> set to <code>10u</code>, the default layout, and a drain diffusion pin. <br />
<a id="pgfId-437810"></a>The CDF Parameter fields in the Edit Object Properties form should look like this:<br />
<a id="pgfId-994341"></a><div class="webflare-div-image">
<img width="569" height="622" src="images/chap9-7.gif" /></div>
<a id="pgfId-437406"></a>These values indicate that the callbacks used to generate Pcell parameter values worked correctly. If you have a different result, check the callbacks in the CDF description.</li><li>
<a id="pgfId-437165"></a>Create an instance of the NFET with <em>width</em> set to <code>130u</code>, <em>length</em> set to <code>3u</code> (default), the default layout, and no drain diffusion pin (required). <br />
<a id="pgfId-437811"></a>The Edit Object Properties form should look like the following:<br />
<a id="pgfId-994355"></a><div class="webflare-div-image">
<img width="668" height="670" src="images/chap9-8.gif" /></div>
<a id="pgfId-437423"></a>Both of the length parameters are default values, so no property is saved.</li><li>
<a id="pgfId-437166"></a>Create an instance with<em> maskLayoutViewName </em>as <code>layout.pwr</code>.<br />
<a id="pgfId-437818"></a>You see the following:<br />
<a id="pgfId-994379"></a><div class="webflare-div-image">
<img width="606" height="619" src="images/chap9-9.gif" /></div>
<a id="pgfId-437167"></a>All the callbacks are triggered, as expected.</li></ol>





























<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap7.html" id="prev" title="Writing Callbacks">Writing Callbacks</a></em></b><b><em><a href="appA.html" id="nex" title="Advice and Warnings">Advice and Warnings</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;â € </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>