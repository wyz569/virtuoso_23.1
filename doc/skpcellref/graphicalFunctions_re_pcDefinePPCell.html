
<html><head><title>pcDefinePPCell</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="TopicTags" content="TRUE" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sumehta" />
<meta name="CreateDate" content="2023-09-14" />
<meta name="CreateTime" content="1694697832" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes SKILL functions used to create parameterized cells." />
<meta name="DocTitle" content="Virtuoso Parameterized Cell SKILL Reference" />
<meta name="DocType" content="SKILL Reference" />
<meta name="FileTitle" content="pcDefinePPCell" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="skpcellref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-09-14" />
<meta name="ModifiedTime" content="1694697832" />
<meta name="NextFile" content="graphicalFunctions_re_pcDefineRepeat.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="graphicalFunctions_re_pcDefinePCell.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Parameterized Cell SKILL Reference -- pcDefinePPCell" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="reference" />
<meta name="reference_type" content="api reference" />
<meta name="prod_feature" content="Parameterized Cells" />
<meta name="prod_subfeature" content="Graphical Pcells" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="skpcellrefIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="skpcellrefTOC.html">Contents</a></li><li><a class="prev" href="graphicalFunctions_re_pcDefinePCell.html" title="pcDefinePCell">pcDefinePCell</a></li><li style="float: right;"><a class="viewPrint" href="skpcellref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="graphicalFunctions_re_pcDefineRepeat.html" title="pcDefineRepeat">pcDefineRepeat</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Parameterized Cell SKILL Reference<br />Product Version IC23.1, August 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<a name="Filename:re_pcDefinePPCell" title="pcDefinePPCell"></a><h3>
<a name="pgfId-992917"></a>pc<a name="pcDefinePPCell"></a>DefinePPCell</h3>
<a name="pgfId-992920"></a><a name="marker-992918"></a><a name="marker-992919"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code>pcDefinePPCell</code>(
<code><em>l_cellIdentifier
l_overrideCodeParams
l_defaultCodeParams
ls_formalArgs
body_of_code
</em></code>) 
=&gt; <code><em>d_cellViewId </em></code>/<code><em> </em></code><code>nil</code></pre>
<h4>
<a name="pgfId-992922"></a>Description</h4>

<p>
<a name="pgfId-1009590"></a>Creates a parameterized Pcell master cellview (P2cell) that enables you to pass the SKILL definition for a Pcell, including a list of its arguments, similar to the <a href="graphicalFunctions_re_pcDefinePCell.html#13409">pcDefinePCell</a> function. This function also accepts a code argument declaration list and a code argument override list, where the code parameter can be used in the Pcell code body to create multiple Pcell super masters from a single Pcell code.

Within <code>pcDefinePPCell</code>, the override code parameter is always a simple variable, which receives the input provided by the caller of <code>pcDefinePPCell</code>. This will always be the use model of P2cell because there is always a driver function that calls it. The function should not be used as a top-level function (not inside a procedure) because that will lose the purpose of the new parameterization feature.</p>

<h4>
<a name="pgfId-992928"></a>Arguments</h4>
<table class="webflareTable" id="#id992929">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-992931"></a><span class="webflare-courier-new" style="white-space:pre"><em>l_cellIdentifier</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-992933"></a>A list that contains the library database ID, cell name, view name, and view type. View type is optional and defaults to <code>maskLayout</code>.<br />Valid view type values: <code>maskLayout</code>, <code>schematic</code>, <code>schematicSymbol</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-992935"></a><span class="webflare-courier-new" style="white-space:pre"><em>l_overrideCodeParams</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-992937"></a>A SKILL list in the DPL format. Each parameter within the DPL is represented by a pair of <span class="webflare-courier-new" style="white-space:pre"><em>s_codeParamName</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>g_codeParamValue</em></span>. Only the value can be a SKILL expression.</p>
<p>
<a name="pgfId-1020327"></a>Syntax:</p>
<p>
<a name="pgfId-1020328"></a><code>list( nil </code><span class="webflare-courier-new" style="white-space:pre"><em>S_codeParamName</em></span><code> </code><span class="webflare-courier-new" style="white-space:pre"><em>g_codeParamValue</em></span><code> ... )</code></p>
<p>
<a name="pgfId-1020329"></a>Example:</p>
<p>
<a name="pgfId-1020330"></a><code>list( nil &#39;param1 &quot;value1&quot; &#39;param2 t &#39;param3 width*3 )</code></p>

<ul><li>
<a name="pgfId-1020289"></a><span class="webflare-courier-new" style="white-space:pre"><em>S_codeParamName</em></span>: A symbol or a string of the name of code parameter. It needs to match a declared code parameter name. A warning is issued for a mismatched name and the default value is used instead.</li><li>
<a name="pgfId-1020304"></a><span class="webflare-courier-new" style="white-space:pre"><em>g_codeParamValue</em></span>: A SKILL expression that evaluates the given value to obtain the value of each code parameter. Within the <code>pcDefinePPCell</code> function, the override code argument is always a simple variable that receives the input provided by the caller of <code>pcDefinePPCell</code>.</li></ul>


<blockquote id="#id1020305">
<a name="pgfId-1020305"></a>The caller of <code>pcDefinePPCell</code> can construct the value of a code parameter using any method as long as the format of the result specified by the override code parameter is in the DPL format. This helps you to assign and update the values. It is expected this will be modified later to generate multiple Pcell super masters from one P2cell definition.</blockquote>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-992948"></a><span class="webflare-courier-new" style="white-space:pre"><em>l_defaultCodeParams</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1009204"></a>A list that contains one or many code parameter specification. Each code parameter specification is defined in the following format:</p>
<p>
<a name="pgfId-1009205"></a>(<span class="webflare-courier-new" style="white-space:pre"><em>S_codeParamName</em></span> [<span class="webflare-courier-new" style="white-space:pre"><em>S_codeParamType</em></span>] <span class="webflare-courier-new" style="white-space:pre"><em>g_codeParamValue</em></span>)</p>

<ul><li>
<a name="pgfId-1009206"></a><span class="webflare-courier-new" style="white-space:pre"><em>S_codeParamName</em></span>: A symbol or a string of the name of code parameter. It needs to match a declared code parameter name. A warning is issued for a mismatched name and the default value is used instead.</li><li>
<a name="pgfId-1019974"></a><span class="webflare-courier-new" style="white-space:pre"><em>S_codeParamType</em></span>: A string or a symbol defining the value type of the code parameter.</li></ul>


<blockquote id="#id1019966">
<a name="pgfId-1019966"></a>Valid values: <code>Boolean</code>, <code>int</code>, <code>float</code>, <code>string</code>, and <code>ilList</code>. It is optional to include the code parameter type except for Boolean. For Boolean code parameter, you must specify the data type to avoid ambiguity against the <code>ilList</code> type.</blockquote>

<ul><li>
<a name="pgfId-1020011"></a><span class="webflare-courier-new" style="white-space:pre"><em>g_codeParamValue</em></span>: A SKILL expression that evaluates the given value to obtain the value of each code parameter. Within the <code>pcDefinePPCell</code> function, the override code argument is always a simple variable that receives the input provided by the caller of <code>pcDefinePPCell</code>.</li></ul>

<blockquote id="#id1020003">
<a name="pgfId-1020003"></a>The caller of <code>pcDefinePPCell</code> can construct the value of a code parameter using any method as long as the format of the result specified by the override code parameter is in the DPL format. This helps you to assign and update the values. It is expected this will be modified later to generate multiple Pcell super masters from one P2cell definition.</blockquote>
<p>
<a name="pgfId-1019930"></a>The declared code parameter is in a simple list format. This format is consistent with the declaration of Pcell parameters used by <a href="graphicalFunctions_re_pcDefinePCell.html#13409">pcDefinePCell</a>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1020070"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1020091"></a>This declaration cannot contain another SKILL expression inside it. </p>

<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-1020092"></a>Like the override code parameter, the entire declaration itself can be defined outside <code>pcDefinePPCell</code>, but it hides the declaration from the Pcell code and is therefore not recommended.</div>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-992959"></a><span class="webflare-courier-new" style="white-space:pre"><em>ls_formalArgs</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1009248"></a>A list of parameters defining a Pcell parameter set. There are the following two ways to define the Pcell parameter set. </p>

<ul><li>
<a name="pgfId-1009392"></a>Define a Pcell parameter through an explicit list of parameters, same style as the <a href="graphicalFunctions_re_pcDefinePCell.html#13409">pcDefinePCell</a> function.</li><li>
<a name="pgfId-1019356"></a>Call a user-defined function, which returns a Pcell parameter set. When P2cell parser detects the Pcell parameters by calling a user-defined function, Parser executes the user function and pass the newly created super master ID as its argument.</li></ul>


</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-992966"></a><span class="webflare-courier-new" style="white-space:pre"><em>body_of_code</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1020123"></a>SKILL code for creating geometries and pins. You must provide code here. Enclose the code in a <code>let</code> or <code>prog</code> statement. If you use variables in the code, define them at the beginning of the <code>let</code> or <code>prog</code> statement. Using <code>let</code> gives faster performance than <code>prog</code>; <code>prog</code> allows multiple exits while <code>let</code> exits only at its end. Optionally, from within this code, you can call SKILL functions, application functions, and your own user-defined functions. </p>
<p>
<a name="pgfId-1020136"></a>Calls to functions from within the <span class="webflare-courier-new" style="white-space:pre"><em>body_of_code</em></span> section are part of the Pcell, but the functions themselves are <strong>not</strong> part of the Pcell. These functions must be available each time the Pcell is evaluated. If a called function is not available when a Pcell is evaluated, the Pcell fails. </p>
<p>
<a name="pgfId-1020345"></a>If you want the system to automatically load functions when it opens your library, include the functions in your <code>libInit.il</code> file. <strong>Do not</strong> load a file from within a Pcell. </p>
<p>
<a name="pgfId-1020236"></a>You can access the name and value of any code parameter using <code>pcGetCodeParamNames</code> and <code>pcGetCodeParamValue</code> functions.</p>
</td>
</tr>
</tbody></table>
<h4>
<a name="pgfId-992970"></a>Value Returned</h4>
<table class="webflareTable" id="#id1021491">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1021493"></a><span class="webflare-courier-new" style="white-space:pre"><em>d_cellViewId</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1021495"></a>The cellview ID of the parameterized super master if the Pcell is successfully compiled.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1021497"></a><code>nil</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1021499"></a>If the parameterized super master cellview is not created.</p>
</td>
</tr>
</tbody></table>
<h4>
<a name="pgfId-992973"></a>Examples</h4>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-992974"></a>procedure( createPmos(xVal)
&#160;&#160;&#160;&#160;let((libName cellName ppcDef overrideCodeParams )
&#160;&#160;&#160;&#160; ; Setup library and cell name, and the override code parameter <br />  ; values<br />  libName = &quot;PcellDemo&quot;<br />  cellName = &quot;pmos&quot;<br />  overrideCodeParams = list( nil <br />   &#39;layerName &quot;Via2&quot; &#39;rectWidth 3*xVal &#39;createGate t)<br />
&#160;&#160;&#160;&#160; ; Calls myMakeMos to create one Pcell super master<br />  myMakeMos( libName cellName &quot;layout&quot; &quot;maskLayout&quot; <br />   overrideCodeParams)<br /></pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-992975"></a>  ; Update the cell name and one of the override code parameter value<br />  cellName = &quot;pmos_ng&quot;<br />  overrideCodeParams-&gt;createGate = nil</pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-992976"></a></pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-992977"></a>  ; Calls myMakeMos to create another Pcell super master<br />  myMakeMos( libName cellName &quot;layout&quot; &quot;maskLayout&quot; <br />   overrideCodeParams)<br /> )<br />)</pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-992978"></a></pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-992979"></a>procedure( myMakeMos(libName cellName viewName viewType @optional
&#160;&#160;&#160;&#160; (overrideCPs nil))<br /> let((smId)<br />  ; Use pcDefinePPCell to create a Pcell that accepts code parameters<br />  smId = pcDefinePPCell(<br />   ; Define super master&#39;s identification<br />   list(ddGetObj(libName) cellName viewName viewType )<br /></pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-992980"></a>   ; Define variable to accept override code parameters <br />   overrideCPs<br />
&#160;&#160;&#160;&#160;  ; Define code parameters <br />   ( ( layerName string &quot;Metal&quot;)<br />    ( rectWidth float 1.0  )<br />    ( createGate boolean nil )<br />   )<br /></pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-992981"></a>   ; Define Pcell parameters<br />   ( (dd1 &quot;none&quot; )<br />    (sd1 &quot;none&quot; )<br />    (w      5.0)<br />    (l      1.0)<br />    (fingers 1 )<br />   )<br /></pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-1019422"></a>   ; Define Pcell code<br />   let( (cv rect rectW createGate)<br />    cv = pcCellView<br />    sd1 = cv~&gt;parameters~&gt;sd1<br />    dd1 = cv~&gt;parameters~&gt;dd1<br />    w = aelNumber(cv~&gt;parameters~&gt;w)<br />    l = aelNumber(cv~&gt;parameters~&gt;l)<br />    fingers = cv~&gt;parameters~&gt;fingers<br />    <br />    ; Leverage code parameter to create different<br />    ; contents for a Pcell super master<br />    createGate = pcGetCodeParamValue(cv &quot;createGate&quot;)<br />    when( createGate<br />     layerName = pcGetCodeParamValue(cv &quot;layerName&quot;)<br />     rectW = pcGetCodeParamValue(cv &quot;rectWidth&quot;)<br />     rect = dbCreateRect(cv <br />      list(layerName &quot;drawing&quot;) <br />      list( 2:2 3:2+round(rectW))))<br />   )<br />  )<br />  smId<br /> )<br />)</pre>
<p>
<a name="pgfId-992983"></a>This example develops multiple Pcell super masters by using the P2cell method.</p>
<h4><em>
<a name="pgfId-992864"></a>Related Topics</em></h4>
<p>
<a name="pgfId-1033992"></a><h-hot><a actuate="user" class="URL" href="../pcellref/safetyrules.html" show="replace" xml:link="simple">Safety Rules for Creating SKILL Pcells</a></h-hot></p>
<p>
<a name="pgfId-1034008"></a><a href="graphicalFunctions_re_pcGetCodeParamNames.html#75494">pcGetCodeParamNames</a> </p>
<p>
<a name="pgfId-1034029"></a><a href="graphicalFunctions_re_pcGetCodeParamValue.html#45761">pcGetCodeParamValue</a> </p>
<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=pcDefineRepeat

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="graphicalFunctions_re_pcDefinePCell.html" id="prev" title="pcDefinePCell">pcDefinePCell</a></em></b><b><em><a href="graphicalFunctions_re_pcDefineRepeat.html" id="nex" title="pcDefineRepeat">pcDefineRepeat</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;â € </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>