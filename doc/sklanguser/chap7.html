
<html><head><title>I/O and File Handling</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="parula" />
<meta name="CreateDate" content="2023-08-23" />
<meta name="CreateTime" content="1692797223" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the SKILL language to new users and helps them understand advanced topics, encourages sound SKILL programming methods, and introduces the SKILL++ language" />
<meta name="DocTitle" content="Cadence SKILL Language User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="I/O and File Handling" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-4.0.0" />
<meta name="Keyword" content="sklanguser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-08-23" />
<meta name="ModifiedTime" content="1692797223" />
<meta name="NextFile" content="chap8.html" />
<meta name="Group" content="SKILL Language" />
<meta name="Platform" content="Cadence Shared Tools" />
<meta name="PrevFile" content="chap6.html" />
<meta name="c_product" content="Virtuoso Layout Suite,Virtuoso Schematic Editor,Virtuoso Analog Design Environment" />
<meta name="Product" content="SKILL" />
<meta name="ProductFamily" content="SKILL" />
<meta name="ProductVersion" content="IC23.1" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Cadence SKILL Language User Guide -- I/O and File Handling" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="IC23.1" />
<meta name="SpaceKey" content="sklanguserIC231" />
<meta name="webflare-version" content="2.5" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" />


  <script>/*<![CDATA[*/
 document.addEventListener("DOMContentLoaded", function(event) {  document.querySelectorAll("img").forEach((img, index) => {
if (img.hasAttribute("usemap")){return;}else{img.classList.add("cursorclass");} img.addEventListener("click", (e) => {if(img.hasAttribute("usemap")){            img.setAttribute("style","cursor:none;");return;};document.querySelector("#cad_image_modal").classList.add("opac");document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0;margin: auto;max-height:95%;"  src="${e.target.src}">`;});});});
/*]]>*/</script> 




 <style>/*<![CDATA[*/
.cursorclass{cursor:pointer;}#cad_image_modal{position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;}#cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;}#cad_image_modal span{position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;}
/*]]>*/</style> 
</head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="sklanguserTOC.html">Contents</a></li><li><a class="prev" href="chap6.html" title="Control Structures">Control Structures</a></li><li style="float: right;"><a class="viewPrint" href="sklanguser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap8.html" title="Advanced List Operations">Advanced List Operations</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Cadence SKILL Language User Guide<br />Product Version IC23.1, September 2023</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>7
<a id="pgfId-1005655"></a></h1>
<h1>
<a id="pgfId-1008199"></a><hr />
<a id="39201"></a>I/O and File Handling<hr />
</h1>

<p>
<a id="pgfId-1009529"></a>You can read about I/O and file handling topics in the following sections:</p>
<ul><li>
<a id="pgfId-1009613"></a><a href="chap7.html#28861">File System Interface</a>  </li><li>
<a id="pgfId-1009631"></a><a href="chap7.html#42371">Ports</a>  </li><li>
<a id="pgfId-1009637"></a><a href="chap7.html#22368">Output</a>  </li><li>
<a id="pgfId-1009645"></a><a href="chap7.html#20661">Input</a>  </li><li>
<a id="pgfId-1009655"></a><a href="chap7.html#16311">System-Related Functions</a>  </li></ul>





<h2>
<a id="pgfId-1008204"></a><a id="28861"></a>File System Interface</h2>

<p>
<a id="pgfId-1008206"></a>All input and output in the Cadence&#174; SKILL language is defined with respect to the <a id="marker-1008205"></a>UNIX file system. Writing I/O statements in SKILL requires an understanding of files, directories, and paths.</p>

<h3>
<a id="pgfId-1008207"></a>Files</h3>

<p>
<a id="pgfId-1008208"></a>A file contains data, usually organized in multiple records, and has several attributes such as name, the date the file was created, the last time it was accessed, access permissions, and so on. A <a id="marker-1008209"></a>device is a file with special attributes.</p>

<h3>
<a id="pgfId-1008210"></a>Directories</h3>

<p>
<a id="pgfId-1008212"></a>A <a id="marker-1008211"></a>directory has a name, just like a file, but it contains a list of other files. Directories can be nested to as many levels as desired. A directory allows related files to be grouped together. Because of the thousands of files that can exist on a single disk, using directories helps to avoid chaos. Most network-wide file systems are dependent on directories. </p>

<h3>
<a id="pgfId-1008214"></a><a id="14636"></a>Directory Paths</h3>

<p>
<a id="pgfId-1008215"></a>Often, there are several directories you want to search in a particular order by specifying a set of <a id="marker-1008216"></a>directory paths. You can specify a file name in an absolute sense or in a relative sense. </p>
<p>
<a id="pgfId-1008217"></a>The following description uses &#8216;path&#8217; as a generic term where either a file name or a directory name can be used. However, because a directory under UNIX is just a special kind of file, file name is often used as a synonym for path.</p>

<h4>
<a id="pgfId-1008219"></a>Absolute <a id="marker-1008218"></a>Paths</h4>

<p>
<a id="pgfId-1008220"></a>You can specify the path with a slash character (<code>/</code>). When used as the first character of a name, it represents the system root directory. Intermediate levels of directories can use the slash character again as a separator.</p>

<h4>
<a id="pgfId-1008221"></a>Relative Paths</h4>

<p>
<a id="pgfId-1008222"></a>Any path that does not begin with a slash is a relative name. </p>
<p>
<a id="pgfId-1008223"></a>If the path begins with a tilde followed by a slash (<code>~/</code>), the search path begins in your home directory. </p>
<p>
<a id="pgfId-1008224"></a>If the tilde is followed by a name, the name is interpreted as a user name. That is, <code>~jones/file1</code> specifies a file named <code>file1</code> in jones&#8217; home directory. </p>
<p>
<a id="pgfId-1008225"></a>If the path begins with a period and a slash (<code>./</code>), the search begins with the current working directory. </p>
<p>
<a id="pgfId-1008226"></a>If the file name begins with two periods and a slash (<code>../</code>), the search begins with the parent of the current working directory.</p>
<p>
<a id="pgfId-1008227"></a>If you are using a function that refers to the SKILL path, refer to the following section.</p>

<h3>
<a id="pgfId-1008228"></a>The SKILL Path</h3>

<p>
<a id="pgfId-1008229"></a>SKILL provides a flexible mechanism for using relative paths. An internal list of paths, referred to as the <code>SKILL path</code>, is used in many file-related functions. </p>

<h4>
<a id="pgfId-1008230"></a>Importance of the First Path Character</h4>

<p>
<a id="pgfId-1008231"></a>When a relative path that does not begin with <code>~</code> or <code>./</code> is given to a function, the paths in the SKILL path are used as directory names and prepended to the given path (with a <code>/</code> separator if needed) to form possible paths. The <code>setSkillPath</code> and <code>getSkillPath</code> functions access and change this internal SKILL path setup.</p>

<h4>
<a id="pgfId-1008232"></a>Path Order when the Same File Name Exists in Multiple Directories</h4>

<p>
<a id="pgfId-1008234"></a>The order of the paths on the SKILL path i<a id="marker-1008233"></a>s important when the same file name is in multiple directories. If a file is opened for input or queried for status, all readable directories in the SKILL path are checked, in order, for the given file name. The first one found is taken to be the intended path. </p>

<h4>
<a id="pgfId-1008235"></a>Path Order when a File is Updated or Written for the First Time</h4>

<p>
<a id="pgfId-1008236"></a>The order of the paths is also important when a file is updated or written for the first time. If you open an output file, all directory paths in the SKILL path are checked, in the order specified, for that file name. If found, the system overwrites the first updateable file in the list. If no updateable file is found, it places a new file of that name in the first writable directory.</p>

<h4>
<a id="pgfId-1008237"></a>Know Your SKILL Path</h4>

<p>
<a id="pgfId-1008238"></a>Having an implicit list of search paths provides a powerful shortcut in many situations, but it can also be a source of possible confusion. When in doubt, double check the current setup of your SKILL path or set it to <code>nil</code>.</p>
<p>
<a id="pgfId-1008239"></a>When you start your system, the SKILL path might be set to a default value. You can use the <code>setSkillPath </code>function to make sure it is set up correctly.</p>

<h3>
<a id="pgfId-1008240"></a>Working with the SKILL Path</h3>
<h4>
<a id="pgfId-1008242"></a>Setting the Internal SKILL Path (<a id="marker-1008241"></a>setSkillPath) </h4>

<p>
<a id="pgfId-1008243"></a><code>setSkillPath</code> sets the internal SKILL path. You can specify the directory paths either as a string, where each alternate path is separated by spaces, or as a list of strings. The system tests the validity of each directory path as it puts the input into standard form. </p>
<ul><li>
<a id="pgfId-1008244"></a>If all directory paths exist, it returns <code>nil</code> </li><li>
<a id="pgfId-1008245"></a>If any path does not exist, it returns a list in which each element is an invalid path </li></ul>

<p>
<a id="pgfId-1008246"></a>The paths on the SKILL path are always searched for in the path order you specify. Even if a path does not exist (and hence appears in the returned list), it remains on the new SKILL path. The use of the SKILL path in other file-related functions can be effectively disabled by calling setSkillPath with nil as the argument.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008247"></a>setSkillPath(&#39;(&quot;.&quot; &quot;~&quot; &quot;~/cpu/test1&quot;))<br />=&gt; nil                       ; If &quot;~/cpu/test1&quot; exists.<br />=&gt; (&quot;~/cpu/test1&quot;)&#160;&#160;         ; If &quot;~/cpu/test1&quot; does not exist.</pre>

<p>
<a id="pgfId-1008248"></a>The same task can be done with the following call that puts all paths in one string.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008249"></a>setSkillPath(&quot;. ~ ~/cpu/test1&quot;)</pre>
<h4>
<a id="pgfId-1008251"></a>Finding the Current SKILL Path (<a id="marker-1008250"></a>getSkillPath)</h4>

<p>
<a id="pgfId-1008252"></a><code>getSkillPath</code> returns directory paths from the current SKILL path setting. The result is a list where each element is a path component as specified by <code>setSkillPath</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008253"></a>setSkillPath(&#39;(&quot;.&quot; &quot;~&quot; &quot;~/cpu/test1&quot;))=&gt; nil<br />getSkillPath()=&gt; (&quot;.&quot; &quot;~&quot; &quot;~/cpu/test1&quot;)</pre>

<p>
<a id="pgfId-1008254"></a>The example below shows how to add a directory to the beginning of your search path (assuming a directory &#8220;~/lib&#8221;).</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008255"></a>setSkillPath(cons(&quot;~/lib&quot; getSkillPath()))=&gt; nil<br />getSkillPath()=&gt; (&quot;~/lib&quot; &quot;.&quot; &quot;~&quot; &quot;~/cpu/test1&quot;)</pre>
<h3>
<a id="pgfId-1008256"></a>Working with the Installation Path</h3>
<h4>
<a id="pgfId-1008258"></a>Finding the Installation Path (<a id="marker-1008257"></a>getInstallPath)</h4>

<p>
<a id="pgfId-1008259"></a><code>getInstallPath</code> returns the system installation path (that is, the root directory where the Cadence products are installed in your file system) as a list of a single string, where</p>
<ul><li>
<a id="pgfId-1008260"></a>The path is always returned in absolute format </li><li>
<a id="pgfId-1008261"></a>The result is always a list of one string <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1008262">
<a id="pgfId-1008262"></a>getInstallPath( ) =&gt; (&quot;/usr5/cds/4.2&quot;)</pre></li></ul>



<h4>
<a id="pgfId-1008264"></a>Attaching the Installation Path to a Given Path (<a id="marker-1008263"></a>prependInstallPath)</h4>

<p>
<a id="pgfId-1008265"></a><code>prependInstallPath</code> prepends the Cadence installation path to the given path (possibly adding a slash (/) separator if needed) and returns the resulting path as a string. The typical use of this function is to compute one member of a list passed to setSkillPath.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008266"></a>getInstallPath()<br />=&gt; (&quot;/usr5/cds/4.2&quot;)</pre>

<p>
<a id="pgfId-1008267"></a>Assume this is your install path.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008268"></a>prependInstallPath( &quot;etc/context&quot; )<br />=&gt; &quot;/usr5/cds/4.2/etc/context&quot; </pre>

<p>
<a id="pgfId-1008269"></a>A slash (/) is added.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008270"></a>prependInstallPath( &quot;/bin&quot; )<br />=&gt; &quot;/usr5/cds/4.2/bin&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008271"></a>setSkillPath( list(&quot;.&quot; prependInstallPath(&quot;bin&quot;)<br />                 prependInstallPath(&quot;etc/context&quot;)) )<br />=&gt; nil</pre>
<h4>
<a id="pgfId-1008273"></a>Finding the Root of the Hierarchy (<a id="marker-1008272"></a>cdsGetInstPath)</h4>

<p>
<a id="pgfId-1008274"></a><code>getInstallPath</code> returns the root of the <code>dfII</code> hierarchy whereas <code>cdsGetInstPath</code> returns the root of the hierarchy. <code>cdsGetInstPath</code> is more general and is meant to be used by all <code>dfII</code> and non-<code>dfII</code> applications. For example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008275"></a>getInstallPath() =&gt; (&quot;/usr/mnt/hamilton/9304/tools/dfII&quot;)<br />cdsGetInstPath() =&gt; &quot;/usr/mnt/hamilton/9304&quot;</pre>
<h3>
<a id="pgfId-1008276"></a>Checking File Status</h3>
<h4>
<a id="pgfId-1008279"></a>Checking if a File Exists (<a id="marker-1008277"></a>isFile, <a id="marker-1008278"></a>isFileName) </h4>

<p>
<a id="pgfId-1008280"></a><code>isFileName</code> checks if a file exists. The file name can be specified with either an absolute path or a relative path. In the latter case, the current SKILL path is used if it&#8217;s not <code>nil</code>. Only the presence or absence of the name is checked. If found, the name can belong to either a file or a directory. <code>isFileName</code> differs from <code>isFile</code> in this regard.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008281"></a>isFileName(&quot;myLib&quot;)=&gt; t </pre>

<p>
<a id="pgfId-1008282"></a>A directory is just a special kind of file. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008283"></a>isFileName(&quot;triadc&quot;)=&gt; t<br />isFileName(&quot;triad1&quot;)=&gt; nil </pre>

<p>
<a id="pgfId-1008284"></a>Result if <code>triad1</code> is not in the current working directory.</p>
<p>
<a id="pgfId-1008285"></a><code>isFile</code> checks if a file exists. <code>isFile</code> is identical to <code>isFileName</code>, except that directories are not viewed as (regular) files. Uses the current SKILL path for relative paths.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008286"></a>isFile( &quot;triadc&quot;)=&gt; t</pre>
<h4>
<a id="pgfId-1008288"></a>Checking if a Path Exists and if it is the Name of a Directory (<a id="marker-1008287"></a>isDir) </h4>

<p>
<a id="pgfId-1008289"></a><code>isDir</code> checks if a path exists and if it is the name of a directory. When the path is a relative path, the current SKILL path is used if it&#8217;s non-<code>nil</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008290"></a>isDir(&quot;myLib&quot;)       =&gt; t<br />isDir(&quot;triadc&quot;)&#160;&#160;   =&gt; nil</pre>

<p>
<a id="pgfId-1008291"></a>Assumes <code>myLib</code> is a directory and <code>triadc</code> is a file under the current working directory and the SKILL path is <code>nil</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008292"></a>isDir(&quot;test&quot;)=&gt; nil</pre>

<p>
<a id="pgfId-1008293"></a>Result if <code>test</code> does not exist.</p>

<h4>
<a id="pgfId-1008295"></a>Checking if You Have Permission to Read a File or List a Directory (<a id="marker-1008294"></a>isReadable)</h4>

<p>
<a id="pgfId-1008296"></a><code>isReadable</code> checks if you have permission to read the file or list the directory you specify. Uses the current SKILL path for relative paths.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008297"></a>isReadable(&quot;./&quot;) =&gt; t </pre>

<p>
<a id="pgfId-1008298"></a>Result if current working directory is readable.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008299"></a>isReadable(&quot;~/myLib&quot;)=&gt; nil </pre>

<p>
<a id="pgfId-1008300"></a>Result if <code>~/myLib</code> is not readable or does not exist.</p>

<h4>
<a id="pgfId-1008302"></a>Checking for Permission to Write a File or Update a Directory (<a id="marker-1008301"></a>isWritable) </h4>

<p>
<a id="pgfId-1008303"></a><code>isWritable</code> checks if you have permission to write a file or update a directory that you specify. It uses the current SKILL path for relative paths.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008304"></a>isWritable(&quot;/tmp&quot;)                           =&gt; t <br />isWritable(&quot;~/test/out.1&quot;)&#160;&#160;      =&gt; nil </pre>

<p>
<a id="pgfId-1008305"></a>Result if <code>out.1</code> does not exist or there is no write permission to it.</p>

<h4>
<a id="pgfId-1008307"></a>Checking for Permission to Execute a File or Search a Directory (<a id="marker-1008306"></a>isExecutable) </h4>

<p>
<a id="pgfId-1008308"></a><code>isExecutable</code> checks if you have permission to execute a file or search a directory. A directory is executable if it allows you to name that directory as part of your UNIX path in searching files. It uses the current SKILL path for relative paths.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008309"></a>isExecutable(&quot;/bin/ls&quot;)               =&gt; t <br />isExecutable(&quot;/usr/tmp&quot;)             =&gt; t <br />isExecutable(&quot;attachFiles&quot;)&#160;&#160;    =&gt; nil </pre>

<p>
<a id="pgfId-1008310"></a>Result if <code>attachFiles</code> does not exist or is not executable.</p>

<h4>
<a id="pgfId-1008312"></a>Determining the Number of Bytes in a File (<a id="marker-1008311"></a>fileLength)</h4>

<p>
<a id="pgfId-1008313"></a><code>fileLength</code> determines the number of bytes in a file. A directory is viewed just as a file in this case. <code>fileLength</code> uses the current SKILL path if a relative path is given.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008314"></a>fileLength(&quot;/tmp&quot;)&#160;&#160;                            =&gt; 1024 </pre>

<p>
<a id="pgfId-1008315"></a>Return value is system-dependent.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008316"></a>fileLength(&quot;~/test/out.1&quot;)&#160;&#160;       =&gt; 32157 </pre>

<p>
<a id="pgfId-1008317"></a>This examples assumes the file exists. If the file does not exist, you get an error message, such as</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008318"></a>*Error* fileLength: no such file or directory - &quot;~/test/out.1&quot;</pre>
<h4>
<a id="pgfId-1008320"></a>Getting Information About Open Files (<a id="marker-1008319"></a>numOpenFiles) </h4>

<p>
<a id="pgfId-1008321"></a><code>numOpenFiles</code> returns the number of files that are open and the maximum number of files that a process can open. The numbers are returned as a two-element list.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008322"></a>numOpenFiles()&#160;&#160;                                      =&gt; (6 64)</pre>

<p>
<a id="pgfId-1008323"></a>Result is system-dependent.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008324"></a>f = infile(&quot;/dev/null&quot;)               =&gt; port:&quot;/dev/null&quot;<br />numOpenFiles()&#160;&#160;                                      =&gt; (7 64)</pre>

<p>
<a id="pgfId-1008325"></a>One more file is open now.</p>

<h4>
<a id="pgfId-1008328"></a>Working with File Offsets (<a id="marker-1008326"></a>fileTell, <a id="marker-1008327"></a>fileSeek)</h4>

<p>
<a id="pgfId-1008329"></a><code>fileTell</code> returns the current offset (from the beginning of the file) in bytes for the file opened on a port.</p>
<p>
<a id="pgfId-1011032"></a><code>fileSeek</code> sets the position for the next operation to perform on the file opened on a port. The position is specified in bytes. <code>fileSeek</code> takes three arguments. The first two are for port and for offset designated in number of bytes to move forward (or backward with a negative argument). The valid values for the third argument are</p>
<p>
<a id="pgfId-1011033"></a>0  Offset from the beginning of the file<br />1  Offset from current position of file pointer<br />2&#160;&#160;Offset from the end of the file.</p>
<p>
<a id="pgfId-1009606"></a>Let the file <code>test.data</code> contain the single line of text:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008333"></a>0123456789 test xyz</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008334"></a>p = infile(&quot;test.data&quot;)  =&gt; port:&quot;test.data&quot;<br />fileTell(p)              =&gt; 0<br />for(i 1 10 getc(p))      =&gt; t     Skip first 10 characters<br />fileTell(p)              =&gt; 10<br />
fscanf(p &quot;%s&quot; s)&#160;&#160;       =&gt; 1    s = &quot;test&quot; now<br />fileTell(p)&#160;&#160;            =&gt; 15</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008335"></a>fileSeek(p 0 0)          =&gt; t<br />fscanf(p &quot;%d&quot; x)         =&gt; 1    x = 123456789 now<br />
fileSeek(p 6 1)&#160;&#160;        =&gt; t<br />fscanf(p &quot;%s&quot; s)&#160;&#160;       =&gt; 1     s = &quot;xyz&quot; now</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008336"></a>fileSeek(p -12 2)        =&gt; t<br />fscanf(p &quot;%d&quot; x)&#160;&#160;       =&gt; 1     x = 89 now</pre>
<h3>
<a id="pgfId-1008337"></a>Working with Directories</h3>
<h4>
<a id="pgfId-1008339"></a>Creating a Directory (<a id="marker-1008338"></a>createDir)</h4>

<p>
<a id="pgfId-1008340"></a><code>createDir</code> creates a directory. The directory name can be specified with either an absolute or relative path; the SKILL path is used in the latter case. You get an error message if the directory cannot be created because you do not have permission to update the parent directory or a parent directory does not exist.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008341"></a>createDir(&quot;/usr/tmp/test&quot;)        =&gt; t<br />createDir(&quot;/usr/tmp/test&quot;)&#160;&#160;      =&gt; nil</pre>

<p>
<a id="pgfId-1008342"></a>Directory already exists.</p>

<h4>
<a id="pgfId-1013643"></a>Creating Parent Directories (<a id="marker-1013642"></a>createDirHier)</h4>

<p>
<a id="pgfId-1013644"></a><code>CreateDirHier</code> creates all directories specified in the given SKILL path that do not already exist. The directory names in the given SKILL path can be specified with either absolute or relative; the SKILL path is used in the latter case. A path that is anchored to the current directory, for example, ./, ../, or ../../.., etc., is not considered as a relative path. </p>
<p>
<a id="pgfId-1013645"></a>The permissions associated with new directories are subject to the file creation mask on systems supporting that concept. If the directory with the specified name already exists, nil is returned.</p>
<p>
<a id="pgfId-1013634"></a></p>

<h4>
<a id="pgfId-1008345"></a>Deleting a <a id="marker-1008343"></a>Directory (<a id="marker-1008344"></a>deleteDir) </h4>

<p>
<a id="pgfId-1008346"></a><code>deleteDir</code> deletes a directory. The directory name can be specified with either an absolute or relative path; the SKILL path is used in the latter case. You get an error message if you do not have permission to delete a directory or the directory you want to delete is not empty.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008347"></a>createDir(&quot;/usr/tmp/test&quot;)=&gt; t<br />deleteDir(&quot;/usr/tmp/test&quot;)=&gt; t<br />deleteDir(&quot;/usr/bin&quot;)</pre>

<p>
<a id="pgfId-1008348"></a>If you do not have permission to delete <code>/bin</code>, you get an error message about permission violation. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008349"></a>deleteDir(&quot;~&quot;) </pre>

<p>
<a id="pgfId-1008350"></a>Assuming there are some files in ~, you get an error message that the directory is not empty.</p>

<h4>
<a id="pgfId-1008353"></a>D<a id="marker-1008351"></a>eleting a File (<a id="marker-1008352"></a>deleteFile)</h4>

<p>
<a id="pgfId-1008354"></a><code>deleteFile</code> deletes a file. The file name can be specified with either an absolute or relative path; the SKILL path is used in the latter case. If a symbolic link is passed in as the argument, it is the link itself, not the file or directory referenced by the link, that gets removed.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008355"></a>deleteFile(&quot;~/test/out.1&quot;) =&gt; t </pre>

<p>
<a id="pgfId-1008356"></a>If the file exists and is deleted.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008357"></a>deleteFile(&quot;~/test/out.2&quot;)=&gt; nil </pre>

<p>
<a id="pgfId-1008358"></a>If the file does not exist.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008359"></a>deleteFile(&quot;/bin/ls&quot;) </pre>

<p>
<a id="pgfId-1008360"></a>If you do not have write permission for <code>/bin</code>, signals an error about permission violation.</p>

<h4>
<a id="pgfId-1008362"></a>Creating a Unique File Name (<a id="marker-1008361"></a>makeTempFileName)</h4>

<p>
<a id="pgfId-1008363"></a><code>makeTempFileName</code> appends a string suffix to the last component of a path template such that the resultant composite string does not duplicate any existing file name. (That is, it checks that the file does not exist; the SKILL path is not used in this checking.)</p>
<p>
<a id="pgfId-1008364"></a>Successive calls to <code>makeTempFileName</code> return different results only if the first name returned is used to create a file in the same directory before a second call is made.</p>
<ul><li>
<a id="pgfId-1008365"></a>The last component of the resultant path is guaranteed to be no more than 14 characters. The example below requests a &#8220;file&#8221; with 15 characters <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1008366">
<a id="pgfId-1008366"></a>makeTempFileName(&quot;/tmp/123456789123456&quot;)
=&gt; &quot;/tmp/12345678a08717&quot;</pre></li><li>
<a id="pgfId-1008367"></a>If the original template has a long last component, it is truncated from the end if needed <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1008368">
<a id="pgfId-1008368"></a>makeTempFileName(&quot;/tmp/123456789.123456&quot;)
=&gt; &quot;/tmp/12345678a08717&quot;</pre></li><li>
<a id="pgfId-1008369"></a>Any trailing Xs are removed from the template before the new string suffix is appended </li></ul>








<p>
<a id="pgfId-1008370"></a>You should follow the convention of placing temporary files in the <code>/tmp</code> directory on your system.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008371"></a>d = makeTempFileName(&quot;/tmp/testXXXX&quot;) =&gt; &quot;/tmp/testa00324&quot;</pre>

<p>
<a id="pgfId-1008372"></a>Trailing Xs are removed.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008373"></a>createDir(d)&#160;&#160;                                                                 =&gt; t</pre>

<p>
<a id="pgfId-1008374"></a>The name is used this time.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008375"></a>makeTempFileName(&quot;/tmp/test&quot;)&#160;&#160;                    =&gt; &quot;/tmp/testb00324&quot; </pre>

<p>
<a id="pgfId-1008376"></a>A new name is returned this time.</p>

<h4>
<a id="pgfId-1008378"></a>Listing the Names of All Files and Directories (<a id="marker-1008377"></a>getDirFiles) </h4>

<p>
<a id="pgfId-1008379"></a><code>getDirFiles</code> lists the names of all files and directories (including . and ..) in a directory. Uses the current SKILL path for relative paths.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008380"></a>getDirFiles(car(getInstallPath())) =&gt;<br />(&quot;.&quot; &quot;..&quot; &quot;bin&quot; &quot;cdsuser&quot; &quot;etc&quot; &quot;group&quot; &quot;include&quot; &quot;lib&quot; &quot;pvt&quot;<br />&quot;samples&quot; &quot;share&quot; &quot;test&quot; &quot;tools&quot; &quot;man&quot; &quot;local&quot; )</pre>
<h4>
<a id="pgfId-1008382"></a>Expanding the Name of a File to its Full Path (<a id="marker-1008381"></a>simplifyFilename) </h4>

<p>
<a id="pgfId-1010876"></a><code>simplifyFilename</code> returns the fully expanded name of a file. Tilde expansion is performed, ./ and ../ are compressed, and redundant slashes are removed. Symbolic links are also resolved by default, unless&#160;&#160;the second (optional) argument <span class="webflare-courier-new" style="white-space:pre"><em>g_dontResolveLinks</em></span> is specified to non-nil. If the file you supply is not absolute, the current working directory is prefixed to the returned file name.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008384"></a>simplifyFilename(&quot;~/test&quot;) =&gt; &quot;/usr/mnt/user/test&quot;</pre>

<p>
<a id="pgfId-1008385"></a>Returns the fully expanded name of <code>test</code>, assuming the user&#8217;s home directory is <code>/usr/mnt/user.</code></p>

<h4>
<a id="pgfId-1008387"></a>Getting the Current Working Directory (<a id="marker-1008386"></a>getWorkingDir)</h4>

<p>
<a id="pgfId-1008388"></a><code>getWorkingDir</code> returns the current working directory as a string. The result is put into a &quot;~/prefixed&quot; form if possible by testing for commonality with the current user&#8217;s home directory. For example, <code>~/test</code> is returned in preference to <code>/usr/mnt/user1/test</code>, assuming that the home directory for <code>user1</code> is <code>/usr/mnt/user1</code> and the current working directory is <code>/usr1/mnt/user1/test</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008389"></a>getWorkingDir() =&gt; &quot;~/project/cpu/layout&quot;</pre>
<h4>
<a id="pgfId-1008391"></a>Changing the Current Working Directory (<a id="marker-1008390"></a>changeWorkingDir)</h4>

<p>
<a id="pgfId-1008392"></a>Changes the working directory to the name you supply. The name can be specified with either a relative or absolute path. If you supply a relative path, the <code>cdpath</code> shell variable is used to search for the directory, not the SKILL path.</p>
<p>
<a id="pgfId-1008393"></a>Different error messages are output if the operation fails because the directory does not exist or you do not have search (execute) permission.</p>

<div class="webflare-information-macro webflare-macro-warning">
<a id="pgfId-1008394"></a>
Use this function with care: if &#8220;.&#8221; is either part of the SKILL path or the libraryPath, changing the working directory can affect the visibility of SKILL files or design data.</div>

<p>
<a id="pgfId-1008395"></a>Assume there is a directory <code>/usr5/design/cpu</code> with proper permission and there is no <code>test</code> directory under <code>/usr5/design/cpu</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008396"></a>changeWorkingDir( &quot;/usr5/design/cpu&quot;) =&gt; t<br />changeWorkingDir( &quot;test&quot;)</pre>

<p>
<a id="pgfId-1008397"></a>Signals an error that no such directory exits.</p>

<h2>
<a id="pgfId-1008398"></a><a id="42371"></a>Ports</h2>

<p>
<a id="pgfId-1008399"></a>All input and output in SKILL goes through a data type called a port. A port can be opened either for reading (an input port) or writing (an output port). Ports are analogous to FILE* variables used by the <code>stdio</code> library in C. Most implementations of the UNIX operating system impose a strict limit (typically between 30 and 64) on the number of files that can be open at any time. </p>
<p>
<a id="pgfId-1008400"></a>Your application typically needs to use some of these scarce file descriptors, leaving you with only a few free ports with which to work. You should therefore always close ports that are no longer in use and avoid using an excessive number of ports; you might otherwise run out of ports when your code is moved to a different UNIX machine.</p>

<h3>
<a id="pgfId-1008402"></a><a id="marker-1008401"></a>Predefined Ports</h3>

<p>
<a id="pgfId-1008403"></a>Most I/O functions in SKILL accept a port as an optional argument. If a port is not specified, the <code>piport</code> and <code>poport</code> are used as default ports for input and output respectively. The table below lists the names and the use of the input/output ports predefined in SKILL. </p>

<div class="webflare-information-macro webflare-macro-warning">
<a id="pgfId-1008404"></a>
You can redefine the default values, if necessary, but many internal SKILL functions are hard wired to use particular ports and you should be careful not to assign any of them an illegal value.</div>

<p>
<a id="pgfId-1008405"></a>The <code>stdin</code>, <code>stdout</code>, and <code>stderr</code> ports are also predefined. These ports correspond to the standard input, standard output, and standard error streams available to every UNIX program.</p>

<p>
<a id="pgfId-1010071"></a></p>
<table class="webflareTable" id="#id1010075">
<caption style="text-align:left;"><p>
</p><div class="ft-figtabl-title">
<a id="pgfId-1010077"></a><a id="ioports"></a>Predefined Input/Output Ports</div></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010081">
<a id="pgfId-1010081"></a>Name</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010083">
<a id="pgfId-1010083"></a>Usage </span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010085"></a>piport</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010087"></a>Standard input port, analogous to and initialized to stdin in C </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010089"></a>poport</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010091"></a>Standard output port, analogous to and initialized to stdout in C</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010093"></a>errport</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010095"></a>Output port for printing error messages, analogous to and initialized to stderr in C </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010097"></a>ptport</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010099"></a>Output port for printing trace information; initialized to stdout in C&#160;&#160; </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1011253"></a>woport</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1011255"></a>Output port for printing warning messages; analogous to and initialized to stdout in C.</p>
</td>
</tr>
</tbody></table>
<h3>
<a id="pgfId-1014081"></a>Opening and Closing <a id="marker-1008432"></a>Ports</h3>

<p>
<a id="pgfId-1008434"></a>The following functions work with opening and closing ports. Both of the file opening functions use the SKILL path variable. </p>

<h4>
<a id="pgfId-1008436"></a>Opening an Input Port to Read a File (<a id="marker-1008435"></a>infile)</h4>

<p>
<a id="pgfId-1008437"></a><code>infile</code> opens an input port ready to read a file you specify. The file name can be specified with either an absolute path or a relative path. In the latter case, the current SKILL path is used if it&#8217;s not nil. </p>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1008438"></a>infile(&quot;~/test/input.il&quot;)=&gt; port:&quot;~/test/input.il&quot;</pre>

<p>
<a id="pgfId-1010289"></a>Result if such a file exists and is readable.</p>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1010290"></a>infile(&quot;myFile&quot;) =&gt; nil </pre>

<p>
<a id="pgfId-1010291"></a>Result if <code>myFile</code> does not exist according to the SKILL path or exists but is not readable.</p>

<h4>
<a id="pgfId-1008443"></a>Opening an Output Port to Write a File (<a id="marker-1008442"></a>outfile) </h4>

<p>
<a id="pgfId-1008444"></a><code>outfile</code> opens an output port ready to write to the file you specify. The file name can be specified with either an absolute path or a relative path. </p>
<ul><li>
<a id="pgfId-1008445"></a>If a relative path is given and the current SKILL path setting is not <code>nil</code>, all directory paths from the SKILL path are checked, in the order specified, for that file name </li><li>
<a id="pgfId-1008446"></a>If found, the system overwrites the first updateable file in the list </li><li>
<a id="pgfId-1008447"></a>If no updateable file is found, it places a new file of that name in the first writable directory <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1008448">
<a id="pgfId-1008448"></a>p = outfile(&quot;out.il&quot; &quot;w&quot;)   =&gt; port:&quot;out.il&quot;</pre></li></ul>





<p>
<a id="pgfId-1008449"></a>Returns the name of the output port ready to write to the file.</p>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1008450"></a>outfile(&quot;/bin/ls&quot;)&#160;&#160;                  =&gt; nil</pre>

<p>
<a id="pgfId-1008451"></a>Returns <code>nil</code> if the file cannot be opened for writing.</p>

<h4>
<a id="pgfId-1008454"></a>Writing Out All Characters in the <a id="marker-1008452"></a>Output Buffer of a Port (<a id="marker-1008453"></a>drain) </h4>

<p>
<a id="pgfId-1008455"></a><code>drain</code> writes out all characters that are in the output buffer of a port. <code>drain</code> is analogous to a combination of <code>fflush</code> and <code>fsync </code>in <a id="marker-1008456"></a>C. You get an error message if the port to drain is an input port or has been closed.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008457"></a>drain()                        =&gt; t<br />drain(poport)&#160;&#160;        =&gt; t</pre>
<h4>
<a id="pgfId-1014106"></a>Writing Data to a Port in Virtuoso</h4>

<p>
<a id="pgfId-1014107"></a>To write text data to a port in Virtuoso, use the <code>fprintf</code> function. For example, </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014222"></a>fprintf(errport &quot;An error message\n&quot;)</pre>

<p>
<a id="pgfId-1014250"></a>Prints the text in red in the CIW and tags it with \e in the CDS.log file.</p>

<p>
<a id="pgfId-1014223"></a></p>
<div class="webflare-div-image">
<img src="images/fprintf_errport.gif" /></div>

<p>
<a id="pgfId-1014224"></a>Whereas, </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014272"></a>fprintf(woport &quot;A warning message\n&quot;)</pre>

<p>
<a id="pgfId-1014303"></a>Prints the text in orange in the CIW and tags it with \w in the CDS.log file.</p>

<p>
<a id="pgfId-1014162"></a></p>
<div class="webflare-div-image">
<img src="images/fprintf_worport.gif" /></div>
<h4>
<a id="pgfId-1014096"></a>D<a id="marker-1008458"></a>raining, Closing, and Freeing a Port (<a id="marker-1008459"></a>close)</h4>

<p>
<a id="pgfId-1008461"></a>The port is drained, closed, and freed. When a file is closed, it frees the FILE* associated with the port. Do not use this function on <code>piport</code>, <code>poport</code>, <code>stdin</code>, <code>stdout</code>, and <code>stderr</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008462"></a>p = outfile(&quot;~/test/myFile&quot;)   =&gt; port:&quot;~/test/myFile&quot;<br />close(p)&#160;&#160;                                                 =&gt; t</pre>
<h2>
<a id="pgfId-1008463"></a><a id="22368"></a>Output</h2>

<p>
<a id="pgfId-1008464"></a>SKILL provides functions for unformatted and formatted output.</p>

<h3>
<a id="pgfId-1008466"></a><a id="marker-1008465"></a>Unformatted Output</h3>
<h4>
<a id="pgfId-1008469"></a>Printing the Value of an Expression in the Default Format (<a id="marker-1008467"></a>print, <a id="marker-1008468"></a>println)</h4>

<p>
<a id="pgfId-1008470"></a><code>print</code> prints the value of an expression using the default format for the data type of the value (for example, strings are enclosed in double quotes). </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008471"></a>print(&quot;hello&quot;)<br />&quot;hello&quot;<br />=&gt; nil </pre>

<p>
<a id="pgfId-1008472"></a>Prints to <code>poport</code> and returns <code>nil</code>.</p>
<p>
<a id="pgfId-1008473"></a><code>println</code> prints the value of an expression just like <code>print</code>, but a newline character is automatically printed after printing the input value. <code>println</code> flushes the output port after printing each newline character.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008474"></a>println(&quot;Hello World!&quot;)<br />&quot;Hello World!&quot;<br />=&gt; nil</pre>
<h4>
<a id="pgfId-1008476"></a>Printing a Newline (\n) Character (<a id="marker-1008475"></a>newline)</h4>

<p>
<a id="pgfId-1008477"></a>Prints a newline (\n) character. If you do not specify the output port, it defaults to<code> poport</code>, the standard output port. The <code>newline</code> function flushes the output port after printing each newline character. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008478"></a>print(&quot;Hello&quot;) newline() print(&quot;World!&quot;)<br />&quot;Hello&quot;<br />&quot;World!&quot;<br />=&gt; nil</pre>
<h4>
<a id="pgfId-1008479"></a>Printing a List with a Limited Number of Elements and Levels of Nesting 
(<a id="marker-1008480"></a>printlev)</h4>

<p>
<a id="pgfId-1008481"></a><code>printlev</code> prints a list with a limited number of elements and levels of nesting. Lists are normally printed in their entirety no matter how many elements they have or how deeply nested they are. </p>
<p>
<a id="pgfId-1008482"></a>Applications can, however, set upper limits on the number of elements and the levels of nesting shown when printing lists using <code>printlev</code>. These limits are sometimes necessary to control the volume of interactive output because the SKILL top-level automatically prints the results of expression evaluation. Limits can also protect against infinite looping on circular lists possibly created when novices use the destructive list modification functions, such as <code>rplaca</code> or <code>rplacd</code>, without a thorough understanding of how they work.<code> printlev</code> uses the following syntax:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008483"></a>printlev( <code><em>g_value</em></code> <code><em>x_level</em></code> <code><em>x_length</em></code> [<code><em>p_outputPort</em></code>] ) =&gt; <code>nil </code></pre>

<p>
<a id="pgfId-1008484"></a>Two integer variables, print length and print level (specified by <code>x_length</code> and <code>x_level</code>), control the maximum number of elements and the levels of nesting that are printed. List elements beyond the maximum specified by print length are abbreviated as &#8220;&#8230;&#8221; and lists nested deeper than the maximum level specified by print level are abbreviated as &#8220;&amp;.&#8221; Both print length and print level are initialized to <code>nil</code> (meaning no limits are imposed) by SKILL, but each application can set its own limits.</p>
<p>
<a id="pgfId-1008485"></a>The <code>printlev</code> function is identical to <code>print</code> except that it takes two additional arguments specifying the maximum level and length to use in printing the expression.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008486"></a>List = &#39;(1 2 (3 (4 (5))) 6)<br />printlev(List 100 2)<br />(1 2 &#8230;)<br />=&gt; nil</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008487"></a>printlev(List 3 100)<br />(1 2 (3 (4 &amp;)) 6)<br />=&gt; nil</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008488"></a>printlev(List 3 3 p)<br />(1 2 (3 (4 &amp;)) &#8230;)<br />=&gt; nil</pre>

<p>
<a id="pgfId-1008489"></a>Assumes port p exists. Prints to port p.</p>

<h3>
<a id="pgfId-1008492"></a><a id="42084"></a>Formatted <a id="marker-1008491"></a>Output</h3>

<p>
<a id="pgfId-1008493"></a>You can precede format characters with a field width specification. For example, %5d prints an integer in a field that is 5 columns wide. If the field width begins with the digit &#8220;0&#8221;, zero padding is done instead of blank padding. For the format characters<code> f</code> and <code>e</code>, the width specification can be followed by a period &#8220;.&#8221; and an integer specifying the precision, that is, the number of digits to print after the decimal point. </p>
<p>
<a id="pgfId-1008494"></a>Output is right justified within a field by default unless an optional minus sign &#8220;-&#8221; immediately follows the &#8220;%&#8221; character, which will then be left justified. To print a percent sign, you must use two percent signs in succession. You must explicitly put &#8220;\n&#8221; in your format string to print a newline character and &#8220;\t&#8221; for a tab. </p>

<p>
<a id="pgfId-1010109"></a></p>
<table class="webflareTable" id="#id1010113">
<caption style="text-align:left;"><p>
</p><div class="ft-figtabl-title">
<a id="pgfId-1010115"></a>Common Output Format Specifications</div></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010121">
<a id="pgfId-1010121"></a>Format Specification</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010123">
<a id="pgfId-1010123"></a>Type(s) of Argument</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010125">
<a id="pgfId-1010125"></a>Prints </span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010127"></a>%d</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010129"></a>fixnum</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010131"></a>Integer in decimal radix</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010133"></a>%o</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010135"></a>fixnum</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010137"></a>Integer in octal</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010139"></a>%x</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010141"></a>fixnum</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010143"></a>Integer in hexadecimal</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010145"></a>%f</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010147"></a>flonum</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010149"></a>Floating-point number in the style [-]ddd.ddd </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010151"></a>%e</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010153"></a>flonum</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010155"></a>Floating-point number in the style <br />[-]d.ddde[-]ddd </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010157"></a>%g</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010159"></a>flonum</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010161"></a>Floating-point number in style f or e, whichever gives full precision in minimum space</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010163"></a>%s</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010165"></a>string, symbol</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010167"></a>Prints out a string (without quotes) or the print name of a symbol </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010169"></a>%c</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010171"></a>string, symbol</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010173"></a>The first character</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010175"></a>%n</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010177"></a>fixnum, flonum</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010179"></a>Number</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010181"></a>%L</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010183"></a>list</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010185"></a>Default format for the data type</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010187"></a>%P</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010189"></a>list</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010191"></a>Point</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010193"></a>%B</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010195"></a>list</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010197"></a>Box </p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1008580"></a>For formatted output, SKILL makes available the standard C <code>stdio</code> library routines <code>printf</code>, <code>fprintf</code>, and <code>sprintf</code>. SKILL provides a robust interface to these routines. Below is a brief description of each routine in the context of the SKILL runtime environment. If more detailed descriptions are needed for these functions, consult your C programming manual.</p>

<h4>
<a id="pgfId-1008582"></a>Writing Formatted Output to Ooport (<a id="marker-1008581"></a>printf)</h4>

<p>
<a id="pgfId-1008583"></a><code>printf</code> writes formatted output to <code>poport</code>. Optional arguments following the format string are printed according to their corresponding format specifications. printf is identical to fprintf except that it does not take a port argument and the output is written to poport.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008584"></a>x = 197.9687<br />printf(&quot;The test measures %10.2f.\n&quot; x)</pre>

<p>
<a id="pgfId-1008585"></a>Prints the following line to <code>poport</code> and returns <code>t</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008586"></a>The test measures&#160;&#160;          197.97. =&gt; t</pre>
<h4>
<a id="pgfId-1008588"></a>Writing Formatted Output to a Port (<a id="marker-1008587"></a>fprintf)</h4>

<p>
<a id="pgfId-1008589"></a><code>fprintf</code> writes formatted output to the port given as the first argument. The optional arguments following the format string are printed according to their corresponding format specifications. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008590"></a>x = 197.9687<br />fprintf(p &quot;The test measures %10.2f.\n&quot; x)</pre>

<p>
<a id="pgfId-1008591"></a>Prints the following line to port p and returns <code>t</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008592"></a>The test measures&#160;&#160;          197.97. =&gt; t</pre>
<h4>
<a id="pgfId-1008594"></a>Writing Formatted Output to a String Variable (<a id="marker-1008593"></a>sprintf)</h4>

<p>
<a id="pgfId-1008595"></a><code>sprintf</code> formats the output and puts the resultant string into the variable given as the first argument. If <code>nil</code> is specified as the first argument, no assignment is made. The formatted string is returned. Because of internal buffering in <code>sprintf</code>, there is a limit to how many characters <code>sprintf</code> can handle, but the limit is large enough (8192 characters) that it should not present any problem.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008596"></a>sprintf(s &quot;Memorize %s number %d!&quot; &quot;transaction&quot; 5)<br />=&gt; &quot;Memorize transaction number 5!&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008597"></a>s <br />=&gt; &quot;Memorize transaction number 5!&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008598"></a>p = outfile(sprintf(nil &quot;test%d.out&quot; 10))<br />=&gt; port:&quot;test10.out&quot;</pre>
<h3>
<a id="pgfId-1008599"></a>Pretty Printing</h3>

<p>
<a id="pgfId-1008601"></a>SKILL provides functions for &#8220;<a id="marker-1008600"></a>pretty printing&#8221; function definitions and long data lists with proper indenting to make them more readable and easier to manipulate in text form. </p>
<p>
<a id="pgfId-1008602"></a>You need the SKILL Development Environment license to pretty print function definitions using the <code>pp</code> SKILL function below.</p>

<h4>
<a id="pgfId-1008604"></a>Pretty Printing a Function Definition (<a id="marker-1008603"></a>pp) </h4>

<p>
<a id="pgfId-1010861"></a><code>pp</code> pretty prints a function definition. The function must be a readable interpreted function. (Binary functions cannot be pretty printed.) Each function definition is printed so it can be read back into SKILL. <code>pp</code> does not evaluate its first argument but does evaluate the second argument, if given. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1010862"></a>procedure(fac(n) if(n &lt;= 1 1 n*fac(n-1)))=&gt; fac<br />pp fac <br />procedure(fac(n)<br />      if((n &lt;= 1) 1<br />            (n * fac(n - 1)))<br />      )<br />)<br />=&gt; nil </pre>

<p>
<a id="pgfId-1008607"></a>Defines the factorial function <code>fac</code>, then pretty prints it to poport.</p>

<h4>
<a id="pgfId-1008609"></a>Pretty Printing Long Data Lists (<a id="marker-1008608"></a>pprint) </h4>

<p>
<a id="pgfId-1008610"></a><code>pprint</code> is identical to <code>print</code> except that it tries to pretty print the value whenever possible. (<code>pprint</code> does not work the same as the <code>pp</code> function. <code>pp</code> is an <code>nlambda</code> and only takes a function name whereas <code>pprint</code> is a lambda and takes an arbitrary SKILL object.) </p>
<p>
<a id="pgfId-1008611"></a>The<code> pprint</code> function is useful, for example, when printing out a long list where <code>print</code> prints the list on one (possibly huge) line but <code>pprint</code> limits the output on a single line and produces a multiple-line printout if necessary. This multiple-line printout makes later input much easier.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008612"></a>pprint &#39;(1 2 3 4 5 6 7 8 9 0 a b c d e f g h i j k) <br />(1 2 3 4 5<br />      6 7 8 9 0<br />      a b c d e<br />      f g h i j<br />      k<br />)<br />=&gt; nil</pre>
<h2>
<a id="pgfId-1008613"></a><a id="20661"></a>Input</h2>

<p>
<a id="pgfId-1008615"></a>When describing input functions, this manual often uses the term <a id="marker-1008614"></a>&#8220;form&#8221; to refer to a logical unit of input. A <a id="marker-1008616"></a>form can be an expression, such as source code or a data list that can span multiple input lines. Input functions such as <code>lineread</code> read in one input line at a time but continue reading if they do not find a complete form at the end of a line.</p>
<p>
<a id="pgfId-1008618"></a>You can think of input forms and how the SKILL <a id="marker-1008617"></a>functions work with them in the following ways. </p>

<p>
<a id="pgfId-1010203"></a></p>
<table class="webflareTable" id="#id1010207">
<caption style="text-align:left;"><p>
</p><div class="ft-figtabl-title">
<a id="pgfId-1010209"></a>Input Functions</div></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010217">
<a id="pgfId-1010217"></a>Input Source</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010219">
<a id="pgfId-1010219"></a>SKILL Evaluated</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010221">
<a id="pgfId-1010221"></a>SKILL 
Not Evaluated </span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010223">
<a id="pgfId-1010223"></a>Application-Specific Formats</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010225"></a>File</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010227"></a>load<br />loadi</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010229"></a>lineread</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010231"></a>infile<br />gets<br />getc<br />fscanf<br />close</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010233"></a>String</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010235"></a>evalstring<br />loadstring<br />errsetstring</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010237"></a>linereadstring</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010239"></a>instring<br />gets<br />getc<br />fscanf<br />close</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1008652"></a>SKILL forms read from a file are either evaluated or not evaluated. Input strings can have an application-specific syntax of their own, such as a netlist syntax. It is the programmer&#8217;s responsibility to open a port, understand the application-specific syntax, process the input, and then close the port.</p>

<h3>
<a id="pgfId-1008653"></a>Reading and Evaluating SKILL Formats</h3>
<h4>
<a id="pgfId-1008655"></a>Reading and Evaluating an Expression Stored in a String (<a id="marker-1008654"></a>evalstring)</h4>

<p>
<a id="pgfId-1008656"></a><code>evalstring</code> reads and evaluates an expression stored in a string. The resulting value is returned. Notice that <code>evalstring</code> does not allow the outermost set of parentheses to be omitted, as in the top level. Refer to the <a href="chap9.html#33792">&#8220;Top Levels&#8221;</a> for a discussion of the top level.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008660"></a>evalstring(&quot;1+2&quot;)                                        =&gt; 3<br />evalstring(&quot;cons(&#39;a &#39;(b c))&quot;)           =&gt; (a b c)<br />car &#39;(1 2 3)&#160;&#160;                                                       =&gt; 1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008661"></a>evalstring(&quot;car &#39;(1 2 3)&quot;)</pre>

<p>
<a id="pgfId-1008662"></a>Signals that <code>car</code> is an unbound variable.</p>

<h4>
<a id="pgfId-1008664"></a>Opening a String and Executing its Expressions (<a id="marker-1008663"></a>loadstring)</h4>

<p>
<a id="pgfId-1008665"></a><code>loadstring</code> opens a string for reading, then parses and executes expressions stored in the string just as <code>load</code> does in loading a file. <code>loadstring</code> is different from <code>evalstring</code> in two ways. <code>loadstring</code></p>
<ul><li>
<a id="pgfId-1008666"></a>Uses <code>lineread</code> mode </li><li>
<a id="pgfId-1008667"></a>Always returns <code>t</code> if it evaluates successfully </li></ul>


<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008668"></a>loadstring &quot;1+2&quot;                      =&gt; t<br />loadstring &quot;procedure( f(n) x=x+n )&quot;  =&gt; t<br />loadstring &quot;x=10\n f 20\n f 30&quot;       =&gt; t<br />x&#160;&#160;                                   =&gt; 60</pre>
<h4>
<a id="pgfId-1008670"></a>Reading and Evaluating an Expression then Checking for Errors (<a id="marker-1008669"></a>errsetstring) </h4>

<p>
<a id="pgfId-1008671"></a><code>errsetstring</code> reads and evaluates an expression stored in a string. Same as <code>evalstring</code> except that it calls <code>errset</code> to catch any errors that might occur during the parsing and evaluation.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008672"></a>errsetstring(&quot;1+2&quot;)            =&gt; (3)<br />errsetstring(&quot;1+&#39;a&quot;)&#160;&#160;         =&gt; nil </pre>

<p>
<a id="pgfId-1008673"></a>Returns <code>nil</code> because an error occurred.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008674"></a>errsetstring(&quot;1+&#39;a&quot; t)&#160;&#160;       =&gt; nil </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008675"></a>Prints out an error message:<br />*Error* plus: can&#8217;t handle (1 + a)</pre>
<h4>
<a id="pgfId-1008678"></a>Loading Files (<a id="marker-1008676"></a>load, <a id="marker-1008677"></a>loadi)</h4>

<p>
<a id="pgfId-1008679"></a><code>load</code> opens a file, repeatedly calls <code>lineread</code> to read in the file, and immediately evaluates each form after it is read in. It closes the file when end of file is reached. Unless errors are discovered, the file is read in quietly. If <code>load</code> is interrupted by pressing Control-c, the function skips the rest of the file being loaded.</p>
<p>
<a id="pgfId-1008681"></a>SKILL has an autoload feature that allows applications to load functions into SKILL on demand. If a function being executed is undefined, SKILL checks if the name of the function (a symbol) has a property called <a id="marker-1008680"></a>autoload attached to it. If the property exists, its value, which must be either a string or a function call that returns a string, is used as the name of a file to load. The file should contain a definition for the function that triggered the autoload. Execution proceeds normally after the function is defined. The whole autoload sequence is functionally transparent. Refer to <a href="chap10.html#26277">&#8220;Delivering Products&#8221;</a></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008685"></a>load( &quot;testfns.il&quot;)                 ; Load file testfns.il<br />fn.autoload = &quot;myfunc.il&quot;           ; Declares an autoload property.<br />fn(1)</pre>

<p>
<a id="pgfId-1008686"></a><code>fn</code> is undefined at this point, so this call triggers an autoload of <code>myfunc.il</code>, which contains the definition of <code>fn</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008687"></a>fn(2)&#160;&#160;            ; fn is now defined and executes normally.</pre>

<p>
<a id="pgfId-1008688"></a><code>loadi</code> is identical to <code>load</code>, except that <code>loadi</code> ignores errors encountered during the load, prints an error message, and then continues loading.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008689"></a>loadi( &quot;testfns.il&quot; )</pre>

<p>
<a id="pgfId-1008690"></a>Loads the <code>testfns.il</code> file.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008691"></a>loadi( &quot;/tmp/test.il&quot;)</pre>

<p>
<a id="pgfId-1008692"></a>Loads the <code>test.il</code> file from the <code>tmp</code> directory.</p>

<h3>
<a id="pgfId-1008693"></a>Reading but Not Evaluating SKILL Formats</h3>
<h4>
<a id="pgfId-1008695"></a>Parsing the Next Line in the Input Pport into a List (<a id="marker-1008694"></a>lineread)</h4>

<p>
<a id="pgfId-1008696"></a><code>lineread</code> parses the next line in the input port into a list that you can further manipulate. It is used by the interpreter&#8217;s top level to read in all input and understands only SKILL syntax.</p>
<p>
<a id="pgfId-1008697"></a>Only one line of input is read in unless there are still open parentheses pending at the end of the first line, or binary <code>infix</code> operators whose right-hand argument has not yet been supplied, in which case additional input lines are read until all open parentheses have been closed and all binary <code>infix</code> operators satisfied. The symbol <code>t</code> is returned if <code>lineread</code> reads a blank input line and <code>nil</code> is returned at the end of the input file. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008698"></a>lineread(piport)         ; Reads in the next input expression<br />f 1 2 +                  ; First input line of the file being read<br />3                        ; Second input line<br />=&gt; f (1 (2 + 3))</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008699"></a>lineread(piport)<br />f(a b c)                 ; Another input line of the file<br />=&gt; ((f a b c))&#160;&#160;         ; Returns a list of input objects</pre>
<h4>
<a id="pgfId-1008701"></a>Reading a String into a List (<a id="marker-1008700"></a>linereadstring)</h4>

<p>
<a id="pgfId-1008702"></a><code>linereadstring</code> executes <code>lineread</code> on a string and returns the form read in. Anything after the first form is ignored.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008703"></a>linereadstring &quot;abc&quot;                      =&gt; (abc)<br />linereadstring &quot;f a b c&quot;                  =&gt; (f a b c)<br />linereadstring &quot;x + y&quot;                    =&gt; ((x + y))<br />linereadstring &quot;f a b c\n g 1 2 3&quot;&#160;&#160;      =&gt; (f a b c) </pre>

<p>
<a id="pgfId-1008704"></a>In the last example, only the first form is read in.</p>

<h3>
<a id="pgfId-1008705"></a>Reading Application-Specific Formats</h3>

<p>
<a id="pgfId-1008706"></a>The following input functions are helpful when you must read input from a file that was not written in SKILL-compatible format.</p>

<h4>
<a id="pgfId-1008708"></a>Reading Formatted Input (<a id="marker-1008707"></a>fscanf)</h4>

<p>
<a id="pgfId-1008709"></a><code>fscanf</code> reads the input from a port according to format specifications in a format string. The results are stored in corresponding variables in the call. <code>fscanf</code> can be considered the inverse of the <code>fprintf</code> output function. <code>fscanf</code> returns the number of input items it successfully matches with its format string. It returns <code>nil</code> if it encounters an end of file. </p>
<p>
<a id="pgfId-1008710"></a>The maximum size of any input string being read as a string variable for <code>fscanf</code> is 8K. Also, the function<code> lineread</code> is a faster alternative to <code>fscanf</code> for reading SKILL objects.</p>
<p>
<a id="pgfId-1008742"></a>The input formats accepted by <code>fscanf</code> are summarized below. </p>

<p>
<a id="pgfId-1010245"></a></p>
<table class="webflareTable" id="#id1010250">
<caption style="text-align:left;"><p>
</p><div class="ft-figtabl-title">
<a id="pgfId-1010252"></a>Common Input Format Specifications</div></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010258">
<a id="pgfId-1010258"></a>Format Specification</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010260">
<a id="pgfId-1010260"></a>Type(s) of Argument</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1010262">
<a id="pgfId-1010262"></a>Scans for </span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010264"></a>%d</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010266"></a>fixnum</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010268"></a>An integer</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010270"></a>%f</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010272"></a>flonum</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010274"></a>A floating-point number</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010276"></a>%s</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010278"></a>string</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1010280"></a>A string (delimited by spaces) in the input </p>
</td>
</tr>
</tbody></table>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008743"></a>fscanf( p &quot;%d %f&quot; i d )</pre>

<p>
<a id="pgfId-1008744"></a>Scans for an integer and a floating-point number from the input port <code>p</code> and stores the values read in the variables <code>i</code> and <code>d</code>, respectively. </p>
<p>
<a id="pgfId-1008745"></a>Assume there is a file <code>testcase</code> with one line:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008746"></a>hello 2 3 world</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1009459"></a>x = infile(&quot;testcase&quot;) =&gt; port:&quot;testcase&quot;<br />fscanf( x &quot;%s %d %d %s&quot; a b c d )=&gt; 4<br />(list a b c d)&#160;&#160;                                                =&gt; (&quot;hello&quot; 2 3 &quot;world&quot;)</pre>
<h4>
<a id="pgfId-1009461"></a>Reading a Line and Storing it in a Variable (<a id="marker-1009460"></a>gets)</h4>

<p>
<a id="pgfId-1008750"></a><code>gets</code> reads a line from the input port and stores it as a string in a variable. The string is also returned as the value of <code>gets</code>. The terminating newline character of the line becomes the last character in the string. <code>gets</code> returns <code>nil</code> if EOF is encountered and the variable maintains its last value. Assume the<code> test1.data</code> file has the following first two lines:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008751"></a>#This is the data for test1<br />0001 1100 1011 0111</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008752"></a>p = infile(&quot;test1.data&quot;)   =&gt; port:&quot;test1.data&quot;<br />gets(s p)                                       =&gt; &quot;#This is the data for test1\n&quot;<br />gets(s p)                                       =&gt; &quot;0001 1100 1011 0111\n&quot;<br />s&#160;&#160;                                                              =&gt; &quot;0001 1100 1011 0111\n&quot;</pre>
<h4>
<a id="pgfId-1008754"></a>Reading and Returning a Single Character from an Input Port (<a id="marker-1008753"></a>getc)</h4>

<p>
<a id="pgfId-1008755"></a><code>getc</code> reads a single character from the input port and returns it as the value of <code>getc</code>. If the character returned is a non-printable character, its octal value is stored as a symbol. If you are familiar with <a id="marker-1008756"></a>C, you might notice that the <code>getc</code> and <code>getchar</code> SKILL functions are totally unrelated. <code>getc</code> returns <code>nil</code> if EOF is encountered.</p>
<p>
<a id="pgfId-1008757"></a>The input port arguments for both <code>gets</code> and <code>getc</code> are optional. If the port is not given, the functions take their input from <code>piport</code>. In the following example assume the file <code>test1.data</code> has its first line read as:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008758"></a>#This is the data for test1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1009484"></a>p = infile(&quot;test1.data&quot;)  =&gt; port:&quot;test1.data&quot;<br />getc(p)                                           =&gt; \#<br />getc(p)                                           =&gt; T<br />getc(p)&#160;&#160;                                             =&gt; h</pre>
<h3>
<a id="pgfId-1009485"></a>Reading Application-Specific Formats from Strings</h3>

<p>
<a id="pgfId-1008761"></a>In addition to being able to accept input from the terminal and from text files, SKILL can also take its input directly from strings. Some applications store programs internally as strings and then parse the strings into their corresponding internal SKILL representations as needed. </p>
<p>
<a id="pgfId-1008762"></a>Because parsing is a relatively expensive operation, you should avoid calling any of the following functions repeatedly on the same string. It is a good practice to convert each string into its internal SKILL representation before using it more than once.</p>

<h4>
<a id="pgfId-1008764"></a>Opening a String for Reading (<a id="marker-1008763"></a>instring)</h4>

<p>
<a id="pgfId-1008765"></a>Opens a string for reading just as <code>infile</code> opens a file. An input port that can be used to read the string is returned. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008766"></a>s = &quot;Hello World!&quot;                           =&gt; &quot;Hello World!&quot;<br />p = instring(s)                                  =&gt; port:&quot;*string*&quot;<br />fscanf(p &quot;%s %s&quot; a b)=&gt; 2<br />a                                                                    =&gt; &quot;Hello&quot;<br />b                                                                    =&gt; &quot;World!&quot;<br />close(p)&#160;&#160;                                                      =&gt; t</pre>
<div class="webflare-information-macro webflare-macro-warning">
<a id="pgfId-1013683"></a>
Always remember to close the port when you are done.</div>
<h4>
<a id="pgfId-1013693"></a>Opening a String for Writing (outstring)</h4>

<p>
<a id="pgfId-1013786"></a>The <code>outstring </code>function takes no arguments and returns an opened output port for strings (or an outport). After a port is opened, it can be used with functions, such as fprintf, println, and close that write to an output port. You can use the <code>close</code> function to close the output port. </p>
<p>
<a id="pgfId-1013801"></a>You need to use the <code>getOutstring</code> function to retrieve the content of the output port (while it is open). For example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013831"></a>s = outstring()</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013832"></a>= &gt;port:&quot;*string*&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013833"></a>fprintf(s &quot;Quick brown&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013834"></a>getOutstring(s)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013835"></a>=&gt;&quot;Quick brown&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013836"></a>fprintf(s &quot; fox jumps&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013837"></a>getOutstring(s)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013838"></a>=&gt; &quot;Quick brown fox jumps&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013839"></a> fprintf(s &quot; over the lazy dog&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013840"></a>getOutstring(s)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013841"></a>=&gt; &quot;Quick brown fox jumps over the lazy dog&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013842"></a>close(s)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013843"></a>getOutstring(s)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1013823"></a>=&gt; nil</pre>

<p>
<a id="pgfId-1013684"></a></p>

<h2>
<a id="pgfId-1013686"></a><a id="16311"></a>System-Related Functions</h2>

<p>
<a id="pgfId-1008769"></a>Various SKILL functions are available to interact with and query the system environment.</p>

<h3>
<a id="pgfId-1008770"></a>Executing UNIX Commands</h3>

<p>
<a id="pgfId-1008771"></a>From within SKILL, you can execute individual UNIX commands or invoke the <code>sh</code> or <code>csh</code> UNIX shell.</p>

<h4>
<a id="pgfId-1008774"></a>Starting the UNIX Bourne-Shell (<code></code><a id="marker-1008772"></a>sh, shell) <a id="marker-1008773"></a></h4>

<p>
<a id="pgfId-1008775"></a>Starts the UNIX Bourne-shell sh as a child process to execute a command string. If the sh function is called with no arguments, an interactive UNIX shell is invoked that prompts you for UNIX command input (available only in nongraphic applications).</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008776"></a>sh( &quot;rm /tmp/junk&quot;)</pre>

<p>
<a id="pgfId-1008777"></a>Removes the<code> junk</code> file from the<code> /tmp</code> directory and returns <code>t</code> if it is removed successfully.</p>

<h4>
<a id="pgfId-1008779"></a>Starting the UNIX C-Shell (<a id="marker-1008778"></a>csh) </h4>

<p>
<a id="pgfId-1008780"></a>Starts the UNIX C-shell <code>csh</code> as a child process to execute a command string. Identical to the sh function, but invokes the C-shell (csh) rather than the Bourne-shell (sh).</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008781"></a>csh( &quot;mkdir ~/tmp&quot; )</pre>

<p>
<a id="pgfId-1008782"></a>Creates a directory called <code>tmp</code> in your home directory.</p>

<h3>
<a id="pgfId-1008783"></a>System Environment</h3>

<p>
<a id="pgfId-1008785"></a>The following <a id="marker-1008784"></a>functions find and compare the current time, retrieve the version number of the software you are using, and determine the value of a UNIX environment variable.</p>

<h4>
<a id="pgfId-1008787"></a>Getting the Current Time (<a id="marker-1008786"></a>getCurrentTime)</h4>

<p>
<a id="pgfId-1008788"></a><code>getCurrentTime</code> returns the current time in the form of a string. The format of the string is <code>month day hour:minute:second year</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008789"></a>getCurrentTime( ) =&gt; &quot;Jan 26 18:15:18 1993&quot;</pre>
<h4>
<a id="pgfId-1008791"></a>Comparing Times (<a id="marker-1008790"></a>compareTime)</h4>

<p>
<a id="pgfId-1008792"></a><code>compareTime</code> compares two string arguments, representing a clock-calendar time. The format of the string is <code>month day hour:minute:second year</code>. The units are seconds.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008793"></a>compareTime( &quot;Apr 8 4:21:39 1991&quot; &quot;Apr 16 3:24:36 1991&quot;)<br />=&gt; -687777.</pre>

<p>
<a id="pgfId-1008794"></a>687,777 seconds have occurred between the two dates. For a positive number of seconds, the most recent date needs to be the first argument.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008795"></a>compareTime(&quot;Apr 16 3:24:36 1991&quot; &quot;Apr 16 3:14:36 1991&quot;)<br />=&gt; 600</pre>

<p>
<a id="pgfId-1008796"></a>600 seconds (10 minutes) have occurred between the two dates.</p>

<h4>
<a id="pgfId-1008798"></a>Getting the Current Version Number of Cadence Software (<a id="marker-1008797"></a>getVersion)</h4>

<p>
<a id="pgfId-1008799"></a>Returns the version number of software you are using.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008800"></a>getVersion() <br />=&gt; &quot;cds3 version 4.2.2 Fri Jan 26 20:40:28 PST 1993&quot;</pre>
<h4>
<a id="pgfId-1008802"></a>Getting the Value of a UNIX Environment Variable (<a id="marker-1008801"></a>getShellEnvVar)</h4>

<p>
<a id="pgfId-1008803"></a><code>getShellEnvVar</code> returns the value of a UNIX environment variable, if it has been set.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008804"></a>getShellEnvVar(&quot;SHELL&quot;) =&gt; &quot;/bin/csh&quot;</pre>

<p>
<a id="pgfId-1008805"></a>Returns the current value of the<code> SHELL</code> environment variable.</p>

<h4>
<a id="pgfId-1008807"></a>Setting a UNIX Environment Variable (<a id="marker-1008806"></a>setShellEnvVar)</h4>

<p>
<a id="pgfId-1008808"></a><code>setShellEnvVar</code> sets the value of a UNIX environment variable to a new value.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008809"></a>setShellEnvVar(&quot;PWD=/tmp&quot;) =&gt; t</pre>

<p>
<a id="pgfId-1008810"></a>Sets the current working directory to the <code>/tmp</code> directory .</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1008811"></a>getShellEnvVar(&quot;PWD&quot;)=&gt; &quot;/tmp&quot;</pre>

<p>
<a id="pgfId-1008812"></a>Gets the current working directory.</p>
<p>
<a id="pgfId-1008201"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap6.html" id="prev" title="Control Structures">Control Structures</a></em></b><b><em><a href="chap8.html" id="nex" title="Advanced List Operations">Advanced List Operations</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
 

 <div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160; </center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div> 

</body></html>