
<html><head><title>Enabling Automatic Supply Connection in Designs Using Liberty Models with a Default VCT Value</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="jaini" />
<meta name="CreateDate" content="2023-03-01" />
<meta name="CreateTime" content="1677669065" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator and Xcelium Simulator with mixed-signal option that supports the Verilog-AMS,  VHDL-AMS, and SystemVerilog-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Enabling Automatic Supply Connection in Designs Using Liberty Models with a Default VCT Value" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="task" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Digital Mixed-Signal,Digital Mixed-Signal," />
<meta name="prod_subfeature" content="Low-Power Mixed-Signal, Unified Power Format (UPF)," />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="ams_dms_simug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-03-01" />
<meta name="ModifiedTime" content="1677669065" />
<meta name="NextFile" content="Enabling_SystemVerilog_Interface_in_LP-MS_Designs.html" />
<meta name="Group" content="Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification," />
<meta name="PrevFile" content="Enabling_Automatic_Supply_Connection_in_Designs_with_Higher_HDL_Connections.html" />
<meta name="c_product" content="Xcelium," />
<meta name="Product" content="Xcelium," />
<meta name="ProductFamily" content="Xcelium," />
<meta name="ProductVersion" content="22.09" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Enabling Automatic Supply Connection in Designs Using Liberty Models with a Default VCT Value" />
<meta name="Version" content="22.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2209" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.10.026" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="ams_dms_simugTOC.html">Contents</a></li><li><a class="prev" href="Enabling_Automatic_Supply_Connection_in_Designs_with_Higher_HDL_Connections.html" title="Enabling_Automatic_Supply_Connection_in_Designs_with_Higher_HDL_Connections">Enabling_Automatic_Supply_Conn ...</a></li><li style="float: right;"><a class="viewPrint" href="ams_dms_simug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Enabling_SystemVerilog_Interface_in_LP-MS_Designs.html" title="Enabling_SystemVerilog_Interface_in_LP-MS_Designs">Enabling_SystemVerilog_Interfa ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 22.09, September 2022</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <h1 style="margin: 4px 0 4px;"><span>Enabling Automatic Supply Connection in Designs Using Liberty Models with a Default VCT Value</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p><span><span class="confluence-anchor-link" id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-liberty_model_vct"></span></span>In mixed-signal designs with UPF, the tool cannot apply an automatic supply connection on the analog ports, based on the Liberty model definition because there is no VCT explicitly specified on these analog ports. In such cases, to specify the default VCT for automatic power supply connection on the analog ports with UPF supply nets, use the following two <code>xrun</code> command-line options:</p>
<ul><li><code>-lps_ams_default_power_vct &lt;VCT_for_Power_Net&gt;</code></li><li><code>-lps_ams_default_ground_vct &lt;VCT_for_Ground_Net&gt;</code></li></ul>
<p>If a liberty model is encountered and its supply pin is treated as analog (electrical, wreal or UDN), the tool applies the specified default VCT on this supply connection.</p>

<p>You can specify multiple default VCTs using these two options. The first VCT that adheres to all the connection criteria is used for automatic supply connection. Similarly, when you specify multiple VCTs for different nettype and UDN fields, the tool uses the first nettype or UDN field that matches with the analog net.</p>

<p>The P/G type of supply connection is determined by the <code>-pg_type</code> value specified in the Liberty model file. The tool uses the VCT from the default VCT list specified for power or ground pins:</p>
<ul><li>For power pins, the tool uses the VCT from the list of options specified in the <code>-lps_ams_default_power_vct</code> option.</li><li>For ground pins, the tool uses the VCT from the list of options specified in the <code>-lps_ams_default_ground_vct</code>&#160;option.</li></ul>
<p>The direction of the supply connection is determined by the port direction specified in the Liberty and HDL models. The tool uses the VCT based on the direction of VCT definition such as:</p>
<ul><li>For the UPF driving HDL connection, the tool uses the VCT created by the UPF command,&#160;<code>create_upf2hdl_vct</code>.</li><li>For the HDL driving UPF connection, the tool uses the VCT created by the UPF command,&#160;<code>create_hdl2upf_vct</code>.</li></ul>
<p>The hdl type of VCT definition should meet the nettype of analog signals, such as</p>
<ul><li>The VCT defined with <code>-hdl_type {sv cds_rnm}</code> can be used for electrical or wreal signals.</li><li>The VCT defined with <code>-hdl_type {sv UDN.field}</code> can be used for UDN signals.</li></ul>
<p>For SV-UDN connections, the tool applies multiple VCTs, if they are defined for the same UDN nettype but different fields.</p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><ul><li>You cannot specify default VCTs on a specific scope of a design; that is, you cannot specify a set of VCTs on one block and another set of VCTs on other blocks.</li><li>The <code>-connect_supply_net</code> takes higher priority if a supply connection is explicitly specified in UPF file.</li></ul></div>
</div>

<p>The following example illustrates how to define the VCT in the UPF definition and how to provide the VCT values for HDL to UPF connections and vice-versa using the <code>-lps_ams_default_power_vct</code> and <code>-lps_ams_default_ground_vct</code> options.</p>

<p>UPF Definition:</p>
<p style="margin-left: 30.0px;"><code>create_hdl2upf_vct VCTR2U_VDD -hdl_type {sv cds_rnm} \</code><br /><code>&#160; &#160; -table { {&gt;=1.0 FULL_ON} {&lt;=0.0 OFF} }</code><br /><code>create_hdl2upf_vct VCTR2U_VSS -hdl_type {sv cds_rnm} \</code><br /><code>&#160; &#160; -table { {&gt;=0.0 FULL_ON} {&lt;0.0 OFF} }</code><br /><code>create_upf2hdl_vct VCTU2R -hdl_type {sv cds_rnm} \</code><br /><code>&#160; &#160; -table { {UNDETERMINED `wrealXState} }</code></p>

<p>xrun Command:</p>
<p style="margin-left: 30.0px;"><code># HDL-&gt;UPF</code><br /><code>&#160; -lps_ams_default_power_vct VCTR2U_VDD</code><br /><code>&#160; -lps_ams_default_ground_vct VCTR2U_VSS</code><br /><code># UPF-&gt;HDL</code><br /><code>&#160; -lps_ams_default_power_vct VCTU2R</code><br /><code>&#160; -lps_ams_default_ground_vct VCTU2R</code></p>

<p>Liberty Verbose Information:</p>
<p style="margin-left: 30.0px;"><code>ana1 : ana.lib:88</code><br /><code>&#160; &lt;PA&gt;: ./dut.vams:6</code><br /><code>&#160; Instances:</code><br /><code>&#160; &#160; tb.i_ana1</code><br /><code>&#160; &#160; &#160; &lt;A&gt; vss &lt;primary_ground&gt; : Global_Always_On_Ground &lt;VCTR2U_VSS&gt;</code><br /><code>&#160; &#160; &#160; &lt;A&gt; vdd &lt;primary_power&gt; : Global_Always_On_Power &lt;VCTR2U_VDD&gt;</code><br /><code>&#160; &#160; tb.i_dut.i_ana1</code><br /><code>&#160; &#160; &#160; &lt;A&gt; vss &lt;primary_ground&gt; : vss &lt;VCTR2U_VSS&gt;</code><br /><code>&#160; &#160; &#160; &lt;A&gt; vdd &lt;primary_power&gt; : vdd &lt;VCTR2U_VDD&gt;</code></p>
<p style="margin-left: 30.0px;"><code>Liberty / HDL Matching Information</code><br /><code>&#160; No mismatch found between Liberty pins and corresponding Verilog ports.</code></p>
<p style="margin-left: 30.0px;"><code>ana2 : ana.lib:102</code><br /><code>&#160; &lt;PA&gt;: ./dut.vams:23</code><br /><code>&#160; Instances:</code><br /><code>&#160; &#160; tb.i_ana2</code><br /><code>&#160; &#160; &#160; &lt;A&gt; vss &lt;primary_ground&gt; : Global_Always_On_Ground &lt;VCTU2R&gt;</code><br /><code>&#160; &#160; &#160; &lt;A&gt; vdd &lt;primary_power&gt; : Global_Always_On_Power &lt;VCTU2R&gt;</code><br /><code>&#160; &#160; tb.i_dut.i_ana2</code><br /><code>&#160; &#160; &#160; &lt;A&gt; vss &lt;primary_ground&gt; : vss &lt;VCTU2R&gt;</code><br /><code>&#160; &#160; &#160; &lt;A&gt; vdd &lt;primary_power&gt; : vdd &lt;VCTU2R&gt;</code></p>
<p style="margin-left: 30.0px;"><code>Liberty / HDL Matching Information</code><br /><code> No mismatch found between Liberty pins and corresponding Verilog ports.</code></p>
<h2 id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-EnablingUPFSupplyConnectiononMixed-SignalDesignsUsingSV-AMSConnectModuleslps_svams">Enabling UPF Supply Connection on Mixed-Signal Designs Using SV-AMS Connect Modules&#160;<span class="confluence-anchor-link" id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-lps_svams"></span></h2>

<p>You can enable UPF supply connections in mixed-signal designs that use SV-AMS connect modules. The mixed signal supply net could be electrical, SV-UDN, SV-Wreal, and VAMS-wreal with different nettypes or resolution functions. The tool inserts different connect modules for each nettypes on same UPF supply net.</p>

<p>To enable this functionality, you must use the command-line option, <code>-lps_ams_supply_ie</code> along with the following options:</p>
<ul><li><code>-lps_ams_connect_supply</code>: To enable the power supply net connectivity</li><li><code>-rnm_dmsie</code> and <code>-auto_config_svams_ie</code>: To enable the SVAMS insertion</li></ul>
<p>To connect UPF supply nets to SV UDN (EEnet), SV wreal (wrealsum, wrealavg), or electrical signals in the RNM/analog blocks, Cadence provides a solution to connect using <code>cds_ms_upf_supply</code> nettype defined in SV package <code>CDS_MS_UPF</code>. The SV package is created under Xcelium installation path, <em>your_install_dir/tools.lnx86/affirma_ams/etc/lpms/cds_ms_upf_package.sv</em>, where a predefined MS-UPF nettype is included.</p>

<p><code>package CDS_MS_UPF;</code></p>

<p><code>typedef struct {</code><br /><code>state state;</code><br /><code>real voltage;</code><br /><code>} cds_ms_upf_supply_struct;</code></p>

<p>During elaboration, an internal SV-UDN net <code>VDD_MS</code> (with nettype <code>cds_ms_upf_supply</code>) is created to represent the UPF supply net <code>VDD_UPF</code> in HDL scope. The tool connects all the mixed signals that is connecting to same UPF supply net <code>VDD_UPF</code> in UPF definition, to the SV-UDN net <code>VDD_MS</code>, using SVAMS connect module insertion.</p>

<p>You may also refer to the built-in connect modules: <code>UPF_EEnet.svams</code>, <code>UPF_Wreal.svams</code>, and <code>UPF_Electrical.svams</code>. These built-in connect modules are available at the Xcelium installation path, <code>your_install_dir/tools.lnx86/affirma_ams/etc/lpms</code>.</p>

<p>During simulation, the tool propagates the values between SV-UDN, SV wreal, and electrical nets; the internal SV-UDN net <code>VDD_MS</code>; and the UPF supply net <code>VDD_UPF</code>.</p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>In the UPF specification, the analog VCT is not required on the explicit supply connection, if the <code>-lps_ams_supply_ie</code> option is specified.</p>
</div>
</div>

<p>If you want the tool to use custom MS-UPF supply nettype, you must specify a bidirectional connect module between the mixed signal nettype and user-defined MS-UPF nettype. In this case, you must use the following two additional options to specify the nets:</p>
<ul><li><code>-lps_ams_supply_nettype &lt;<em>user-defined UPF supply nettype</em>&gt;</code>: To specify the user defined nettype MS-UPF to represent UPF supply net for mixed signal connection.</li><li><code>-lps_ams_supply_vctfile &lt;<em>user-defined UPF vct</em>&gt;</code>: To specify the analog VCT definition for the value conversion between user defined nettype MS-UPF and UPF supply nettype. See <a href="#EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example6">Example 6</a>.</li></ul>
<p>Additionally, if you have multiple drivers, you can use the <code>-lps_ams_supply_driver &lt;net name&gt;</code> option to specify the net as a driver of UPF supply net.</p>

<p>Since the SV-UDN has multiple fields, you must specify multiple VCTs on same UDN net, to specify the value conversion for power state and voltage. The tool relaxes the error checking (*E,DUPGCN) on SV-UDN nets, and apply the VCTs on specified fields of UDN net.</p>

<p>You can also use ie card to specify the IE parameters for different UPF supply nets. The connect modules for different nettypes connecting to same UPF supply net shares the same ie card info. Ensure that you specify the full hierarchical path UPF supply net name. See <a href="#EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-iecard">Example 5</a>.</p>

<p><code>amsd {</code><br /><code>ie vsup=3.3</code><br /><code>ie vsup=1.8 net=top.VDD vthi=1.6 vtlo=0.5 state_threshold=1</code><br /><code>ie vsup=0.0 net=top.VSS vthi=0.0 state_threshold=1</code><br /><code>}</code></p>

<p>Currently, the following scenarios are not supported:</p>
<ul><li>The CPF format</li><li>VHDL model</li></ul><h3 id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Examples">Examples</h3>

<p><code></code></p>
<div class="toc-macro rbtoc1677668822160">
<ul class="toc-indentation">
<li><a href="#EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example1:SupplyconnectiononSV-UDNnet(EEnet),SVwreal,Electrical">Example 1: Supply connection on SV-UDN net (EEnet), SV wreal, Electrical</a></li>
<li><a href="#EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example2:Supplyconnectionwithmultipledrivers,resolvedbymixedsignalresolutionfunction">Example 2: Supply connection with multiple drivers, resolved by mixed signal resolution function</a></li>
<li><a href="#EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example3:Supplyconnectionwithmultipledriver,resolvedbyUPFresolutionmethod">Example 3: Supply connection with multiple driver, resolved by UPF resolution method</a></li>
<li><a href="#EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example4:Libertymodel">Example 4: Liberty model</a></li>
<li><a href="#EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example5:iecardspecificationiecard">Example 5: ie card specification&#160;</a></li>
<li><a href="#EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example6:UserdefinedMS-UPFnettypeandvalueconversionExample6">Example 6: User defined MS-UPF nettype and value conversion&#160;</a></li>
</ul>
</div>

<p></p>
<h4 id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example1:SupplyconnectiononSV-UDNnet(EEnet),SVwreal,Electrical">Example 1: Supply connection on SV-UDN net (EEnet), SV wreal, Electrical</h4>

<p><code>---------------------Xrun command args-------------------</code><br /><code>$CDS_INST_DIR/tools/affirma_ams/etc/lpms/UPF_EEnet.svams</code><br /><code>$CDS_INST_DIR/tools/affirma_ams/etc/lpms/UPF_Wreal.svams</code><br /><code>$CDS_INST_DIR/tools/affirma_ams/etc/lpms/UPF_Electrical.svams</code></p>

<p><code>-lps_ams_connect_supply -lps_ams_sim</code><br /><code>-lps_ams_supply_ie</code><br /><code>-rnm_dmsie -auto_config_svams_ie</code><br /><code>---------------------HDL Design source code--------------</code><br /><code>`timescale 1ns / 100ps</code><br /><code>import EE_pkg::*;</code><br /><code>import CDS_MS_UPF::*;</code><br /><br /><code>module top ();</code><br /><code>(* upf_always_on *)</code><br /><code>reg pso = 0;</code><br /><code>initial begin</code><br /><code>#200 pso=1;</code><br /><code>#200 pso=0;</code><br /><code>end</code><br /><code>drvr_eenet idrvr_eenet ();</code><br /><code>drvr_wreal idrvr_wreal ();</code><br /><code>drvr_elec idrvr_elec ();</code></p>

<p><code>endmodule</code><br /><br /><code>module drvr_eenet (vdd, vss);</code><br /><code>output vdd, vss;</code><br /><code>EEnet vdd, vss;</code><br /><code>real v1, v2, r;</code><br /><br /><code>assign vdd = &#39;{V:5.0, I:`wrealZState, R:r};</code><br /><code>assign vss = &#39;{V:0.0, I:`wrealZState, R:r};</code><br /><br /><code>endmodule</code></p>

<p><code>module drvr_wreal (rvdd, rvss);</code><br /><code>output rvdd, rvss;</code><br /><code>wrealavg rvdd, rvss;</code><br /><code>real vsup, vgnd;</code><br /><code>assign rvdd = vsup;</code><br /><code>assign rvss = vgnd;</code><br /><code>endmodule</code></p>

<p><code>### test.vams ###</code><br /><code>`include &quot;disciplines.vams&quot;</code><br /><code>`timescale 1ns / 100ps</code><br /><br /><code>module drvr_elec (avdd, avss);</code><br /><code>output avdd, avss;</code><br /><code>electrical avdd, avss, gnd;</code><br /><code>ground gnd;</code><br /><code>real vsup=0.0;</code><br /><code>vsource #(.dc(0.0), .type(&quot;dc&quot;)) vgnd (avss, gnd);</code><br /><code>analog begin</code><br /><code>V(avdd) &lt;+ transition(vsup, 0.0, 1e-9, 1e-9, 0.0);</code><br /><code>end</code><br /><code>endmodule</code></p>

<p><code>---------------------UPF Description------------------------</code><br /><code>upf_version 2.0</code><br /><br /><code>set_design_top top</code><br /><code>set_scope</code><br /><br /><code>create_supply_net VDD</code><br /><code>create_supply_net VSS</code><br /><br /><code>create_supply_net VDD1</code><br /><code>create_supply_net VSS1</code><br /><br /><code>create_supply_set SSD -function {power VDD} -function {ground VSS}</code><br /><code>create_supply_set SS1 -function {power VDD1} -function {ground VSS1}</code><br /><br /><code>create_power_domain PDD -supply {primary SSD} -include_scope</code><br /><code>create_power_domain PD1 -supply {primary SS1} -elements {iload}</code><br /><br /><code>connect_supply_net VDD -ports {idrvr_eenet/vdd idrvr_wreal/rvdd idrvr_elec/avdd }</code><br /><code>connect_supply_net VSS -ports {idrvr_eenet/vss idrvr_wreal/rvss idrvr_elec/avss}</code></p>

<p>The following is the ieinfo log information:</p>

<p><code>Interface Elements at the block &lt;instance&gt; cds_amslps_psnconn of &lt;master&gt; cds_amslps_psnconn (file : ./xcelium.d/AMSD/cds_amslps_simulation.sv)</code><br /><code>Automatically inserted : top.VDD__EEnetUPF_bidir__ddiscrete_1_8 </code><br /><code>Connect Module : EEnetUPF_bidir</code><br /><code>Mode : Merged</code><br /><code>Net : top.VDD (discipline: ddiscrete_1_8, nettype: cds_ms_upf_supply)</code><br /><code>Parameters :</code><br /><code>rlo :200 </code><br /><code>rhi :200 </code><br /><code>rx :40 </code><br /><code>rz :10000000 </code><br /><br /><code>List of Ports connected to net top.VDD : (Total: 1)</code><br /><code>top.idrvr.vdd (&lt;none&gt; output)</code><br /><br /><code>Discipline of Port (e): No Discipline</code><br /><code>Discipline of Port (u): No Discipline</code><br /><br /><code>Sensitivity information: </code><br /><code>No Sensitivity info</code></p>
<h4 id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example2:Supplyconnectionwithmultipledrivers,resolvedbymixedsignalresolutionfunction">Example 2: Supply connection with multiple drivers, resolved by mixed signal resolution function</h4>

<p><code>---------------------HDL Design source code--------------</code><br /><code>### top.sv ###</code><br /><code>`timescale 1ns / 100ps</code><br /><br /><code>import EE_pkg::*;</code><br /><code>import CDS_MS_UPF::*;</code><br /><br /><code>module top ();</code><br /><code>drvr_udn idrvr_udn ();</code><br /><code>drvr_ele idrvr_ele ();</code><br /><code>drvr_rnm idrvr_rnm ();</code><br /><code>load_udn iload_udn ();</code><br /><code>load_ele iload_ele ();</code><br /><code>load_rnm iload_rnm ();</code><br /><code>endmodule</code><br /><br /><code>module drvr_udn (vdd, vss);</code><br /><code>output vdd, vss;</code><br /><code>EEnet vdd, vss;</code><br /><code>real v1, v2, r;</code><br /><br /><code>assign vdd = &#39;{V:v1, I:`wrealZState, R:r};</code><br /><code>assign vss = &#39;{V:v2, I:`wrealZState, R:r};</code><br /><br /><code>endmodule</code><br /><br /><code>module load_udn (vdd, vss);</code><br /><code>inout vdd, vss;</code><br /><code>EEnet vdd, vss;</code><br /><code>EEnet evdd, evss;</code><br /><code>assign evdd = vdd;</code><br /><code>assign evss = vss;</code><br /><code>endmodule</code><br /><br /><code>### test.vams ###</code><br /><code>`include &quot;disciplines.vams&quot;</code><br /><code>`timescale 1ns / 100ps</code><br /><br /><code>module drvr_ele (avdd, avss);</code><br /><code>output avdd, avss;</code><br /><code>electrical avdd, avss, gnd;</code><br /><code>ground gnd;</code><br /><code>real vsup=0.0;</code><br /><code>real rout = 1e12;</code><br /><code>real RealA;</code><br /><code>real iAout;</code><br /><code>endmodule</code><br /><br /><code>module drvr_rnm (avdd, avss);</code><br /><code>output avdd, avss;</code><br /><code>wrealavg avdd, avss;</code><br /><code>real vsup, vgnd;</code><br /><code>assign avdd = vsup;</code><br /><code>assign avss = vgnd;</code><br /><br /><code>endmodule</code><br /><br /><code>module load_ele (avdd, avss);</code><br /><code>inout avdd, avss;</code><br /><code>electrical avdd, avss;</code><br /><code>endmodule</code><br /><br /><code>module load_rnm (avdd, avss);</code><br /><code>inout avdd, avss;</code><br /><code>wrealavg avdd, avss;</code><br /><code>endmodule</code><br /><code>---------------------UPF Description------------------------</code><br /><code>upf_version 2.0</code><br /><code>set_design_top top</code><br /><code>set_scope</code><br /><br /><code>create_supply_resolution_function cust -voltage high -state most_on</code><br /><br /><code>create_supply_net VDD -resolve cust</code><br /><code>create_supply_net VSS -resolve cust</code><br /><br /><code>create_supply_set SSD -function {power VDD} -function {ground VSS}</code><br /><code>create_power_domain PDD -supply {primary SSD} -include_scope</code><br /><br /><code>connect_supply_net VDD -ports {idrvr_udn/vdd idrvr_ele/avdd idrvr_rnm/avdd}</code><br /><code>connect_supply_net VSS -ports {idrvr_udn/vss idrvr_ele/avss idrvr_rnm/avss}</code><br /><code>connect_supply_net VDD -ports {iload_udn/vdd iload_ele/avdd iload_rnm/avdd}</code><br /><code>connect_supply_net VSS -ports {iload_udn/vss iload_ele/avss iload_rnm/avss}</code><br /><code>---------------------Supply Net Resolution-------------------</code><br /><code>Supply Net Resolution:</code><br /><code>[100150 PS]Driving Source:</code><br /><code>cds_amslps_psnconn.uVDD_1_11, Voltage: 1.600000V, State FULL_ON</code><br /><code>Resolved Net:</code><br /><code>top.VDD, Voltage: 1.600000V, State: FULL_ON</code></p>
<h4 id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example3:Supplyconnectionwithmultipledriver,resolvedbyUPFresolutionmethod">Example 3: Supply connection with multiple driver, resolved by UPF resolution method</h4>

<p><code>---------------------xrun options--------------</code><br /><code>-lps_ams_supply_driver &quot;top.idrvr_ele.avdd&quot;</code><br /><code>-lps_ams_supply_driver &quot;top.idrvr_ele.avss&quot;</code><br /><code>-lps_ams_supply_driver &quot;top.idrvr_udn.vdd&quot;</code><br /><code>-lps_ams_supply_driver &quot;top.idrvr_udn.vss&quot;</code><br /><code>-lps_ams_supply_driver &quot;top.idrvr_rnm.avdd&quot;</code><br /><code>-lps_ams_supply_driver &quot;top.idrvr_rnm.avss&quot;</code><br /><code>---------------------HDL Design source code--------------</code><br /><code>### top.sv ###</code><br /><code>`timescale 1ns / 100ps</code><br /><br /><code>import EE_pkg::*;</code><br /><code>import CDS_MS_UPF::*;</code><br /><br /><code>module top ();</code><br /><code>drvr_udn idrvr_udn ();</code><br /><code>drvr_ele idrvr_ele ();</code><br /><code>drvr_rnm idrvr_rnm ();</code><br /><code>load_udn iload_udn ();</code><br /><code>load_ele iload_ele ();</code><br /><code>load_rnm iload_rnm ();</code><br /><code>endmodule</code><br /><br /><code>module drvr_udn (vdd, vss);</code><br /><code>output vdd, vss;</code><br /><code>EEnet vdd, vss;</code><br /><code>real v1, v2, r;</code><br /><br /><code>assign vdd = &#39;{V:v1, I:`wrealZState, R:r};</code><br /><code>assign vss = &#39;{V:v2, I:`wrealZState, R:r};</code><br /><br /><code>endmodule</code><br /><br /><code>module load_udn (vdd, vss);</code><br /><code>inout vdd, vss;</code><br /><code>EEnet vdd, vss;</code><br /><code>EEnet evdd, evss;</code><br /><code>assign evdd = vdd;</code><br /><code>assign evss = vss;</code><br /><code>endmodule</code><br /><br /><code>### test.vams ###</code><br /><code>`include &quot;disciplines.vams&quot;</code><br /><code>`timescale 1ns / 100ps</code><br /><br /><code>module drvr_ele (avdd, avss);</code><br /><code>output avdd, avss;</code><br /><code>electrical avdd, avss, gnd;</code><br /><code>ground gnd;</code><br /><code>real vsup=0.0;</code><br /><code>real rout = 1e12;</code><br /><code>real RealA;</code><br /><code>real iAout;</code><br /><br /><code>endmodule</code><br /><code>module drvr_rnm (avdd, avss);</code><br /><code>output avdd, avss;</code><br /><code>wrealavg avdd, avss;</code><br /><code>real vsup, vgnd;</code><br /><code>assign avdd = vsup;</code><br /><code>assign avss = vgnd;</code><br /><code>endmodule</code></p>

<p><code>module load_ele (avdd, avss);</code><br /><code>inout avdd, avss;</code><br /><code>electrical avdd, avss;</code><br /><code>endmodule</code><br /><br /><code>module load_rnm (avdd, avss);</code><br /><code>inout avdd, avss;</code><br /><code>wrealavg avdd, avss;</code><br /><code>endmodule</code><br /><code>---------------------UPF Description------------------------</code><br /><code>upf_version 2.0 </code><br /><code>set_design_top top</code><br /><code>set_scope</code><br /><br /><code>create_supply_resolution_function cust -voltage high -state most_on</code><br /><br /><code>create_supply_net VDD -resolve cust</code><br /><code>create_supply_net VSS -resolve cust</code><br /><code>create_supply_set SSD -function {power VDD} -function {ground VSS}</code><br /><br /><code>create_power_domain PDD -supply {primary SSD} -include_scope</code><br /><br /><code>connect_supply_net VDD -ports {idrvr_udn/vdd idrvr_ele/avdd idrvr_rnm/avdd}</code><br /><code>connect_supply_net VSS -ports {idrvr_udn/vss idrvr_ele/avss idrvr_rnm/avss}</code><br /><code>connect_supply_net VDD -ports {iload_udn/vdd iload_ele/avdd iload_rnm/avdd}</code><br /><code>connect_supply_net VSS -ports {iload_udn/vss iload_ele/avss iload_rnm/avss}</code><br /><code>---------------------Supply Net Resolution-------------------</code><br /><code>//The multiple drivers are resolved on UPF side, there are multiple driver connected on UPF supply net:</code><br /><code>Supply Net Resolution:</code><br /><code>[100 NS]Driving Source:</code><br /><code>cds_amslps_psnconn.uVDD_1_11_DRV1, Voltage: 1.600000V, State FULL_ON</code><br /><code>cds_amslps_psnconn.uVDD_1_11_DRV2, Voltage: 0.000000V, State FULL_ON</code><br /><code>cds_amslps_psnconn.uVDD_1_11_DRV3, Voltage: 0.000000V, State OFF</code><br /><code>Resolved Net:</code><br /><code>top.VDD, Voltage: 1.600000V, State: FULL_ON</code></p>
<h4 id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example4:Libertymodel">Example 4: Liberty model</h4>

<p><code>---------------------HDL Design source code--------------</code><br /><code>### top.sv ###</code><br /><code>`timescale 1ns / 100ps</code><br /><br /><code>import EE_pkg::*;</code><br /><code>import CDS_MS_UPF::*;</code><br /><br /><code>module top ();</code><br /><code>drvr idrvr ();</code><br /><code>load iload ();</code><br /><code>endmodule</code><br /><br /><code>### test.scs ###</code><br /><code>simulator lang=spectre</code><br /><br /><code>subckt drvr avdd avss</code><br /><code>X0 (net1 0) vsource type=pwl wave=[0n 0.0 100n 0.0 101ns 1.8 300n 1.8 301n 1.5 500n 1.5 501n 0.0]</code><br /><code>X1 (avss 0) vsource dc=0.0</code><br /><code>R0 (net1 avdd) resistor r=0.001</code><br /><code>C0 (avdd avss) capacitor c=100f</code><br /><code>ends drvr</code><br /><br /><code>subckt load avdd avss</code><br /><code>R0 (avdd net1) resistor r=100k</code><br /><code>R1 (net1 avss) resistor r=100k</code><br /><code>R2 (avss 0) resistor r=10</code><br /><code>ends load</code><br /><br /><code>### amscf.scs ###</code><br /><code>*</code><br /><code>include &quot;test.scs&quot;</code><br /><br /><code>amsd {</code><br /><code>portmap subckt=drvr</code><br /><code>config cell=drvr use=spice</code><br /><code>portmap subckt=load</code><br /><code>config cell=load use=spice</code><br /><code>}</code><br /><code>---------------------Liberty Description-------------------</code><br /><code>cell (&quot;drvr&quot;) {</code><br /><code>area : 8546.44;</code><br /><code>dont_touch : true;</code><br /><code>dont_use : true;</code><br /><code>pad_cell : true;</code><br /><code>pg_pin (avss) {</code><br /><code>pg_type : &quot;primary_ground&quot;;</code><br /><code>voltage_name : &quot;VSS&quot;;</code><br /><code>direction : output;</code><br /><code>}</code><br /><code>pg_pin (avdd) {</code><br /><code>pg_type : &quot;primary_power&quot;;</code><br /><code>voltage_name : &quot;VDD&quot;;</code><br /><code>direction : output;</code><br /><code>}</code><br /><code>}</code><br /><code>cell (&quot;load&quot;) {</code><br /><code>area : 8546.44;</code><br /><code>dont_touch : true;</code><br /><code>dont_use : true;</code><br /><code>pad_cell : true;</code><br /><code>pg_pin (avss) {</code><br /><code>pg_type : &quot;primary_ground&quot;;</code><br /><code>voltage_name : &quot;VSS&quot;;</code><br /><code>}</code><br /><code>pg_pin (avdd) {</code><br /><code>pg_type : &quot;primary_power&quot;;</code><br /><code>voltage_name : &quot;VDD&quot;;</code><br /><code>}</code><br /><code>}</code><br /><code>---------------------Liberty Verbose Info------------------------</code><br /><code>Liberty Verbose Information</code><br /><code>load : test.lib:104</code><br /><code>&lt;PA&gt;: ./xcelium.d/AMSD/ams_spice_in/generated_skeleton_amscb.skl_vams:21</code><br /><code>Instances:</code><br /><code>top.iload</code><br /><code>&lt;E&gt; avss &lt;primary_ground&gt; : VSS1</code><br /><code>&lt;E&gt; avdd &lt;primary_power&gt; : VDD1</code><br /><br /><code>Liberty / HDL Matching Information</code><br /><code>No mismatch found between Liberty pins and corresponding Verilog ports.</code><br /><br /><code>drvr : test.lib:88</code><br /><code>&lt;PA&gt;: ./xcelium.d/AMSD/ams_spice_in/generated_skeleton_amscb.skl_vams:8</code><br /><code>Instances:</code><br /><code>top.idrvr</code><br /><code>&lt;E&gt; avss &lt;primary_ground&gt; : VSS</code><br /><code>&lt;E&gt; avdd &lt;primary_power&gt; : VDD</code><br /><br /><code>Liberty / HDL Matching Information</code><br /><code>No mismatch found between Liberty pins and corresponding Verilog ports.</code></p>
<h4 id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example5:iecardspecificationiecard">Example 5: ie card specification&#160;<span class="confluence-anchor-link" id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-iecard"></span></h4>

<p><code>---------------------UPF Description------------------------</code><br /><code>upf_version 2.0</code><br /><br /><code>set_design_top top</code><br /><code>set_scope</code><br /><br /><code>create_supply_net VDD</code><br /><code>create_supply_net VSS</code><br /><br /><code>create_supply_net VDD1</code><br /><code>create_supply_net VSS1</code><br /><br /><code>create_supply_set SSD -function {power VDD} -function {ground VSS}</code><br /><code>create_supply_set SS1 -function {power VDD1} -function {ground VSS1}</code><br /><br /><code>create_power_domain PDD -supply {primary SSD} -include_scope</code><br /><code>create_power_domain PD1 -supply {primary SS1} -elements {iload}</code></p>

<p><code>---------------------ie Card-------------------</code><br /><code>amsd {</code><br /><code>ie vsup=3.3</code><br /><code>ie vsup=1.8 net=top.VDD vthi=1.6 vtlo=0.5 state_threshold=1</code><br /><code>ie vsup=0.0 net=top.VSS vthi=0.0 state_threshold=1</code><br /><code>}</code></p>
<h4 id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example6:UserdefinedMS-UPFnettypeandvalueconversionExample6">Example 6: User defined MS-UPF nettype and value conversion&#160;<span class="confluence-anchor-link" id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-Example6"></span></h4>

<p><code>---------------------xrun options-------------------</code><br /><code>my_upf_package.sv</code><br /><code>my_UPF_*.svams</code><br /><code>top.sv</code><br /><code>-access rwc -timescale 1ns/100ps</code><br /><code>-rnm_dmsie -auto_config_svams_ie</code><br /><code>-rnm_info -ieinfo</code><br /><code>-lps_1801 top.upf -lps_ams_sim</code><br /><code>-lps_ams_connect_supply</code><br /><code>-lps_ams_supply_ie</code><br /><code>-lps_ams_supply_nettype myUPF_pkg::my_upf_supply</code><br /><code>-lps_ams_supply_vctfile my_upf_vct.upf</code><br /><code>-input probe.tcl -clean</code><br /><code>---------------------User defined MS-UPF nettype-------------------</code><br /><code>package myUPF_pkg;</code><br /><br /><code>typedef struct {</code><br /><code>real V;</code><br /><code>integer driverCnt;</code><br /><code>} my_upf_supply_struct;</code><br /><br /><code>function automatic my_upf_supply_struct resFunc(input my_upf_supply_struct drivers[]);</code><br /><code>my_upf_supply_struct ResolvedValue;</code><br /><code>int Count = 0;</code><br /><code>real Vol = 0.0;</code><br /><code>resFunc.V = `wrealZState;</code><br /><code>resFunc.driverCnt = 0;;</code><br /><code>foreach (drivers[i]) begin</code><br /><code>if (drivers[i].V === `wrealXState) begin</code><br /><code>++ Count;</code><br /><code>resFunc.V = `wrealXState;</code><br /><code>end</code><br /><code>else if (drivers[i].V !== `wrealZState) begin</code><br /><code>++ Count;</code><br /><code>Vol += drivers[i].V;</code><br /><code>end</code><br /><code>end</code><br /><code>if ((resFunc.V !== `wrealXState) &amp;&amp; (Count&gt;0)) begin</code><br /><code>resFunc.V = Vol/Count;</code><br /><code>resFunc.driverCnt = Count;</code><br /><code>end</code><br /><br /><code>endfunction</code><br /><br /><code>nettype my_upf_supply_struct my_upf_supply with resFunc;</code><br /><code>endpackage : myUPF_pkg</code><br /><code>---------------------User defined analog VCT--------------</code><br /><code># my_upf_vct.upf</code><br /><code>create_hdl2upf_vct my_H2UV -hdl_type {sv my_upf_supply.V} \</code><br /><code>-table { {===`wrealXState 0.0} {===`wrealZState 0.0} }</code><br /><code>create_hdl2upf_vct my_H2US -hdl_type {sv my_upf_supply.V} \</code><br /><code>-table { {===`wrealXState UNDETERMINED} {===`wrealZState OFF} {&gt;=0.0 FULL_ON}}</code><br /><code>create_upf2hdl_vct my_U2HV -hdl_type {sv my_upf_supply.V} \</code><br /><code>-table { {UNDETERMINED `wrealXState} {OFF `wrealZState} }</code></p>
<h5 id="EnablingAutomaticSupplyConnectioninDesignsUsingLibertyModelswithaDefaultVCTValue-RelatedTopics">Related Topics</h5><ul><li><a href="Automatic_Supply_Connections_in_Mixed_Signal_Designs_with_Liberty_Model.html">Automatic Supply Connections in Mixed‐Signal Designs with Liberty Model</a></li><li><a href="Enabling_Automatic_Supply_Connection_in_Designs_with_Higher_HDL_Connections.html">Enabling Automatic Supply Connection in Designs with Higher HDL Connections</a></li></ul>
                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Enabling_Automatic_Supply_Connection_in_Designs_with_Higher_HDL_Connections.html" id="prev" title="Enabling_Automatic_Supply_Connection_in_Designs_with_Higher_HDL_Connections">Enabling_Automatic_Supply_Conn ...</a></em></b><b><em><a href="Enabling_SystemVerilog_Interface_in_LP-MS_Designs.html" id="nex" title="Enabling_SystemVerilog_Interface_in_LP-MS_Designs">Enabling_SystemVerilog_Interfa ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>