
<html><head><title>Specifying DSPF and SPEF Stitching on Analog and Mixed-Signal Nets</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="shubh" />
<meta name="CreateDate" content="2023-03-01" />
<meta name="CreateTime" content="1677668912" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator and Xcelium Simulator with mixed-signal option that supports the Verilog-AMS,  VHDL-AMS, and SystemVerilog-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Specifying DSPF and SPEF Stitching on Analog and Mixed-Signal Nets" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="task" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Analog Mixed-Signal,Spectre AMS Designer," />
<meta name="prod_subfeature" content="DSPF, DSPF," />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="ams_dms_simug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-03-01" />
<meta name="ModifiedTime" content="1677668912" />
<meta name="NextFile" content="SPICE_Blocks_in_the_Middle_of_VHDL_Blocks.html" />
<meta name="Group" content="Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification," />
<meta name="PrevFile" content="SPICE-in-the-Middle.html" />
<meta name="c_product" content="Xcelium," />
<meta name="Product" content="Xcelium," />
<meta name="ProductFamily" content="Xcelium," />
<meta name="ProductVersion" content="22.09" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Specifying DSPF and SPEF Stitching on Analog and Mixed-Signal Nets" />
<meta name="Version" content="22.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2209" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.10.026" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="ams_dms_simugTOC.html">Contents</a></li><li><a class="prev" href="SPICE-in-the-Middle.html" title="SPICE-in-the-Middle">SPICE-in-the-Middle</a></li><li style="float: right;"><a class="viewPrint" href="ams_dms_simug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="SPICE_Blocks_in_the_Middle_of_VHDL_Blocks.html" title="SPICE_Blocks_in_the_Middle_of_VHDL_Blocks">SPICE_Blocks_in_the_Middle_of_ ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 22.09, September 2022</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <h1 style="margin: 4px 0 4px;"><span>Specifying DSPF and SPEF Stitching on Analog and Mixed-Signal Nets</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p>The parasitic RC network may be stitching onto an analog and mixed-signal net as it works in a pure SPICE netlist. When you change some blocks from Spice to Verilog in a post-layout design that is based on<span>&#160;</span>DSPF/SPEF&#160;stitching flow, the stitching engine in the analog solver tries to connect the instance pin of the RC network to the Verilog port. These blocks are redirected to connect the analog port of the connect modules (CM<span>&#160;</span>s), as shown in the figure.</p>

<p><strong>Figure 7-1&#160;</strong><span>&#160;</span><strong>RCs from SPEF are Expanded on Mixed-Signal Nets</strong></p>
<p align="left"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/475368263/475368264.png" data-linked-resource-container-id="475368263" data-linked-resource-container-version="2" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="chap4.11.1.2.png" data-linked-resource-id="475368264" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/475368263/475368264.png" width="640px" /></span></span></p>

<p>To correctly specify SPEF or DSPF stitching on a mixed-signal net in AMS-APS, perform the following steps:</p>
<ol><li>Set up the SPEF or DSPF file in the SPICE netlist, as follows:<br />.usim_opt spef= &quot;&lt;instance|subckt&gt; file&quot;</li><li>Set up the SDF file in the<code><span>&#160;</span>initial<span>&#160;</span></code>block or compile it and use the<code><span>&#160;</span>-SDF_Cmd_file<span>&#160;</span></code>option.</li><li>
<p>Set<code><span>&#160;</span>mode=split<span>&#160;</span></code>in the<code><span>&#160;</span>ie<span>&#160;</span></code>card, to keep the expanded RC net connection correct. For example:<br /><br /><code>amsd{<br /></code><code>ie vsup=1.8 txdel=100n vthi=0.9 rlo=1 rhi=1 mode=split<br /></code><code>portmap subckt=test_sim autobus=yes busdelim=&quot;[]&quot; interconnect=electrical<br /></code><code>config cell=test_sim use=spice<br /></code><code>}</code></p>

<p>If you need to stitch the SPEF to the Verilog-to-Verilog connection in the SPICE block, you must set<span>&#160;</span><code>interconnect=electrical</code>. This is because xmelab optimizes this node to logic discipline even if it lies in the SPICE block.</p>
</li><li>Set up the<code><span>&#160;</span>-amsspef<span>&#160;</span></code>option in the<code><span>&#160;</span>xrun<span>&#160;</span></code>arguments to control this feature, as shown below.<br /><code>xrun ./*.v \<br /></code><code>./config.scs \<br /></code><code>./cds_globals.vams \<br /></code><code>./top.vams \</code><code><br /></code><code>-input ./probe.tcl \<br /></code><code>-sdf_cmd_file ./command_sdf \<br /></code><code>-amsspef</code></li></ol>
<p>This feature is supported in AMS-APS and AMS-Spectre solvers.</p>

<p>The behavior of AMS-APS stitching is similar to standalone APS stitching. For example, the<code>&#160;*.spfrpt&#160;</code>file is dumped into the simulation directory.</p>
<h4 id="SpecifyingDSPFandSPEFStitchingonAnalogandMixedSignalNets-RelatedTopics">Related Topics</h4>
<ul><li><a href="SPICE-in-the-Middle.html">SPICE-in-the-Middle</a></li><li><a href="SPICE_Blocks_in_the_Middle_of_VHDL_Blocks.html">SPICE Blocks in the Middle of VHDL Blocks</a></li></ul>
                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="SPICE-in-the-Middle.html" id="prev" title="SPICE-in-the-Middle">SPICE-in-the-Middle</a></em></b><b><em><a href="SPICE_Blocks_in_the_Middle_of_VHDL_Blocks.html" id="nex" title="SPICE_Blocks_in_the_Middle_of_VHDL_Blocks">SPICE_Blocks_in_the_Middle_of_ ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>