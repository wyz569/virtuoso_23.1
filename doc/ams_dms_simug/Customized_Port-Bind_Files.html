
<html><head><title>Customized Port-Bind Files</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="shubh" />
<meta name="CreateDate" content="2023-03-01" />
<meta name="CreateTime" content="1677668969" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator and Xcelium Simulator with mixed-signal option that supports the Verilog-AMS,  VHDL-AMS, and SystemVerilog-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Customized Port-Bind Files" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="concept" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Analog Mixed-Signal,Spectre AMS Designer," />
<meta name="prod_subfeature" content="Binding,Binding," />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="ams_dms_simug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-03-01" />
<meta name="ModifiedTime" content="1677668969" />
<meta name="NextFile" content="Multiple_Power_Supplies_for_Designs.html" />
<meta name="Group" content="Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification," />
<meta name="PrevFile" content="Port_Bindings_between_Verilog_and_SPICE.html" />
<meta name="c_product" content="Xcelium," />
<meta name="Product" content="Xcelium," />
<meta name="ProductFamily" content="Xcelium," />
<meta name="ProductVersion" content="22.09" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Customized Port-Bind Files" />
<meta name="Version" content="22.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2209" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.10.026" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="ams_dms_simugTOC.html">Contents</a></li><li><a class="prev" href="Port_Bindings_between_Verilog_and_SPICE.html" title="Port_Bindings_between_Verilog_and_SPICE">Port_Bindings_between_Verilog_ ...</a></li><li style="float: right;"><a class="viewPrint" href="ams_dms_simug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Multiple_Power_Supplies_for_Designs.html" title="Multiple_Power_Supplies_for_Designs">Multiple_Power_Supplies_for_De ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 22.09, September 2022</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <h1 style="margin: 4px 0 4px;"><span>Customized Port-Bind Files</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p>A port-bind file contains information about how you want the SPICE subcircuit ports mapped to Verilog buses. You can specify customized bus element mappings as well as port direction. The general format for port bindings is as follows:</p>

<p><code><em>SPICEname</em><span>&#160;</span>: VerilogName [ dir=input|output|inout]</code></p>

<p>where<code><span>&#160;</span>SPICEname<span>&#160;</span></code>and<code><span>&#160;</span>VerilogName<span>&#160;</span></code>are identifiers that do not have to match. Each<code><span>&#160;</span>SPICEname<span>&#160;</span></code>corresponds to a node name or bus in the SPICE subcircuit definition. Each<code><span>&#160;</span>VerilogName<span>&#160;</span></code>corresponds to a wire name or bus in the Verilog module. The port direction specifier is optional.</p>

<p>For scalar nodes, the format is as follows:</p>

<p><code>node1 : NODE1</code></p>

<p>For a vector, the format is as follows:</p>

<p><code>{ myBus_0, myBus_1 } : myBUS[0:1]</code></p>

<p>You can specify a range of bus elements as follows:</p>

<p><code>{ busA[0]-busA[10] } : BusA[0:10]</code></p>

<p>You can specify a customized mapping of elements as follows:</p>

<p><code>{ busA[10]-busA[5], busA[0]-busA[4] } : busA[0:10]</code></p>

<p>You can specify a customized mapping of random elements as follows:</p>

<p><code>{ a_0, a_1, a_2, a_4, b, abc } : bus[0:5]</code></p>

<p>You might have specified a unary bus delimiter such as &amp; or # :</p>

<p><code>{ uBus&amp;0, uBus&amp;1, uBus&amp;2, vBus#3, vBus#4, vBus#5 } : bus[0:5]</code></p>

<p>The following default rules apply to any node or bus that you do not explicitly specify in the port-bind file:</p>
<ul><li>Port names match exactly (name-to-name), including casing</li></ul><ul><li>Bus delimiters are<code><span>&#160;</span>[]<span>&#160;</span></code>and<code><span>&#160;</span>&lt;&gt;</code></li></ul><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">These default rules are the same as those that apply when you use&#160;<code>autobus</code>.</div>
</div>
<h3 id="CustomizedPortBindFiles-CustomizedPort-BindFileExamples">Customized Port-Bind File Examples<span class="confluence-anchor-link conf-macro output-inline"><span>&#160;</span></span>&#160;</h3>

<p>Here is an example that shows how you can use a port-bind file to define port binding between Verilog and SPICE blocks in a very general way. Study the port-bind file format carefully to understand how you can create custom port bindings according to your connection requirements.</p>

<p>You might instantiate subcircuit<code><span>&#160;</span>analog_top<span>&#160;</span></code>in module<code><span>&#160;</span>top<span>&#160;</span></code>as follows:</p>

<p><code>module top (ext_clk, pll_clk);<br />input ext_clk, pll_clk;<br /><br />wire [0:1] itune;<br />wire res;<br /><br />analog_top xana_top(.in2(pll_clk),<br />.itune(itune),<br />.in1(ext_clk));</code></p>

<p><code>...<br />endmodule</code></p>

<p>Subcircuit<code><span>&#160;</span>analog_top<span>&#160;</span></code>(in<code><span>&#160;</span>analog_top.sp</code>) might look like this:</p>

<p><code>.subckt analog_to<br />p+ in1 itune[0] itune[1] in2<br />...<br />.ends analog_top</code></p>

<p>Your<code><span>&#160;</span>amsd<span>&#160;</span></code>block might contain the following:</p>

<p><code>include &quot;analog_top.sp&quot;<br />amsd{<br />&#160;&#160;&#160;&#160; portmap subckt=analog_top file=&quot;analog_top.pb&quot;<br />&#160;&#160;&#160;&#160; config cell=analog_top use=spice<br />&#160;&#160;&#160;&#160;}</code></p>

<p>If your port-bind file,<code><span>&#160;</span>analog_top.pb<span>&#160;</span></code>, contains the following:</p>

<p><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in1 : in2 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir=inout<br />{ itune[1], itune[0] } : itune[0:1] &#160;&#160;dir=inout<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in2 : in1 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir=inout</code></p>

<p>the elaborator derives the following information from these port bindings:</p>
<ol><li>Port in1 of SPICE subcircuit analog_top connects to the net in module top that connects to formal port in2 in instance xana_top of analog_top.<br />The elaborator connects net pll_clk to port in1 of SPICE subcircuit analog_top.</li><li>Port itune[1] of SPICE subcircuit analog_top connects to the net in module top that connects to formal port itune[0] in the instance xana_top of analog_top.<br />The elaborator connects net itune[0] to port itune[1] of SPICE subcircuit analog_top and follows the same logic to connect net itune[1] to port itune[0] of SPICE subcircuit analog_top.</li><li>Port<code><span>&#160;</span>in2<span>&#160;</span></code>of SPICE subcircuit<code><span>&#160;</span>analog_top<span>&#160;</span></code>connects to the net in the module<code><span>&#160;</span>top<span>&#160;</span></code>that connects to formal port<code><span>&#160;</span>in1<span>&#160;</span></code>in instance<code><span>&#160;</span>xana_top<span>&#160;</span></code>of<code><span>&#160;</span>analog_top.<br /></code>The elaborator connects net<code><span>&#160;</span>ext_clk<span>&#160;</span></code>to port<code><span>&#160;</span>in2<span>&#160;</span></code>of SPICE subcircuit<code><span>&#160;</span>analog_top.</code></li></ol>
<p>Here is another example:</p>
<div class="table-wrap"><table class="wrapped confluenceTable" style="text-align: left;"><colgroup><col /></colgroup><tbody style="text-align: left;"><tr style="text-align: left;"><td class="confluenceTd" style="text-align: left;"><p style="text-align: left;"><code class="java comments" style="text-align: left;">// mrcg.v -- Verilog top</code><br /><code class="java plain" style="text-align: left;">module mrcg (ext_clk, pll_clk);</code><br /><code class="java plain" style="text-align: left;">ANALOG_TOP xana_top(.Q_1(Q_1), .Q_2(Q_2), .IN2(pll_clk), .ITUNE(ITUNE), .IN1(ext_clk));</code><br /><code class="java plain" style="text-align: left;">endmodule</code><br />&#160;<br /><code class="java comments" style="text-align: left;">// analog_top.cir -- spice leaf</code><br /><code class="java plain" style="text-align: left;">.subckt analog_top q_1 q_2 IN1 itune_0 itune_1 in2</code><br /><code class="java plain" style="text-align: left;">.ends analog_top</code><br />&#160;<br /><code class="java comments" style="text-align: left;">// analog_top.pb -- port-bind file</code><br /><code class="java spaces" style="text-align: left;">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</code><code class="java plain" style="text-align: left;">q_1 : Q_1 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir=input</code><br /><code class="java spaces" style="text-align: left;">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</code><code class="java plain" style="text-align: left;">q_2 : Q_2 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir=input</code><br /><code class="java spaces" style="text-align: left;">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</code><code class="java plain" style="text-align: left;">IN1 : in1 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir=inout</code><br /><code class="java plain" style="text-align: left;">{ itune[</code><code class="java value" style="text-align: left;">1</code><code class="java plain" style="text-align: left;">], itune[</code><code class="java value" style="text-align: left;">0</code><code class="java plain" style="text-align: left;">] } : ITUNE[</code><code class="java value" style="text-align: left;">0</code><code class="java plain" style="text-align: left;">:</code><code class="java value" style="text-align: left;">1</code><code class="java plain" style="text-align: left;">] &#160;&#160;dir=input</code><br /><code class="java spaces" style="text-align: left;">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</code><code class="java plain" style="text-align: left;">in2 : IN2 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir=inout</code><br />&#160;<br /><code class="java comments" style="text-align: left;">// amsd.scs</code><br /><code class="java plain" style="text-align: left;">include<span>&#160;</span></code><code class="java string" style="text-align: left;">&quot;analog_top.cir&quot;</code><br /><code class="java plain" style="text-align: left;">amsd{</code><br /><code class="java spaces" style="text-align: left;">&#160;&#160;&#160;&#160;</code><code class="java plain" style="text-align: left;">portmap subckt=analog_top file=</code><code class="java string" style="text-align: left;">&quot;analog_top.pb&quot;</code><br /><code class="java spaces" style="text-align: left;">&#160;&#160;&#160;&#160;</code><code class="java plain" style="text-align: left;">config cell=ANALOG_TOP use=spice</code><br /><code class="java spaces" style="text-align: left;">&#160;&#160;&#160;&#160;</code><code class="java plain" style="text-align: left;">}</code></p>
</td>
</tr>
</tbody></table></div>
<h3 id="CustomizedPortBindFiles-RulesThatApplytoCustomizedPort-BindFiles">Rules That Apply to Customized Port-Bind Files<span class="confluence-anchor-link conf-macro output-inline"><span>&#160;</span></span>&#160;</h3>

<p><span class="confluence-anchor-link" id="CustomizedPortBindFiles-PortBindingRules"></span>Here are some rules to remember when using port-bind files:</p>
<ul><li>The location where the elaborator generates the port-bind files is<span style=""><span>&#160;</span><code>runDir</code>/portmap_files&#160;</span>where<span>&#160;</span><code>runDir</code>&#160;is the directory where you run<span>&#160;</span><code>xrun.</code></li></ul><ul><li>If a port-bind file for a certain subcircuit already exists in the default location (mentioned in the previous bullet), the elaborator will not overwrite the file and it will not generate a port-bind file for this case.</li></ul><ul><li>The elaborator will never use a port-bind file unless you specify it explicitly in the AMS control file using&#160;<code><span>&#160;</span>portmap &#8230; file<span>&#160;</span></code>. The software will issue a message that clearly indicates whether the elaborator used a port-bind file.</li></ul><ul><li>The port-bind file you specify (using<span>&#160;</span><code>portmap &#8230; file<span>&#160;</span></code>) must have a valid UNIX path, either absolute or relative to the directory where you run<code><span>&#160;</span>xrun.</code></li></ul>
<p>Any mappings you specify in a port-bind file or in a Verilog module that defines port mappings take precedence over any options you specify explicitly using other options such as&#160;<code>autobus</code><span>&#160;</span>,&#160;<code>casemap</code><span>&#160;</span>, and<span>&#160;</span><code>busdelim</code>.</p>
<h5 id="CustomizedPortBindFiles-RelatedTopics">Related Topics</h5><ul><li><a href="portmap.html#portmap-autobus">autobus</a></li><li><a href="portmap.html#portmap-casemap">casemap</a><span>&#160;</span></li><li><a href="portmap.html#portmap-busdelim">busdelim</a><span>&#160;</span></li><li><a href="Port_Bindings_between_Verilog_and_SPICE.html">Port Bindings between Verilog and SPICE</a></li></ul>
                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Port_Bindings_between_Verilog_and_SPICE.html" id="prev" title="Port_Bindings_between_Verilog_and_SPICE">Port_Bindings_between_Verilog_ ...</a></em></b><b><em><a href="Multiple_Power_Supplies_for_Designs.html" id="nex" title="Multiple_Power_Supplies_for_Designs">Multiple_Power_Supplies_for_De ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>