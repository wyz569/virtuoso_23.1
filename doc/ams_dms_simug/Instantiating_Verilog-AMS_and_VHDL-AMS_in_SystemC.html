
<html><head><title>Instantiating Verilog-AMS and VHDL-AMS in SystemC</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="jaini" />
<meta name="CreateDate" content="2023-03-01" />
<meta name="CreateTime" content="1677669067" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator and Xcelium Simulator with mixed-signal option that supports the Verilog-AMS,  VHDL-AMS, and SystemVerilog-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Instantiating Verilog-AMS and VHDL-AMS in SystemC" />
<meta name="Keywords" content="Instantiating VAMS in SystemC,Instantiating VHDL-AMS in SystemC" />
<meta name="topic_type" content="concept" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Digital Mixed-Signal," />
<meta name="prod_subfeature" content="SystemC Integration," />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="ams_dms_simug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-03-01" />
<meta name="ModifiedTime" content="1677669067" />
<meta name="NextFile" content="The_xmshell_Command.html" />
<meta name="Group" content="Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification," />
<meta name="PrevFile" content="SystemC_Integration_for_Mixed-Signal_Verification.html" />
<meta name="c_product" content="Xcelium," />
<meta name="Product" content="Xcelium," />
<meta name="ProductFamily" content="Xcelium," />
<meta name="ProductVersion" content="22.09" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Instantiating Verilog-AMS and VHDL-AMS in SystemC" />
<meta name="Version" content="22.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2209" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.10.026" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="ams_dms_simugTOC.html">Contents</a></li><li><a class="prev" href="SystemC_Integration_for_Mixed-Signal_Verification.html" title="SystemC_Integration_for_Mixed-Signal_Verification">SystemC_Integration_for_Mixed- ...</a></li><li style="float: right;"><a class="viewPrint" href="ams_dms_simug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="The_xmshell_Command.html" title="The_xmshell_Command">The_xmshell_Command</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 22.09, September 2022</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <h1 style="margin: 4px 0 4px;"><span>Instantiating Verilog-AMS and VHDL-AMS in SystemC</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p><span class="confluence-anchor-link" id="InstantiatingVerilogAMSandVHDLAMSinSystemC-SystemC"></span><span class="confluence-anchor-link" id="InstantiatingVerilogAMSandVHDLAMSinSystemC-1075542"></span>SystemC is a digital-only language. For that reason, the Xcelium simulator with mixed-signal option&#160;uses Verilog-AMS wrappers with purely digital ports and SystemC shells to instantiate Verilog-AMS and VHDL-AMS modules within SystemC. Verilog-AMS wrappers are required only if the Verilog-AMS and VHDL-AMS modules contain a mix of analog and digital ports. Instantiations of Verilog-AMS and VHDL-AMS modules (which have purely digital ports already) do not require wrappers and use only SystemC shells. To translate analog signals to and from the digital signals of the SystemC language, Xcelium simulator with mixed-signal option&#160;uses connect modules and interface modules.</p>

<p>When using SystemC models with the Xcelium simulator with mixed-signal option, the following restrictions apply:</p>
<ul><li>You must not instantiate a Verilog-AMS module that instantiates a VHDL-AMS module</li></ul><ul><li>You must not instantiate a VHDL-AMS module that instantiates a Verilog-AMS module</li></ul>
<p>See the following topics for more information:</p>
<ul><li><a href="#InstantiatingVerilogAMSandVHDLAMSinSystemC-1075563">Preparing and Using Wrappers and Shells</a></li></ul><ul><li><a href="#InstantiatingVerilogAMSandVHDLAMSinSystemC-1075679">Preparing Interface Modules</a></li></ul><ul><li><a href="#InstantiatingVerilogAMSandVHDLAMSinSystemC-1075856">Guidelines for Using AMS Modules in SystemC Models</a></li></ul><h2 id="InstantiatingVerilogAMSandVHDLAMSinSystemC-1075563PreparingandUsingWrappersandShells"><span class="confluence-anchor-link" id="InstantiatingVerilogAMSandVHDLAMSinSystemC-1075563"></span>Preparing and Using Wrappers and Shells</h2>

<p>As the following diagram illustrates, the Xcelium simulator with mixed-signal option&#160;uses both a Verilog-AMS wrapper with purely digital ports and a SystemC shell for Verilog-AMS modules that are instantiated in SystemC models. The Verilog-AMS wrapper has only digital ports, so analog signals in the Verilog-AMS module instantiated within it must be converted to digital signals by connect or interface modules. The connect or interface modules are instantiated in the Verilog-AMS wrapper. The SystemC shell provides the mechanism for instantiating the Verilog-AMS wrapper in the SystemC model.</p>
<p align="left"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/475368606/475368607.png" data-linked-resource-container-id="475368606" data-linked-resource-container-version="1" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="systemc.25.1.1.png" data-linked-resource-id="475368607" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/475368606/475368607.png" width="640px" /></span></p>

<p>The hierarchy of shells and wrappers for instantiating a VHDL-AMS module (not illustrated here) parallels that for Verilog-AMS.</p>

<p>You can create the Verilog-AMS wrapper and the SystemC shell using the&#160;<code><a href="The_xmshell_Command.html">xmshell</a></code>&#160;command.</p>

<p>The wrapper generated by the&#160;<code>xmshell</code>&#160;command is an ordinary Verilog-AMS module (but with purely digital ports), which appears in scopes and in hierarchical names. Except when the port of the imported module is analog, each port of the wrapper has the same direction as the corresponding port of the imported Verilog-AMS or VHDL-AMS module. When the port of the imported module is analog, the port of the wrapper always has the direction&#160;<code>inout.</code>&#160;This practice has the advantage of better supporting driver-receiver segregation, but the disadvantage of allowing only bidirectional connect modules to connect to the port of the wrapper.</p>
<h2 id="InstantiatingVerilogAMSandVHDLAMSinSystemC-1075679PreparingInterfaceModules"><span class="confluence-anchor-link" id="InstantiatingVerilogAMSandVHDLAMSinSystemC-1075679"></span>Preparing Interface Modules</h2>

<p>Interface modules are custom-designed modules used to establish the digital-to-analog and analog-to-digital data communication required to connect Verilog-AMS or VHDL-AMS ports to SystemC nets. Interface modules have these characteristics:</p>
<ul><li>Each interface module can be declared either as a&#160;<code>module</code>&#160;or a&#160;<code>connectmodule</code>. The latter declaration creates a true connect module capable of driver-receiver segregation. The former creates a more flexible module, but one that is incapable of driver-receiver segregation.</li></ul><ul><li>Interface modules must have two ports, one declared as analog and the other as non-analog. The analog port can have any kind of scalar or vector discipline. The non-analog port can have any kind of discrete discipline.</li></ul><ul><li>Interface modules can use any kind of analog to non-analog and non-analog to analog conversion logic.</li></ul>
<p>If a connect module provides the characteristics you need, you can take advantage of the support that connect modules supply for driver-receiver segregation. Like interface modules, you specify connect modules on the&#160;<code>xmshell</code>&#160;command using the&#160;<code>-analogim</code>&#160;option.</p>

<p>You can only use connect modules, however, if the port of the imported module and the net of the SystemC model are compatible. The compatible port and net values are listed in the same row of the following table.</p>
<div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col /><col /><col /><col /></colgroup><tbody><tr><th class="confluenceTh">
<p>SystemC Net</p>
</th><th class="confluenceTh">
<p>Description</p>
</th><th class="confluenceTh">
<p>VerilogEquivalent</p>
</th><th class="confluenceTh">
<p>Verilog-AMS, VHDL-AMS port</p>
</th></tr>
<tr><td class="confluenceTd">
<p>bool, sc_bit</p>
</td>
<td class="confluenceTd">
<p>2-state Boolean</p>
</td>
<td class="confluenceTd">
<p>logic wire</p>
</td>
<td class="confluenceTd">
<p>scalar analog</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>sc_logic</p>
</td>
<td class="confluenceTd">
<p>4-state logic</p>
</td>
<td class="confluenceTd">
<p>logic wire</p>
</td>
<td class="confluenceTd">
<p>scalar analog</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>sc_bv&lt;W&gt;</p>
</td>
<td class="confluenceTd">
<p>vector of 2-state</p>
</td>
<td class="confluenceTd">
<p>logic [W-1 : 0]</p>
</td>
<td class="confluenceTd">
<p>analog [W-1 : 0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>sc_lv&lt;W&gt;</p>
</td>
<td class="confluenceTd">
<p>vector of 4-state logic</p>
</td>
<td class="confluenceTd">
<p>logic [W-1 : 0]</p>
</td>
<td class="confluenceTd">
<p>analog [W-1 : 0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>sc_int&lt;W&gt;</p>
</td>
<td class="confluenceTd">
<p>&lt;W&gt; bit signed integer</p>
</td>
<td class="confluenceTd">
<p>logic [W-1 : 0]</p>
</td>
<td class="confluenceTd">
<p>analog [W-1 : 0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>sc_uint&lt;W&gt;</p>
</td>
<td class="confluenceTd">
<p>&lt;W&gt; bit unsigned integer</p>
</td>
<td class="confluenceTd">
<p>logic [W-1 : 0]</p>
</td>
<td class="confluenceTd">
<p>analog [W-1 : 0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>char</p>
</td>
<td class="confluenceTd">
<p>character/8-bit signed int</p>
</td>
<td class="confluenceTd">
<p>logic [7:0]</p>
</td>
<td class="confluenceTd">
<p>analog [7 : 0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>unsigned char</p>
</td>
<td class="confluenceTd">
<p>character/8-bit unsignedint</p>
</td>
<td class="confluenceTd">
<p>logic [7:0]</p>
</td>
<td class="confluenceTd">
<p>analog [7:0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>short</p>
</td>
<td class="confluenceTd">
<p>16-bit signed integer</p>
</td>
<td class="confluenceTd">
<p>logic [15:0]</p>
</td>
<td class="confluenceTd">
<p>analog [15:0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>unsigned short</p>
</td>
<td class="confluenceTd">
<p>16-bit unsigned integer</p>
</td>
<td class="confluenceTd">
<p>logic [15:0]</p>
</td>
<td class="confluenceTd">
<p>analog [15:0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>sc_fixed&lt;W,I,Q,O,N&gt;</p>
</td>
<td class="confluenceTd">
<p>templated signed fixedpoint</p>
</td>
<td class="confluenceTd">
<p>logic [W-1 : 0]</p>
</td>
<td class="confluenceTd">
<p>analog [W-1 : 0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>sc_unfixed&lt;W,I,Q,O,N&gt;</p>
</td>
<td class="confluenceTd">
<p>templated unsignedfixed point</p>
</td>
<td class="confluenceTd">
<p>logic [W-1 : 0]</p>
</td>
<td class="confluenceTd">
<p>analog [W-1 : 0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>int , long</p>
</td>
<td class="confluenceTd">
<p>32 bit integer</p>
</td>
<td class="confluenceTd">
<p>logic [31:0]</p>
</td>
<td class="confluenceTd">
<p>analog [31:0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>unsigned int, unsigned long</p>
</td>
<td class="confluenceTd">
<p>32-bit unsigned integer</p>
</td>
<td class="confluenceTd">
<p>logic [31:0]</p>
</td>
<td class="confluenceTd">
<p>analog [31:0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>long long</p>
</td>
<td class="confluenceTd">
<p>64-bit signed integer</p>
</td>
<td class="confluenceTd">
<p>logic [63:0]</p>
</td>
<td class="confluenceTd">
<p>analog [63:0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>unsigned long long</p>
</td>
<td class="confluenceTd">
<p>64-bit unsigned integer</p>
</td>
<td class="confluenceTd">
<p>logic [63:0]</p>
</td>
<td class="confluenceTd">
<p>analog [63:0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>double</p>
</td>
<td class="confluenceTd">
<p>real data type</p>
</td>
<td class="confluenceTd">
<p>logic [63:0]</p>
</td>
<td class="confluenceTd">
<p>analog [63:0]</p>
</td>
</tr>
<tr><td class="confluenceTd">
<p>float</p>
</td>
<td class="confluenceTd">
<p>real data type</p>
</td>
<td class="confluenceTd">
<p>logic [63:0]</p>
</td>
<td class="confluenceTd">
<p>analog [63:0]</p>
</td>
</tr>
</tbody></table></div>

<p>If you need to connect combinations other than those in the table, an interface module gives you more flexibility.</p>
<h3 id="InstantiatingVerilogAMSandVHDLAMSinSystemC-Example:InterfaceModuleforConnectingSystemCDoubletoVerilog-AMSElectrical">Example: Interface Module for Connecting SystemC Double to Verilog-AMS Electrical</h3>

<p>This example assumes that you need to instantiate a Verilog-AMS module in a SystemC model and that the&#160;<code>electrical</code>&#160;port of the Verilog-AMS module is to be connected to a real&#160;<code>double</code>&#160;signal in the SystemC model. The lack of support for&#160;<code>wreal</code>&#160;and 64-bit logic wires in connect modules means that this example requires an interface module.</p>

<p>The following interface module is one possible solution. This module converts a 64-bit vector logic signal (<code>lv</code>) into an electrical signal (<code>ev</code>).</p>

<p><code>`include &quot;discipline.vams&quot;<br />`include &quot;constants.vams&quot;</code></p>

<p><code>module LV2EV_64 (lv, ev);</code></p>

<p><code>&#160;&#160;&#160;&#160;inout&#160;&#160;&#160;&#160; [63:0] lv;<br />&#160;&#160;&#160;&#160;logic&#160;&#160;&#160;&#160; [63:0] lv;<br />&#160;&#160;&#160;&#160;inout&#160;&#160;&#160;&#160;&#160;&#160;&#160;ev;<br />&#160;&#160;&#160;&#160;electrical&#160;&#160;ev;</code></p>

<p><code>&#160;&#160;&#160;&#160;real&#160;&#160;&#160;&#160;r;</code></p>

<p><code>&#160;&#160;&#160;&#160;always @(lv)<br />&#160;&#160;&#160;&#160;begin<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;r = $bitstoreal (lv);<br />&#160;&#160;&#160;&#160;end</code></p>

<p><code>&#160;&#160;&#160;&#160;analog<br />&#160;&#160;&#160;&#160;begin<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;V (ev) &lt;+ transition (r, 1n, 1n, 1n);</code></p>

<p><code>&#160;&#160;&#160;&#160;end</code></p>

<p><code>endmodule</code></p>

<p>To use this interface module, you use an&#160;<code>xmshell</code>&#160;command such as the following</p>

<p><code>xmshell -ams -mess -import verilog -into systemc -sctype p1:double<br />&#160;&#160;&#160;&#160;&#160;-analogim p1:work.LV2EV_64 lib.vlogams_child</code></p>

<p>This command creates a Verilog-AMS wrapper with purely digital ports called&#160;<code>vlogams_child_NCSCAMS</code>&#160;and a SystemC shell called&#160;<code>vlogams_child_NCSCAMS</code>, and uses these to connect the electrical port and the double signal.</p>
<h2 id="InstantiatingVerilogAMSandVHDLAMSinSystemC-1075856GuidelinesforUsingAMSModulesinSystemCModels"><span class="confluence-anchor-link" id="InstantiatingVerilogAMSandVHDLAMSinSystemC-1075856"></span>Guidelines for Using AMS Modules in SystemC Models</h2>

<p>The following guidelines apply when using SystemC models:</p>
<ul><li>SystemC models do not fully support automatically-inserted connect modules. The elaborator does not support using an automatically-inserted connect module when used between a Verilog-AMS or VHDL-AMS module and a digital net that runs all the way through the hierarchy into the SystemC level. The elaborator does support manually inserted connect modules in this situation, but then driver-receiver segregation does not occur and the connect modules are handled as ordinary modules. If the digital net does not reach into the SystemC level, both manually and automatically inserted connect modules are fully supported.</li></ul><ul><li>SystemC models do not support&#160;<span style=""><a class="message-url" href="../verilogamsref/chap4.html#wreal">wreal</a>&#160;</span>values in imported Verilog or Verilog-AMS modules. The&#160;<code>xmshell</code>&#160;program does not allow you to import Verilog or Verilog-AMS modules that use&#160;<code>wreal</code>&#160;ports. This limitation precludes connecting SystemC double values with Verilog or Verilog-AMS electrical or&#160;<code>wreal</code>&#160;values.</li></ul><ul><li>SystemC models do not support passing parameters to interface modules. No means is provided in the&#160;<code>xmshell</code>&#160;program to pass parameters to interface modules.</li></ul><ul><li>SystemC models offer limited compatibility checking. The&#160;<code>xmshell</code>&#160;program performs only limited checking on the compatibility of interface module ports and imported module ports. The&#160;<code>xmshell</code>&#160;program does not check data type or discipline compatibility.</li></ul><ul><li>Discipline resolution results are not available to the&#160;<code>xmshell</code>&#160;program. Ports declared aa&#160;<code>wire</code>&#160;in imported modules can resolve to either continuous or discrete after discipline resolution. The&#160;<code>xmshell</code>&#160;program, however, is used prior to discipline resolution and so the ultimate discipline of ports declared as&#160;<code>wire</code>&#160;is unknown. The&#160;<code>xmshell</code>&#160;program assumes that a wire is non-analog and connects the non-analog port of the interface module to it. This choice might, or might not, be correct.</li></ul><h5 id="InstantiatingVerilogAMSandVHDLAMSinSystemC-RelatedTopic">Related Topic</h5><ul><li><a href="The_xmshell_Command.html">The xmshell Command</a></li></ul>
                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="SystemC_Integration_for_Mixed-Signal_Verification.html" id="prev" title="SystemC_Integration_for_Mixed-Signal_Verification">SystemC_Integration_for_Mixed- ...</a></em></b><b><em><a href="The_xmshell_Command.html" id="nex" title="The_xmshell_Command">The_xmshell_Command</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>