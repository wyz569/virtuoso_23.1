
<html><head><title>Appendix D: Profiler for Performance Analysis</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="jaini" />
<meta name="CreateDate" content="2023-03-01" />
<meta name="CreateTime" content="1677669112" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator and Xcelium Simulator with mixed-signal option that supports the Verilog-AMS,  VHDL-AMS, and SystemVerilog-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Appendix D: Profiler for Performance Analysis" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="concept" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Analog Mixed-Signal,Digital Mixed-Signal,Analog Mixed-Signal,Digital Mixed-Signal," />
<meta name="prod_subfeature" content="Performance, Performance,Profiler, Profiler," />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="ams_dms_simug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-03-01" />
<meta name="ModifiedTime" content="1677669112" />
<meta name="NextFile" content="Appendix_E__Migration_of_prop.cfg_file_to_an_amsd_Block.html" />
<meta name="Group" content="Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification," />
<meta name="PrevFile" content="Using_spectre_encrypt_for_Source_Protection.html" />
<meta name="c_product" content="Xcelium," />
<meta name="Product" content="Xcelium," />
<meta name="ProductFamily" content="Xcelium," />
<meta name="ProductVersion" content="22.09" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Appendix D: Profiler for Performance Analysis" />
<meta name="Version" content="22.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2209" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.10.026" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="ams_dms_simugTOC.html">Contents</a></li><li><a class="prev" href="Using_spectre_encrypt_for_Source_Protection.html" title="Using_spectre_encrypt_for_Source_Protection">Using_spectre_encrypt_for_Sour ...</a></li><li style="float: right;"><a class="viewPrint" href="ams_dms_simug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Appendix_E__Migration_of_prop.cfg_file_to_an_amsd_Block.html" title="Appendix_E__Migration_of_prop.cfg_file_to_an_amsd_Block">Appendix_E__Migration_of_prop. ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 22.09, September 2022</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <h1 style="margin: 4px 0 4px;"><span>Appendix D: Profiler for Performance Analysis</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p><span class="confluence-anchor-link" id="AppendixD:ProfilerforPerformanceAnalysis-1035250"></span>Profiler is an Xcelium tool that measures where CPU time is spent during simulation. The profiler generates a run-time profile file (<code>xmprof.out</code>) that contains simulation run-time information that is useful for finding performance bottlenecks and for tuning a design description for better simulation performance. This i<span style="letter-spacing: 0.0px;">nformation can be used to modify your designs for better simulation.</span></p>

<p>You can invoke the profiler using the <code>-profile</code>&#160;option with <code>xrun</code>. When the simulator exits, the profiler writes the profile to the&#160;<em>xmprof.out</em> file&#160;in the current or run directories.</p>

<p>Each profile begins with a header that provides general information. The information contained in the header can reveal performance problems such as insufficient physical memory for the size of the simulation, or low CPU utilization due to a busy machine or waiting for I/O.</p>

<p>After the header, the profile is divided into three main sections:<span style=""> Mixed-signal simulation summary</span>,<span style=""> Digital Simulation Profile Results</span>, and<span style=""> Analog Simulation Profile Results.</span> The tables in those sections share the following column headers:</p>
<div class="table-wrap"><table bgcolor="#FFFFFF" cellpadding="4" cellspacing="0" class="wrapped confluenceTable" style="width: 648.0px;"><colgroup><col /><col /></colgroup><tbody><tr><td class="confluenceTd" valign="top" width="120">
<p><code><span style="">%hits </span></code></p>
</td>
<td class="confluenceTd" valign="top" width="528">
<p>The percentage of the total hits detected in the activity</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code><span style="">#hits </span></code></p>
</td>
<td class="confluenceTd" valign="top">
<p>The raw number of hits detected in the activity</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code><span style="">%cost </span></code></p>
</td>
<td class="confluenceTd" valign="top">
<p>The percentage of simulator time-steps required to service the analog operator or expression.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code><span style="">domain </span></code></p>
</td>
<td class="confluenceTd" valign="top">
<p>The solver, either analog or digital</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code><span style="">#inst </span></code></p>
</td>
<td class="confluenceTd" valign="top">
<p>The number of instances</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code><span style="">name </span></code></p>
</td>
<td class="confluenceTd" valign="top">
<p>The name or description of the activity</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code><span style="">type </span></code></p>
</td>
<td class="confluenceTd" valign="top">
<p>One of the following types: <code>dVar</code> (a digital variable that causes a digital to analog event), <code>cross </code>(an @cross event), <code>filter</code> (a transition)</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code><span style="">instance </span></code></p>
</td>
<td class="confluenceTd" valign="top">
<p>The full hierarchical name of an instance and the line number where it is defined</p>
</td>
</tr>
</tbody></table></div>

<p><br /></p>

<p>The following are some examples of the simulation summary of mixed-signal, digital, and analog designs.</p>
<h3 id="AppendixD:ProfilerforPerformanceAnalysis-Mixed-SignalSimulationSummary">Mixed-Signal Simulation Summary</h3>

<p>The mixed-signal simulation summary shows how simulation time divides between the analog solver and the digital solver. For example, the following report shows that 97% of the hits occurred in the analog solver.</p>

<p><code> ------------------------------------------------------------<br />Mixed-signal simulation summary (1766 hits total)<br />------------------------------------------------------------ </code></p>

<p><code> %hits #hits domain<br />&#160;97.0  1713 Analog<br />&#160;&#160;3.0    53 Digital<br />------------------------------------------------------------ </code></p>
<h3 id="AppendixD:ProfilerforPerformanceAnalysis-DigitalSimulationProfileResults">Digital Simulation Profile Results</h3>

<p>The digital simulation profile results section summarizes information for the digital solver in three different ways:<em><span style=""> Stream Counts</span>,<span style=""> Most Active Modules (behavioral)</span></em>, and<span style=""><em> Stream Type Summary Counts</em>.</span>&#160;</p>
<h4 id="AppendixD:ProfilerforPerformanceAnalysis-StreamCounts">Stream Counts</h4>

<p>The<em><span style=""> Stream Counts </span></em>section provides information about time spent in individual generated code streams. These code streams correspond to specific HDL source constructs. They include</p>
<ul><li><code> always</code>&#160;blocks</li></ul><ul><li><code> initial</code>&#160;blocks</li></ul><ul><li>Continuous assignments</li></ul><ul><li>Tasks and functions</li></ul><ul><li>Non-blocking assignments</li></ul><ul><li>Quasi-continuous assignments</li></ul><ul><li>Parallel block sub-processes (statements inside fork/join)</li></ul><ul><li>Logic primitives for gates and UDPs (because logic primitives share the same code between different instances, the profiler cannot indicate which gate instances are taking up the most time)</li></ul>
<p>The beginning of the<em><span style=""> Stream Counts </span></em>section is the first place to look for inefficiency. If a few streams are taking up most of the simulation time, simulation cannot be sped up significantly without reducing the time in those streams.</p>

<p>The following is an example of a<em><span style=""> Stream Counts </span></em>section.</p>

<p><code> ------------------------------------------------------------<br />Stream Counts (53 hits total)<br />------------------------------------------------------------ </code></p>

<p><code> %hits #hits  #inst  name<br /> 28.3&#160; &#160; &#160;15 [&#160; &#160;] Library function minnow (time callbacks)<br /> 24.5&#160; &#160; &#160;13 [&#160; &#160;] tcl_functions<br /> 15.1&#160; &#160; &#160; 8 [&#160; &#160;] Method SSS_KM_CL2TA (method)<br /> 15.1&#160; &#160; &#160; 8 [&#160; &#160;] outside engine<br />  5.7&#160; &#160; &#160; &#160;3 [&#160; &#160;] Method SSS_KM_FINDRFT (method)<br />  3.8&#160; &#160; &#160; &#160;2 [&#160; 1] Always stmt (file: /net/mach111/cds/ams/ldv51/tools/affirma_ams/etc/connect_lib/elect2logic.v, line: 69 in connectLib.elect2logic&#160; &#160; [module])<br />  3.8&#160; &#160; &#160; &#160;2 [&#160; &#160;] Library function rtl_analog_demand<br />  1.9&#160; &#160; &#160; &#160;1 [&#160; &#160;] Method SSS_MT_SA_PROCESS (method)<br />  1.9&#160; &#160; &#160; &#160;1 [&#160; &#160;] ssslib snare support </code></p>

<p>The example<span style="">&#160;of the <em>Stream Counts </em></span>section shown above contains a category called <code>outside engine</code>. This category, and another called <code>engine support</code>, are catch-all categories for activities that cannot be otherwise categorized.</p>
<h4 id="AppendixD:ProfilerforPerformanceAnalysis-MostActiveModules">Most Active Modules</h4>

<p>The<em><span style=""> Most Active Modules </span></em>section of the profile summarizes the stream counts by module. For each module listed, the profile lists the sum of the counts in all of the streams.</p>

<p>The following example shows a<em><span style=""> Most Active Modules </span></em>section.</p>

<p><code> ------------------------------------------------------------<br />Most Active Modules (behavioral)<br />------------------------------------------------------------ </code></p>

<p><code> %hits #hits  #inst  name<br />&#160;&#160;3.8&#160;&#160;&#160;&#160;&#160;2 [&#160; 1] connectLib.elect2logic:module (file: /net/mach111/cds/ams/ldv51/tools/affirma_ams/etc/connect_lib/elect2logic.v line: 60) </code></p>
<h4 id="AppendixD:ProfilerforPerformanceAnalysis-StreamTypeSummaryCounts">Stream Type Summary Counts</h4>

<p>The<em><span style=""> Stream Type Summary Counts </span></em>section summarizes the stream counts by the type of stream or other activity. For example, there might be a total for logic primitives, timing checks,&#160;<code>always</code>&#160;or <code>initial</code>&#160;statements, non-blocking assignments, continuous assignments, and so on.</p>

<p>The summary makes it easier to identify widespread inefficiencies in the simulation. For example, large amounts of time spent on probing, file I/O, and<a href="Glossary.html#Glossary-1035591"> PLI </a>show up most clearly in this section.</p>

<p>The following example shows a<em><span style=""> Stream Type Summary Counts </span></em>section:</p>

<p><code> ------------------------------------------------------------<br />Stream Type Summary Counts (53 hits total)<br />------------------------------------------------------------ </code></p>

<p><code> %hits #hits  #inst  name<br /> 32.1&#160; &#160; &#160;17 [&#160; &#160;] System tasks/functions or library functions<br /> 24.5&#160; &#160; &#160;13 [&#160; &#160;] VCD/SHM variable dumping<br /> 22.6&#160; &#160; &#160;12 [&#160; &#160;] Standard methods (mostly fanout propagation)<br /> 15.1&#160; &#160; &#160; 8 [&#160; &#160;] Outside engine<br />  3.8&#160; &#160; &#160; &#160;2 [&#160; 3] Always statements<br />  1.9&#160; &#160; &#160; &#160;1 [&#160; &#160;] Support for VPI callbacks (or UI) </code></p>
<h3 id="AppendixD:ProfilerforPerformanceAnalysis-AnalogSimulationProfileResults">Analog Simulation Profile Results</h3>

<p>The<em><span style=""> Events and Operators </span></em>section of the<em><span style=""> Analog Simulation Profile Results </span></em>reports performance measurements for analog constructs, including, for Verilog<span style=""><sup>&#174;</sup></span>-AMS</p>
<ul><li><code> transition </code></li></ul><ul><li><code> @cross </code></li></ul><ul><li>Accessing digital variables and nets from an analog context</li></ul>
<p>and including, for VHDL-AMS</p>
<ul><li><code> S&#39;ramp </code></li></ul><ul><li><code> Q&#39;above </code></li></ul><ul><li>Accessing digital variables and nets from an analog context, with or without<code> break </code>statements.</li></ul>
<p>The following example shows an<em><span style=""> Events and Operators </span></em>section.</p>

<p><code> ------------------- Events and Operators -------------------<br />------------------------------------------------------------ </code></p>

<p><code> %cost #hits type     instance<br />4.4&#160;&#160;&#160;135 dVar&#160;&#160;&#160;&#160;&#160;&#160;&#160;top.dac:dacOut (file: AMS_lib/daconv.vhd line: 22)<br />4.4&#160;&#160;&#160;135 dVar&#160;&#160;&#160;&#160;&#160;&#160;&#160;top.dac:dacOut&#39;DELAYED (file: AMS_lib/daconv.vhd line: 37)<br />4.4&#160;&#160;&#160;135 filter&#160;&#160;&#160;&#160;&#160;top.dac (file: ../../../../.././AMS_lib/daconv.vhd line: 37)<br />0.5&#160;&#160;&#160;&#160;15 filter&#160;&#160;&#160;&#160;&#160;top.sh (file: AMS_lib/samplehold.vams line: 38)</code></p>
<h5 id="AppendixD:ProfilerforPerformanceAnalysis-RelatedTopic">Related Topic</h5><ul><li><a href="xrun_Command-Line_Options_for_Mixed-Signal_Designs.html">xrun Command-Line Options for Mixed-Signal Designs</a></li></ul>
                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Using_spectre_encrypt_for_Source_Protection.html" id="prev" title="Using_spectre_encrypt_for_Source_Protection">Using_spectre_encrypt_for_Sour ...</a></em></b><b><em><a href="Appendix_E__Migration_of_prop.cfg_file_to_an_amsd_Block.html" id="nex" title="Appendix_E__Migration_of_prop.cfg_file_to_an_amsd_Block">Appendix_E__Migration_of_prop. ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>