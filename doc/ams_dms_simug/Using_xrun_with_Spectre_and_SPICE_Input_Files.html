
<html><head><title>Using xrun with Spectre and SPICE Input Files</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="shubh" />
<meta name="CreateDate" content="2023-03-01" />
<meta name="CreateTime" content="1677668954" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator and Xcelium Simulator with mixed-signal option that supports the Verilog-AMS,  VHDL-AMS, and SystemVerilog-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Using xrun with Spectre and SPICE Input Files" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="ams_dms_simug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-03-01" />
<meta name="ModifiedTime" content="1677668954" />
<meta name="NextFile" content="Migrating_to_Single-Step_XRUN_Invocation.html" />
<meta name="Group" content="Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification," />
<meta name="PrevFile" content="Examples_Using_xrun_for_AMS_Simulation.html" />
<meta name="c_product" content="Xcelium," />
<meta name="Product" content="Xcelium," />
<meta name="ProductFamily" content="Xcelium," />
<meta name="ProductVersion" content="22.09" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Using xrun with Spectre and SPICE Input Files" />
<meta name="Version" content="22.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2209" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.10.026" />
<script type="text/javascript" src="styles/shCore1.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shCore.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushCpp.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushJava.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushXml.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushPython.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushPowerShell.js">/*<![CDATA[*//*]]>*/</script><link rel="stylesheet" href="styles/shCoreDefault.css" type="text/css" /><link rel="stylesheet" href="styles/shCoreMidnight.css" type="text/css" /><script type="text/javascript">/*<![CDATA[*/
SyntaxHighlighter.all();
/*]]>*/</script>
        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="ams_dms_simugTOC.html">Contents</a></li><li><a class="prev" href="Examples_Using_xrun_for_AMS_Simulation.html" title="Examples_Using_xrun_for_AMS_Simulation">Examples_Using_xrun_for_AMS_Si ...</a></li><li style="float: right;"><a class="viewPrint" href="ams_dms_simug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Migrating_to_Single-Step_XRUN_Invocation.html" title="Migrating_to_Single-Step_XRUN_Invocation">Migrating_to_Single-Step_XRUN_ ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 22.09, September 2022</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <h1 style="margin: 4px 0 4px;"><span>Using xrun with Spectre and SPICE Input Files</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p><span class="confluence-anchor-link" id="UsingxrunwithSpectreandSPICEInputFiles-SPICEsupport"></span><span class="confluence-anchor-link" id="UsingxrunwithSpectreandSPICEInputFiles-1060437"></span>The&#160;<code><span class="inline-comment-marker" data-ref="f2569733-929c-47df-af6e-b4a9e1c26923">xrun</span></code><span class="inline-comment-marker" data-ref="f2569733-929c-47df-af6e-b4a9e1c26923"> utility</span><span class="inline-comment-marker" data-ref="f2569733-929c-47df-af6e-b4a9e1c26923">&#39;s support of Spectre and SPICE input file is consistent with what Cadence&#39;s SPECTRE technology offers (which applies to the Spectre circuit simulators). This use model enables you to re-configure some of the digital blocks in your existing desig</span>n with their SPICE equivalents. This allows you to switch seamlessly between digital verification and mixed-signal verification.<code> amsspice </code>is a Cadence AMS Designer internal executable that is used by xrun to process SPICE/analog blocks. When you specify a file with the extension<code> .sp </code>or<code> .scs </code>to the <code>xrun</code> command, it is automatically parsed and interpreted by amsspice.</p>
<ul><li>A<code> .sp </code>extension indicates a SPICE syntax input file.</li><li>A<code> .scs </code>extension indicates a Spectre syntax input file.</li></ul><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>If you use&#160; <code>
         -spice_ext
        </code>&#160; to change the extension to .cir or .ckt (for example), you must be sure to use the appropriate&#160; <code>
         simulator lang
        </code>&#160; assignments.</p>
</div>
</div>

<p>You need to specify the following information for AMSSPICE setup:</p>
<ul><li>Original HDL (Verilog, VHDL etc.) design file(s)</li></ul><ul><li>Top-level analog file containing subcircuit definition(s), model file(s) and so on</li></ul><ul><li>AMS configuration information on how SPICE and HDL interact, using an amsd block</li></ul>
<p>Your top-level analog file can contains SPICE subcircuit definitions, analog models,&#160;analog simulation control statements,&#160;anything you can put in an&#160;analog simulation control file, and the&#160;amsd block. You can put all your analog simulation control statements in a single file that you include in this top-level analog file so you do not need to use the&#160;<code>-analogcontrol
</code>option. You can specify other Spectre commands in the input file as long as you do not specify them in the amsd block. Other Spectre commands (such as transient analysis command) must not appear in the amsd block.</p>

<p>For example:</p>

<p><code>run all_spice.scs anyOtherInputFiles...</code></p>

<p>where<code> all_spice.scs </code>contains the following:</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">// all_spice.scs

include &quot;source/analog/PLL.sp&quot; // analog subcircuit definitions 
include &quot;analog_top.scs&quot; // analog subcircuit definitions 
include &quot;nmos1.scs&quot; // nmos models 
include &quot;pmos.scs&quot;// pmos model 
include &quot;acf.scs&quot; // analog control file

//amsd block

amsd{

&#160;&#160;&#160;&#160;portmap subckt=pll_top autobus=yes&#160;&#160;&#160;&#160;config cell=pll_top use=spice&#160;&#160;&#160;&#160;ie vsup=1.8

}</pre>
</div>
</div>

<p><br />Following is an example of AMSD control file containing SPICE information (using the include statement) including models information and multiple amsd blocks specified in different files:</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">// file1.scs

&#160;&#160;&#160;&#160;include &quot;s1.cir&quot;&#160;&#160;&#160;&#160;include &quot;s2.cir&quot;

amsd{
&#160;&#160;&#160;&#160;portmap subckt=s1 autobus=yes&#160;&#160;&#160;&#160;config cell=s1 use=spice
}

amsd{
&#160;&#160;&#160;&#160;portmap subckt=s2 busdelim=_&#160;&#160;&#160;&#160;config cell=s2 use=spice &#160;&#160;&#160;&#160;ie vsup=3.5
}

// file2.scs

include &quot;subcx.sp&quot;

amsd{
&#160;&#160;&#160;&#160;portmap subckt=subcx&#160;&#160;&#160;&#160;config cell=subcx use=spice
}</pre>
</div>
</div>

<p>You can use the following methods to introduce SPICE models into Verilog-AMS:</p>
<ul><li>Using the amsd block. For example:<code> <br />include &quot;analog_top.sp&quot;<br /> </code> <code> &#160;&#160;&#160;&#160;amsd{<br /> </code> <code> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;portmap subckt=analog_top file=&quot;analog_top.pb&quot;<br /> </code> <code> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;config cell=analog_top use=spice<br /> </code> <code> &#160;&#160;&#160;&#160;} </code></li></ul><ul><li>Using the&#160;<code>-modelpath</code>&#160;option. With the introduction of xrun use model, this option is no longer mandatory.</li></ul><ul><li>Using the<code> amsd_subckt_bind=yes </code>parameter in the<code> &#39;include </code>statement in SPICE files. For example:<br /><code> <br />//analogmodel.scs <br />
    </code> <code> include &quot;analog_top.cir&quot; amsd_subckt_bind=yes <br />
      <br />
    </code> <code> amsd_subckt_bind </code>is a flag to indicate that the SPICE file is <span class="inline-comment-marker" data-ref="2712cd7d-91ea-450e-bcbe-f90183e35367">xmelab</span>-aware to bind an instance to SPICE. This is equivalent to specifying the<code> -modelpath &lt;</code> <code>modelfiles</code> <code>&gt; </code>option. Without the<code> amsd_subckt_bind </code>option, xmelab could not get the SPICE list, and can generate an error.</li></ul><h5 id="UsingxrunwithSpectreandSPICEInputFiles-RelatedTopic">Related Topic</h5><ul><li><a href="xrun_Command-Line_Options_for_Mixed-Signal_Designs.html">xrun Command-Line Options for Mixed-Signal Designs</a></li></ul>
                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Examples_Using_xrun_for_AMS_Simulation.html" id="prev" title="Examples_Using_xrun_for_AMS_Simulation">Examples_Using_xrun_for_AMS_Si ...</a></em></b><b><em><a href="Migrating_to_Single-Step_XRUN_Invocation.html" id="nex" title="Migrating_to_Single-Step_XRUN_Invocation">Migrating_to_Single-Step_XRUN_ ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>