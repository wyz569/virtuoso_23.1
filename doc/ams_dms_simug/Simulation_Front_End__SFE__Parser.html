
<html><head><title>Simulation Front End (SFE) Parser</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="jaini" />
<meta name="CreateDate" content="2023-03-01" />
<meta name="CreateTime" content="1677668982" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator and Xcelium Simulator with mixed-signal option that supports the Verilog-AMS,  VHDL-AMS, and SystemVerilog-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Simulation Front End (SFE) Parser" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="concept" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Analog Mixed-Signal,Digital Mixed-Signal," />
<meta name="prod_subfeature" content="Simulation Front End Parser, Elaboration," />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="ams_dms_simug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-03-01" />
<meta name="ModifiedTime" content="1677668982" />
<meta name="NextFile" content="Mixed-Signal_Design_Simulation.html" />
<meta name="Group" content="Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification," />
<meta name="PrevFile" content="Setting_Pulse_Controls_for_Mixed-Signal_Designs.html" />
<meta name="c_product" content="Xcelium," />
<meta name="Product" content="Xcelium," />
<meta name="ProductFamily" content="Xcelium," />
<meta name="ProductVersion" content="22.09" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Simulation Front End (SFE) Parser" />
<meta name="Version" content="22.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2209" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.10.026" />
<script type="text/javascript" src="styles/shCore1.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shCore.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushCpp.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushJava.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushXml.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushPython.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushPowerShell.js">/*<![CDATA[*//*]]>*/</script><link rel="stylesheet" href="styles/shCoreDefault.css" type="text/css" /><link rel="stylesheet" href="styles/shCoreMidnight.css" type="text/css" /><script type="text/javascript">/*<![CDATA[*/
SyntaxHighlighter.all();
/*]]>*/</script>
        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="ams_dms_simugTOC.html">Contents</a></li><li><a class="prev" href="Setting_Pulse_Controls_for_Mixed-Signal_Designs.html" title="Setting_Pulse_Controls_for_Mixed-Signal_Designs">Setting_Pulse_Controls_for_Mix ...</a></li><li style="float: right;"><a class="viewPrint" href="ams_dms_simug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Mixed-Signal_Design_Simulation.html" title="Mixed-Signal_Design_Simulation">Mixed-Signal_Design_Simulation</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 22.09, September 2022</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <h1 style="margin: 4px 0 4px;"><span>Simulation Front End (SFE) Parser</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p><span class="confluence-anchor-link" id="SimulationFrontEnd(SFE)Parser-SFE"></span><span class="confluence-anchor-link" id="SimulationFrontEnd(SFE)Parser-1039791"></span>The AMS Designer simulator uses the simulation front end (SFE) analog parser. With the SFE parser, the Spectre solver of the AMS Designer simulator use the same analog parser as the Spectre circuit simulator. The SFE parser provides enhanced performance and additional features, including the option to run in 64-bit mode.</p>
<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>If you currently use the AMS Designer simulator with the old Spectre parser and are upgrading from a version prior to IUS 6.11, you need to review important information about <a href="#SimulationFrontEnd(SFE)Parser-1045098">Migrating from the Old Spectre Parser</a>&#160;so that you can evaluate the differences between the old Spectre parser and the SFE parser carefully. If you have any questions, contact Cadence.</p>
</div>
</div>

<p>The SFE parser provides:</p>
<ul><li>
<p>Native support for Spectre, SPICE, and HSPICE input files, including Spectre netlist compiled functions (<a href="Glossary.html#Glossary-1034080">NCF</a>s)</p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>See &quot;Netlist Compiled Functions (NCFs)&quot; in the<span style="">&#160;<em>Spectre Circuit Simulator and Accelerated Parallel Simulator User Guide</em>&#160;</span>for more information.</p>
</div>
</div>
</li><li>Simplified input commands with no need to run the Spectre preprocessor (see&#160;<a href="#SimulationFrontEnd(SFE)Parser-1045003">Using Simplified Input Commands with the Simulation Front End Parser&#160;</a>for an example)</li><li>Support for elaborating and simulating top-level instances and analyses in model files and analog control files</li><li>Support for instances of structural Verilog-A included using an<code> ahdl_include </code>statement in SPICE and Spectre blocks (see also <a href="#SimulationFrontEnd(SFE)Parser-1044780">Including Structural Verilog-A in a Spectre Netlist</a>)</li><li>Support for hierarchical identifiers that allow you to connect to an internal node of a subcircuit</li><li>Support for SPICE-syntax identifiers so that instance, node, and parameter names can contain characters such as<code> # </code>,<code> @ </code>, and<code> | </code></li><li>Support for several global node statements in a design</li><li>Support for mixed Spectre and SPICE syntaxYou can include both the Spectre and SPICE languages in a design, as long as you insert the appropriate simulator language switch (<code> lang </code>). The parser checks SPICE language syntax to verify compliance with language requirements.</li><li>Support for SPICE-syntax model binning so that you can bin models according to geometry and size</li><li>Support for compiled C flow to boost performance, particularly when you use Verilog-A to model CMOS devices such as MOSFETs, resistors, and capacitors.The software compiles Verilog-A modules and<code> bsource </code>devices that you include in a Spectre or SPICE file using an<code> ahdl_include </code>statement during simulation.</li><li>Support for the AMS Designer simulator in your verification flow</li><li>Support for SPICE and Spectre user-defined functions only on analog instances inside Verilog-AMS modules (see <a href="#SimulationFrontEnd(SFE)Parser-1044943">Using SPICE and Spectre User-Defined Functions</a>)</li><li>Support for paramsets (for Verilog-A only)Paramsets provide a convenient way to collect parameter values so that a particular instance need only specify overrides specifically required for that instance.</li><li>Consistent waveform formatsThe SFE parser uses the&#160;<a href="Glossary.html#Glossary-1034354">SST2</a>&#160;format for waveforms you request using both Tcl probes and analog control file statements. You can use the<code> rawfmt </code>option to output data in other formats such as<code> wdf </code>or<code> fsdb.</code></li></ul><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>While the software changes the names of Verilog-AMS modules, nets, and variables belonging to analog behavioral blocks, you can continue to reference these objects using their original names in Tcl<code>&#160;probe&#160;</code>and<code>&#160;value&#160;</code>commands.</p>
</div>
</div>
<h3 id="SimulationFrontEnd(SFE)Parser-IncludingStructuralVerilog-AinaSpectreNetliststructuralVerilogA1044780">Including Structural Verilog-A in a Spectre Netlist<span class="confluence-anchor-link" id="SimulationFrontEnd(SFE)Parser-structuralVerilogA"></span><span class="confluence-anchor-link" id="SimulationFrontEnd(SFE)Parser-1044780"></span></h3>

<p>Using the AMS Designer simulator with the simulation front end (SFE) parser, you can include instances of structural Verilog-A in SPICE and Spectre blocks using an<code> ahdl_include </code>statement. A structural module is one that instantiates another module.</p>

<p>The following file (<code>res.va</code>) contains module<code> res </code>and module<code> vastruct.</code> Because module<code> vastruct </code>instantiates module<code> res</code>, it is a structural module.</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">// res.va -- Verilog-A file containing a structural module, vastruct 

`include &quot;discipline.vams&quot;
`include &quot;constants.vams&quot;

module res(vp, vn);
inout vp, vn;
electrical vp, vn;
parameter real r = 0;
&#160;&#160;&#160;&#160;analog begin
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;V(vp, vn) &lt;+ r*I(vp, vn);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$display(&quot;Verilog-A resistor:\n&quot;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$display(&#160;&#160;&#160;&#160;&quot;Voltage=%f, Current=%f\n&quot;, V(vp, vn), I(vp, vn));
&#160;&#160;&#160;&#160;end
endmodule

module vastruct(p, n);&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// structural Verilog-A module
inout p; electrical p;
inout n; electrical n;
parameter real r=0;
&#160;&#160;&#160;&#160;res #(.r(r)) Rva (p, n);&#160;&#160;// instantiates module res
endmodule</pre>
</div>
</div>

<p><code>You can include the file containing the structural module in a Spectre netlist file using the ahdl_include statement as follows:</code></p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">global gnd
simulator lang=spectre
ahdl_include &quot;res.va&quot; // Includes a structural Verilog-A module

subckt sub (p n)
parameters r=500
&#160;&#160;&#160;&#160;Rsp p int1 resistor r = r
&#160;&#160;&#160;&#160;Rva int1 n vastruct r=r // Instantiates the structural Verilog-A module
ends</pre>
</div>
</div>

<p>You can elaborate this design structure using the SFE parser.</p>
<h3 id="SimulationFrontEnd(SFE)Parser-UsingSPICEandSpectreUser-DefinedFunctions1044943">Using SPICE and Spectre User-Defined Functions<span class="confluence-anchor-link" id="SimulationFrontEnd(SFE)Parser-1044943"></span></h3>

<p>Using the AMS Designer simulator with the simulation front end (SFE) parser, you can have SPICE and Spectre user-defined functions on analog instances inside Verilog-AMS modules. For example:</p>

<p><code> module foo<br /> &#160;&#160;&#160;&#160;...<br /> &#160;&#160;&#160;&#160;vsource #(.dc(spiceUDF(5.0)) v1(in, out);<br /> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// spiceUDF is a user-defined function inside SPICE<br />&#160;&#160;&#160;&#160;...<br /> endmodule </code></p>

<p>You might use such a function in the calculation of instance parameter values such as<code> ps</code>,<code> pd</code>,<code> ad</code>, or<code> as.</code> For example, you might define a function<code> f_mod </code>as</p>

<p><code> real f_mod(real a, real b) {<br />&#160;&#160;&#160;&#160;return (a-b*int((a+0.5)/b)) ;<br />} </code></p>

<p>and use this function in the calculation of instance parameter<code> ad </code>like this:</p>

<p><code> ad=f_mod*iPar(&quot;l&quot;) </code></p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>You cannot mix a user-defined function with a digital function in an expression.</p>
</div>
</div>
<h3 id="SimulationFrontEnd(SFE)Parser-UsingSimplifiedInputCommandswiththeSimulationFrontEndParser1045003">Using Simplified Input Commands with the Simulation Front End Parser<span class="confluence-anchor-link" id="SimulationFrontEnd(SFE)Parser-1045003"></span></h3>

<p>Using the AMS Designer simulator with the simulation front end (SFE) parser, you do not need to run the Spectre preprocessor and the input commands are simpler.</p>

<p>An example of a simplified elaboration command is:</p>

<p><code> xmelab -MODELPATH subckts.m </code></p>
<h3 id="SimulationFrontEnd(SFE)Parser-MigratingfromtheOldSpectreParsermigrating1045098">Migrating from the Old Spectre Parser<span class="confluence-anchor-link" id="SimulationFrontEnd(SFE)Parser-migrating"></span><span class="confluence-anchor-link" id="SimulationFrontEnd(SFE)Parser-1045098"></span></h3>

<p>If you were using the old Spectre parser in a previous release, you should be aware of the following differences when using the simulation front end (SFE) parser, which is turned on by default:</p>
<ul><li>The SFE parser creates instances of<code> _cds_internal_modules_ </code>for analog blocks.</li><li>The SFE parser publishes global signals from<code> cds_globals </code>to the top scope using names that are different from those that the old parser used.</li><li>Supply sensitivity values do not propagate to connect modules when you use the SFE parser.</li><li>The following VHDL-AMS features are not available when you run the AMS Designer simulator with the SFE parser:<ul><li>The<code> -delta </code>option to the Tcl&#160;<span style=""><a href="run.html">run</a>&#160;</span>command</li><li>Break statements using break lists</li><li>Configuration declarations</li><li>The<code> === </code>operator</li></ul></li></ul>
<p><br /></p>

                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Setting_Pulse_Controls_for_Mixed-Signal_Designs.html" id="prev" title="Setting_Pulse_Controls_for_Mixed-Signal_Designs">Setting_Pulse_Controls_for_Mix ...</a></em></b><b><em><a href="Mixed-Signal_Design_Simulation.html" id="nex" title="Mixed-Signal_Design_Simulation">Mixed-Signal_Design_Simulation</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>