
<html><head><title>Spice-to-Verilog Port Mapping</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="shubh" />
<meta name="CreateDate" content="2023-03-01" />
<meta name="CreateTime" content="1677668885" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator and Xcelium Simulator with mixed-signal option that supports the Verilog-AMS,  VHDL-AMS, and SystemVerilog-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Spice-to-Verilog Port Mapping" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="concept" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Analog Mixed-Signal,Spectre AMS Designer," />
<meta name="prod_subfeature" content="amsd Block,amsd Block," />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="ams_dms_simug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-03-01" />
<meta name="ModifiedTime" content="1677668885" />
<meta name="NextFile" content="SPICE.html" />
<meta name="Group" content="Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification," />
<meta name="PrevFile" content="Implicit_and_Explicit_Port_Mapping.html" />
<meta name="c_product" content="Xcelium," />
<meta name="Product" content="Xcelium," />
<meta name="ProductFamily" content="Xcelium," />
<meta name="ProductVersion" content="22.09" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Spice-to-Verilog Port Mapping" />
<meta name="Version" content="22.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2209" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.10.026" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="ams_dms_simugTOC.html">Contents</a></li><li><a class="prev" href="Implicit_and_Explicit_Port_Mapping.html" title="Implicit_and_Explicit_Port_Mapping">Implicit_and_Explicit_Port_Map ...</a></li><li style="float: right;"><a class="viewPrint" href="ams_dms_simug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="SPICE.html" title="SPICE">SPICE</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 22.09, September 2022</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <h1 style="margin: 4px 0 4px;"><span>Spice-to-Verilog Port Mapping</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p>In the AMS Designer simulator, if you have a SPICE instance in a Verilog module, you can specify the port mappings for the SPICE instance in any of the following ways:</p>
<ul><li>Using the reference file name with the<code><span>&#160;</span>xrun<span>&#160;</span></code>command</li></ul><ul><li>Using a simple<code><span>&#160;</span>portmap<span>&#160;</span></code>card</li></ul><ul><li>Using<code><span>&#160;</span>reffile<span>&#160;</span></code>in a<code><span>&#160;</span>portmap<span>&#160;</span></code>card with default of<code><span>&#160;</span>porttype=order</code></li></ul><ul><li>Using<code><span>&#160;</span>reffile<span>&#160;</span></code>in a<code><span>&#160;</span>portmap<span>&#160;</span></code>card with default of<code><span>&#160;</span>porttype=name</code></li></ul><ul><li>Using a file in a<code><span>&#160;</span>portmap<span>&#160;</span></code>card</li></ul>
<p>In addition to the port mapping information between SPICE and Verilog representations of the given block, the automatically generated port bind file provides some more information in the form of comments. This information includes information like the SPICE subcircuit name and the Verilog module name for which the port bind file is generated.</p>

<p>Following is an example of a port bind file with some typical comments.</p>
<div class="table-wrap"><table class="wrapped confluenceTable" style="text-align: left;"><colgroup><col /></colgroup><tbody style="text-align: left;"><tr style="text-align: left;"><td class="confluenceTd" style="text-align: left;"><p style="text-align: left;"><code class="java comments" style="text-align: left;">//*** dummy_spice.pb ***</code><br />&#160;<br /><code class="java comments" style="text-align: left;">//* This file is automatically generated.</code><br />&#160;<br /><code class="java comments" style="text-align: left;">//* (c) Copyright 2007-2008 Cadence Design Systems, Inc.</code><br />&#160;<br /><code class="java comments" style="text-align: left;">//* All rights reserved.</code><br />&#160;<br /><code class="java comments" style="text-align: left;">//*</code><br />&#160;<br /><code class="java comments" style="text-align: left;">//* Portbind file for:</code><br />&#160;<br /><code class="java comments" style="text-align: left;">//* SPICE subckt dummy_spice : HDL module dummy_spice</code><br />&#160;<br /><code class="java comments" style="text-align: left;">//* SPICE port :&#160;&#160;&#160;&#160;&#160;&#160;HDL port&#160;:&#160;&#160;&#160;&#160;&#160;&#160;HDL Parameters</code><br />&#160;<br /><code class="java spaces" style="text-align: left;">&#160;</code>&#160;<br />&#160;<br /><code class="java plain" style="text-align: left;">{ a_0, a_1, a_2 }&#160;&#160;&#160;&#160;&#160;&#160;:&#160;&#160;&#160;&#160;&#160;&#160;a[</code><code class="java value" style="text-align: left;">0</code><code class="java plain" style="text-align: left;">:</code><code class="java value" style="text-align: left;">2</code><code class="java plain" style="text-align: left;">]&#160;&#160;:&#160;&#160;&#160;&#160;&#160;&#160;dir=output vh_type=STD_LOGIC</code><br />&#160;<br /><code class="java spaces" style="text-align: left;">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</code><code class="java plain" style="text-align: left;">vh_basetype=STD_ULOGIC</code><br />&#160;<br /><code class="java spaces" style="text-align: left;">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</code><code class="java plain" style="text-align: left;">vh_converter=E2STD_LOGIC</code><br />&#160;<br /><code class="java spaces" style="text-align: left;">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</code><code class="java plain" style="text-align: left;">vh_vectortype=STD_LOGIC_VECTOR</code></p>
</td>
</tr>
</tbody></table></div>
<h4 id="SpicetoVerilogPortMapping-Examples">Examples</h4>

<p>In the following example, the<code><span>&#160;</span>analog_top.cir<span>&#160;</span></code>file contains the subcircuit definition for<code><span>&#160;</span>ANALOG_top.</code><span>&#160;</span>The<code><span>&#160;</span>portmap<span>&#160;</span></code>statement tells the elaborator not to map Verilog buses to SPICE ports (<code>autobus=no</code>) and not to change the case mappings between Verilog-AMS instantiations and SPICE subcircuits (<code>casemap=keep</code>). The<code><span>&#160;</span>config<span>&#160;</span></code>statement tells the elaborator to bind the<code><span>&#160;</span>ANALOG_top<span>&#160;</span></code>cell as a SPICE subcircuit; the<code><span>&#160;</span>analog_top.cir<span>&#160;</span></code>file contains the master.</p>

<p><code>include &quot;analog_top.cir&quot; // SPICE or Spectre format include file<br />amsd{<br />&#160;&#160;&#160;&#160;portmap subckt=ANALOG_top autobus=no casemap=keep<br />&#160;&#160;&#160;&#160;config cell=ANALOG_top use=spice<br />}</code></p>

<p>The following example shows how you can specify a custom port-bind file for a Verilog-SPICE boundary:</p>

<p><code>amsd{<br />&#160;&#160;&#160;&#160;portmap subckt=analog_top file=top.pb<br />&#160;&#160;&#160;&#160;config cell=analog_top use=spice<br />}</code></p>

<p>The following example shows how you can specify a custom port-bind file for a&#160;SPICE-in-the-middle&#160;design unit:</p>

<p><code>amsd{<br />&#160;&#160;&#160;&#160;portmap module=nand2 file=nand2.pb<br />&#160;&#160;&#160;&#160;config inst=top.a1.x1 use=hdl<br />}</code></p>

<p>The following example illustrates using a&#160;reference file&#160;for a SPICE-in-the-middle construct. Note that the default value of&#160;<code>porttype</code>&#160;(for the reference file) is order:</p>

<p><code>amsd{<br />&#160;&#160;&#160;&#160;portmap subckt=analog_spice reffile=analog_spice.v autobus=yes<br />&#160;&#160;&#160;&#160;config cell=anglog_spice use=spice<br /><br />&#160;&#160;&#160;&#160;portmap module=nand2<br />&#160;&#160;&#160;&#160;config cell=nand2 use=hdl<br />}</code></p>

<p>The following example shows how you might specify customized port bindings for a SPICE-on-leaf construct using a&#160;reference file:</p>

<p><code>amsd{<br />&#160;&#160;&#160;&#160;portmap subckt=analog_spice reffile=analog_spice.v autobus=yes<br />&#160;&#160;&#160;&#160;config cell=anglog_spice use=spice<br />}</code></p>

<p>Here are some more examples:</p>

<p><code>amsd{<br />&#160;&#160;&#160;&#160;portmap subckt=ana_gate reffile=ana_gate.v refformat=verilog<br />&#160;&#160;&#160;&#160;config cell=ana_gate use=spice&#160;&#160;&#160;&#160;<br /><br />&#160;&#160;&#160;&#160;portmap module=nand2 file=nand2.pb<br />&#160;&#160;&#160;&#160;config cell=nand2 use=hdl<br />}</code></p>

<p><code>amsd{<br />&#160;&#160;&#160;&#160;portmap subckt=pll_top busdelim=_ file=pll_top.pb<br />&#160;&#160;&#160;&#160;config cell=pll_top use=spice<br /><br />&#160;&#160;&#160;&#160;portmap module=divider file=divider.pb<br />&#160;&#160;&#160;&#160;config cell=divider use=hdl<br /><br />&#160;&#160;&#160;&#160;portmap module=counter file=counter.pb<br />&#160;&#160;&#160;&#160;config cell=counter use=hdl<br />}</code></p>
<h4 id="SpicetoVerilogPortMapping-SPICEPort-to-VerilogBusMappingExample">SPICE Port-to-Verilog Bus Mapping Example</h4>

<p><span style=""><strong>Verilog in file top.v:</strong></span></p>
<div class="table-wrap"><table class="wrapped confluenceTable" style="text-align: left;"><colgroup><col /></colgroup><tbody style="text-align: left;"><tr style="text-align: left;"><td class="confluenceTd" style="text-align: left;"><p style="text-align: left;"><code class="java plain" style="text-align: left;">module pll_top(refclk, p0_clk, reset);</code><br /><code class="java plain" style="text-align: left;">wire [</code><code class="java value" style="text-align: left;">1</code><code class="java plain" style="text-align: left;">:</code><code class="java value" style="text-align: left;">0</code><code class="java plain" style="text-align: left;">] p0_clk;</code><br /><code class="java plain" style="text-align: left;">...</code><br /><code class="java plain" style="text-align: left;">endmodule</code><br />&#160;<br /><code class="java plain" style="text-align: left;">module top;</code><br /><code class="java plain" style="text-align: left;">...</code><br /><code class="java plain" style="text-align: left;">pll_top p1(...);</code><br /><code class="java plain" style="text-align: left;">...</code></p>
</td>
</tr>
</tbody></table></div>
<h5 id="SpicetoVerilogPortMapping-RelatedTopics"><strong>Related Topics</strong></h5><ul><li><a href="portmap.html">portmap</a></li><li><a href="Implicit_and_Explicit_Port_Mapping.html">Implicit and Explicit Port Mapping</a></li><li><a href="SPICE-in-the-Middle.html">SPICE-in-the-Middle</a></li><li><a href="SPICE.html">SPICE</a></li></ul>
                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Implicit_and_Explicit_Port_Mapping.html" id="prev" title="Implicit_and_Explicit_Port_Mapping">Implicit_and_Explicit_Port_Map ...</a></em></b><b><em><a href="SPICE.html" id="nex" title="SPICE">SPICE</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>