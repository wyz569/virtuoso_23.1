
<html><head><title>Using wreal Data Type in Mixed-Signal Designs with CPF</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="jaini" />
<meta name="CreateDate" content="2023-03-01" />
<meta name="CreateTime" content="1677669055" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator and Xcelium Simulator with mixed-signal option that supports the Verilog-AMS,  VHDL-AMS, and SystemVerilog-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Using wreal Data Type in Mixed-Signal Designs with CPF" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="task" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Digital Mixed-Signal,Digital Mixed-Signal," />
<meta name="prod_subfeature" content="Common Power Format (CPF),Low-Power Mixed-Signal," />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="ams_dms_simug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-03-01" />
<meta name="ModifiedTime" content="1677669055" />
<meta name="NextFile" content="Specifying_Boundary_Ports_and_Macro_Models.html" />
<meta name="Group" content="Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification," />
<meta name="PrevFile" content="Checking_Conflicting_Power_Domains_on_Mixed-Signal_Boundary.html" />
<meta name="c_product" content="Xcelium," />
<meta name="Product" content="Xcelium," />
<meta name="ProductFamily" content="Xcelium," />
<meta name="ProductVersion" content="22.09" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Using wreal Data Type in Mixed-Signal Designs with CPF" />
<meta name="Version" content="22.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2209" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.10.026" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="ams_dms_simugTOC.html">Contents</a></li><li><a class="prev" href="Checking_Conflicting_Power_Domains_on_Mixed-Signal_Boundary.html" title="Checking_Conflicting_Power_Domains_on_Mixed-Signal_Boundary">Checking_Conflicting_Power_Dom ...</a></li><li style="float: right;"><a class="viewPrint" href="ams_dms_simug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Specifying_Boundary_Ports_and_Macro_Models.html" title="Specifying_Boundary_Ports_and_Macro_Models">Specifying_Boundary_Ports_and_ ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 22.09, September 2022</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <h1 style="margin: 4px 0 4px;"><span>Using wreal Data Type in Mixed-Signal Designs with CPF</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p><span class="confluence-anchor-link" id="UsingwrealDataTypeinMixedSignalDesignswithCPF-wreal_nocorrupt"></span>The&#160;<code>wreal</code>&#160;data type can be used in AMS design with CPF. When a wreal module is power-shut-off, the wreal signal in this module is forced to&#160;<code>wrealXState.</code></p>

<p>To change this behavior, use the following two options:</p>
<ul><li><strong><code>-lps_wreal_nocorrupt</code></strong>: Prevents the forcing of the wreal signal and also prevents the original value from getting corrupted.</li></ul><ul><li><strong><code>-lps_wreal_corrupt_value &lt;value&gt;</code></strong>:&#160; Keeps the behavior consistent with the behavior of the analog signal from power smart<a href="Glossary.html#Glossary-1034481">&#160;IE</a>. The user can pick a value of choice, and also restore the backward compatible behavior of 0.0.</li></ul>
<p>You can also apply the power corruption value locally on wreal signals during the power-off state by adding the following options in the&#160;<code>user_attributes</code>&#160;argument of the&#160;<code>update_power_domain</code>&#160;CPF command:</p>
<ul><li><strong><code>wreal_nocorrupt [&#160;</code><code>instance_name&#160;</code><code>|&#160;</code><code>wire_name&#160;</code><code>]</code></strong>: Specifies that the objects of a power domain are non-corrupt during the simulation and maintains their values.</li></ul><ul><li><strong><code>wreal_corrupt_value [&#160;</code><code>value&#160;</code><code>|&#160;</code><code>value@object&#160;</code><code>]</code></strong>:&#160;Specifies the corruption value of objects in the power domain.</li></ul><h2 id="UsingwrealDataTypeinMixedSignalDesignswithCPF-PowerCorruptionontheBoundaryPortofaWrealModel">Power Corruption on the Boundary Port of a Wreal Model</h2>

<p><span class="confluence-anchor-link" id="UsingwrealDataTypeinMixedSignalDesignswithCPF-powercorruption"></span>Power corruption is applied on the wreal boundary port of a macro model specified in the CPF file, for both input and output ports. For example:</p>

<p><code>set_macro_model wrl</code><br /><code>create_power_domain -name pd1 -boundary_ports {rout1} -default</code><br /><code>create_power_domain -name pd2 -boundary_ports {rout2}</code><br /><code>end_macro_model</code></p>

<p>This feature is controlled by the option&#160;<code>-lps_wreal_bport_corruption.</code>&#160;If the&#160;<code>-lps_wreal_bport_corruption option</code>&#160;is specified, the wreal boundary ports that are specified in the CPF file and are associated with the power-shutoff domains are forced to the power corruption value.</p>

<p>The power corruption value in the power-shutoff state is determined by the&#160;<code>-lps_wreal_nocorrupt</code>&#160;or&#160;<code>-lps_wreal_corrupt_value</code>&#160;options, or the&#160;<code>wreal_nocorrupt</code>&#160;or&#160;<code>wreal_corrupt_value</code>&#160;options specified using the&#160;<code>user_attributes</code>&#160;argument of the&#160;<code>update_power_domain</code>&#160;CPF command, as shown below.</p>

<p><code>update_power_domain -name pd1 -user_attributes { wreal_corrupt_value 0.2 }</code><br /><code>update_power_domain -name pd2 -user_attributes { wreal_corrupt_value {0.5@inst1} \</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;wreal_corrupt_value&#160;</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{wrealZState@inst2.rout} \</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;wreal_nocorrupt {inst3} }</code></p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>Wreal instances that are specified using the <code>create_power_domain</code> CPF command also have the power corruption value applied to them.</p>
</div>
</div>

<p><br /></p>
<h2 id="UsingwrealDataTypeinMixedSignalDesignswithCPF-wrealincpfWrealExpressionsinCPF"><span class="confluence-anchor-link" id="UsingwrealDataTypeinMixedSignalDesignswithCPF-wrealincpf"></span>Wreal Expressions in CPF</h2>

<p>Wreal expressions are supported in the following CPF commands that require a control condition:</p>
<ul><li><code>create_power_domain</code></li></ul><ul><li><code>create_mode_transition</code></li></ul><ul><li><code>create_isolation_rule</code></li></ul><ul><li><code>create_state_retention_rule</code></li></ul><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>The signal in the wreal expression must be real valued, otherwise, the simulator generates an error. Currently, only the wreal signal and the wire which is coerced as wreal in Verilog are supported. To enable the support for wreal expressions in CPF you must specify the <code>-lps_ams_sim</code> option.</p>
</div>
</div>

<p>The following operators are supported in a wreal expression:</p>
<ul><li><span style="">&lt;, &lt;=, &gt;, &gt;=</span></li><li><span style="">== and !=</span></li><li>
<p><span style="">=== and !==</span></p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>The case equality operators <code>===</code> and <code>!=</code> can only be followed by <code>wrealXState</code> and <code>wrealZState</code>. In addition, <code>wrealXState</code> and <code>wrealZState</code> can only be specified with the case equality operators. For example:</p>

<p><code>create_power_domain -name PD -shutoff_condition pmc.vsup===wrealXState</code></p>
</div>
</div>
</li></ul>
<p>The following conditions apply to wreal expressions:</p>
<ul><li>The reference value should be a real number,&#160;<code>wrealXState</code>&#160;or&#160;<code>wrealZState</code>. Variables or parameters are not supported.</li></ul><ul><li>The wreal expression returns the value zero if the specified relation is false or one if the specified relation is true.</li></ul><ul><li>The wreal expression can be combined with a boolean expression. For example:&#160;<code>pmc.pso&gt;=0.2&#160;</code><code>!(pmc.pso&gt;=0.2)&#160;</code><code>pmc.pso&amp;&amp;(pmc.pso&gt;=0.2)</code></li></ul><ul><li><code>wrealXState</code>&#160;or&#160;<code>wrealZState</code>&#160;on real valued signal is supported, and the expression is resolved as logic<code>&#160;X.</code>&#160;For example, in the example below, if&#160;<code>pmc.pso</code>&#160;is&#160;<code>wrealXState</code>&#160;or&#160;<code>wrealZState</code>, the shutoff condition signal is in&#160;<code>X</code>&#160;state.<br /><code>create_power_domain -name PD -shutoff_condition (pmc.pso&gt;=0.2)</code></li></ul><ul><li>The wreal expression can be specified in a virtual port using the&#160;<code>-port_mapping</code>&#160;argument of the&#160;<code>set_instance</code>&#160;command, as shown below.<br /><code>set_instance digInst -port_mapping {{virpso pmc.vsup&lt;0.2}}<br /></code><code>&#160; &#160; set_design dig_child -ports {virpso}<br /></code><code>&#160; &#160; create_power_domain -name PD0<br /></code><code>&#160; &#160; create_power_domain -name PD1<br />&#160; &#160; -shutoff_condition virpso<br /></code><code>end_design</code></li></ul><h5 id="UsingwrealDataTypeinMixedSignalDesignswithCPF-RelatedTopic">Related Topic</h5><ul><li><a href="Specifying_Boundary_Ports_and_Macro_Models.html">Specifying Boundary Ports and Macro Models</a></li></ul>
<p><br /></p>

                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Checking_Conflicting_Power_Domains_on_Mixed-Signal_Boundary.html" id="prev" title="Checking_Conflicting_Power_Domains_on_Mixed-Signal_Boundary">Checking_Conflicting_Power_Dom ...</a></em></b><b><em><a href="Specifying_Boundary_Ports_and_Macro_Models.html" id="nex" title="Specifying_Boundary_Ports_and_Macro_Models">Specifying_Boundary_Ports_and_ ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>