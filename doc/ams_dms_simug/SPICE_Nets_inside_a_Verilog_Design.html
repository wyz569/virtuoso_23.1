
<html><head><title>SPICE Nets inside a Verilog Design</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="jaini" />
<meta name="CreateDate" content="2023-03-01" />
<meta name="CreateTime" content="1677668916" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator and Xcelium Simulator with mixed-signal option that supports the Verilog-AMS,  VHDL-AMS, and SystemVerilog-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="SPICE Nets inside a Verilog Design" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="concept" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="Analog Mixed-Signal,Analog Mixed-Signal,Spectre AMS Designer,Spectre AMS Designer," />
<meta name="prod_subfeature" content="SPICE,Verilog-AMS, SPICE, Verilog-AMS," />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="ams_dms_simug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2023-03-01" />
<meta name="ModifiedTime" content="1677668916" />
<meta name="NextFile" content="Reusing_Mixed-Language_Testbenches.html" />
<meta name="Group" content="Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification," />
<meta name="PrevFile" content="Usage_of_Port_Expressions_when_Connecting_to_Analog_Blocks.html" />
<meta name="c_product" content="Xcelium," />
<meta name="Product" content="Xcelium," />
<meta name="ProductFamily" content="Xcelium," />
<meta name="ProductVersion" content="22.09" />
<meta name="RightsManagement" content="Copyright 2023 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- SPICE Nets inside a Verilog Design" />
<meta name="Version" content="22.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2209" />
<meta name="confluence-version" content="7.4.1" />
<meta name="ecms-plugin-version" content="04.10.026" />
<script type="text/javascript" src="styles/shCore1.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shCore.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushCpp.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushJava.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushXml.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushPython.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushPowerShell.js">/*<![CDATA[*//*]]>*/</script><link rel="stylesheet" href="styles/shCoreDefault.css" type="text/css" /><link rel="stylesheet" href="styles/shCoreMidnight.css" type="text/css" /><script type="text/javascript">/*<![CDATA[*/
SyntaxHighlighter.all();
/*]]>*/</script>
        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelectorAll("img").forEach((img, index) => {
   img.addEventListener("click", (e) => { 
    document.querySelector("#cad_image_modal").classList.add("opac");
      document.querySelector("#cad_image_modal_center").innerHTML = `<img style="position:absolute;top:0;bottom:0;left:0;right:0; margin: auto;max-height: 96%;max-width: 96%;" src="${e.target.src}">`;});});});
</script>

<style>
 img{cursor:pointer;
 }
 #cad_image_modal{
 position:fixed;left:0;top:0;width:100%;background:#00000099;overflow:hidden;height:0;opacity:0;transition: height 0ms 1s, opacity 1s 0ms;
 }
 #cad_image_modal.opac{height: 100%;opacity: 1;transition: height 0ms 0ms, opacity 1s 0ms;
 }
 #cad_image_modal span{
  position:fixed;right:10px;top:10px;cursor:pointer;color:#fff;
 }
 </style>

</head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="ams_dms_simugTOC.html">Contents</a></li><li><a class="prev" href="Usage_of_Port_Expressions_when_Connecting_to_Analog_Blocks.html" title="Usage_of_Port_Expressions_when_Connecting_to_Analog_Blocks">Usage_of_Port_Expressions_when ...</a></li><li style="float: right;"><a class="viewPrint" href="ams_dms_simug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Reusing_Mixed-Language_Testbenches.html" title="Reusing_Mixed-Language_Testbenches">Reusing_Mixed-Language_Testben ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 22.09, September 2022</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <h1 style="margin: 4px 0 4px;"><span>SPICE Nets inside a Verilog Design</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p><span class="confluence-anchor-link" id="SPICENetsinsideaVerilogDesign-1039352"></span></p>

<p>You can use the following special instances to access SPICE nets in a Verilog design:</p>
<div class="table-wrap"><table border="0" cellpadding="4" cellspacing="0" class="wrapped confluenceTable" style="width: 648.0px;"><colgroup><col /><col /></colgroup><tbody><tr><th class="confluenceTh" valign="middle" width="168">
<p>Instance Type</p>
</th><th class="confluenceTh" valign="middle" width="480">
<p>Description</p>
</th></tr>
<tr><td class="confluenceTd" valign="top">
<p><code> cds_spice_a2d </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Analog-to-digital connection from SPICE to Verilog (analog drives)</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> cds_spice_d2a </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Digital-to-analog connection from Verilog to SPICE (digital drives)</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> cds_spice_bidir </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Bidirectional connection between Verilog and SPICE</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> cds_spice_a2a </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Analog-to-analog connection from Verilog to SPICE (such as driving a SPICE port from the top level)</p>
</td>
</tr>
</tbody></table></div>

<p>To use these instances, specify the full hierarchical path to the SPICE net you want to access as the parameter of the instance and the Verilog net as the port connection. Here are some examples:</p>

<p><code> cds_spice_d2a #(&quot;test.top.I0.I1.X1.X2.drive&quot;) d2a1(drive); </code></p>

<p><code> cds_spice_a2d #(&quot;test.top.I0.I1.X1.X2.read&quot;) a2d1(read); </code></p>

<p><code> cds_spice_d2a #(&quot;TestBench.SPICEblock.X2.regf&quot;) D2A1 (fault); </code></p>

<p><code> cds_spice_a2d #(&quot;TestBench.SPICEblock.X2.rega&quot;) A2D1 (chk1); </code></p>

<p><code> cds_spice_a2d #(&quot;TestBench.SPICEblock.X2.regb&quot;) A2D2 (chk2); </code></p>

<p><code> cds_spice_a2d #(&quot;TestBench.SPICEblock.X2.regc&quot;) A2D3 (chk3); </code></p>

<p>Consider the following digital testbench code (Verilog):</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">module TB;&#160;&#160;&#160;&#160;// the testbenchdut

DUT(in1, in2); // instantiation of the device under test (the DUT)

reg in1, in2;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; // drivers of the DUT
wire chk1, chk2, chk3; // signals used to check inside the DUT for
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// erroneous conditions

reg fault;&#160;&#160;&#160;&#160;// a signal used to generate a fault

initial begin // assign values to the DUT drivers
&#160;&#160;in1 = 1&#39;b1; in2 = 1&#39;b1;
end

initial begin // generate a fault condition at 20 ticks
&#160;&#160;TB.DUT.fault = 1&#39;b0;
&#160;&#160;#20 fault = 1&#39;b1;
end

// monitoring of checks - an error is printed if they trigger
always @(chk1) $strobe(&quot;error chk1 triggered!\n&quot;);
always @(chk2) $strobe(&quot;error chk2 triggered!\n&quot;);
always @(chk3) $strobe(&quot;error chk3 triggered!\n&quot;);

// These statements make connections from the local testbench
// signals to the DUT. It might be convenient for the
// testbench to alias signals in the DUT to local
// signals in the testbench so that if the pathnames get
// changed in the design process, you can adapt the testbench
// easily by just changing this block and
// not the complex logic of the testbench
.assign TB.A.DD.f = fault;
assign chk1 = TB.A.DD.a;
assign chk2 = TB.A.DD.b;
assign chk3 = TB.A.DD.c;

endmodule</pre>
</div>
</div>

<p><br /></p>

<p>Perhaps the Verilog code for the&#160;<a href="Glossary.html#Glossary-1033769">DUT</a>&#160;looks something like this:</p>
<div class="table-wrap"><table class="confluenceTable cadenceTable" id="cadDefaultfont" style="width: 720px;"><colgroup><col style="width: 220px;" /><col style="width: 500px;" /></colgroup><tbody><tr><td class="confluenceTd" valign="top" width="240">
<p><code>module dut(in1, in2);<br />blockA A(in1);<br />blockB B(in2);<br />endmodule<br /><br />module blockA(in);<br />blockC CC(in);<br />blockD DD(in);<br />endmodule<br /></code></p>

<p><code>module blockB(in);<br />blockE EE(in);<br />endmodule<br /><br />module blockCC(in);<br />endmodule<br /><br />module blockDD(in);<br />reg a,b,c,d;<br />reg f;<br />...etc<br />endmodule<br /><br />module blockEE(in);<br />endmodule </code></p>
</td>
<td class="confluenceTd" valign="top" width="408">
<p><code>// Design Structure<br />//<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TB (the testbench)<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DUT<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;---------------<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;A&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;B<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|<br />//&#160;&#160;&#160;&#160;------&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;EE<br />//&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;|<br />//&#160;&#160;&#160;&#160;CC&#160;&#160;&#160;DD </code></p>
</td>
</tr>
</tbody></table></div>

<p>Perhaps the SPICE representation of<code> blockA </code>looks something like this:</p>
<div class="table-wrap"><table class="confluenceTable cadenceTable" id="cadDefaultfont" style="width: 720px;"><colgroup><col style="width: 220px;" /><col style="width: 500px;" /></colgroup><tbody><tr><td class="confluenceTd" valign="top" width="240">
<p><code> subckt blockA(in)<br />X1 in blockCC<br />X2 in blockDD<br />ends<br /><br />subckt blockDD(in)<br />X1 in a<br />X2 a b   blockXXX<br />X3 b c   blockYYY<br />X4 c d f blockZZZ<br />ends </code></p>
</td>
<td class="confluenceTd" valign="top" width="408">
<p><code>// Design Structure with blockA as SPICE<br />//<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TB (the testbench)<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DUT<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;---------------<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;A&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;B<br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|<br />//&#160;&#160;&#160;&#160;------&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|<br />//&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;EE<br />//&#160;&#160;&#160;&#160;X1&#160;&#160;&#160;X2 </code></p>
</td>
</tr>
</tbody></table></div>

<p>To account for a SPICE block substitution in the testbench code, you could have the following:</p>

<p><code> ...<br />// No changes to the testbench code before this point...<br />`ifdef AMS_MODE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// Add these lines for SPICE block substitution<br /><br /> cds_spice_d2a #(&quot;TB.A.X2.f&quot;) D2A1 (fault);<br /> cds_spice_a2d #(&quot;TB.A.X2.a&quot;) A2D1 (chk1);<br /> cds_spice_a2d #(&quot;TB.A.X2.b&quot;) A2D2 (chk2);<br /> cds_spice_a2d #(&quot;TB.A.X2.c&quot;) A2D3 (chk3);<br /><br /> `else&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// pure-digital configuration <br /><br />assign TB.A.DD.f = fault;<br /> assign chk1 = TB.A.DD.a;<br /> assign chk2 = TB.A.DD.b;<br /> assign chk3 = TB.A.DD.c; <br />`endif<br /> ... </code></p>

<p>The following table outlines the effective module definitions for these instance types as well as the resulting interface elements (IEs) the software inserts in your design:</p>
<div class="table-wrap"><table border="0" cellpadding="4" cellspacing="0" class="wrapped confluenceTable" style="width: 648.0px;"><colgroup><col /><col /><col /></colgroup><tbody><tr><th class="confluenceTh" valign="middle" width="168">
<p>Instance Type</p>
</th><th class="confluenceTh" valign="middle" width="288">
<p>Effective Module Definition</p>
</th><th class="confluenceTh" valign="middle" width="192">
<p>Interface Element</p>
</th></tr>
<tr><td class="confluenceTd" valign="top">
<p><code>cds_spice_a2d </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code>module cds_spice_a2d(e);<br />output e;<br />electrical e;<br />parameter spicenet = &quot;null&quot;;<br />endmodule </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>analog-to-digital</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>cds_spice_d2a </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code>module cds_spice_d2a(e);<br />input e;<br />electrical e;<br />parameter spicenet = &quot;null&quot;;<br />endmodule </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>digital-to-analog</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>cds_spice_bidir </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code>module cds_spice_bidir(e);<br />inout e;<br />electrical e;<br />parameter spicenet = &quot;null&quot;;<br />endmodule </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>bidirectional</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>cds_spice_a2a </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code>module cds_spice_a2a(e);<br />input e;<br />electrical e;<br />parameter spicenet = &quot;null&quot;;<br />endmodule </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>none</p>
</td>
</tr>
</tbody></table></div>
<h4 id="SPICENetsinsideaVerilogDesign-RelatedTopic">Related Topic</h4>

<p><a href="Probing_SPICE_Ports.html">Probing SPICE Ports</a></p>

<p><br /></p>

                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Usage_of_Port_Expressions_when_Connecting_to_Analog_Blocks.html" id="prev" title="Usage_of_Port_Expressions_when_Connecting_to_Analog_Blocks">Usage_of_Port_Expressions_when ...</a></em></b><b><em><a href="Reusing_Mixed-Language_Testbenches.html" id="nex" title="Reusing_Mixed-Language_Testbenches">Reusing_Mixed-Language_Testben ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2023, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" />
<div id="cad_image_modal" style="background-color: rgba(0, 0, 0, 0.6);"><center id="cad_image_modal_center">&#160;&#10240;</center><span style="margin-right:50px;margin-top:100px;font-weight:bold;font-size:20px;background:#e5e5e5;border:1px solid #e5e5e5;border-radius:25px;height:30px;width:20px;padding-left:6px;padding-top:2px;color: black;" onclick="document.querySelector('#cad_image_modal').classList.remove('opac');">X</span></div>

</body></html>